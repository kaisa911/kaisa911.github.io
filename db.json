{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/image/avatar.png","path":"image/avatar.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1525770072000},{"_id":"themes/next/.eslintrc.json","hash":"cc5f297f0322672fe3f684f823bc4659e4a54c41","modified":1525770072000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1525770072000},{"_id":"themes/next/.gitignore","hash":"a18c2e83bb20991b899b58e6aeadcb87dd8aa16e","modified":1525770072000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1525770072000},{"_id":"themes/next/.travis.yml","hash":"3d1dc928c4a97933e64379cfde749dedf62f252c","modified":1525770072000},{"_id":"themes/next/.stickler.yml","hash":"b7939095038cbdc4883fc10950e163a60a643b43","modified":1525770072000},{"_id":"themes/next/LICENSE.md","hash":"fc7227c508af3351120181cbf2f9b99dc41f063e","modified":1525770072000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1525770072000},{"_id":"themes/next/README.md","hash":"807c28ad6473b221101251d244aa08e2a61b0d60","modified":1525770072000},{"_id":"themes/next/bower.json","hash":"29515e8a97ae28e07a934e38d0fc79af695d14fc","modified":1525770072000},{"_id":"themes/next/_config.yml","hash":"b62bb6df8fa44e0354b91bd4be8fb1fea681ba3c","modified":1526708689000},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1525770072000},{"_id":"themes/next/gulpfile.coffee","hash":"48d2f9fa88a4210308fc41cc7d3f6d53989f71b7","modified":1525770072000},{"_id":"themes/next/package.json","hash":"d2eccdf5f241a3b42f2c9a873e3a063e54316ea9","modified":1525770072000},{"_id":"source/_posts/2018-书单.md","hash":"d1e5aec2044bdf6fedfda94d9ce52f9ae248fe5d","modified":1526291964000},{"_id":"source/_posts/CSS中position属性总结笔记.md","hash":"f2d7c4eb15ece20190f680cade1beb7058a79edb","modified":1526291964000},{"_id":"source/_posts/CSS占坑.md","hash":"d2c801dfbcd4562501cf67ccfd1e52cb3846ad14","modified":1527589168000},{"_id":"source/_posts/Javascript基本概念（三）.md","hash":"2d9a6172c603b42f9c671b411535694a98fec21c","modified":1529378722000},{"_id":"source/_posts/Event-Loop-问题理解.md","hash":"ddeae31f319a6694c363740e289293249fcbe22e","modified":1526291964000},{"_id":"source/_posts/Javascript 继承学习.md","hash":"75772d6a2c8d0b3104f84891f542b890bad206a1","modified":1526291964000},{"_id":"source/_posts/Javascript基本概念（一）.md","hash":"7b2b6eb7ac31c9f51ea38dce6361b9e588e00f0c","modified":1528903565000},{"_id":"source/_posts/Javascript基本概念（二）.md","hash":"286eb102e687df4ed974edd412305ab3ef9fb3c8","modified":1529389879000},{"_id":"source/_posts/ajax实现.md","hash":"7c90112fd960238bb3f1e8026b24dbaeb38eeb33","modified":1526441369000},{"_id":"source/_posts/PWA-之Q-A.md","hash":"54ee66c64b0e4e425e8adab147ce1d4a61d8f75d","modified":1526291964000},{"_id":"source/_posts/display的属性们.md","hash":"a665f2fb240de9d54697a88a5c32c19d7fb9ae76","modified":1528859822000},{"_id":"source/_posts/html5语意化学习.md","hash":"703165702b67dcece67109437f94af1c74f7ae7f","modified":1527479685000},{"_id":"source/_posts/jquery对追加事件的绑定.md","hash":"2076a132e4294b90416aa6ae26bbc298d9825fa8","modified":1526291964000},{"_id":"source/_posts/jquery监控浏览器大小变化.md","hash":"84f9e39dff61663d26cdc0774867555da83d4aae","modified":1526292793000},{"_id":"source/_posts/immutable-js-学习.md","hash":"5c440f84c41b2c2a99e5f91ff4b5b8ab8c2336ae","modified":1526291964000},{"_id":"source/_posts/koa2源码学习--application.js.md","hash":"feade5ae8427d8bd9d2a16e8a55d09955d3d9175","modified":1527227894000},{"_id":"source/_posts/react生命周期理解.md","hash":"430094744907d3bc22e2d52dcea96830375e6041","modified":1527150563000},{"_id":"source/_posts/link和-import之争.md","hash":"713abaee60a078675df89571bad7f23b71267bb1","modified":1528859125000},{"_id":"source/_posts/redux-devtools学习理解.md","hash":"572aa96629691e60754e4042b5c681d7cc2ee20c","modified":1526291964000},{"_id":"source/_posts/react-16-0-新特性学习.md","hash":"8707207db2e5bd6a94eb874467e315a3855b4eae","modified":1526291964000},{"_id":"source/_posts/redux-源码学习—createStore.md","hash":"c574a342d507d0b2732ee061a229462b34803c27","modified":1526291964000},{"_id":"source/_posts/redux源码学习-bindActionCreators.md","hash":"c4466a52222694b50e56e148b46416316f11fe51","modified":1526291964000},{"_id":"source/_posts/redux源码学习-applyMiddleware.md","hash":"2af285804de9cf150a68e81de00a0439cc43957b","modified":1526291964000},{"_id":"source/_posts/redux源码学习-compose.md","hash":"d017ae07f53ac32d0d6e8c1624e3a1da4464ee7e","modified":1526291964000},{"_id":"source/_posts/window.location的属性.md","hash":"b9f756f1acecf4233fcf04618168701302034039","modified":1528602124000},{"_id":"source/_posts/redux源码学习—combineReducers.md","hash":"eb0c107f736fd4ef5d439034671ff0f8aa7f6097","modified":1526291964000},{"_id":"source/_posts/webpack-配置理解.md","hash":"1fd44f00882db16063e6fa9593ab62458ed26107","modified":1526364849000},{"_id":"source/_posts/冒泡排序.md","hash":"b1cf9a4ba5282a23f654359c98ef2673446a55ec","modified":1526708616000},{"_id":"source/_posts/变量的作用域和变量提升.md","hash":"7adfab5004c175888b6229a285ce15b00c61cc77","modified":1526291964000},{"_id":"source/_posts/在页面中获取图片的尺寸.md","hash":"364a464560787d25c3cd6144b464167423e54477","modified":1526292995000},{"_id":"source/_posts/在HTML中使用JS.md","hash":"42813f6a38cd02fb6583e057bbb0e1981b9a71bd","modified":1528643205000},{"_id":"source/_posts/堆排序.md","hash":"129904d6cf1e7dff13c9c9f9299f5c7c212e4d13","modified":1526896265000},{"_id":"source/_posts/快速排序.md","hash":"15b604ee06bdde6b34134f969eb77f7ea56dbc02","modified":1526890283000},{"_id":"source/_posts/归并排序.md","hash":"6bead3944831d218a2a977160208f0ec5b00e9f3","modified":1526886191000},{"_id":"source/_posts/如何去掉两个span间的间距.md","hash":"31889ff59dde61dfbffbaf2c0dd269cd65bb55a8","modified":1526291964000},{"_id":"source/_posts/插入排序.md","hash":"caa7659baa96ecee10696279f1bca133e3b65a08","modified":1527235966000},{"_id":"source/_posts/放飞的thinking～.md","hash":"c857c1e2059a4c53e1eaf23a9d6dbdbc2a60769e","modified":1527476159000},{"_id":"source/_posts/正则填坑.md","hash":"65fa95c840a5bc8cc233f6ff391ad63b079eff21","modified":1527232044000},{"_id":"source/_posts/设置overflow：hidden导致相邻行内元素向下偏移的问题.md","hash":"9a3510a016517da3b2296a38e6114e801a5dd608","modified":1526291964000},{"_id":"source/_posts/瀑布流布局.md","hash":"594ed22d88a85b8f3b31626d807ffabae265e000","modified":1526291964000},{"_id":"source/_posts/跨域问题探究.md","hash":"fa2a6ec98e2c3ca27cbbdf3197547d912014aeb4","modified":1526368242000},{"_id":"source/_posts/选择排序.md","hash":"9fe2cc50838f4f63ee4dfa26bfd663daa970585a","modified":1526711995000},{"_id":"source/_posts/链表.md","hash":"6df75ef11856682fe5e12153af4efb445aaa86cb","modified":1527497018000},{"_id":"source/about/index.md","hash":"9682cf7a67aff95c3957ecfbd212545d00dd5686","modified":1526477495000},{"_id":"source/categories/index.md","hash":"751a85be5ab949a5df5e0ed7aa516037402653aa","modified":1526291964000},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1525770072000},{"_id":"themes/next/.git/config","hash":"e2ca9fa6f115d4406d24bf0df53fc26ce13e0c9b","modified":1525770072000},{"_id":"themes/next/.git/index","hash":"203bfbc874a4c9a7ce3dc30a1e59aafdb7d67b01","modified":1526294218000},{"_id":"themes/next/.git/packed-refs","hash":"cf5482c1f2f7ca92225c344d6dc4018aabd55477","modified":1525770072000},{"_id":"source/tags/index.md","hash":"f5e7a6c5e76044b9f87b26441ecefed14ce37aae","modified":1526291964000},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1525770056000},{"_id":"source/image/avatar.png","hash":"084cb8bef5471785be3d1696ba6bf6c6b41979ae","modified":1526291964000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"f846118d7fc68c053df47b24e1f661241645373f","modified":1525770072000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"00c25366764e6b9ccb40b877c60dc13b2916bbf7","modified":1525770072000},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"b63696d41f022525e40d7e7870c3785b6bc7536b","modified":1525770072000},{"_id":"themes/next/.github/stale.yml","hash":"fd0856f6745db8bd0228079ccb92a662830cc4fb","modified":1525770072000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"7abbb4c8a29b2c14e576a00f53dbc0b4f5669c13","modified":1525770072000},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1525770072000},{"_id":"themes/next/docs/AUTHORS.md","hash":"7b24be2891167bdedb9284a682c2344ec63e50b5","modified":1525770072000},{"_id":"themes/next/docs/DATA-FILES.md","hash":"8e1962dd3e1b700169b3ae5bba43992f100651ce","modified":1525770072000},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1525770072000},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"141e989844d0b5ae2e09fb162a280715afb39b0d","modified":1525770072000},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"120750c03ec30ccaa470b113bbe39f3d423c67f0","modified":1525770072000},{"_id":"themes/next/docs/INSTALLATION.md","hash":"2bbdd6c1751b2b42ce9b9335da420c6026a483e9","modified":1525770072000},{"_id":"themes/next/docs/LICENSE","hash":"fe607fe22fc9308f6434b892a7f2d2c5514b8f0d","modified":1525770072000},{"_id":"themes/next/docs/MATH.md","hash":"d047b8a3d9aa49b478a33e5a326195d460cb4589","modified":1525770072000},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"ad57c168d12ba01cf144a1ea0627b2ffd1847d3e","modified":1525770072000},{"_id":"themes/next/languages/de.yml","hash":"1bdc91fdd74f41c2432273e0f469e27613e79962","modified":1525770072000},{"_id":"themes/next/languages/default.yml","hash":"527902104af2444106ddaa2c4f24309f9c103c6b","modified":1525770072000},{"_id":"themes/next/languages/en.yml","hash":"527902104af2444106ddaa2c4f24309f9c103c6b","modified":1525770072000},{"_id":"themes/next/languages/fr.yml","hash":"52e8cfc1984e1fe8235f97983693fe4ef724d002","modified":1525770072000},{"_id":"themes/next/languages/id.yml","hash":"f457487bb96130b7efb7125275e2d26e106c9071","modified":1525770072000},{"_id":"themes/next/languages/it.yml","hash":"d16885be837e99d44c8c004b07b53ac78e443087","modified":1525770072000},{"_id":"themes/next/languages/ja.yml","hash":"567b2b57ffcbea409c897b74b41f82d3bd35d7ac","modified":1525770072000},{"_id":"themes/next/languages/ko.yml","hash":"65aea531d1e2cbb79d15cec8c4f5c3d615a11fa6","modified":1525770072000},{"_id":"themes/next/languages/pt.yml","hash":"b50964d3fbee2a2f83be7a2842333556bc971839","modified":1525770072000},{"_id":"themes/next/languages/nl.yml","hash":"446dd4bc56efbb8bf0b8e7acf1a077b3e7643edf","modified":1525770072000},{"_id":"themes/next/languages/ru.yml","hash":"056da24924342926cbb7f3cab123e3a116a855e7","modified":1525770072000},{"_id":"themes/next/languages/tr.yml","hash":"0664fe016b30be41e6f73e4fc5171d748df09269","modified":1525770072000},{"_id":"themes/next/languages/zh-CN.yml","hash":"65f9b33eaef2f99944c16d84d44fd9a3027af762","modified":1525770072000},{"_id":"themes/next/languages/vi.yml","hash":"d305b5f55aeffc879ca3405cbe660a00f1914255","modified":1525770072000},{"_id":"themes/next/languages/pt-BR.yml","hash":"2ef3d965569d727047b310a2c5dfff15cbc4d653","modified":1525770072000},{"_id":"themes/next/languages/zh-HK.yml","hash":"4323f8b8ed7a52b6bb0dc938acf58b15eab85abc","modified":1525770072000},{"_id":"themes/next/languages/zh-TW.yml","hash":"69455c196d0d06b717b614ba4d49d1980d251429","modified":1525770072000},{"_id":"themes/next/layout/_layout.swig","hash":"c3015c82a6c11eb7bce543b0e15151cc21acdce3","modified":1526279303000},{"_id":"themes/next/layout/index.swig","hash":"783611349c941848a0e26ee2f1dc44dd14879bd1","modified":1525770072000},{"_id":"themes/next/layout/archive.swig","hash":"833a2213d31be45a12b8e4e5e609073978bd251b","modified":1525770072000},{"_id":"themes/next/layout/category.swig","hash":"4472255f4a3e3dd6d79201523a9526dcabdfbf18","modified":1525770072000},{"_id":"themes/next/layout/page.swig","hash":"3f9b2444f12251727ebbc28159f02e9e9489742e","modified":1525770072000},{"_id":"themes/next/scripts/helpers.js","hash":"392cda207757d4c055b53492a98f81386379fc4f","modified":1525770072000},{"_id":"themes/next/scripts/merge-configs.js","hash":"ca9845dc76f5710b4c6fba5fe25ff0d2fcf0adaa","modified":1525770072000},{"_id":"themes/next/layout/schedule.swig","hash":"d86f8de4e118f8c4d778b285c140474084a271db","modified":1525770072000},{"_id":"themes/next/layout/post.swig","hash":"8e2d079b46076996cc9343213d5bf7da8178d32d","modified":1525770072000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1525770072000},{"_id":"themes/next/layout/tag.swig","hash":"7e0a7d7d832883eddb1297483ad22c184e4368de","modified":1525770072000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1525770072000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1525770072000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1525770072000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1525770056000},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1525770056000},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1525770056000},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1525770056000},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1525770056000},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1525770056000},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1525770056000},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1525770056000},{"_id":"themes/next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1525770056000},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1525770056000},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1525770056000},{"_id":"themes/next/.git/logs/HEAD","hash":"847acfd311641246874c357d7be337459ce945a0","modified":1525770072000},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"d6d20f60f77a76c77f8e65d0c9adbd79d0274557","modified":1525770072000},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"6c5d69e94961c793da156217ecf1179e868d7ba1","modified":1525770072000},{"_id":"themes/next/docs/ru/README.md","hash":"712d9a9a557c54dd6638adfb0e1d2bb345b60756","modified":1525770072000},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"b1dd18d9b890b21718883ea1832e7e02a773104a","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"6855402e2ef59aae307e8bd2a990647d3a605eb8","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"a45a791b49954331390d548ac34169d573ea5922","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"44e4fb7ce2eca20dfa98cdd1700b50d6def4086f","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"f3eec572a7d83542e2710a7404082014aaa1a5e7","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"b19a6e0ae96eb7c756fb5b1ba03934c7f9cbb3c3","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"24cf2618d164440b047bb9396263de83bee5b993","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"1c7df019737656fdfd8d124c7c045a64ac8a2a8d","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"c1ba919f70efe87a39e6217883e1625af0b2c23c","modified":1525770072000},{"_id":"themes/next/docs/zh-CN/README.md","hash":"84d349fda6b9973c81a9ad4677db9d9ee1828506","modified":1525770072000},{"_id":"themes/next/layout/_custom/head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1525770072000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1525770072000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1525770072000},{"_id":"themes/next/layout/_macro/passage-end-tag.swig","hash":"88aaf0950216d7ba1d1cf717272dc37cc49b9120","modified":1526283118000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"31322a7f57936cf2dc62e824af5490da5354cf02","modified":1525770072000},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"464082e431ea5b06df782d5f312ee25be9e5f169","modified":1525770072000},{"_id":"themes/next/layout/_macro/post-related.swig","hash":"08fe30ce8909b920540231e36c97e28cfbce62b6","modified":1525770072000},{"_id":"themes/next/layout/_macro/post.swig","hash":"01b22ebba7925473400c4af7f3e2f2774294fa59","modified":1526282932000},{"_id":"themes/next/layout/_macro/reward.swig","hash":"aa620c582143f43ba1cb1a5e59240041a911185b","modified":1525770072000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"355ddd5b8af696f7bffb183addd7e84c0a4e2123","modified":1525770072000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"fea45ab314b9ea23edab25c2b8620f909d856b1d","modified":1525770072000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"0a0129e926c27fffc6e7ef87fe370016bc7a4564","modified":1525770072000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"6fc63d5da49cb6157b8792f39c7305b55a0d1593","modified":1525770072000},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"ac3ad2c0eccdf16edaa48816d111aaf51200a54b","modified":1525770072000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"e0bdc723d1dc858b41fd66e44e2786e6519f259f","modified":1525770072000},{"_id":"themes/next/layout/_third-party/bookmark.swig","hash":"60001c8e08b21bf3a7afaf029839e1455340e95d","modified":1525770072000},{"_id":"themes/next/layout/_third-party/copy-code.swig","hash":"08cbad4bb66196f2597682ca793e8c9f24b35c31","modified":1525770072000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"f532ce257fca6108e84b8f35329c53f272c2ce84","modified":1525770072000},{"_id":"themes/next/layout/_third-party/github-banner.swig","hash":"cabd9640dc3027a0b3ac06f5ebce777e50754065","modified":1525770072000},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"927f19160ae14e7030df306fc7114ba777476282","modified":1525770072000},{"_id":"themes/next/layout/_third-party/pangu.swig","hash":"6b75c5fd76ae7cf0a7b04024510bd5221607eab3","modified":1525770072000},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1525770072000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1525770072000},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"b0ca46e0d1ff4c08cb0a3a8c1994f20d0260cef9","modified":1525770072000},{"_id":"themes/next/layout/_partials/breadcrumb.swig","hash":"6994d891e064f10607bce23f6e2997db7994010e","modified":1525770072000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"5df32b286a8265ba82a4ef5e1439ff34751545ad","modified":1525770072000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"cec514d108f7c6c21952a235a044259abdd015ad","modified":1525833418000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1aaf32bed57b976c4c1913fd801be34d4838cc72","modified":1525770072000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"dbe321bcf3cf45917cc11a3e3f50d8572bac2c70","modified":1525770072000},{"_id":"themes/next/scripts/tags/button.js","hash":"5a61c2da25970a4981fbd65f4a57c5e85db4dcda","modified":1525770072000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"db70a841e7c1708f95ca97b44413b526b267fa9b","modified":1525770072000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"2b3a4dc15dea33972c0b6d46a1483dabbf06fb5b","modified":1525770072000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"1b97b1b5364945b8ab3e50813bef84273055234f","modified":1525770072000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"a98fc19a90924f2368e1982f8c449cbc09df8439","modified":1525770072000},{"_id":"themes/next/scripts/tags/include-raw.js","hash":"b7600f6b868d8f4f7032126242d9738cd1e6ad71","modified":1525770072000},{"_id":"themes/next/scripts/tags/label.js","hash":"621004f2836040b12c4e8fef77e62cf22c561297","modified":1525770072000},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"460e5e1f305847dcd4bcab9da2038a85f0a1c273","modified":1525770072000},{"_id":"themes/next/scripts/tags/note.js","hash":"4975d4433e11161b2e9a5744b7287c2d667b3c76","modified":1525770072000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"5786545d51c38e8ca38d1bfc7dd9e946fc70a316","modified":1525770072000},{"_id":"themes/next/source/css/main.styl","hash":"c26ca6e7b5bd910b9046d6722c8e00be672890e0","modified":1525770072000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1525770072000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1525770072000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1525770072000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1525770072000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1525770072000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1525770072000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1525770072000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1525770072000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1525770072000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1525770072000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1525770072000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1525770072000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1525770072000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1525770072000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1525770072000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1525770072000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1525770072000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1525770072000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1525770072000},{"_id":"themes/next/.git/refs/heads/master","hash":"a5781cee875e02f5ef2b4001732f49838329a2e5","modified":1525770072000},{"_id":"themes/next/layout/_macro/menu/menu-badge.swig","hash":"65c5e585982dae7ae1542cada71858b4ea1f73d6","modified":1525770072000},{"_id":"themes/next/layout/_macro/menu/menu-item.swig","hash":"d1b73c926109145e52605929b75914cc8b60fb89","modified":1525770072000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"cc865af4a3cb6d25a0be171b7fc919ade306bb50","modified":1525770072000},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"ea03fe9c98ddcfcc0ecfdbe5a2b622f9cde3b3a1","modified":1525770072000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"ea03fe9c98ddcfcc0ecfdbe5a2b622f9cde3b3a1","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"67f0cb55e6702c492e99a9f697827629da036a0c","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"94b26dfbcd1cf2eb87dd9752d58213338926af27","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"beb53371c035b62e1a2c7bb76c63afbb595fe6e5","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"cee047575ae324398025423696b760db64d04e6f","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"5e9bb24c750b49513d9a65799e832f07410002ac","modified":1525770072000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"2fbee33a4ccd7c8217c73e85a9a1488170e05629","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"fe8177e4698df764e470354b6acde8292a3515e0","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"17a54796f6e03fc834880a58efca45c286e40e40","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"40e3cacbd5fa5f2948d0179eff6dd88053e8648e","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"6f340d122a9816ccdf4b45b662880a4b2d087671","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"c0eb6123464d745ac5324ce6deac8ded601f432f","modified":1525770072000},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"42f62695029834d45934705c619035733762309e","modified":1525770072000},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"a6fc00ec7f5642aabd66aa1cf51c6acc5b10e012","modified":1525770072000},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"97dbc2035bcb5aa7eafb80a4202dc827cce34983","modified":1525770072000},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"011ae6303afacddabc4ddf570fe3dd227569cd4f","modified":1525770072000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1525770072000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"b15e10abe85b4270860a56c970b559baa258b2a8","modified":1525770072000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1525770072000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1525770072000},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"cd7e3331a61939c820e0437bf5d815cb0a42fefb","modified":1525770072000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1525770072000},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"00bf33b3c557b8f7e9faf49b226ea6ff7df5cda0","modified":1525770072000},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"e76745ff68fc017c250d749880ab67a68a9f2695","modified":1525770072000},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"b5c9f191c55622d778a1f4fb14008f858b87e8f7","modified":1525770072000},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"3db735d0cd2d449edf2674310ac1e7c0043cb357","modified":1525770072000},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"88b4b6051592d26bff59788acb76346ce4e398c2","modified":1525770072000},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"a33b29ccbdc2248aedff23b04e0627f435824406","modified":1525770072000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1525770072000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1525770072000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1525770072000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1525770072000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1525770072000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1525770072000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"048fd5e98149469f8c28c21ba3561a7a67952c9b","modified":1525770072000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"2640a54fa63bdd4c547eab7ce2fc1192cf0ccec8","modified":1525770072000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"81ca13d6d0beff8b1a4b542a51e3b0fb68f08efd","modified":1525770072000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"7a2706304465b9e673d5561b715e7c72a238437c","modified":1525770072000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1525770072000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"32392d213f5d05bc26b2dc452f2fc6fea9d44f6d","modified":1525770072000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"cfb03ec629f13883509eac66e561e9dba562333f","modified":1525770072000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1525770072000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"40de94fd18fcbd67a327d63b0d1e242a08aa5404","modified":1525770072000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1525770072000},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1525770072000},{"_id":"themes/next/source/js/src/motion.js","hash":"50e57f8acb6924c6999cdcc664ddd3f0730d2061","modified":1525770072000},{"_id":"themes/next/source/js/src/post-details.js","hash":"d1333fb588d4521b4d1e9c69aef06e0ad1bf0b12","modified":1525770072000},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1525770072000},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1525770072000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1525770072000},{"_id":"themes/next/source/js/src/utils.js","hash":"4284c67ea1435de2acd523f6d48c0d073fd1ad03","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1525770072000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1525770072000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1525770072000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1525770072000},{"_id":"themes/next/.git/objects/pack/pack-6b4f992c693abd2e1a5ff8a84fbed60bb43c04dd.idx","hash":"92e5054ebeec9e013246a5a9d75d12fa0f1a3a02","modified":1525770072000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1525770072000},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"847acfd311641246874c357d7be337459ce945a0","modified":1525770072000},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1525770072000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"6958a97fde63e03983ec2394a4f8e408860fb42b","modified":1525770072000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"4719ce717962663c5c33ef97b1119a0b3a4ecdc3","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"18309b68ff33163a6f76a39437e618bb6ed411f8","modified":1525770072000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"47a46583a1f3731157a3f53f80ed1ed5e2753e8e","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1525770072000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"0810e7c43d6c8adc8434a8fa66eabe0436ab8178","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"f362fbc791dafb378807cabbc58abf03e097af6d","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"35f093fe4c1861661ac1542d6e8ea5a9bbfeb659","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"d5e8ea6336bc2e237d501ed0d5bbcbbfe296c832","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"0bef9f0dc134215bc4d0984ba3a16a1a0b6f87ec","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"f43c821ea272f80703862260b140932fe4aa0e1f","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"2212511ae14258d93bec57993c0385e5ffbb382b","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"5e12572b18846250e016a872a738026478ceef37","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"ba1842dbeb97e46c6c4d2ae0e7a2ca6d610ada67","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"05a5abf02e84ba8f639b6f9533418359f0ae4ecb","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"41f9cdafa00e256561c50ae0b97ab7fcd7c1d6a2","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"5779cc8086b1cfde9bc4f1afdd85223bdc45f0a0","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"ffa870c3fa37a48b01dc6f967e66f5df508d02bf","modified":1525770072000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1525770072000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1525770072000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1525770072000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1525770072000},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"847acfd311641246874c357d7be337459ce945a0","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"39dee82d481dd9d44e33658960ec63e47cd0a715","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/github-banner.styl","hash":"ee37e6c465b9b2a7e39175fccfcbed14f2db039b","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"7cc3f36222494c9a1325c5347d7eb9ae53755a32","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"f5aa2ba3bfffc15475e7e72a55b5c9d18609fdf5","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"fb451dc4cc0355b57849c27d3eb110c73562f794","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"7dd9a0378ccff3e4a2003f486b1a34e74c20dac6","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"0f7f522cc6bfb3401d5afd62b0fcdf48bb2d604b","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"17b95828f9db7f131ec0361a8c0e89b0b5c9bff5","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"ca89b167d368eac50a4f808fa53ba67e69cbef94","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"417f05ff12a2aaca6ceeac8b7e7eb26e9440c4c3","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-reading_progress.styl","hash":"f4e9f870baa56eae423a123062f00e24cc780be1","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"36332c8a91f089f545f3c3e8ea90d08aa4d6e60c","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"c0ac49fadd33ca4a9a0a04d5ff2ac6560d0ecd9e","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"e4055a0d2cd2b0ad9dc55928e2f3e7bd4e499da3","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"35c0350096921dd8e2222ec41b6c17a4ea6b44f2","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"8bf095377d28881f63a30bd7db97526829103bf2","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"b3923caa59ec8831ca1f6f0140279752f5fba31d","modified":1526277711000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"89dd4f8b1f1cce3ad46cf2256038472712387d02","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"4427ed3250483ed5b7baad74fa93474bd1eda729","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"43bc58daa8d35d5d515dc787ceb21dd77633fe49","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"5d15cc8bbefe44c77a9b9f96bf04a6033a4b35b8","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"ead0d0f2321dc71505788c7f689f92257cf14947","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"10e9bb3392826a5a8f4cabfc14c6d81645f33fe6","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"76937db9702053d772f6758d9cea4088c2a6e2a3","modified":1525770072000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1c06be422bc41fd35e5c7948cdea2c09961207f6","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1525770072000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1525770072000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1525770072000},{"_id":"themes/next/.git/objects/pack/pack-6b4f992c693abd2e1a5ff8a84fbed60bb43c04dd.pack","hash":"3b90330b10f84351c1dca813a5ca6edb426028ca","modified":1525770072000},{"_id":"public/atom.xml","hash":"0438fc5ca3fb8b8e7f2c570bd98d9987a99ebd8a","modified":1529389893786},{"_id":"public/content.json","hash":"28de10102db7774a85a64119981adebcc5ddc88e","modified":1529389893819},{"_id":"public/search.xml","hash":"e400824da5fbd5d0237c31d4cf3d3c26fbc43c49","modified":1529389893819},{"_id":"public/post-sitemap.xml","hash":"42bb79da3245dff5e12f936682f42346abd92677","modified":1529389893819},{"_id":"public/page-sitemap.xml","hash":"955fa30f6d8020b7ac0bd6ba2b57a6e3048b8352","modified":1529378038366},{"_id":"public/category-sitemap.xml","hash":"d5fb6f17655dd22751324faa77fc083e18115bdf","modified":1529389893819},{"_id":"public/tag-sitemap.xml","hash":"74c7b0750deba483574b667d95a916d6de8bc829","modified":1529389893819},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1529378038366},{"_id":"public/sitemap.xml","hash":"c9a3c01e0169b1d31b521b87c41d28a6b4e34990","modified":1529389893819},{"_id":"public/about/index.html","hash":"df9f74372f279db9a114e01cf6a23b53e5f96ecf","modified":1529378038377},{"_id":"public/categories/index.html","hash":"9dabb060714acfe0ec782adaebebd6c656646629","modified":1529378038377},{"_id":"public/tags/index.html","hash":"1b29646049c136a5c09cf3d956a34835740f57d6","modified":1529378038377},{"_id":"public/2018/06/13/Javascript基本概念（三）/index.html","hash":"12a10a88756b7eebca758a2444129ffb75b01908","modified":1529378744485},{"_id":"public/2018/06/13/display的属性们/index.html","hash":"5503ce08da191432cbeebbb525536c32241cf2ba","modified":1529378038377},{"_id":"public/2018/06/13/link和-import之争/index.html","hash":"47065fc760f0afe57eda6733510909acb4f3c18f","modified":1529378038377},{"_id":"public/2018/06/11/Javascript基本概念（二）/index.html","hash":"5f4c43cfc094253f18be16ad9a6bf50246daa582","modified":1529389893826},{"_id":"public/2018/06/11/Javascript基本概念（一）/index.html","hash":"d44e194098a15da88521556eace3a0b816c9007a","modified":1529378038377},{"_id":"public/2018/06/10/在HTML中使用JS/index.html","hash":"381fb47625166d2b7d532c1e5dacb5131dab0605","modified":1529378038377},{"_id":"public/2018/06/10/window.location的属性/index.html","hash":"21a3f0615f6020401fc55ac0e88d9f7bd66fc638","modified":1529378038377},{"_id":"public/2018/05/29/CSS占坑/index.html","hash":"67d278724053cb9045fa23c9ba9b532b863b4f21","modified":1529378038378},{"_id":"public/2018/05/28/链表/index.html","hash":"31337d1b7597b29a201443e8bcf25d53421a797b","modified":1529378038378},{"_id":"public/2018/05/28/html5语意化学习/index.html","hash":"45cfd8ab6be005e0eba6b483387cecbb4277af2d","modified":1529378038378},{"_id":"public/2018/05/25/插入排序/index.html","hash":"d1b3366d9de8576b7dd47f41e8fc2921386c8788","modified":1529378038378},{"_id":"public/2018/05/25/正则填坑/index.html","hash":"383f695d1d7411ac0e39a8d37dfc878a36c1080a","modified":1529378038378},{"_id":"public/2018/05/24/放飞的thinking～/index.html","hash":"51a842f76a6237f8892e251e3c21e0abb022615f","modified":1529378038379},{"_id":"public/2018/05/24/koa2源码学习--application.js/index.html","hash":"ebcab52385dea1527ddd28e290c338ddac0ff52a","modified":1529378038379},{"_id":"public/2018/05/22/react生命周期理解/index.html","hash":"f6c16775b0352662b2ce3a731ebe2c8f05cf20ae","modified":1529378038379},{"_id":"public/2018/05/21/堆排序/index.html","hash":"0e1f5e7b83391750b22c3592abc7d3265ba0d5c5","modified":1529378038379},{"_id":"public/2018/05/19/归并排序/index.html","hash":"59b053365f85c23b61bedde28543abeec89f6707","modified":1529378038379},{"_id":"public/2018/05/19/选择排序/index.html","hash":"4cd3832f0c4e3efa56236461d648b889ed8743b4","modified":1529378038379},{"_id":"public/2018/05/19/快速排序/index.html","hash":"9b952e3a84612684569602724c67fbc6f070ba1e","modified":1529378038379},{"_id":"public/2018/05/19/冒泡排序/index.html","hash":"af581a2ea67969b010e69f7e7917ca7276fb019e","modified":1529378038379},{"_id":"public/2018/05/16/ajax实现/index.html","hash":"852d663d1bae5799b2601b5f18a0c1ee3562c657","modified":1529378038380},{"_id":"public/2018/05/15/跨域问题探究/index.html","hash":"026d2d0c1506afb36d7cd45355758ee614a2c4e2","modified":1529378038380},{"_id":"public/2018/05/15/webpack-配置理解/index.html","hash":"2fd2a16e3858b38b78a0088637fffdecbf9609b4","modified":1529378038380},{"_id":"public/2018/05/14/在页面中获取图片的尺寸/index.html","hash":"8224e7b64df3d32f04df636ce819028990d551e1","modified":1529378038380},{"_id":"public/2018/05/14/jquery监控浏览器大小变化/index.html","hash":"20a5a346ec59c74206376148d9344ad24ce6fb4c","modified":1529378038380},{"_id":"public/2018/05/14/设置overflow：hidden导致相邻行内元素向下偏移的问题/index.html","hash":"7f79e27fac6d21bf8099affdbb94cf62a264ef08","modified":1529378038380},{"_id":"public/2018/05/14/如何去掉两个span间的间距/index.html","hash":"d3619aa1c94e323bf1eb82a61ec3918ffc947987","modified":1529378038380},{"_id":"public/2018/05/14/jquery对追加事件的绑定/index.html","hash":"7d84078434edbd087815c8b070c5eb0d7ab03546","modified":1529378038381},{"_id":"public/2018/05/14/CSS中position属性总结笔记/index.html","hash":"9eac341434f9bc9a413c12028cdf0cb9a1cc6f55","modified":1529378038381},{"_id":"public/2018/05/14/变量的作用域和变量提升/index.html","hash":"7ba6bb238ba53c9ecbb2f0f9702b75c2448ca290","modified":1529378038381},{"_id":"public/2018/05/14/2018-书单/index.html","hash":"d797a281f8ec39a92b0aef7e56b4a832f53ed189","modified":1529378038381},{"_id":"public/2018/05/11/redux-devtools学习理解/index.html","hash":"eed7f0e3e5daa49c6ed7ebcc0f5c06a5d49a94f1","modified":1529378038381},{"_id":"public/2018/05/11/redux源码学习-applyMiddleware/index.html","hash":"93b6ede512fd06283606d58d97fa4e44d42a8163","modified":1529378038381},{"_id":"public/2018/05/11/redux源码学习-bindActionCreators/index.html","hash":"54cf44b8d51da9283b8f15f12987c1112ac5c010","modified":1529378038381},{"_id":"public/2018/05/11/redux源码学习—combineReducers/index.html","hash":"d534e5771cae41a71edd154070edb339f601e6e2","modified":1529378038381},{"_id":"public/2018/05/11/redux源码学习-compose/index.html","hash":"bc3b3d97d97eff196e5a36153c525eb62162b13a","modified":1529378038381},{"_id":"public/2018/05/11/immutable-js-学习/index.html","hash":"7acf0e0206eb72d89c320649157cb3ac2446e1b7","modified":1529378038381},{"_id":"public/2018/05/11/redux-源码学习—createStore/index.html","hash":"379a7721a541c5f49e16fd4240793e605462f3c9","modified":1529378038381},{"_id":"public/2018/05/09/瀑布流布局/index.html","hash":"7d2645139b61d7783c934cc7af090a2884b2d2e2","modified":1529378038381},{"_id":"public/2018/05/09/react-16-0-新特性学习/index.html","hash":"2ac376aacdb4dd4e601f5a1732c4c734489a2fa6","modified":1529378038381},{"_id":"public/2018/05/09/Event-Loop-问题理解/index.html","hash":"5267a6972410c56410d98bb712df93f53eb60c67","modified":1529378038381},{"_id":"public/2018/05/08/PWA-之Q-A/index.html","hash":"8eb9a399d1a7d08cae57fb4181cce2f55030dfe8","modified":1529378038382},{"_id":"public/2018/05/08/Javascript 继承学习/index.html","hash":"11666bddc30d78474723416afa3c25459f64baf1","modified":1529378038382},{"_id":"public/archives/index.html","hash":"0cb8b8d437e22c7b9747f80891ebb24b2b565eba","modified":1529378038382},{"_id":"public/archives/page/2/index.html","hash":"631351334001f973a77ea710fd8fdf2bf61781b6","modified":1529378038382},{"_id":"public/archives/page/3/index.html","hash":"6cf77c4e41813c4001b93766a7427ffe977b5cc4","modified":1529378038382},{"_id":"public/archives/page/4/index.html","hash":"000c008bcc05ba7c2af4b94a05056b92ffc60b1a","modified":1529378038382},{"_id":"public/archives/page/5/index.html","hash":"acbd0528834c20ababb9bd1fc3d71339e1967d8d","modified":1529378038382},{"_id":"public/archives/2018/index.html","hash":"c0b14b5f031e5fe99c4b282f3bcc76dbe10cab98","modified":1529378038382},{"_id":"public/archives/2018/page/2/index.html","hash":"ac5f70f8d6d45839d925b1ca8cf8b9b607077918","modified":1529378038382},{"_id":"public/archives/2018/page/3/index.html","hash":"f8f9540cac36bc7f3eb766920e92bf37b11b108f","modified":1529378038382},{"_id":"public/archives/2018/page/4/index.html","hash":"d63de91a6a15bb698ac3f41ceef459dbc49176ca","modified":1529378038382},{"_id":"public/archives/2018/page/5/index.html","hash":"587f5fc4616466a515e830aef6204d08041cbe34","modified":1529378038382},{"_id":"public/archives/2018/05/index.html","hash":"0fbf1dbb09eaebf6dd780576bea4245137f5cf64","modified":1529378038382},{"_id":"public/archives/2018/05/page/2/index.html","hash":"3b9cb17140e5f9c21fae6d9ad07caf6652b58492","modified":1529378038382},{"_id":"public/archives/2018/05/page/3/index.html","hash":"247286637cb3fe1edbededdd7ec9d03046aca895","modified":1529378038382},{"_id":"public/archives/2018/05/page/4/index.html","hash":"204cec72eae8cb020c667b71fcec8b4a23d6590d","modified":1529378038382},{"_id":"public/archives/2018/06/index.html","hash":"0c3d008f030d30b94afb8dd269fe114d6b35e980","modified":1529378038382},{"_id":"public/categories/学习笔记/index.html","hash":"24d99cb90dd4ecfc916198e56e008426c3ef7550","modified":1529378038383},{"_id":"public/categories/学习笔记/page/2/index.html","hash":"eaf4f48cbbafe06a87f5224ba35811361b6f4e5a","modified":1529378038383},{"_id":"public/categories/Glory-Road/index.html","hash":"e7937db3c9a7742ceab924645f19702b5c6395f0","modified":1529378038383},{"_id":"public/categories/JS高程填坑笔记/index.html","hash":"ac1cdf795862468c6c6355610935b38723f12f61","modified":1529378038383},{"_id":"public/categories/浮生小记/index.html","hash":"3de072cea10fbf896aa654bfda69076b0528d404","modified":1529378038383},{"_id":"public/categories/Demo练习/index.html","hash":"6951363f6a29da8ad99afd7619b23973649b80e3","modified":1529378038383},{"_id":"public/categories/面试锦囊/index.html","hash":"e090a4b706e2431cdbf0da0c6b75414306eb72da","modified":1529378038383},{"_id":"public/categories/bug汇总/index.html","hash":"5d9694105f60fd81b28c3eeee50caf744fc4c6d4","modified":1529378038383},{"_id":"public/categories/koa2源码学习/index.html","hash":"a35fd47b7da821d476607f5d515a8cec29284380","modified":1529378038383},{"_id":"public/categories/redux源码学习/index.html","hash":"abe3784e6597e3b4d274a3214d35dd74c3792843","modified":1529378038383},{"_id":"public/categories/算法学习/index.html","hash":"b70053bf99199941966475772923f61a123c9fd1","modified":1529378038383},{"_id":"public/index.html","hash":"c81d80f769a660af230f89f6114b849b4a8d85bf","modified":1529389893826},{"_id":"public/page/2/index.html","hash":"a7304286b2a6023115166a7e97762765d3b3bade","modified":1529378038384},{"_id":"public/page/3/index.html","hash":"82b00a111bb38f3b6abb4ac7cc626f2bba409386","modified":1529378038384},{"_id":"public/page/4/index.html","hash":"f7ace2ab94bc64c254019f3ffc0a3760b35335da","modified":1529378038384},{"_id":"public/page/5/index.html","hash":"22dcbb3e23ecf585c2712b53eaa7ca462ecd0181","modified":1529378038384},{"_id":"public/tags/CSS/index.html","hash":"0989553bbe28bf01d67a216c7f54667fd62424ec","modified":1529378038384},{"_id":"public/tags/Javascript/index.html","hash":"c0e72205fdb6beade3c82959ba8306c029468194","modified":1529378038384},{"_id":"public/tags/Javascript/page/2/index.html","hash":"bf36f7da93bfe826d82dfe4ab61e0f72f0121acf","modified":1529378038384},{"_id":"public/tags/Javascript/page/3/index.html","hash":"da38367d840a8291f7bf42b630d8d95854ea91ad","modified":1529378038384},{"_id":"public/tags/html/index.html","hash":"aa52c1433d6773abd62d71a0203fdc1b93c3d255","modified":1529378038384},{"_id":"public/tags/Jquery/index.html","hash":"341684b849efd65535decc3c4bf0bca9a07ae3ce","modified":1529378038384},{"_id":"public/tags/immutable/index.html","hash":"180341d3fd14b869f5accced34a3dac3280dde74","modified":1529378038384},{"_id":"public/tags/react/index.html","hash":"f4d9c938215c68c51a622e29c2c44a4c1c0f7453","modified":1529378038384},{"_id":"public/tags/Koa/index.html","hash":"04e2c6a8b92955352754c09f2181a776259f005a","modified":1529378038384},{"_id":"public/tags/Node/index.html","hash":"241d20dc0824ed9204eea7631c9549f8e0bd9522","modified":1529378038384},{"_id":"public/tags/redux/index.html","hash":"38c333e3575ae13e07cf943d3328abf44b5f92fa","modified":1529378038385},{"_id":"public/tags/webpack/index.html","hash":"2965fa977ae7910c52e5bbc25d467b066ae8c0a8","modified":1529378038385},{"_id":"public/tags/算法/index.html","hash":"53057e2e4c1cad29504529c8d519fc6b38d88193","modified":1529378038385},{"_id":"public/tags/数据结构/index.html","hash":"e3f3f79ef9f1e166ecdfb6d54b391fa0bb38fc05","modified":1529378038385},{"_id":"public/image/avatar.png","hash":"084cb8bef5471785be3d1696ba6bf6c6b41979ae","modified":1529378038390},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1529378038390},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1529378038390},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1529378038390},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1529378038390},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1529378038390},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1529378038390},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1529378038390},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1529378038390},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1529378038390},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1529378038390},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1529378038390},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1529378038390},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1529378038390},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1529378038390},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1529378038390},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1529378038390},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1529378038390},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1529378038391},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1529378038391},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1529378038391},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1529378038854},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1529378038857},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1529378038862},{"_id":"public/js/src/bootstrap.js","hash":"40de94fd18fcbd67a327d63b0d1e242a08aa5404","modified":1529378038862},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1529378038862},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1529378038863},{"_id":"public/js/src/motion.js","hash":"50e57f8acb6924c6999cdcc664ddd3f0730d2061","modified":1529378038863},{"_id":"public/js/src/post-details.js","hash":"d1333fb588d4521b4d1e9c69aef06e0ad1bf0b12","modified":1529378038863},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1529378038863},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1529378038863},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1529378038863},{"_id":"public/js/src/utils.js","hash":"4284c67ea1435de2acd523f6d48c0d073fd1ad03","modified":1529378038863},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1529378038863},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1529378038863},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1529378038863},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1529378038863},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1529378038863},{"_id":"public/css/main.css","hash":"b6421ca28366bc00712366e556f329e47e4e0d85","modified":1529378038863},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1529378038863},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1529378038863},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1529378038863},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1529378038863},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1529378038863},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1529378038863},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1529378038864}],"Category":[{"name":"学习笔记","_id":"cjil46y9m0002d6spybzcvlbq"},{"name":"Glory Road","_id":"cjil46y9s0007d6spups8ywzg"},{"name":"JS高程填坑笔记","_id":"cjil46y9x000ed6spom3qpapo"},{"name":"浮生小记","_id":"cjil46ya0000ld6spo0bk78j4"},{"name":"Demo练习","_id":"cjil46ya60012d6sp1okts3el"},{"name":"面试锦囊","_id":"cjil46yaa001ad6spr62tcyca"},{"name":"bug汇总","_id":"cjil46yac001hd6spdjq36v78"},{"name":"koa2源码学习","_id":"cjil46yaj001xd6spbf1shaj3"},{"name":"redux源码学习","_id":"cjil46yam0024d6sp32kt6ibg"},{"name":"算法学习","_id":"cjil46yg8003sd6spf52qwq1s"}],"Data":[],"Page":[{"title":"个人简介","date":"2018-05-08T07:57:25.000Z","tags":"resume","_content":"<div class=\"container\">\n<div>\n<p>联系方式：</p>\n<p>邮箱：lbf911@126.com</p>\n</div>\n<div>技术栈：</div>\n<div>项目经历：</div>\n</div>\n","source":"about/index.md","raw":"---\ntitle: 个人简介\ndate: 2018-05-08 15:57:25\ntags: resume\n---\n<div class=\"container\">\n<div>\n<p>联系方式：</p>\n<p>邮箱：lbf911@126.com</p>\n</div>\n<div>技术栈：</div>\n<div>项目经历：</div>\n</div>\n","updated":"2018-05-16T13:31:35.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjil46yfz003fd6spxhuthqep","content":"<div class=\"container\"><br><div><br><p>联系方式：</p><br><p>邮箱：<a href=\"mailto:lbf911@126.com\" target=\"_blank\" rel=\"noopener\">lbf911@126.com</a></p><br></div><br><div>技术栈：</div><br><div>项目经历：</div><br></div>\n","site":{"data":{}},"excerpt":"","more":"<div class=\"container\"><br><div><br><p>联系方式：</p><br><p>邮箱：<a href=\"mailto:lbf911@126.com\" target=\"_blank\" rel=\"noopener\">lbf911@126.com</a></p><br></div><br><div>技术栈：</div><br><div>项目经历：</div><br></div>\n"},{"title":"categories","date":"2018-05-08T07:35:01.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-05-08 15:35:01\ntype: \"categories\"\n---\n","updated":"2018-05-14T09:59:24.000Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjil46yg1003hd6sp4aqj0hx9","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"标签","date":"2018-05-08T07:23:04.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2018-05-08 15:23:04\ntype: \"tags\"\n---\n","updated":"2018-05-14T09:59:24.000Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjil46yg4003kd6sp2w9hfast","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"CSS中position属性总结笔记","date":"2018-05-14T06:55:43.000Z","_content":"写了好多的position，一直在用它们字面的意思，最近项目写到的position的问题，竟然又出问题了。。总结一下：\n\n**1. positon:static; 静态定位（默认的 ）**  \n　　这个是默认的，写不写都会是这个定位，所有的标准文档流里面的元素都是静态定位。\n\n**2. positon:relative;  相对定位**\n　　相对定位不会使有该属性的元素脱离标准文档流\n　　相对定位会在页面原始的位置占据位置，而元素的位置会根据原始的位置进行偏移。\n　　\n　***相对定位的作用一般是用来给子元素的绝对定位提供参考的。***\n\n**3. position:absolute;  绝对定位**\n　　绝对定位会使有该属性的元素脱离标准文档流\n　　特点：\n\n\t\t 如果这个元素没有父元素，top、left、right、bottom就相对于浏览器窗口来定位\n\t\t 如果绝对定位的元素有父元素，且父元素没有相对定位，top、left、right、bottom相对于浏览窗口来定位\n\t\t 如果绝对定位的元素有父元素，且父元素有定位（非static），top、left、right、bottom以父元素为基础偏移\n\t\t 绝对定位之后的元素在页面上不会占据位置\n\n**4. position:fixed;   固定定位**\n　　固定定位会使有该属性的元素脱离标准文档流\n　　位置不变，适用于广告或者飘窗\n \n总结：***写页面时，用到最多是绝对定位与相对定位一起使用，较多的是子元素使用绝对定位，父元素使用相对定位***","source":"_posts/CSS中position属性总结笔记.md","raw":"---\ntitle: CSS中position属性总结笔记\ndate: 2018-05-14 14:55:43\ntags: CSS\ncategories: 学习笔记\n---\n写了好多的position，一直在用它们字面的意思，最近项目写到的position的问题，竟然又出问题了。。总结一下：\n\n**1. positon:static; 静态定位（默认的 ）**  \n　　这个是默认的，写不写都会是这个定位，所有的标准文档流里面的元素都是静态定位。\n\n**2. positon:relative;  相对定位**\n　　相对定位不会使有该属性的元素脱离标准文档流\n　　相对定位会在页面原始的位置占据位置，而元素的位置会根据原始的位置进行偏移。\n　　\n　***相对定位的作用一般是用来给子元素的绝对定位提供参考的。***\n\n**3. position:absolute;  绝对定位**\n　　绝对定位会使有该属性的元素脱离标准文档流\n　　特点：\n\n\t\t 如果这个元素没有父元素，top、left、right、bottom就相对于浏览器窗口来定位\n\t\t 如果绝对定位的元素有父元素，且父元素没有相对定位，top、left、right、bottom相对于浏览窗口来定位\n\t\t 如果绝对定位的元素有父元素，且父元素有定位（非static），top、left、right、bottom以父元素为基础偏移\n\t\t 绝对定位之后的元素在页面上不会占据位置\n\n**4. position:fixed;   固定定位**\n　　固定定位会使有该属性的元素脱离标准文档流\n　　位置不变，适用于广告或者飘窗\n \n总结：***写页面时，用到最多是绝对定位与相对定位一起使用，较多的是子元素使用绝对定位，父元素使用相对定位***","slug":"CSS中position属性总结笔记","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9g0000d6sp40u2qd3a","content":"<p>写了好多的position，一直在用它们字面的意思，最近项目写到的position的问题，竟然又出问题了。。总结一下：</p>\n<p><strong>1. positon:static; 静态定位（默认的 ）</strong><br>　　这个是默认的，写不写都会是这个定位，所有的标准文档流里面的元素都是静态定位。</p>\n<p><strong>2. positon:relative;  相对定位</strong><br>　　相对定位不会使有该属性的元素脱离标准文档流<br>　　相对定位会在页面原始的位置占据位置，而元素的位置会根据原始的位置进行偏移。<br>　　<br>　<strong><em>相对定位的作用一般是用来给子元素的绝对定位提供参考的。</em></strong></p>\n<p><strong>3. position:absolute;  绝对定位</strong><br>　　绝对定位会使有该属性的元素脱离标准文档流<br>　　特点：</p>\n<pre><code>如果这个元素没有父元素，top、left、right、bottom就相对于浏览器窗口来定位\n如果绝对定位的元素有父元素，且父元素没有相对定位，top、left、right、bottom相对于浏览窗口来定位\n如果绝对定位的元素有父元素，且父元素有定位（非static），top、left、right、bottom以父元素为基础偏移\n绝对定位之后的元素在页面上不会占据位置\n</code></pre><p><strong>4. position:fixed;   固定定位</strong><br>　　固定定位会使有该属性的元素脱离标准文档流<br>　　位置不变，适用于广告或者飘窗</p>\n<p>总结：<strong><em>写页面时，用到最多是绝对定位与相对定位一起使用，较多的是子元素使用绝对定位，父元素使用相对定位</em></strong></p>\n","site":{"data":{}},"excerpt":"","more":"<p>写了好多的position，一直在用它们字面的意思，最近项目写到的position的问题，竟然又出问题了。。总结一下：</p>\n<p><strong>1. positon:static; 静态定位（默认的 ）</strong><br>　　这个是默认的，写不写都会是这个定位，所有的标准文档流里面的元素都是静态定位。</p>\n<p><strong>2. positon:relative;  相对定位</strong><br>　　相对定位不会使有该属性的元素脱离标准文档流<br>　　相对定位会在页面原始的位置占据位置，而元素的位置会根据原始的位置进行偏移。<br>　　<br>　<strong><em>相对定位的作用一般是用来给子元素的绝对定位提供参考的。</em></strong></p>\n<p><strong>3. position:absolute;  绝对定位</strong><br>　　绝对定位会使有该属性的元素脱离标准文档流<br>　　特点：</p>\n<pre><code>如果这个元素没有父元素，top、left、right、bottom就相对于浏览器窗口来定位\n如果绝对定位的元素有父元素，且父元素没有相对定位，top、left、right、bottom相对于浏览窗口来定位\n如果绝对定位的元素有父元素，且父元素有定位（非static），top、left、right、bottom以父元素为基础偏移\n绝对定位之后的元素在页面上不会占据位置\n</code></pre><p><strong>4. position:fixed;   固定定位</strong><br>　　固定定位会使有该属性的元素脱离标准文档流<br>　　位置不变，适用于广告或者飘窗</p>\n<p>总结：<strong><em>写页面时，用到最多是绝对定位与相对定位一起使用，较多的是子元素使用绝对定位，父元素使用相对定位</em></strong></p>\n"},{"title":"CSS占坑","date":"2018-05-29T10:15:44.000Z","_content":"占个坑就留着回家写吧～哈哈哈","source":"_posts/CSS占坑.md","raw":"---\ntitle: CSS占坑\ndate: 2018-05-29 18:15:44\ntags: CSS\ncategories: Glory Road\n---\n占个坑就留着回家写吧～哈哈哈","slug":"CSS占坑","published":1,"updated":"2018-05-29T10:19:28.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9k0001d6sp6fudzbeh","content":"<p>占个坑就留着回家写吧～哈哈哈</p>\n","site":{"data":{}},"excerpt":"","more":"<p>占个坑就留着回家写吧～哈哈哈</p>\n"},{"title":"Javascript 基本概念（三）","date":"2018-06-13T15:27:09.000Z","_content":"这是JS高程第三章的第三部分。这一章内容是真的多。。我觉得重新刷高程，对我来说，也是一种不一样的进步吧。\n本节的主要内容是\n* 操作符\n\n## 一元操作符\n只能操作一个一个值的操作符叫做<b>一元操作符</b>。\n1、递增递减操作符\n  有两个版本，前置型和后置型。\n  前置型，先操作，后执行。\n  后置型，先执行，后操作。\n```javascript\nlet a = 5, b = 6;\nlet sum = ++a + b;\nlet sum2 = a++ + b;\nconsole.log(sum); //12\nconsole.log(sum2) //12\nconsole.log(a); //7\n```\n  递增递减操作符对数值，布尔，字符串，对象都有作用！！！！！\n  规则如下：\n  \n  * 如果字符串包含有效数字，则先转化成数值变量，然后加减1；不包含有效数字，则转化成NaN。字符串变量变成数值变量\n  * 数值变量加减1；\n  * 布尔变量，true先变成1，false变成0，然后加减1,布尔变了转换成数值变量；\n  * 对象变量，先查看valueOf()方法，如果是NaN，则调用toString()，对象转换成数值变量。\n\n2、一元加减操作符。\n  一元+操作符，会像Number()方法一样对变量转换成数值变量`var a; a = +a`;\n  一元-操作符，主要是变成负数。会像Number()方法一样，不过是负数。\n\n## 位操作符\n首先ES里所有的数值都是有64位来储存，但是位操作符并不是操作64位，而是先转化成32位的整数，然后操作，再将结果转换成64位的，这样，NaN和Infinity就会变成0。\n对于有符号数，第32位是符号位，0代表正数，1代表负数，符号位决定了其他位数值的格式。剩下31位用来储存数据。\n正数都是以二进制格式存储，负数以二进制的补码格式存储。默认情况下，ES里所有的正数都是有符号数。\n无符号数，第32位是数值。但是无符号数只能是正数。\n位操作符对其他变量，会先用Number()方法变成数值，然后再按位操作。\n1、按位非（NOT）\n  按位非是用～表示，执行按位非的结果是返回数值的反码。\n2、按位与（AND）\n  按位与是用&表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是1得1，其他为0；\n3、按位或（OR）\n  按位或是用|表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是0得0，其他为1；\n4、按位异或（XOR）\n  按位或是用^表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，相同得0，不同为1；\n5、左移\n  左移用&lt;&lt;表示，会将数值所有位数向左移动指定的位数。后面补0；左移不会影响符号。\n6、有符号右移\n  有符号右移用&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；保留符号位，不会影响符号。\n7、无符号右移\n  无符号右移用&gt;&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；会影响符号。而且会把负数的补码当成二进制码来运算。\n\n## 布尔运算符\n布尔运算符有三个，主要用来测试值的关系\n1、逻辑非(!)\n这个操作符会返回一个布尔值，逻辑非运算会将操作数先转换成布尔值，然后求反。\n  * 操作数是对象，返回false\n  * 操作数是空字符串，返回true\n  * 操作数是非空字符串，返回false\n  * 操作数是非0数值，返回false\n  * 操作数是0，null，NaN，undefined，返回true\n  \n2、逻辑与(&&)\n逻辑与操作符两边有两个操作数。都是true才为true。\n逻辑与操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。\n规则：\n  * 如果第一个操作数是对象，则返回第二个操作数\n  * 如果第二个操作数是对象，则必须第一个操作数是true才会返回该对象。\n  * 如果两个数都是对象，则返回第二个操作数\n  * 如果有一个操作数是null，NaN，undefined，则返回null，NaN，undefined。\n  \n逻辑与属于短路操作，第一个操作数能决定结果，就不会对第二个操作数求值。\n\n3、逻辑或(||)\n逻辑或两边有两个操作数，有一个为true就是true。\n逻辑或操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。\n规则：\n  * 如果第一个操作数是对象，则返回第一个操作数\n  * 如果第一个操作数是false，则返回第二个操作数\n  * 两个操作数都是对象，则返回第一个操作数\n  * 如果两个操作数是null，NaN，undefined，则返回null，NaN，undefined。\n\n## 乘性操作符\nES有三个乘性操作符，乘法，除法和求模。\n如果乘性操作符的某一个操作数不是数值，则将会用Number()方法，先转换成数值。\n1、乘法(*)\n规则：\n  * 乘积超过限制，则显示Infinity或者-Infinity\n  * 有一个操作数为NaN，结果为NaN\n  * Infinity与0相乘，结果是NaN\n  * Infinity与非0数相乘，结果是Infinity或者-Infinity\n  * Infinity与Infinity相乘，结果是Infinity\n  \n2、除法(/)\n规则：\n  * Infinity与Infinity相除，结果是NaN\n  * 0/0结果是NaN\n  * 其他操作数／0 结果是Infinity或者-Infinity\n\n3、求模(%)\n规则：\n  * Infinity%操作数 结果是NaN\n  * 操作数%0，结果是NaN\n  * Infinity%Infinity，结果是NaN\n  * 操作数%Infinity，结果是操作数\n\n## 加性操作符\nES中有两个加性操作符，加法和减法\n1、加法(+)\n规则：\n  * 有一个操作数是NaN，结果就是NaN\n  * Infinity + Infinity = Infinity\n  * -Infinity + -Infinity = -Infinity\n  * Infinity + -Infinity = NaN\n  * +0 + +0 = +0\n  * -0 + -0 = -0\n  * +0 + -0 = +0\n  * 两个操作数都是字符串，则将字符串拼接起来\n  * 只有一个操作数是字符串，另一个操作数则会转换成字符串，然后拼接起来。\n\n2、减法(-)\n规则：\n  * Infinity - Infinity = NaN\n  * -Infinity - -Infinity = NaN\n  * Infinity - -Infinity = Infinity\n  * -Infinity - Infinity = -Infinity\n\n## 关系操作符\n关系操作符有大于(>)，小于(<),小于等于(<=),大于等于(>=)\n规则：\n  * 都是数值，执行数值比较\n  * 都是字符串，执行字符串编码比较\n  * 一个是数值，则另一个转换成数值比较\n\n## 相等操作符\nES中提供了两种相等操作符：\n相等操作符：先转换再比较\n全等操作符：不转换只比较\n1、相等操作符(==,!=),强制转型，然后比较。\n规则：\n  * 如果有一个是布尔类型的操作数，则先转换成数值。\n  * 如果有一个是数值，一个是字符串，则将字符串转换成数值\n  * 如果有一个是对象，则用valueOf转成基本类型比较\n  * null 和undefined 相等\n  * 如果有一个操作数是NaN，则==返回false，!=返回true\n  * 如果都是对象，则比较两个对象是不是一个对象，是否来指向同一个对象。\n\n2、全等操作符(===,!==),不转换，只比较。\n规则：\n  * 只要是完全一样就为true，其他为false。\n\n##条件操作符\nES中的条件操作符(?:)\n```javascript\nvariable ? console.log(true): console.log(false);\n```\n##赋值操作符\n其中有+= ，-=，*=，／=，%=，<<=, >>=, >>>=\n\n##逗号操作符\n```javascript\nvar a = 1, b = 2, c = 3;\n```","source":"_posts/Javascript基本概念（三）.md","raw":"---\ntitle: Javascript 基本概念（三）\ndate: 2018-06-13 23:27:09\ntags: Javascript\ncategories: JS高程填坑笔记\n---\n这是JS高程第三章的第三部分。这一章内容是真的多。。我觉得重新刷高程，对我来说，也是一种不一样的进步吧。\n本节的主要内容是\n* 操作符\n\n## 一元操作符\n只能操作一个一个值的操作符叫做<b>一元操作符</b>。\n1、递增递减操作符\n  有两个版本，前置型和后置型。\n  前置型，先操作，后执行。\n  后置型，先执行，后操作。\n```javascript\nlet a = 5, b = 6;\nlet sum = ++a + b;\nlet sum2 = a++ + b;\nconsole.log(sum); //12\nconsole.log(sum2) //12\nconsole.log(a); //7\n```\n  递增递减操作符对数值，布尔，字符串，对象都有作用！！！！！\n  规则如下：\n  \n  * 如果字符串包含有效数字，则先转化成数值变量，然后加减1；不包含有效数字，则转化成NaN。字符串变量变成数值变量\n  * 数值变量加减1；\n  * 布尔变量，true先变成1，false变成0，然后加减1,布尔变了转换成数值变量；\n  * 对象变量，先查看valueOf()方法，如果是NaN，则调用toString()，对象转换成数值变量。\n\n2、一元加减操作符。\n  一元+操作符，会像Number()方法一样对变量转换成数值变量`var a; a = +a`;\n  一元-操作符，主要是变成负数。会像Number()方法一样，不过是负数。\n\n## 位操作符\n首先ES里所有的数值都是有64位来储存，但是位操作符并不是操作64位，而是先转化成32位的整数，然后操作，再将结果转换成64位的，这样，NaN和Infinity就会变成0。\n对于有符号数，第32位是符号位，0代表正数，1代表负数，符号位决定了其他位数值的格式。剩下31位用来储存数据。\n正数都是以二进制格式存储，负数以二进制的补码格式存储。默认情况下，ES里所有的正数都是有符号数。\n无符号数，第32位是数值。但是无符号数只能是正数。\n位操作符对其他变量，会先用Number()方法变成数值，然后再按位操作。\n1、按位非（NOT）\n  按位非是用～表示，执行按位非的结果是返回数值的反码。\n2、按位与（AND）\n  按位与是用&表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是1得1，其他为0；\n3、按位或（OR）\n  按位或是用|表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是0得0，其他为1；\n4、按位异或（XOR）\n  按位或是用^表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，相同得0，不同为1；\n5、左移\n  左移用&lt;&lt;表示，会将数值所有位数向左移动指定的位数。后面补0；左移不会影响符号。\n6、有符号右移\n  有符号右移用&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；保留符号位，不会影响符号。\n7、无符号右移\n  无符号右移用&gt;&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；会影响符号。而且会把负数的补码当成二进制码来运算。\n\n## 布尔运算符\n布尔运算符有三个，主要用来测试值的关系\n1、逻辑非(!)\n这个操作符会返回一个布尔值，逻辑非运算会将操作数先转换成布尔值，然后求反。\n  * 操作数是对象，返回false\n  * 操作数是空字符串，返回true\n  * 操作数是非空字符串，返回false\n  * 操作数是非0数值，返回false\n  * 操作数是0，null，NaN，undefined，返回true\n  \n2、逻辑与(&&)\n逻辑与操作符两边有两个操作数。都是true才为true。\n逻辑与操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。\n规则：\n  * 如果第一个操作数是对象，则返回第二个操作数\n  * 如果第二个操作数是对象，则必须第一个操作数是true才会返回该对象。\n  * 如果两个数都是对象，则返回第二个操作数\n  * 如果有一个操作数是null，NaN，undefined，则返回null，NaN，undefined。\n  \n逻辑与属于短路操作，第一个操作数能决定结果，就不会对第二个操作数求值。\n\n3、逻辑或(||)\n逻辑或两边有两个操作数，有一个为true就是true。\n逻辑或操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。\n规则：\n  * 如果第一个操作数是对象，则返回第一个操作数\n  * 如果第一个操作数是false，则返回第二个操作数\n  * 两个操作数都是对象，则返回第一个操作数\n  * 如果两个操作数是null，NaN，undefined，则返回null，NaN，undefined。\n\n## 乘性操作符\nES有三个乘性操作符，乘法，除法和求模。\n如果乘性操作符的某一个操作数不是数值，则将会用Number()方法，先转换成数值。\n1、乘法(*)\n规则：\n  * 乘积超过限制，则显示Infinity或者-Infinity\n  * 有一个操作数为NaN，结果为NaN\n  * Infinity与0相乘，结果是NaN\n  * Infinity与非0数相乘，结果是Infinity或者-Infinity\n  * Infinity与Infinity相乘，结果是Infinity\n  \n2、除法(/)\n规则：\n  * Infinity与Infinity相除，结果是NaN\n  * 0/0结果是NaN\n  * 其他操作数／0 结果是Infinity或者-Infinity\n\n3、求模(%)\n规则：\n  * Infinity%操作数 结果是NaN\n  * 操作数%0，结果是NaN\n  * Infinity%Infinity，结果是NaN\n  * 操作数%Infinity，结果是操作数\n\n## 加性操作符\nES中有两个加性操作符，加法和减法\n1、加法(+)\n规则：\n  * 有一个操作数是NaN，结果就是NaN\n  * Infinity + Infinity = Infinity\n  * -Infinity + -Infinity = -Infinity\n  * Infinity + -Infinity = NaN\n  * +0 + +0 = +0\n  * -0 + -0 = -0\n  * +0 + -0 = +0\n  * 两个操作数都是字符串，则将字符串拼接起来\n  * 只有一个操作数是字符串，另一个操作数则会转换成字符串，然后拼接起来。\n\n2、减法(-)\n规则：\n  * Infinity - Infinity = NaN\n  * -Infinity - -Infinity = NaN\n  * Infinity - -Infinity = Infinity\n  * -Infinity - Infinity = -Infinity\n\n## 关系操作符\n关系操作符有大于(>)，小于(<),小于等于(<=),大于等于(>=)\n规则：\n  * 都是数值，执行数值比较\n  * 都是字符串，执行字符串编码比较\n  * 一个是数值，则另一个转换成数值比较\n\n## 相等操作符\nES中提供了两种相等操作符：\n相等操作符：先转换再比较\n全等操作符：不转换只比较\n1、相等操作符(==,!=),强制转型，然后比较。\n规则：\n  * 如果有一个是布尔类型的操作数，则先转换成数值。\n  * 如果有一个是数值，一个是字符串，则将字符串转换成数值\n  * 如果有一个是对象，则用valueOf转成基本类型比较\n  * null 和undefined 相等\n  * 如果有一个操作数是NaN，则==返回false，!=返回true\n  * 如果都是对象，则比较两个对象是不是一个对象，是否来指向同一个对象。\n\n2、全等操作符(===,!==),不转换，只比较。\n规则：\n  * 只要是完全一样就为true，其他为false。\n\n##条件操作符\nES中的条件操作符(?:)\n```javascript\nvariable ? console.log(true): console.log(false);\n```\n##赋值操作符\n其中有+= ，-=，*=，／=，%=，<<=, >>=, >>>=\n\n##逗号操作符\n```javascript\nvar a = 1, b = 2, c = 3;\n```","slug":"Javascript基本概念（三）","published":1,"updated":"2018-06-19T03:25:22.000Z","_id":"cjil46y9o0004d6spvlwqyfwn","comments":1,"layout":"post","photos":[],"link":"","content":"<p>这是JS高程第三章的第三部分。这一章内容是真的多。。我觉得重新刷高程，对我来说，也是一种不一样的进步吧。<br>本节的主要内容是</p>\n<ul>\n<li>操作符</li>\n</ul>\n<h2 id=\"一元操作符\"><a href=\"#一元操作符\" class=\"headerlink\" title=\"一元操作符\"></a>一元操作符</h2><p>只能操作一个一个值的操作符叫做<b>一元操作符</b>。<br>1、递增递减操作符<br>  有两个版本，前置型和后置型。<br>  前置型，先操作，后执行。<br>  后置型，先执行，后操作。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">5</span>, b = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sum = ++a + b;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sum2 = a++ + b;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sum); <span class=\"comment\">//12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sum2) <span class=\"comment\">//12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//7</span></span><br></pre></td></tr></table></figure></p>\n<p>  递增递减操作符对数值，布尔，字符串，对象都有作用！！！！！<br>  规则如下：</p>\n<ul>\n<li>如果字符串包含有效数字，则先转化成数值变量，然后加减1；不包含有效数字，则转化成NaN。字符串变量变成数值变量</li>\n<li>数值变量加减1；</li>\n<li>布尔变量，true先变成1，false变成0，然后加减1,布尔变了转换成数值变量；</li>\n<li>对象变量，先查看valueOf()方法，如果是NaN，则调用toString()，对象转换成数值变量。</li>\n</ul>\n<p>2、一元加减操作符。<br>  一元+操作符，会像Number()方法一样对变量转换成数值变量<code>var a; a = +a</code>;<br>  一元-操作符，主要是变成负数。会像Number()方法一样，不过是负数。</p>\n<h2 id=\"位操作符\"><a href=\"#位操作符\" class=\"headerlink\" title=\"位操作符\"></a>位操作符</h2><p>首先ES里所有的数值都是有64位来储存，但是位操作符并不是操作64位，而是先转化成32位的整数，然后操作，再将结果转换成64位的，这样，NaN和Infinity就会变成0。<br>对于有符号数，第32位是符号位，0代表正数，1代表负数，符号位决定了其他位数值的格式。剩下31位用来储存数据。<br>正数都是以二进制格式存储，负数以二进制的补码格式存储。默认情况下，ES里所有的正数都是有符号数。<br>无符号数，第32位是数值。但是无符号数只能是正数。<br>位操作符对其他变量，会先用Number()方法变成数值，然后再按位操作。<br>1、按位非（NOT）<br>  按位非是用～表示，执行按位非的结果是返回数值的反码。<br>2、按位与（AND）<br>  按位与是用&amp;表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是1得1，其他为0；<br>3、按位或（OR）<br>  按位或是用|表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是0得0，其他为1；<br>4、按位异或（XOR）<br>  按位或是用^表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，相同得0，不同为1；<br>5、左移<br>  左移用&lt;&lt;表示，会将数值所有位数向左移动指定的位数。后面补0；左移不会影响符号。<br>6、有符号右移<br>  有符号右移用&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；保留符号位，不会影响符号。<br>7、无符号右移<br>  无符号右移用&gt;&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；会影响符号。而且会把负数的补码当成二进制码来运算。</p>\n<h2 id=\"布尔运算符\"><a href=\"#布尔运算符\" class=\"headerlink\" title=\"布尔运算符\"></a>布尔运算符</h2><p>布尔运算符有三个，主要用来测试值的关系<br>1、逻辑非(!)<br>这个操作符会返回一个布尔值，逻辑非运算会将操作数先转换成布尔值，然后求反。</p>\n<ul>\n<li>操作数是对象，返回false</li>\n<li>操作数是空字符串，返回true</li>\n<li>操作数是非空字符串，返回false</li>\n<li>操作数是非0数值，返回false</li>\n<li>操作数是0，null，NaN，undefined，返回true</li>\n</ul>\n<p>2、逻辑与(&amp;&amp;)<br>逻辑与操作符两边有两个操作数。都是true才为true。<br>逻辑与操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。<br>规则：</p>\n<ul>\n<li>如果第一个操作数是对象，则返回第二个操作数</li>\n<li>如果第二个操作数是对象，则必须第一个操作数是true才会返回该对象。</li>\n<li>如果两个数都是对象，则返回第二个操作数</li>\n<li>如果有一个操作数是null，NaN，undefined，则返回null，NaN，undefined。</li>\n</ul>\n<p>逻辑与属于短路操作，第一个操作数能决定结果，就不会对第二个操作数求值。</p>\n<p>3、逻辑或(||)<br>逻辑或两边有两个操作数，有一个为true就是true。<br>逻辑或操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。<br>规则：</p>\n<ul>\n<li>如果第一个操作数是对象，则返回第一个操作数</li>\n<li>如果第一个操作数是false，则返回第二个操作数</li>\n<li>两个操作数都是对象，则返回第一个操作数</li>\n<li>如果两个操作数是null，NaN，undefined，则返回null，NaN，undefined。</li>\n</ul>\n<h2 id=\"乘性操作符\"><a href=\"#乘性操作符\" class=\"headerlink\" title=\"乘性操作符\"></a>乘性操作符</h2><p>ES有三个乘性操作符，乘法，除法和求模。<br>如果乘性操作符的某一个操作数不是数值，则将会用Number()方法，先转换成数值。<br>1、乘法(*)<br>规则：</p>\n<ul>\n<li>乘积超过限制，则显示Infinity或者-Infinity</li>\n<li>有一个操作数为NaN，结果为NaN</li>\n<li>Infinity与0相乘，结果是NaN</li>\n<li>Infinity与非0数相乘，结果是Infinity或者-Infinity</li>\n<li>Infinity与Infinity相乘，结果是Infinity</li>\n</ul>\n<p>2、除法(/)<br>规则：</p>\n<ul>\n<li>Infinity与Infinity相除，结果是NaN</li>\n<li>0/0结果是NaN</li>\n<li>其他操作数／0 结果是Infinity或者-Infinity</li>\n</ul>\n<p>3、求模(%)<br>规则：</p>\n<ul>\n<li>Infinity%操作数 结果是NaN</li>\n<li>操作数%0，结果是NaN</li>\n<li>Infinity%Infinity，结果是NaN</li>\n<li>操作数%Infinity，结果是操作数</li>\n</ul>\n<h2 id=\"加性操作符\"><a href=\"#加性操作符\" class=\"headerlink\" title=\"加性操作符\"></a>加性操作符</h2><p>ES中有两个加性操作符，加法和减法<br>1、加法(+)<br>规则：</p>\n<ul>\n<li>有一个操作数是NaN，结果就是NaN</li>\n<li>Infinity + Infinity = Infinity</li>\n<li>-Infinity + -Infinity = -Infinity</li>\n<li>Infinity + -Infinity = NaN</li>\n<li>+0 + +0 = +0</li>\n<li>-0 + -0 = -0</li>\n<li>+0 + -0 = +0</li>\n<li>两个操作数都是字符串，则将字符串拼接起来</li>\n<li>只有一个操作数是字符串，另一个操作数则会转换成字符串，然后拼接起来。</li>\n</ul>\n<p>2、减法(-)<br>规则：</p>\n<ul>\n<li>Infinity - Infinity = NaN</li>\n<li>-Infinity - -Infinity = NaN</li>\n<li>Infinity - -Infinity = Infinity</li>\n<li>-Infinity - Infinity = -Infinity</li>\n</ul>\n<h2 id=\"关系操作符\"><a href=\"#关系操作符\" class=\"headerlink\" title=\"关系操作符\"></a>关系操作符</h2><p>关系操作符有大于(&gt;)，小于(&lt;),小于等于(&lt;=),大于等于(&gt;=)<br>规则：</p>\n<ul>\n<li>都是数值，执行数值比较</li>\n<li>都是字符串，执行字符串编码比较</li>\n<li>一个是数值，则另一个转换成数值比较</li>\n</ul>\n<h2 id=\"相等操作符\"><a href=\"#相等操作符\" class=\"headerlink\" title=\"相等操作符\"></a>相等操作符</h2><p>ES中提供了两种相等操作符：<br>相等操作符：先转换再比较<br>全等操作符：不转换只比较<br>1、相等操作符(==,!=),强制转型，然后比较。<br>规则：</p>\n<ul>\n<li>如果有一个是布尔类型的操作数，则先转换成数值。</li>\n<li>如果有一个是数值，一个是字符串，则将字符串转换成数值</li>\n<li>如果有一个是对象，则用valueOf转成基本类型比较</li>\n<li>null 和undefined 相等</li>\n<li>如果有一个操作数是NaN，则==返回false，!=返回true</li>\n<li>如果都是对象，则比较两个对象是不是一个对象，是否来指向同一个对象。</li>\n</ul>\n<p>2、全等操作符(===,!==),不转换，只比较。<br>规则：</p>\n<ul>\n<li>只要是完全一样就为true，其他为false。</li>\n</ul>\n<p>##条件操作符<br>ES中的条件操作符(?:)<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">variable ? <span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span>): <span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure></p>\n<p>##赋值操作符<br>其中有+= ，-=，*=，／=，%=，&lt;&lt;=, &gt;&gt;=, &gt;&gt;&gt;=</p>\n<p>##逗号操作符<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>这是JS高程第三章的第三部分。这一章内容是真的多。。我觉得重新刷高程，对我来说，也是一种不一样的进步吧。<br>本节的主要内容是</p>\n<ul>\n<li>操作符</li>\n</ul>\n<h2 id=\"一元操作符\"><a href=\"#一元操作符\" class=\"headerlink\" title=\"一元操作符\"></a>一元操作符</h2><p>只能操作一个一个值的操作符叫做<b>一元操作符</b>。<br>1、递增递减操作符<br>  有两个版本，前置型和后置型。<br>  前置型，先操作，后执行。<br>  后置型，先执行，后操作。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">5</span>, b = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sum = ++a + b;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sum2 = a++ + b;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sum); <span class=\"comment\">//12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sum2) <span class=\"comment\">//12</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">//7</span></span><br></pre></td></tr></table></figure></p>\n<p>  递增递减操作符对数值，布尔，字符串，对象都有作用！！！！！<br>  规则如下：</p>\n<ul>\n<li>如果字符串包含有效数字，则先转化成数值变量，然后加减1；不包含有效数字，则转化成NaN。字符串变量变成数值变量</li>\n<li>数值变量加减1；</li>\n<li>布尔变量，true先变成1，false变成0，然后加减1,布尔变了转换成数值变量；</li>\n<li>对象变量，先查看valueOf()方法，如果是NaN，则调用toString()，对象转换成数值变量。</li>\n</ul>\n<p>2、一元加减操作符。<br>  一元+操作符，会像Number()方法一样对变量转换成数值变量<code>var a; a = +a</code>;<br>  一元-操作符，主要是变成负数。会像Number()方法一样，不过是负数。</p>\n<h2 id=\"位操作符\"><a href=\"#位操作符\" class=\"headerlink\" title=\"位操作符\"></a>位操作符</h2><p>首先ES里所有的数值都是有64位来储存，但是位操作符并不是操作64位，而是先转化成32位的整数，然后操作，再将结果转换成64位的，这样，NaN和Infinity就会变成0。<br>对于有符号数，第32位是符号位，0代表正数，1代表负数，符号位决定了其他位数值的格式。剩下31位用来储存数据。<br>正数都是以二进制格式存储，负数以二进制的补码格式存储。默认情况下，ES里所有的正数都是有符号数。<br>无符号数，第32位是数值。但是无符号数只能是正数。<br>位操作符对其他变量，会先用Number()方法变成数值，然后再按位操作。<br>1、按位非（NOT）<br>  按位非是用～表示，执行按位非的结果是返回数值的反码。<br>2、按位与（AND）<br>  按位与是用&amp;表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是1得1，其他为0；<br>3、按位或（OR）<br>  按位或是用|表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，都是0得0，其他为1；<br>4、按位异或（XOR）<br>  按位或是用^表示，它有两个操作符数，运算的时候，将两个数的二进制每一位对齐，相同得0，不同为1；<br>5、左移<br>  左移用&lt;&lt;表示，会将数值所有位数向左移动指定的位数。后面补0；左移不会影响符号。<br>6、有符号右移<br>  有符号右移用&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；保留符号位，不会影响符号。<br>7、无符号右移<br>  无符号右移用&gt;&gt;&gt;表示，会将数值所有位数向右移动指定的位数。前面补0；会影响符号。而且会把负数的补码当成二进制码来运算。</p>\n<h2 id=\"布尔运算符\"><a href=\"#布尔运算符\" class=\"headerlink\" title=\"布尔运算符\"></a>布尔运算符</h2><p>布尔运算符有三个，主要用来测试值的关系<br>1、逻辑非(!)<br>这个操作符会返回一个布尔值，逻辑非运算会将操作数先转换成布尔值，然后求反。</p>\n<ul>\n<li>操作数是对象，返回false</li>\n<li>操作数是空字符串，返回true</li>\n<li>操作数是非空字符串，返回false</li>\n<li>操作数是非0数值，返回false</li>\n<li>操作数是0，null，NaN，undefined，返回true</li>\n</ul>\n<p>2、逻辑与(&amp;&amp;)<br>逻辑与操作符两边有两个操作数。都是true才为true。<br>逻辑与操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。<br>规则：</p>\n<ul>\n<li>如果第一个操作数是对象，则返回第二个操作数</li>\n<li>如果第二个操作数是对象，则必须第一个操作数是true才会返回该对象。</li>\n<li>如果两个数都是对象，则返回第二个操作数</li>\n<li>如果有一个操作数是null，NaN，undefined，则返回null，NaN，undefined。</li>\n</ul>\n<p>逻辑与属于短路操作，第一个操作数能决定结果，就不会对第二个操作数求值。</p>\n<p>3、逻辑或(||)<br>逻辑或两边有两个操作数，有一个为true就是true。<br>逻辑或操作可以应用于所有变量，在有一个操作数不是布尔值的情况下，逻辑与不一定会返回布尔值。<br>规则：</p>\n<ul>\n<li>如果第一个操作数是对象，则返回第一个操作数</li>\n<li>如果第一个操作数是false，则返回第二个操作数</li>\n<li>两个操作数都是对象，则返回第一个操作数</li>\n<li>如果两个操作数是null，NaN，undefined，则返回null，NaN，undefined。</li>\n</ul>\n<h2 id=\"乘性操作符\"><a href=\"#乘性操作符\" class=\"headerlink\" title=\"乘性操作符\"></a>乘性操作符</h2><p>ES有三个乘性操作符，乘法，除法和求模。<br>如果乘性操作符的某一个操作数不是数值，则将会用Number()方法，先转换成数值。<br>1、乘法(*)<br>规则：</p>\n<ul>\n<li>乘积超过限制，则显示Infinity或者-Infinity</li>\n<li>有一个操作数为NaN，结果为NaN</li>\n<li>Infinity与0相乘，结果是NaN</li>\n<li>Infinity与非0数相乘，结果是Infinity或者-Infinity</li>\n<li>Infinity与Infinity相乘，结果是Infinity</li>\n</ul>\n<p>2、除法(/)<br>规则：</p>\n<ul>\n<li>Infinity与Infinity相除，结果是NaN</li>\n<li>0/0结果是NaN</li>\n<li>其他操作数／0 结果是Infinity或者-Infinity</li>\n</ul>\n<p>3、求模(%)<br>规则：</p>\n<ul>\n<li>Infinity%操作数 结果是NaN</li>\n<li>操作数%0，结果是NaN</li>\n<li>Infinity%Infinity，结果是NaN</li>\n<li>操作数%Infinity，结果是操作数</li>\n</ul>\n<h2 id=\"加性操作符\"><a href=\"#加性操作符\" class=\"headerlink\" title=\"加性操作符\"></a>加性操作符</h2><p>ES中有两个加性操作符，加法和减法<br>1、加法(+)<br>规则：</p>\n<ul>\n<li>有一个操作数是NaN，结果就是NaN</li>\n<li>Infinity + Infinity = Infinity</li>\n<li>-Infinity + -Infinity = -Infinity</li>\n<li>Infinity + -Infinity = NaN</li>\n<li>+0 + +0 = +0</li>\n<li>-0 + -0 = -0</li>\n<li>+0 + -0 = +0</li>\n<li>两个操作数都是字符串，则将字符串拼接起来</li>\n<li>只有一个操作数是字符串，另一个操作数则会转换成字符串，然后拼接起来。</li>\n</ul>\n<p>2、减法(-)<br>规则：</p>\n<ul>\n<li>Infinity - Infinity = NaN</li>\n<li>-Infinity - -Infinity = NaN</li>\n<li>Infinity - -Infinity = Infinity</li>\n<li>-Infinity - Infinity = -Infinity</li>\n</ul>\n<h2 id=\"关系操作符\"><a href=\"#关系操作符\" class=\"headerlink\" title=\"关系操作符\"></a>关系操作符</h2><p>关系操作符有大于(&gt;)，小于(&lt;),小于等于(&lt;=),大于等于(&gt;=)<br>规则：</p>\n<ul>\n<li>都是数值，执行数值比较</li>\n<li>都是字符串，执行字符串编码比较</li>\n<li>一个是数值，则另一个转换成数值比较</li>\n</ul>\n<h2 id=\"相等操作符\"><a href=\"#相等操作符\" class=\"headerlink\" title=\"相等操作符\"></a>相等操作符</h2><p>ES中提供了两种相等操作符：<br>相等操作符：先转换再比较<br>全等操作符：不转换只比较<br>1、相等操作符(==,!=),强制转型，然后比较。<br>规则：</p>\n<ul>\n<li>如果有一个是布尔类型的操作数，则先转换成数值。</li>\n<li>如果有一个是数值，一个是字符串，则将字符串转换成数值</li>\n<li>如果有一个是对象，则用valueOf转成基本类型比较</li>\n<li>null 和undefined 相等</li>\n<li>如果有一个操作数是NaN，则==返回false，!=返回true</li>\n<li>如果都是对象，则比较两个对象是不是一个对象，是否来指向同一个对象。</li>\n</ul>\n<p>2、全等操作符(===,!==),不转换，只比较。<br>规则：</p>\n<ul>\n<li>只要是完全一样就为true，其他为false。</li>\n</ul>\n<p>##条件操作符<br>ES中的条件操作符(?:)<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">variable ? <span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span>): <span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure></p>\n<p>##赋值操作符<br>其中有+= ，-=，*=，／=，%=，&lt;&lt;=, &gt;&gt;=, &gt;&gt;&gt;=</p>\n<p>##逗号操作符<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1</span>, b = <span class=\"number\">2</span>, c = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"2018 书单","date":"2018-05-14T06:44:03.000Z","_content":"☐ 《原则》瑞·达利欧 著 中信出版社 \n✔ 《爆裂》伊藤穰一 杰夫·豪 著 中信出版社 \n☐ 《基因传》悉达多•穆克吉 著 中信出版社 \n☐ 《未来简史》尤瓦尔·赫拉利 著 中信出版社 \n☐ 《人类简史》尤瓦尔·赫拉利 著 中信出版社 \n✔ 《你的第一本哲学书》托马斯·内格尔 著 中信出版社 \n☐ 《自私的基因》理查德·道金斯 著 中信出版社 \n☐ 《不会被机器替代的人》杰夫·科尔文 著 中信出版社 \n☐ 《好好说话》马薇薇、黄执中、周玄毅等 著 中信出版社 \n☐ 《跃迁》古典 著 中信出版社 \n☐ 《智能时代》吴军  著 中信出版社 \n☐ 《细节：如何轻松影响他人》史蒂夫·马丁  诺瓦·戈尔茨坦  等 著 中信出版社 \n☐ 《向前一步》谢丽尔·桑德伯\n✔ 《人人都是产品经理》\n☐ 《穷爸爸富爸爸》\n☐ 《中国经济2018》","source":"_posts/2018-书单.md","raw":"---\ntitle: 2018 书单\ndate: 2018-05-14 14:44:03\ncategories: 浮生小记\n---\n☐ 《原则》瑞·达利欧 著 中信出版社 \n✔ 《爆裂》伊藤穰一 杰夫·豪 著 中信出版社 \n☐ 《基因传》悉达多•穆克吉 著 中信出版社 \n☐ 《未来简史》尤瓦尔·赫拉利 著 中信出版社 \n☐ 《人类简史》尤瓦尔·赫拉利 著 中信出版社 \n✔ 《你的第一本哲学书》托马斯·内格尔 著 中信出版社 \n☐ 《自私的基因》理查德·道金斯 著 中信出版社 \n☐ 《不会被机器替代的人》杰夫·科尔文 著 中信出版社 \n☐ 《好好说话》马薇薇、黄执中、周玄毅等 著 中信出版社 \n☐ 《跃迁》古典 著 中信出版社 \n☐ 《智能时代》吴军  著 中信出版社 \n☐ 《细节：如何轻松影响他人》史蒂夫·马丁  诺瓦·戈尔茨坦  等 著 中信出版社 \n☐ 《向前一步》谢丽尔·桑德伯\n✔ 《人人都是产品经理》\n☐ 《穷爸爸富爸爸》\n☐ 《中国经济2018》","slug":"2018-书单","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9p0005d6spbotvc2hf","content":"<p>☐ 《原则》瑞·达利欧 著 中信出版社<br>✔ 《爆裂》伊藤穰一 杰夫·豪 著 中信出版社<br>☐ 《基因传》悉达多•穆克吉 著 中信出版社<br>☐ 《未来简史》尤瓦尔·赫拉利 著 中信出版社<br>☐ 《人类简史》尤瓦尔·赫拉利 著 中信出版社<br>✔ 《你的第一本哲学书》托马斯·内格尔 著 中信出版社<br>☐ 《自私的基因》理查德·道金斯 著 中信出版社<br>☐ 《不会被机器替代的人》杰夫·科尔文 著 中信出版社<br>☐ 《好好说话》马薇薇、黄执中、周玄毅等 著 中信出版社<br>☐ 《跃迁》古典 著 中信出版社<br>☐ 《智能时代》吴军  著 中信出版社<br>☐ 《细节：如何轻松影响他人》史蒂夫·马丁  诺瓦·戈尔茨坦  等 著 中信出版社<br>☐ 《向前一步》谢丽尔·桑德伯<br>✔ 《人人都是产品经理》<br>☐ 《穷爸爸富爸爸》<br>☐ 《中国经济2018》</p>\n","site":{"data":{}},"excerpt":"","more":"<p>☐ 《原则》瑞·达利欧 著 中信出版社<br>✔ 《爆裂》伊藤穰一 杰夫·豪 著 中信出版社<br>☐ 《基因传》悉达多•穆克吉 著 中信出版社<br>☐ 《未来简史》尤瓦尔·赫拉利 著 中信出版社<br>☐ 《人类简史》尤瓦尔·赫拉利 著 中信出版社<br>✔ 《你的第一本哲学书》托马斯·内格尔 著 中信出版社<br>☐ 《自私的基因》理查德·道金斯 著 中信出版社<br>☐ 《不会被机器替代的人》杰夫·科尔文 著 中信出版社<br>☐ 《好好说话》马薇薇、黄执中、周玄毅等 著 中信出版社<br>☐ 《跃迁》古典 著 中信出版社<br>☐ 《智能时代》吴军  著 中信出版社<br>☐ 《细节：如何轻松影响他人》史蒂夫·马丁  诺瓦·戈尔茨坦  等 著 中信出版社<br>☐ 《向前一步》谢丽尔·桑德伯<br>✔ 《人人都是产品经理》<br>☐ 《穷爸爸富爸爸》<br>☐ 《中国经济2018》</p>\n"},{"title":"Event Loop 问题理解","date":"2018-05-09T02:08:43.000Z","_content":"Q1:事件循环机制是什么？\nA1:JavaScript 是典型的单线程单并发语言，即表示在同一时间内其只能执行单个任务，同域浏览器中 JavaScript 主线程拥有一个函数调用栈(主线程)以及多个任务队列。\n\nQ2:什么是任务？\nA2:任务分为两种，一种是同步任务，一种是异步任务。\n      同步任务，就是主线程中排队执行的任务；\n      异步任务，不先进入主线程，而是先进入“任务队列”的任务，只有任务队列通知了主线程，某个异步任务可以执行了，该任务才会进入主线程执行\n\nQ3:事件循环（Event Loop）的原理是什么？\nA3:首先，主线程会依次执行代码。\n    当主线栈的函数调用栈为空时，即会根据事件循环（Event Loop）机制来从任务队列中提取出待执行的回调并执行。\n    执行的过程同样会进行函数帧的入栈出栈操作。这样不断的循环往复，这就是事件循环（Event Loop）。\n    只要主线程空了，就会去读取”任务队列”，这就是JavaScript的运行机制\n\nQ4:任务队列中的任务有几种？\nA4:任务队列中的任务分为两种：MacroTask (task) 和 MicroTask 。Event Loop 处理这两种任务。\n\nQ5:MacroTask (task) 和 MicroTask各包含什么任务？\nA5: \n## microtasks:\n    process.nextTick\n    promise\n    Object.observe\n    MutationObserver\n## macrotasks:\n    setTimeout\n    setInterval\n    setImmediate\n    I/O\n    UI渲染\n\nQ6:MacroTask和MicroTask的运行机制是什么？\nA6:事件循环的顺序，决定了JavaScript代码的执行顺序。它从script(整体代码)开始第一次循环。之后全局上下文进入函数调用栈。直到调用栈清空(只剩全局)，然后执行所有的microtask。当所有可执行的micro-task执行完毕之后。循环再次从macro-task开始，找到其中一个任务队列执行完毕，然后再执行所有的micro-task，这样一直循环下去。\n一句话说，microtask将会被添加到任务队列末尾进行处理。\n\nMacroTask运行机制\n![MacroTask运行机制](https://github.com/kaisa911/studyNotes/blob/master/public/image/macroTask.png?raw=true)\nMicroTask运行机制\n![MicroTask运行机制](https://github.com/kaisa911/studyNotes/blob/master/public/image/microTask.png?raw=true)\nQ7:来尝试一道面试题\n```javascript\nconsole.log('start')\n\nconst interval = setInterval(() => {  \n  console.log('setInterval')\n}, 0)\n\nsetTimeout(() => {  \n  console.log('setTimeout 1')\n  Promise.resolve()\n      .then(() => {\n        console.log('promise 3')\n      })\n      .then(() => {\n        console.log('promise 4')\n      })\n      .then(() => {\n        setTimeout(() => {\n          console.log('setTimeout 2')\n          Promise.resolve()\n              .then(() => {\n                console.log('promise 5')\n              })\n              .then(() => {\n                console.log('promise 6')\n              })\n              .then(() => {\n                clearInterval(interval)\n              })\n        }, 0)\n      })\n}, 0)\n\nPromise.resolve()\n    .then(() => {  \n        console.log('promise 1')\n    })\n    .then(() => {\n        console.log('promise 2')\n    })\n```\nA7:start \npromise 1 \npromise 2 \nsetInterval \nsetTimeout 1 \npromise 3 \npromise 4 \nsetInterval \nsetTimeout 2 \npromise 5 \npromise 6","source":"_posts/Event-Loop-问题理解.md","raw":"---\ntitle: Event Loop 问题理解\ndate: 2018-05-09 10:08:43\ntags: Javascript\ncategories: 学习笔记\n---\nQ1:事件循环机制是什么？\nA1:JavaScript 是典型的单线程单并发语言，即表示在同一时间内其只能执行单个任务，同域浏览器中 JavaScript 主线程拥有一个函数调用栈(主线程)以及多个任务队列。\n\nQ2:什么是任务？\nA2:任务分为两种，一种是同步任务，一种是异步任务。\n      同步任务，就是主线程中排队执行的任务；\n      异步任务，不先进入主线程，而是先进入“任务队列”的任务，只有任务队列通知了主线程，某个异步任务可以执行了，该任务才会进入主线程执行\n\nQ3:事件循环（Event Loop）的原理是什么？\nA3:首先，主线程会依次执行代码。\n    当主线栈的函数调用栈为空时，即会根据事件循环（Event Loop）机制来从任务队列中提取出待执行的回调并执行。\n    执行的过程同样会进行函数帧的入栈出栈操作。这样不断的循环往复，这就是事件循环（Event Loop）。\n    只要主线程空了，就会去读取”任务队列”，这就是JavaScript的运行机制\n\nQ4:任务队列中的任务有几种？\nA4:任务队列中的任务分为两种：MacroTask (task) 和 MicroTask 。Event Loop 处理这两种任务。\n\nQ5:MacroTask (task) 和 MicroTask各包含什么任务？\nA5: \n## microtasks:\n    process.nextTick\n    promise\n    Object.observe\n    MutationObserver\n## macrotasks:\n    setTimeout\n    setInterval\n    setImmediate\n    I/O\n    UI渲染\n\nQ6:MacroTask和MicroTask的运行机制是什么？\nA6:事件循环的顺序，决定了JavaScript代码的执行顺序。它从script(整体代码)开始第一次循环。之后全局上下文进入函数调用栈。直到调用栈清空(只剩全局)，然后执行所有的microtask。当所有可执行的micro-task执行完毕之后。循环再次从macro-task开始，找到其中一个任务队列执行完毕，然后再执行所有的micro-task，这样一直循环下去。\n一句话说，microtask将会被添加到任务队列末尾进行处理。\n\nMacroTask运行机制\n![MacroTask运行机制](https://github.com/kaisa911/studyNotes/blob/master/public/image/macroTask.png?raw=true)\nMicroTask运行机制\n![MicroTask运行机制](https://github.com/kaisa911/studyNotes/blob/master/public/image/microTask.png?raw=true)\nQ7:来尝试一道面试题\n```javascript\nconsole.log('start')\n\nconst interval = setInterval(() => {  \n  console.log('setInterval')\n}, 0)\n\nsetTimeout(() => {  \n  console.log('setTimeout 1')\n  Promise.resolve()\n      .then(() => {\n        console.log('promise 3')\n      })\n      .then(() => {\n        console.log('promise 4')\n      })\n      .then(() => {\n        setTimeout(() => {\n          console.log('setTimeout 2')\n          Promise.resolve()\n              .then(() => {\n                console.log('promise 5')\n              })\n              .then(() => {\n                console.log('promise 6')\n              })\n              .then(() => {\n                clearInterval(interval)\n              })\n        }, 0)\n      })\n}, 0)\n\nPromise.resolve()\n    .then(() => {  \n        console.log('promise 1')\n    })\n    .then(() => {\n        console.log('promise 2')\n    })\n```\nA7:start \npromise 1 \npromise 2 \nsetInterval \nsetTimeout 1 \npromise 3 \npromise 4 \nsetInterval \nsetTimeout 2 \npromise 5 \npromise 6","slug":"Event-Loop-问题理解","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9r0006d6sp2z4s7kru","content":"<p>Q1:事件循环机制是什么？<br>A1:JavaScript 是典型的单线程单并发语言，即表示在同一时间内其只能执行单个任务，同域浏览器中 JavaScript 主线程拥有一个函数调用栈(主线程)以及多个任务队列。</p>\n<p>Q2:什么是任务？<br>A2:任务分为两种，一种是同步任务，一种是异步任务。<br>      同步任务，就是主线程中排队执行的任务；<br>      异步任务，不先进入主线程，而是先进入“任务队列”的任务，只有任务队列通知了主线程，某个异步任务可以执行了，该任务才会进入主线程执行</p>\n<p>Q3:事件循环（Event Loop）的原理是什么？<br>A3:首先，主线程会依次执行代码。<br>    当主线栈的函数调用栈为空时，即会根据事件循环（Event Loop）机制来从任务队列中提取出待执行的回调并执行。<br>    执行的过程同样会进行函数帧的入栈出栈操作。这样不断的循环往复，这就是事件循环（Event Loop）。<br>    只要主线程空了，就会去读取”任务队列”，这就是JavaScript的运行机制</p>\n<p>Q4:任务队列中的任务有几种？<br>A4:任务队列中的任务分为两种：MacroTask (task) 和 MicroTask 。Event Loop 处理这两种任务。</p>\n<p>Q5:MacroTask (task) 和 MicroTask各包含什么任务？<br>A5: </p>\n<h2 id=\"microtasks\"><a href=\"#microtasks\" class=\"headerlink\" title=\"microtasks:\"></a>microtasks:</h2><pre><code>process.nextTick\npromise\nObject.observe\nMutationObserver\n</code></pre><h2 id=\"macrotasks\"><a href=\"#macrotasks\" class=\"headerlink\" title=\"macrotasks:\"></a>macrotasks:</h2><pre><code>setTimeout\nsetInterval\nsetImmediate\nI/O\nUI渲染\n</code></pre><p>Q6:MacroTask和MicroTask的运行机制是什么？<br>A6:事件循环的顺序，决定了JavaScript代码的执行顺序。它从script(整体代码)开始第一次循环。之后全局上下文进入函数调用栈。直到调用栈清空(只剩全局)，然后执行所有的microtask。当所有可执行的micro-task执行完毕之后。循环再次从macro-task开始，找到其中一个任务队列执行完毕，然后再执行所有的micro-task，这样一直循环下去。<br>一句话说，microtask将会被添加到任务队列末尾进行处理。</p>\n<p>MacroTask运行机制<br><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/macroTask.png?raw=true\" alt=\"MacroTask运行机制\"><br>MicroTask运行机制<br><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/microTask.png?raw=true\" alt=\"MicroTask运行机制\"><br>Q7:来尝试一道面试题<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> interval = setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setInterval'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout 1'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 3'</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 4'</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout 2'</span>)</span><br><span class=\"line\">          <span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 5'</span>)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 6'</span>)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                clearInterval(interval)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">        &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 1'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 2'</span>)</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure></p>\n<p>A7:start<br>promise 1<br>promise 2<br>setInterval<br>setTimeout 1<br>promise 3<br>promise 4<br>setInterval<br>setTimeout 2<br>promise 5<br>promise 6</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Q1:事件循环机制是什么？<br>A1:JavaScript 是典型的单线程单并发语言，即表示在同一时间内其只能执行单个任务，同域浏览器中 JavaScript 主线程拥有一个函数调用栈(主线程)以及多个任务队列。</p>\n<p>Q2:什么是任务？<br>A2:任务分为两种，一种是同步任务，一种是异步任务。<br>      同步任务，就是主线程中排队执行的任务；<br>      异步任务，不先进入主线程，而是先进入“任务队列”的任务，只有任务队列通知了主线程，某个异步任务可以执行了，该任务才会进入主线程执行</p>\n<p>Q3:事件循环（Event Loop）的原理是什么？<br>A3:首先，主线程会依次执行代码。<br>    当主线栈的函数调用栈为空时，即会根据事件循环（Event Loop）机制来从任务队列中提取出待执行的回调并执行。<br>    执行的过程同样会进行函数帧的入栈出栈操作。这样不断的循环往复，这就是事件循环（Event Loop）。<br>    只要主线程空了，就会去读取”任务队列”，这就是JavaScript的运行机制</p>\n<p>Q4:任务队列中的任务有几种？<br>A4:任务队列中的任务分为两种：MacroTask (task) 和 MicroTask 。Event Loop 处理这两种任务。</p>\n<p>Q5:MacroTask (task) 和 MicroTask各包含什么任务？<br>A5: </p>\n<h2 id=\"microtasks\"><a href=\"#microtasks\" class=\"headerlink\" title=\"microtasks:\"></a>microtasks:</h2><pre><code>process.nextTick\npromise\nObject.observe\nMutationObserver\n</code></pre><h2 id=\"macrotasks\"><a href=\"#macrotasks\" class=\"headerlink\" title=\"macrotasks:\"></a>macrotasks:</h2><pre><code>setTimeout\nsetInterval\nsetImmediate\nI/O\nUI渲染\n</code></pre><p>Q6:MacroTask和MicroTask的运行机制是什么？<br>A6:事件循环的顺序，决定了JavaScript代码的执行顺序。它从script(整体代码)开始第一次循环。之后全局上下文进入函数调用栈。直到调用栈清空(只剩全局)，然后执行所有的microtask。当所有可执行的micro-task执行完毕之后。循环再次从macro-task开始，找到其中一个任务队列执行完毕，然后再执行所有的micro-task，这样一直循环下去。<br>一句话说，microtask将会被添加到任务队列末尾进行处理。</p>\n<p>MacroTask运行机制<br><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/macroTask.png?raw=true\" alt=\"MacroTask运行机制\"><br>MicroTask运行机制<br><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/microTask.png?raw=true\" alt=\"MicroTask运行机制\"><br>Q7:来尝试一道面试题<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'start'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> interval = setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setInterval'</span>)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout 1'</span>)</span><br><span class=\"line\">  <span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 3'</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 4'</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'setTimeout 2'</span>)</span><br><span class=\"line\">          <span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 5'</span>)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 6'</span>)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">              .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                clearInterval(interval)</span><br><span class=\"line\">              &#125;)</span><br><span class=\"line\">        &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">&#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve()</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;  </span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 1'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'promise 2'</span>)</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure></p>\n<p>A7:start<br>promise 1<br>promise 2<br>setInterval<br>setTimeout 1<br>promise 3<br>promise 4<br>setInterval<br>setTimeout 2<br>promise 5<br>promise 6</p>\n"},{"title":"Javascript 继承学习","date":"2018-05-08T07:07:28.000Z","_content":"javascript的继承方式有好多方式，之前ES5通过原型链继承，ES6中引入了Class，javascript可以像java一样使用extends关键字继承。现在整理一下js中的继承方式。\n\n<h2>ES5中的继承方式</h2>\n<h3>一、构造函数的继承</h3>\n现在有一个\"动物\"对象的构造函数\n```javascript\nfunction Animal(){\n  this.species = \"动物\";\n}\n```\n还有一个\"猫\"对象的构造函数。\n\n```javascript\nfunction Cat(name,color){\n  this.name = name;\n  this.color = color;\n}\n```\n1.构造函数绑定:使用call或apply方法，将父对象的构造函数绑定在子对象上。\n\n```javascript\nfunction Cat(name,color){\n  Animal.apply(this, arguments);\n  this.name = name;\n  this.color = color;\n}\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n此种继承方式只能继承父构造函数中的属性,不能继承父构造函数原型上的属性.Animal.apply(this, arguments)也可用Animal.call(this)替换.cat对象有两个层级,第一级存放着自有属性以及父构造器中的属性,第二级存放着自己函数原型上的属性(Cat.prototype)\n\n2.prototype模式:\n\n```javascript\nCat.prototype = new Animal();\nCat.prototype.constructor = Cat;\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n遵循一点，即如果替换了prototype对象，\n```javascript\no.prototype = {};\n```\n那么，下一步必然是为新的prototype对象加上constructor属性，并将这个属性指回原来的构造函数。\n```javascript\no.prototype.constructor = o;\n```\n此种继承方式既能继承父构造函数中的属性,也能继承父构造函数原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着父构造器的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.\n\n3.直接继承prototype:\n第3种方法是对第2种方法的改进。由于Animal对象中，不变的属性都可以直接写入Animal.prototype。所以，我们也可以让Cat()跳过 Animal()，直接继承Animal.prototype。\n\n先将Animal对象改写\n\n```javascript\nfunction Animal(){ }\nAnimal.prototype.species = \"动物\";\n```\n然后，将Cat的prototype对象，然后指向Animal的prototype对象，这样就完成了继承。\n\n```javascript\nCat.prototype = Animal.prototype;\nCat.prototype.constructor = Cat;\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)).注意:Cat.prototype.constructor = Cat会将Animal.prototype.constructor也改成Cat,从而影响父构造器创建对象\n\n4.空对象作为中介:\n\n```javascript\nfunction extend(Child, Parent) {\n  var F = function(){};\n  F.prototype = Parent.prototype;\n  Child.prototype = new F();\n  Child.prototype.constructor = Child;\n  Child.uber = Parent.prototype;\n}\n```\n用法：\n\n```javascript\nextend(Cat,Animal);\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n\n此种继承方式只能继承父构造器原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着临时构造器F的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.注意:临时构造器只充当中介的作用,一般不会有自己的属性.\n\n5.浅拷贝继承:\n首先，还是把Animal的所有不变属性，都放到它的prototype对象上。\n```javascript\nfunction Animal(){ }\nAnimal.prototype.species = \"动物\";\n```\n然后，再写一个函数，实现属性拷贝的目的。\n```javascript\nfunction extend2(Child, Parent) {\n  var p = Parent.prototype;\n  var c = Child.prototype;\n  for (var i in p) {\n    c[i] = p[i];\n  }\n  c.uber = p;\n}\n```\n用法：\n\n```javascript\nextend2(Cat, Animal);\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n\n此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的除了constructor和__proto__的属性(不会拷贝原型上的constructor和__proto__属性).适合父构造器原型上的自增属性为基本数据类型的情况.\n\n<h3>二、非构造函数的继承</h3>\n比如，现在有一个对象，叫做\"中国人\"。\n```javascript\nvar Chinese = {\n  nation:'中国'\n};\n```\n还有一个对象，叫做\"医生\"。\n```javascript\nvar Doctor ={\n  career:'医生'\n}\n```\n1.object()方法\n\n```javascript\nfunction object(o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n}\n```\n这个object()函数，其实只做一件事，就是把子对象的prototype属性，指向父对象，从而使得子对象与父对象连在一起。\n用法：\n第一步先在父对象的基础上，生成子对象：\n```javascript\nvar Doctor = object(Chinese);\n```\n然后，再加上子对象本身的属性：\n```javascript\nDoctor.career = '医生';\n```\n这时，子对象已经继承了父对象的属性了。\n```javascript\nalert(Doctor.nation); //中国\n```\n2.浅拷贝\n除了使用\"prototype链\"以外，还有另一种思路：把父对象的属性，全部拷贝给子对象，也能实现继承。\n\n就是在做拷贝：\n```javascript\nfunction extendCopy(p) {\nvar c = {};\nfor (var i in p) { \n  c[i] = p[i];\n}\nc.uber = p;\nreturn c;\n}\n```\n用法，这样写：\n```javascript\nvar Doctor = extendCopy(Chinese);\nDoctor.career = '医生';\nalert(Doctor.nation); // 中国\n```\n样的拷贝有一个问题。那就是，如果父对象的属性等于数组或另一个对象，那么实际上，子对象获得的只是一个内存地址，而不是真正拷贝，因此存在父对象被篡改的可能。\n\n3.深拷贝\n所谓\"深拷贝\"，就是能够实现真正意义上的数组和对象的拷贝。它的实现并不难，只要递归调用\"浅拷贝\"就行了。\n```javascript\nfunction deepCopy(p, c) {\n  var c = c || {};\n  for (var i in p) {\n    if (typeof p[i] === 'object') {\n      c[i] = (p[i].constructor === Array) ? [] : {};\n      deepCopy(p[i], c[i]);\n      } else {\n        c[i] = p[i];\n      }\n    }\n  return c;\n}\n```\n使用的时候这样写：\n```javascript\nvar Doctor = deepCopy(Chinese);\n```\n现在，给父对象加一个属性，值为数组。然后，在子对象上修改这个属性：\n这时，父对象就不会受到影响了。\n目前，jQuery库使用的就是这种继承方法。\n\n<h2>ES6中的继承方式</h2>\nClass 可以通过extends关键字实现继承，这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。\n```javascript\nclass Point {\n  //一些属性\n}\nclass ColorPoint extends Point {\n  //一些属性\n}\n// 等同于\nclass ColorPoint extends Point {\n  constructor(...args) {\n    super(...args);\n  }\n}\n```\n* 上面代码定义了一个ColorPoint类，该类通过extends关键字，继承了Point类的所有属性和方法。但是由于没有部署任何代码，所以这两个类完全一样，等于复制了一个Point类。\n* 如果子类没有定义constructor方法，这个方法会被默认添加，代码如下。也就是说，不管有没有显式定义，任何一个子类都有constructor方法。\n* 在子类的构造函数中，只有调用super之后，才可以使用this关键字，否则会报错。这是因为子类实例的构建，是基于对父类实例加工，只有super方法才能返回父类实例。\n* ES6 规定，在子类普通方法中通过super调用父类的方法时，方法内部的this指向当前的子类实例。","source":"_posts/Javascript 继承学习.md","raw":"---\ntitle: Javascript 继承学习\ndate: 2018-05-08 15:07:28\ntags: Javascript\ncategories: 学习笔记\n---\njavascript的继承方式有好多方式，之前ES5通过原型链继承，ES6中引入了Class，javascript可以像java一样使用extends关键字继承。现在整理一下js中的继承方式。\n\n<h2>ES5中的继承方式</h2>\n<h3>一、构造函数的继承</h3>\n现在有一个\"动物\"对象的构造函数\n```javascript\nfunction Animal(){\n  this.species = \"动物\";\n}\n```\n还有一个\"猫\"对象的构造函数。\n\n```javascript\nfunction Cat(name,color){\n  this.name = name;\n  this.color = color;\n}\n```\n1.构造函数绑定:使用call或apply方法，将父对象的构造函数绑定在子对象上。\n\n```javascript\nfunction Cat(name,color){\n  Animal.apply(this, arguments);\n  this.name = name;\n  this.color = color;\n}\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n此种继承方式只能继承父构造函数中的属性,不能继承父构造函数原型上的属性.Animal.apply(this, arguments)也可用Animal.call(this)替换.cat对象有两个层级,第一级存放着自有属性以及父构造器中的属性,第二级存放着自己函数原型上的属性(Cat.prototype)\n\n2.prototype模式:\n\n```javascript\nCat.prototype = new Animal();\nCat.prototype.constructor = Cat;\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n遵循一点，即如果替换了prototype对象，\n```javascript\no.prototype = {};\n```\n那么，下一步必然是为新的prototype对象加上constructor属性，并将这个属性指回原来的构造函数。\n```javascript\no.prototype.constructor = o;\n```\n此种继承方式既能继承父构造函数中的属性,也能继承父构造函数原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着父构造器的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.\n\n3.直接继承prototype:\n第3种方法是对第2种方法的改进。由于Animal对象中，不变的属性都可以直接写入Animal.prototype。所以，我们也可以让Cat()跳过 Animal()，直接继承Animal.prototype。\n\n先将Animal对象改写\n\n```javascript\nfunction Animal(){ }\nAnimal.prototype.species = \"动物\";\n```\n然后，将Cat的prototype对象，然后指向Animal的prototype对象，这样就完成了继承。\n\n```javascript\nCat.prototype = Animal.prototype;\nCat.prototype.constructor = Cat;\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)).注意:Cat.prototype.constructor = Cat会将Animal.prototype.constructor也改成Cat,从而影响父构造器创建对象\n\n4.空对象作为中介:\n\n```javascript\nfunction extend(Child, Parent) {\n  var F = function(){};\n  F.prototype = Parent.prototype;\n  Child.prototype = new F();\n  Child.prototype.constructor = Child;\n  Child.uber = Parent.prototype;\n}\n```\n用法：\n\n```javascript\nextend(Cat,Animal);\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n\n此种继承方式只能继承父构造器原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着临时构造器F的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.注意:临时构造器只充当中介的作用,一般不会有自己的属性.\n\n5.浅拷贝继承:\n首先，还是把Animal的所有不变属性，都放到它的prototype对象上。\n```javascript\nfunction Animal(){ }\nAnimal.prototype.species = \"动物\";\n```\n然后，再写一个函数，实现属性拷贝的目的。\n```javascript\nfunction extend2(Child, Parent) {\n  var p = Parent.prototype;\n  var c = Child.prototype;\n  for (var i in p) {\n    c[i] = p[i];\n  }\n  c.uber = p;\n}\n```\n用法：\n\n```javascript\nextend2(Cat, Animal);\nvar cat1 = new Cat(\"大毛\",\"黄色\");\nalert(cat1.species); // 动物\n```\n\n此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的除了constructor和__proto__的属性(不会拷贝原型上的constructor和__proto__属性).适合父构造器原型上的自增属性为基本数据类型的情况.\n\n<h3>二、非构造函数的继承</h3>\n比如，现在有一个对象，叫做\"中国人\"。\n```javascript\nvar Chinese = {\n  nation:'中国'\n};\n```\n还有一个对象，叫做\"医生\"。\n```javascript\nvar Doctor ={\n  career:'医生'\n}\n```\n1.object()方法\n\n```javascript\nfunction object(o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n}\n```\n这个object()函数，其实只做一件事，就是把子对象的prototype属性，指向父对象，从而使得子对象与父对象连在一起。\n用法：\n第一步先在父对象的基础上，生成子对象：\n```javascript\nvar Doctor = object(Chinese);\n```\n然后，再加上子对象本身的属性：\n```javascript\nDoctor.career = '医生';\n```\n这时，子对象已经继承了父对象的属性了。\n```javascript\nalert(Doctor.nation); //中国\n```\n2.浅拷贝\n除了使用\"prototype链\"以外，还有另一种思路：把父对象的属性，全部拷贝给子对象，也能实现继承。\n\n就是在做拷贝：\n```javascript\nfunction extendCopy(p) {\nvar c = {};\nfor (var i in p) { \n  c[i] = p[i];\n}\nc.uber = p;\nreturn c;\n}\n```\n用法，这样写：\n```javascript\nvar Doctor = extendCopy(Chinese);\nDoctor.career = '医生';\nalert(Doctor.nation); // 中国\n```\n样的拷贝有一个问题。那就是，如果父对象的属性等于数组或另一个对象，那么实际上，子对象获得的只是一个内存地址，而不是真正拷贝，因此存在父对象被篡改的可能。\n\n3.深拷贝\n所谓\"深拷贝\"，就是能够实现真正意义上的数组和对象的拷贝。它的实现并不难，只要递归调用\"浅拷贝\"就行了。\n```javascript\nfunction deepCopy(p, c) {\n  var c = c || {};\n  for (var i in p) {\n    if (typeof p[i] === 'object') {\n      c[i] = (p[i].constructor === Array) ? [] : {};\n      deepCopy(p[i], c[i]);\n      } else {\n        c[i] = p[i];\n      }\n    }\n  return c;\n}\n```\n使用的时候这样写：\n```javascript\nvar Doctor = deepCopy(Chinese);\n```\n现在，给父对象加一个属性，值为数组。然后，在子对象上修改这个属性：\n这时，父对象就不会受到影响了。\n目前，jQuery库使用的就是这种继承方法。\n\n<h2>ES6中的继承方式</h2>\nClass 可以通过extends关键字实现继承，这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。\n```javascript\nclass Point {\n  //一些属性\n}\nclass ColorPoint extends Point {\n  //一些属性\n}\n// 等同于\nclass ColorPoint extends Point {\n  constructor(...args) {\n    super(...args);\n  }\n}\n```\n* 上面代码定义了一个ColorPoint类，该类通过extends关键字，继承了Point类的所有属性和方法。但是由于没有部署任何代码，所以这两个类完全一样，等于复制了一个Point类。\n* 如果子类没有定义constructor方法，这个方法会被默认添加，代码如下。也就是说，不管有没有显式定义，任何一个子类都有constructor方法。\n* 在子类的构造函数中，只有调用super之后，才可以使用this关键字，否则会报错。这是因为子类实例的构建，是基于对父类实例加工，只有super方法才能返回父类实例。\n* ES6 规定，在子类普通方法中通过super调用父类的方法时，方法内部的this指向当前的子类实例。","slug":"Javascript 继承学习","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9u000ad6sp13lee1es","content":"<p>javascript的继承方式有好多方式，之前ES5通过原型链继承，ES6中引入了Class，javascript可以像java一样使用extends关键字继承。现在整理一下js中的继承方式。</p>\n<p></p><h2>ES5中的继承方式</h2><p></p>\n<p></p><h3>一、构造函数的继承</h3><br>现在有一个”动物”对象的构造函数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.species = <span class=\"string\">\"动物\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p>\n<p>还有一个”猫”对象的构造函数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span>(<span class=\"params\">name,color</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color = color;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>1.构造函数绑定:使用call或apply方法，将父对象的构造函数绑定在子对象上。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span>(<span class=\"params\">name,color</span>)</span>&#123;</span><br><span class=\"line\">  Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color = color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造函数中的属性,不能继承父构造函数原型上的属性.Animal.apply(this, arguments)也可用Animal.call(this)替换.cat对象有两个层级,第一级存放着自有属性以及父构造器中的属性,第二级存放着自己函数原型上的属性(Cat.prototype)</p>\n<p>2.prototype模式:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.prototype = <span class=\"keyword\">new</span> Animal();</span><br><span class=\"line\">Cat.prototype.constructor = Cat;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>遵循一点，即如果替换了prototype对象，<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.prototype = &#123;&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>那么，下一步必然是为新的prototype对象加上constructor属性，并将这个属性指回原来的构造函数。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.prototype.constructor = o;</span><br></pre></td></tr></table></figure></p>\n<p>此种继承方式既能继承父构造函数中的属性,也能继承父构造函数原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着父构造器的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.</p>\n<p>3.直接继承prototype:<br>第3种方法是对第2种方法的改进。由于Animal对象中，不变的属性都可以直接写入Animal.prototype。所以，我们也可以让Cat()跳过 Animal()，直接继承Animal.prototype。</p>\n<p>先将Animal对象改写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123; &#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">\"动物\"</span>;</span><br></pre></td></tr></table></figure>\n<p>然后，将Cat的prototype对象，然后指向Animal的prototype对象，这样就完成了继承。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.prototype = Animal.prototype;</span><br><span class=\"line\">Cat.prototype.constructor = Cat;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)).注意:Cat.prototype.constructor = Cat会将Animal.prototype.constructor也改成Cat,从而影响父构造器创建对象</p>\n<p>4.空对象作为中介:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span>(<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> F = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\">  F.prototype = Parent.prototype;</span><br><span class=\"line\">  Child.prototype = <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">  Child.prototype.constructor = Child;</span><br><span class=\"line\">  Child.uber = Parent.prototype;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extend(Cat,Animal);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着临时构造器F的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.注意:临时构造器只充当中介的作用,一般不会有自己的属性.</p>\n<p>5.浅拷贝继承:<br>首先，还是把Animal的所有不变属性，都放到它的prototype对象上。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123; &#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">\"动物\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>然后，再写一个函数，实现属性拷贝的目的。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend2</span>(<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p = Parent.prototype;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = Child.prototype;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123;</span><br><span class=\"line\">    c[i] = p[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  c.uber = p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extend2(Cat, Animal);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的除了constructor和<strong>proto</strong>的属性(不会拷贝原型上的constructor和<strong>proto</strong>属性).适合父构造器原型上的自增属性为基本数据类型的情况.</p>\n<p></p><h3>二、非构造函数的继承</h3><br>比如，现在有一个对象，叫做”中国人”。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Chinese = &#123;</span><br><span class=\"line\">  nation:<span class=\"string\">'中国'</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><p></p>\n<p>还有一个对象，叫做”医生”。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor =&#123;</span><br><span class=\"line\">  career:<span class=\"string\">'医生'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>1.object()方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">object</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">  F.prototype = o;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个object()函数，其实只做一件事，就是把子对象的prototype属性，指向父对象，从而使得子对象与父对象连在一起。<br>用法：<br>第一步先在父对象的基础上，生成子对象：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = object(Chinese);</span><br></pre></td></tr></table></figure></p>\n<p>然后，再加上子对象本身的属性：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Doctor.career = <span class=\"string\">'医生'</span>;</span><br></pre></td></tr></table></figure></p>\n<p>这时，子对象已经继承了父对象的属性了。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(Doctor.nation); <span class=\"comment\">//中国</span></span><br></pre></td></tr></table></figure></p>\n<p>2.浅拷贝<br>除了使用”prototype链”以外，还有另一种思路：把父对象的属性，全部拷贝给子对象，也能实现继承。</p>\n<p>就是在做拷贝：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extendCopy</span>(<span class=\"params\">p</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> c = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123; </span><br><span class=\"line\">  c[i] = p[i];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">c.uber = p;</span><br><span class=\"line\"><span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>用法，这样写：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = extendCopy(Chinese);</span><br><span class=\"line\">Doctor.career = <span class=\"string\">'医生'</span>;</span><br><span class=\"line\">alert(Doctor.nation); <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure></p>\n<p>样的拷贝有一个问题。那就是，如果父对象的属性等于数组或另一个对象，那么实际上，子对象获得的只是一个内存地址，而不是真正拷贝，因此存在父对象被篡改的可能。</p>\n<p>3.深拷贝<br>所谓”深拷贝”，就是能够实现真正意义上的数组和对象的拷贝。它的实现并不难，只要递归调用”浅拷贝”就行了。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepCopy</span>(<span class=\"params\">p, c</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = c || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> p[i] === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      c[i] = (p[i].constructor === <span class=\"built_in\">Array</span>) ? [] : &#123;&#125;;</span><br><span class=\"line\">      deepCopy(p[i], c[i]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        c[i] = p[i];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>使用的时候这样写：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = deepCopy(Chinese);</span><br></pre></td></tr></table></figure></p>\n<p>现在，给父对象加一个属性，值为数组。然后，在子对象上修改这个属性：<br>这时，父对象就不会受到影响了。<br>目前，jQuery库使用的就是这种继承方法。</p>\n<p></p><h2>ES6中的继承方式</h2><br>Class 可以通过extends关键字实现继承，这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//一些属性</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ColorPoint</span> <span class=\"keyword\">extends</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//一些属性</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 等同于</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ColorPoint</span> <span class=\"keyword\">extends</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(...args) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p>\n<ul>\n<li>上面代码定义了一个ColorPoint类，该类通过extends关键字，继承了Point类的所有属性和方法。但是由于没有部署任何代码，所以这两个类完全一样，等于复制了一个Point类。</li>\n<li>如果子类没有定义constructor方法，这个方法会被默认添加，代码如下。也就是说，不管有没有显式定义，任何一个子类都有constructor方法。</li>\n<li>在子类的构造函数中，只有调用super之后，才可以使用this关键字，否则会报错。这是因为子类实例的构建，是基于对父类实例加工，只有super方法才能返回父类实例。</li>\n<li>ES6 规定，在子类普通方法中通过super调用父类的方法时，方法内部的this指向当前的子类实例。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>javascript的继承方式有好多方式，之前ES5通过原型链继承，ES6中引入了Class，javascript可以像java一样使用extends关键字继承。现在整理一下js中的继承方式。</p>\n<p></p><h2>ES5中的继承方式</h2><p></p>\n<p></p><h3>一、构造函数的继承</h3><br>现在有一个”动物”对象的构造函数<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.species = <span class=\"string\">\"动物\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p>\n<p>还有一个”猫”对象的构造函数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span>(<span class=\"params\">name,color</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color = color;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>1.构造函数绑定:使用call或apply方法，将父对象的构造函数绑定在子对象上。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Cat</span>(<span class=\"params\">name,color</span>)</span>&#123;</span><br><span class=\"line\">  Animal.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.color = color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造函数中的属性,不能继承父构造函数原型上的属性.Animal.apply(this, arguments)也可用Animal.call(this)替换.cat对象有两个层级,第一级存放着自有属性以及父构造器中的属性,第二级存放着自己函数原型上的属性(Cat.prototype)</p>\n<p>2.prototype模式:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.prototype = <span class=\"keyword\">new</span> Animal();</span><br><span class=\"line\">Cat.prototype.constructor = Cat;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>遵循一点，即如果替换了prototype对象，<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.prototype = &#123;&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>那么，下一步必然是为新的prototype对象加上constructor属性，并将这个属性指回原来的构造函数。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">o.prototype.constructor = o;</span><br></pre></td></tr></table></figure></p>\n<p>此种继承方式既能继承父构造函数中的属性,也能继承父构造函数原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着父构造器的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.</p>\n<p>3.直接继承prototype:<br>第3种方法是对第2种方法的改进。由于Animal对象中，不变的属性都可以直接写入Animal.prototype。所以，我们也可以让Cat()跳过 Animal()，直接继承Animal.prototype。</p>\n<p>先将Animal对象改写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123; &#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">\"动物\"</span>;</span><br></pre></td></tr></table></figure>\n<p>然后，将Cat的prototype对象，然后指向Animal的prototype对象，这样就完成了继承。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Cat.prototype = Animal.prototype;</span><br><span class=\"line\">Cat.prototype.constructor = Cat;</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)).注意:Cat.prototype.constructor = Cat会将Animal.prototype.constructor也改成Cat,从而影响父构造器创建对象</p>\n<p>4.空对象作为中介:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span>(<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> F = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\">  F.prototype = Parent.prototype;</span><br><span class=\"line\">  Child.prototype = <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">  Child.prototype.constructor = Child;</span><br><span class=\"line\">  Child.uber = Parent.prototype;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extend(Cat,Animal);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有三个层级,第一级存放着自有属性,第二级存放着临时构造器F的属性(加上constructor,指向创建该对象(cat)的构造器(Cat)),第三级存放着父构造器原型上的属性.注意:临时构造器只充当中介的作用,一般不会有自己的属性.</p>\n<p>5.浅拷贝继承:<br>首先，还是把Animal的所有不变属性，都放到它的prototype对象上。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Animal</span>(<span class=\"params\"></span>)</span>&#123; &#125;</span><br><span class=\"line\">Animal.prototype.species = <span class=\"string\">\"动物\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>然后，再写一个函数，实现属性拷贝的目的。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend2</span>(<span class=\"params\">Child, Parent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p = Parent.prototype;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = Child.prototype;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123;</span><br><span class=\"line\">    c[i] = p[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  c.uber = p;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extend2(Cat, Animal);</span><br><span class=\"line\"><span class=\"keyword\">var</span> cat1 = <span class=\"keyword\">new</span> Cat(<span class=\"string\">\"大毛\"</span>,<span class=\"string\">\"黄色\"</span>);</span><br><span class=\"line\">alert(cat1.species); <span class=\"comment\">// 动物</span></span><br></pre></td></tr></table></figure>\n<p>此种继承方式只能继承父构造器原型上的属性.cat对象有两个层级,第一级存放着自有属性,第二级存放着父构造器原型上的除了constructor和<strong>proto</strong>的属性(不会拷贝原型上的constructor和<strong>proto</strong>属性).适合父构造器原型上的自增属性为基本数据类型的情况.</p>\n<p></p><h3>二、非构造函数的继承</h3><br>比如，现在有一个对象，叫做”中国人”。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Chinese = &#123;</span><br><span class=\"line\">  nation:<span class=\"string\">'中国'</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><p></p>\n<p>还有一个对象，叫做”医生”。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor =&#123;</span><br><span class=\"line\">  career:<span class=\"string\">'医生'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>1.object()方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">object</span>(<span class=\"params\">o</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">F</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">  F.prototype = o;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> F();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个object()函数，其实只做一件事，就是把子对象的prototype属性，指向父对象，从而使得子对象与父对象连在一起。<br>用法：<br>第一步先在父对象的基础上，生成子对象：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = object(Chinese);</span><br></pre></td></tr></table></figure></p>\n<p>然后，再加上子对象本身的属性：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Doctor.career = <span class=\"string\">'医生'</span>;</span><br></pre></td></tr></table></figure></p>\n<p>这时，子对象已经继承了父对象的属性了。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(Doctor.nation); <span class=\"comment\">//中国</span></span><br></pre></td></tr></table></figure></p>\n<p>2.浅拷贝<br>除了使用”prototype链”以外，还有另一种思路：把父对象的属性，全部拷贝给子对象，也能实现继承。</p>\n<p>就是在做拷贝：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extendCopy</span>(<span class=\"params\">p</span>) </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> c = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123; </span><br><span class=\"line\">  c[i] = p[i];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">c.uber = p;</span><br><span class=\"line\"><span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>用法，这样写：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = extendCopy(Chinese);</span><br><span class=\"line\">Doctor.career = <span class=\"string\">'医生'</span>;</span><br><span class=\"line\">alert(Doctor.nation); <span class=\"comment\">// 中国</span></span><br></pre></td></tr></table></figure></p>\n<p>样的拷贝有一个问题。那就是，如果父对象的属性等于数组或另一个对象，那么实际上，子对象获得的只是一个内存地址，而不是真正拷贝，因此存在父对象被篡改的可能。</p>\n<p>3.深拷贝<br>所谓”深拷贝”，就是能够实现真正意义上的数组和对象的拷贝。它的实现并不难，只要递归调用”浅拷贝”就行了。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepCopy</span>(<span class=\"params\">p, c</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> c = c || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> p) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> p[i] === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      c[i] = (p[i].constructor === <span class=\"built_in\">Array</span>) ? [] : &#123;&#125;;</span><br><span class=\"line\">      deepCopy(p[i], c[i]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        c[i] = p[i];</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>使用的时候这样写：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Doctor = deepCopy(Chinese);</span><br></pre></td></tr></table></figure></p>\n<p>现在，给父对象加一个属性，值为数组。然后，在子对象上修改这个属性：<br>这时，父对象就不会受到影响了。<br>目前，jQuery库使用的就是这种继承方法。</p>\n<p></p><h2>ES6中的继承方式</h2><br>Class 可以通过extends关键字实现继承，这比 ES5 的通过修改原型链实现继承，要清晰和方便很多。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//一些属性</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ColorPoint</span> <span class=\"keyword\">extends</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//一些属性</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 等同于</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ColorPoint</span> <span class=\"keyword\">extends</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(...args) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p>\n<ul>\n<li>上面代码定义了一个ColorPoint类，该类通过extends关键字，继承了Point类的所有属性和方法。但是由于没有部署任何代码，所以这两个类完全一样，等于复制了一个Point类。</li>\n<li>如果子类没有定义constructor方法，这个方法会被默认添加，代码如下。也就是说，不管有没有显式定义，任何一个子类都有constructor方法。</li>\n<li>在子类的构造函数中，只有调用super之后，才可以使用this关键字，否则会报错。这是因为子类实例的构建，是基于对父类实例加工，只有super方法才能返回父类实例。</li>\n<li>ES6 规定，在子类普通方法中通过super调用父类的方法时，方法内部的this指向当前的子类实例。</li>\n</ul>\n"},{"title":"Javascript基本概念（一）","date":"2018-06-11T04:51:06.000Z","_content":"这是JS高程的第三章，内容比较多的一章，所以拆分开来，慢慢的填坑。\n路漫漫其修远兮啊\n本节包括三个部分\n* JS语法\n* JS关键字\n* JS变量\n\n## JS语法\n\n1、JS中的一切(变量、函数名和操作符)都区分大小写\n2、标识符，就是指变量、函数、属性的名字，或者函数的参数。第一个字符必须是一个字母、下划线(_)或一个美元符号($）;其他字符可以是字母、下划线、美元符号或数字\n3、注释：\n```javascript\n// 单行注释\n/*\n* 这是一个多行 \n* (块级)注释 \n*/\n```\n4、严格模式\nECMAScript5引入了严格模式(strict mode)的概念。严格模式是为JavaScript定义了一种不同的解析与执行模型。\n```javascript\n\"use strict\";\n```\n它是一个编译指示(pragma)，用于告诉支持的JavaScript引擎切换到严格模式。这是为不破坏ECMAScript 3语法而特意选定的语法。\n5、ECMAScript 中的语句以一个分号结尾;如果省略分号，则由解析器确定语句的结尾。建议在语句结尾处添加“;”\n\n## 关键字和保留字\n\n1、关键字，可用于表示控制语句的开始或结束，或者用于执行特定操作等。按照规则，关键字也是语言保留的，不能用作标识符。\n2、保留字，保留字在这门语言中还没有任何特定的用途，但它们有可能在将来被用作关键字。\n\n## 变量\n\nECMAScript的变量是松散类型的，松散类型就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。ECMAScript 也支持直接初始化变量，因此在定义变量的同时就可以设置变量的值\n用var操作符定义的变量将成为定义该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。\n（块级作用域中可以使用let 和 const来声明块级变量，形成暂时性死区）","source":"_posts/Javascript基本概念（一）.md","raw":"---\ntitle: Javascript基本概念（一）\ndate: 2018-06-11 12:51:06\ntags: Javascript\ncategories: JS高程填坑笔记\n---\n这是JS高程的第三章，内容比较多的一章，所以拆分开来，慢慢的填坑。\n路漫漫其修远兮啊\n本节包括三个部分\n* JS语法\n* JS关键字\n* JS变量\n\n## JS语法\n\n1、JS中的一切(变量、函数名和操作符)都区分大小写\n2、标识符，就是指变量、函数、属性的名字，或者函数的参数。第一个字符必须是一个字母、下划线(_)或一个美元符号($）;其他字符可以是字母、下划线、美元符号或数字\n3、注释：\n```javascript\n// 单行注释\n/*\n* 这是一个多行 \n* (块级)注释 \n*/\n```\n4、严格模式\nECMAScript5引入了严格模式(strict mode)的概念。严格模式是为JavaScript定义了一种不同的解析与执行模型。\n```javascript\n\"use strict\";\n```\n它是一个编译指示(pragma)，用于告诉支持的JavaScript引擎切换到严格模式。这是为不破坏ECMAScript 3语法而特意选定的语法。\n5、ECMAScript 中的语句以一个分号结尾;如果省略分号，则由解析器确定语句的结尾。建议在语句结尾处添加“;”\n\n## 关键字和保留字\n\n1、关键字，可用于表示控制语句的开始或结束，或者用于执行特定操作等。按照规则，关键字也是语言保留的，不能用作标识符。\n2、保留字，保留字在这门语言中还没有任何特定的用途，但它们有可能在将来被用作关键字。\n\n## 变量\n\nECMAScript的变量是松散类型的，松散类型就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。ECMAScript 也支持直接初始化变量，因此在定义变量的同时就可以设置变量的值\n用var操作符定义的变量将成为定义该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。\n（块级作用域中可以使用let 和 const来声明块级变量，形成暂时性死区）","slug":"Javascript基本概念（一）","published":1,"updated":"2018-06-13T15:26:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9w000bd6sp0x1axmj8","content":"<p>这是JS高程的第三章，内容比较多的一章，所以拆分开来，慢慢的填坑。<br>路漫漫其修远兮啊<br>本节包括三个部分</p>\n<ul>\n<li>JS语法</li>\n<li>JS关键字</li>\n<li>JS变量</li>\n</ul>\n<h2 id=\"JS语法\"><a href=\"#JS语法\" class=\"headerlink\" title=\"JS语法\"></a>JS语法</h2><p>1、JS中的一切(变量、函数名和操作符)都区分大小写<br>2、标识符，就是指变量、函数、属性的名字，或者函数的参数。第一个字符必须是一个字母、下划线(_)或一个美元符号($）;其他字符可以是字母、下划线、美元符号或数字<br>3、注释：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 单行注释</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* 这是一个多行 </span></span><br><span class=\"line\"><span class=\"comment\">* (块级)注释 </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>4、严格模式<br>ECMAScript5引入了严格模式(strict mode)的概念。严格模式是为JavaScript定义了一种不同的解析与执行模型。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">\"use strict\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>它是一个编译指示(pragma)，用于告诉支持的JavaScript引擎切换到严格模式。这是为不破坏ECMAScript 3语法而特意选定的语法。<br>5、ECMAScript 中的语句以一个分号结尾;如果省略分号，则由解析器确定语句的结尾。建议在语句结尾处添加“;”</p>\n<h2 id=\"关键字和保留字\"><a href=\"#关键字和保留字\" class=\"headerlink\" title=\"关键字和保留字\"></a>关键字和保留字</h2><p>1、关键字，可用于表示控制语句的开始或结束，或者用于执行特定操作等。按照规则，关键字也是语言保留的，不能用作标识符。<br>2、保留字，保留字在这门语言中还没有任何特定的用途，但它们有可能在将来被用作关键字。</p>\n<h2 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h2><p>ECMAScript的变量是松散类型的，松散类型就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。ECMAScript 也支持直接初始化变量，因此在定义变量的同时就可以设置变量的值<br>用var操作符定义的变量将成为定义该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。<br>（块级作用域中可以使用let 和 const来声明块级变量，形成暂时性死区）</p>\n","site":{"data":{}},"excerpt":"","more":"<p>这是JS高程的第三章，内容比较多的一章，所以拆分开来，慢慢的填坑。<br>路漫漫其修远兮啊<br>本节包括三个部分</p>\n<ul>\n<li>JS语法</li>\n<li>JS关键字</li>\n<li>JS变量</li>\n</ul>\n<h2 id=\"JS语法\"><a href=\"#JS语法\" class=\"headerlink\" title=\"JS语法\"></a>JS语法</h2><p>1、JS中的一切(变量、函数名和操作符)都区分大小写<br>2、标识符，就是指变量、函数、属性的名字，或者函数的参数。第一个字符必须是一个字母、下划线(_)或一个美元符号($）;其他字符可以是字母、下划线、美元符号或数字<br>3、注释：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 单行注释</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* 这是一个多行 </span></span><br><span class=\"line\"><span class=\"comment\">* (块级)注释 </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure></p>\n<p>4、严格模式<br>ECMAScript5引入了严格模式(strict mode)的概念。严格模式是为JavaScript定义了一种不同的解析与执行模型。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">\"use strict\"</span>;</span><br></pre></td></tr></table></figure></p>\n<p>它是一个编译指示(pragma)，用于告诉支持的JavaScript引擎切换到严格模式。这是为不破坏ECMAScript 3语法而特意选定的语法。<br>5、ECMAScript 中的语句以一个分号结尾;如果省略分号，则由解析器确定语句的结尾。建议在语句结尾处添加“;”</p>\n<h2 id=\"关键字和保留字\"><a href=\"#关键字和保留字\" class=\"headerlink\" title=\"关键字和保留字\"></a>关键字和保留字</h2><p>1、关键字，可用于表示控制语句的开始或结束，或者用于执行特定操作等。按照规则，关键字也是语言保留的，不能用作标识符。<br>2、保留字，保留字在这门语言中还没有任何特定的用途，但它们有可能在将来被用作关键字。</p>\n<h2 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h2><p>ECMAScript的变量是松散类型的，松散类型就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。ECMAScript 也支持直接初始化变量，因此在定义变量的同时就可以设置变量的值<br>用var操作符定义的变量将成为定义该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。<br>（块级作用域中可以使用let 和 const来声明块级变量，形成暂时性死区）</p>\n"},{"title":"Javascript基本概念(二）","date":"2018-06-11T06:20:09.000Z","_content":"JS高程的第三章第二节，对数据类型进行一下学习\n\nJS有五种基本数据类型：Number，String，Boolean，Undefined，Null和一种复杂类型：Object，Object本质上是由一组无序的名值对组成的（说好的万物皆对象来着）。JS不支持任何创建自定义类型的机制。\n\n## typeof 操作符\nECMAScript是松散类型的，typeof就是负责来检测给定变量的数据类型的操作符。\ntypeof是判断参数是什么类型的实例，就一个参数\ntypeof一般只能返回如下几个结果：\"number\"、\"string\"、\"boolean\"、\"object\"、\"function\" 和 \"undefined\"。\n\n## Undefined类型\nUndefined类型只有一个值，即特殊的undefined。只有在变量声明且未初始化的时候，变量的值为undefined。\n建议显式的初始化undefined，这样发现值为undefined的时候，就会知道该变量未声明而不是未初始化。\n```javascript\nlet message = 'undefined';\n```\n\n## Null类型\nNull类型只有一个值的数据类型，即特殊的null。从逻辑角度来看，null值表示一个空对象指针，使用typeof操作符检测null值时会返回'object'。\n如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其他值。只要直接检查null值就可以知道相应的变量是否已经保存了一个对象的引用\n```javascript\nif (obj != null){\n// 对 car 对象执行某些操作\n}\n```\n另外：undefined值是派生自null值的，在验证相等时，它们的相等性测试要返回true。但是在全等性测试时返回false。\n\n## Boolean类型\nBoolean类型是JS中使用得最多的一种类型，该类型只有两个字面值:true和false。Boolean类型的字面值true和false是区分大小写的。\nBoolean类型的字面值只有两个，但JS中所有类型的值都有与这两个Boolean值等价的值。要将一个值转换为其对应的 Boolean值，可以调用转型函数Boolean(),可以对任何数据类型的值调用Boolean()函数，而且总会返回一个Boolean值\n```javascript\nconst message = 'hello world';\nconst bool = Boolean(message);\n```\n| 数据类型 | true | false \n| ----------- |:-----------:| :--:\n| String | 任何非空字符串 | ''(空字符串)\n| Boolean | true | false\n| Number | 任何非0值 | 0和NaN\n| Object | 任何对象 | null\n| undefined |  | undefined\n\n## Number类型\nNumber类型使用IEEE754格式来表示整数和浮点数值(浮点数值在某些语言中也被称为双精度数值)。\n最基本的数值字面量格式是十进制整数：`const num = 254;`，最高具有53位有效数字精度\n八进制字面值的第一位必须是零(0)，然后是八进制数字序列(0~7)`const num2 = 03`;八进制字面量在严格模式下是无效的\n十六进制字面值的前两位必须是 0x,`const num2 = 0xff`\n算术计算时，所有以八进制和十六进制表示的数值都会被转换成十进制数值\n在JavaScript中保存数值的方式，可以保存正零(+0)和负零(0)。正零和负零被认为相等\n1、浮点数值\n数值中必须包含一个小数点，并且小数点后面必须至少有一位数字.浮点数保存空间是整数的两倍，如果小数点后的值为0或者没有任何数值，那么该数值就会保存成整数\n用e或E表示10的幂。`2e5`,浮点数的最高精度为17位。算术运算的时候，精度比整数差的多。不要测试浮点数相等。\n2、最值：` Number.MIN_VALUE, Number.MAX_VALUE  `\n3、NaN：\n该值表示一个本来要返回Number类型的操作数未返回数值的情况。\n设计NaN的所有操作都等于NaN，且NaN与任何值都不想等，包括NaN\nisNaN()函数,用来判断一个值是否为数值（number）\nisNaN也适用于对象，在判断对象的时候，会先调用对象的valueOf()方法，确定该返回值是否是数值，如果不行，会调用toString()方法，再判断是否是数值。\n```javascript\nisNaN()\n```\n4、数值转换\n有3个方法可以将非数值类型的值转换成数值类型：Number() parseInt()  parseFloat()。\nNumber()方法可以将任何数值类型转化成数值类型，其他两个需要字符串类型\nNumber()转换规则：\n  * Boolean的值，true转换成1， false转化成0\n  * null 转化成0\n  * undefined 转化成NaN\n  * String变量 \n    * 是整数的转换成十进制整数，前导0将被去掉\n    * 浮点数将被转化成浮点数，前导0将被去掉\n    * 十六进制的数值将被转换成十进制相同大小的值\n    * 空字符串将被转换成0\n    * 其他的将被转换成NaN\n  * Object对象 会先调用对象的valueOf()方法，确定该返回值是否是数值，如果NaN，会调用toString()方法，再按照string方法判断。\n  \nparseInt()转换规则\n  转换字符串，从第一个非空格字符开始，是数字或者进制符号就继续下一个字符。否则就NaN\n  浮点数转化成整数，空字符串转化成NaN\n  `parseInt('') = NaN`\n\nparseFloat()转化规则\n  从第一个字符开始判断，知道遇到非浮点数字符。\n  第一个小数点有效，其他的则无效。\n  16进制会被转化成0\n  忽略前导0\n\n## String类型\n用于表示有0到多个16位Unicode字符组成的字符序列，即字符串。用''或者\"\"表示\n1、字符字面量 即转义字符\n2、字符串特点\n  ES中，字符串一旦创建就不能改变，要改变就会销毁之前变量，然后生产新的变量。\n3、转换成字符串\ntoString()方法\n  Number，Boolean，Object，String都有这个方法，转换成相应的字符串。Null和Undefined没有这个方法。\n  如果有toString()方法，那就调用该方法\n  如果没有，null 转换成'null',undefined 转换成'undefined'\n\n## Object\nES中的对象就是一组数据和功能的集合。对象可以通过new操作符后加名字的来创建\n`var o = new Object()`\nObject类型是所有它的实例的基础，其具有的属性，在其他所有的实例中都会有。\nObject有的属性和方法\n  * constructor：保存用于创建当前对象的函数\n  * hasOwnProperty(propertyName): 用于判断是否有属于自己的属性，而不是在原型中的属性\n  * isPrototypeOf(object): 用于检查传入的对象是否是传入对象的原型\n  * propertyIsEnumerable(propertyName)：用于检查属性能否用for-in来遍历\n  * toLocaleString()：返回对象的字符串表示\n  * toString(): 返回对象的字符串表示\n  * valueOf()：返回对象的字符串，数值，布尔表示，通常和toString()结果一样。\n\n\n\n","source":"_posts/Javascript基本概念（二）.md","raw":"---\ntitle: Javascript基本概念(二）\ndate: 2018-06-11 14:20:09\ntags: Javascript\ncategories: JS高程填坑笔记\n---\nJS高程的第三章第二节，对数据类型进行一下学习\n\nJS有五种基本数据类型：Number，String，Boolean，Undefined，Null和一种复杂类型：Object，Object本质上是由一组无序的名值对组成的（说好的万物皆对象来着）。JS不支持任何创建自定义类型的机制。\n\n## typeof 操作符\nECMAScript是松散类型的，typeof就是负责来检测给定变量的数据类型的操作符。\ntypeof是判断参数是什么类型的实例，就一个参数\ntypeof一般只能返回如下几个结果：\"number\"、\"string\"、\"boolean\"、\"object\"、\"function\" 和 \"undefined\"。\n\n## Undefined类型\nUndefined类型只有一个值，即特殊的undefined。只有在变量声明且未初始化的时候，变量的值为undefined。\n建议显式的初始化undefined，这样发现值为undefined的时候，就会知道该变量未声明而不是未初始化。\n```javascript\nlet message = 'undefined';\n```\n\n## Null类型\nNull类型只有一个值的数据类型，即特殊的null。从逻辑角度来看，null值表示一个空对象指针，使用typeof操作符检测null值时会返回'object'。\n如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其他值。只要直接检查null值就可以知道相应的变量是否已经保存了一个对象的引用\n```javascript\nif (obj != null){\n// 对 car 对象执行某些操作\n}\n```\n另外：undefined值是派生自null值的，在验证相等时，它们的相等性测试要返回true。但是在全等性测试时返回false。\n\n## Boolean类型\nBoolean类型是JS中使用得最多的一种类型，该类型只有两个字面值:true和false。Boolean类型的字面值true和false是区分大小写的。\nBoolean类型的字面值只有两个，但JS中所有类型的值都有与这两个Boolean值等价的值。要将一个值转换为其对应的 Boolean值，可以调用转型函数Boolean(),可以对任何数据类型的值调用Boolean()函数，而且总会返回一个Boolean值\n```javascript\nconst message = 'hello world';\nconst bool = Boolean(message);\n```\n| 数据类型 | true | false \n| ----------- |:-----------:| :--:\n| String | 任何非空字符串 | ''(空字符串)\n| Boolean | true | false\n| Number | 任何非0值 | 0和NaN\n| Object | 任何对象 | null\n| undefined |  | undefined\n\n## Number类型\nNumber类型使用IEEE754格式来表示整数和浮点数值(浮点数值在某些语言中也被称为双精度数值)。\n最基本的数值字面量格式是十进制整数：`const num = 254;`，最高具有53位有效数字精度\n八进制字面值的第一位必须是零(0)，然后是八进制数字序列(0~7)`const num2 = 03`;八进制字面量在严格模式下是无效的\n十六进制字面值的前两位必须是 0x,`const num2 = 0xff`\n算术计算时，所有以八进制和十六进制表示的数值都会被转换成十进制数值\n在JavaScript中保存数值的方式，可以保存正零(+0)和负零(0)。正零和负零被认为相等\n1、浮点数值\n数值中必须包含一个小数点，并且小数点后面必须至少有一位数字.浮点数保存空间是整数的两倍，如果小数点后的值为0或者没有任何数值，那么该数值就会保存成整数\n用e或E表示10的幂。`2e5`,浮点数的最高精度为17位。算术运算的时候，精度比整数差的多。不要测试浮点数相等。\n2、最值：` Number.MIN_VALUE, Number.MAX_VALUE  `\n3、NaN：\n该值表示一个本来要返回Number类型的操作数未返回数值的情况。\n设计NaN的所有操作都等于NaN，且NaN与任何值都不想等，包括NaN\nisNaN()函数,用来判断一个值是否为数值（number）\nisNaN也适用于对象，在判断对象的时候，会先调用对象的valueOf()方法，确定该返回值是否是数值，如果不行，会调用toString()方法，再判断是否是数值。\n```javascript\nisNaN()\n```\n4、数值转换\n有3个方法可以将非数值类型的值转换成数值类型：Number() parseInt()  parseFloat()。\nNumber()方法可以将任何数值类型转化成数值类型，其他两个需要字符串类型\nNumber()转换规则：\n  * Boolean的值，true转换成1， false转化成0\n  * null 转化成0\n  * undefined 转化成NaN\n  * String变量 \n    * 是整数的转换成十进制整数，前导0将被去掉\n    * 浮点数将被转化成浮点数，前导0将被去掉\n    * 十六进制的数值将被转换成十进制相同大小的值\n    * 空字符串将被转换成0\n    * 其他的将被转换成NaN\n  * Object对象 会先调用对象的valueOf()方法，确定该返回值是否是数值，如果NaN，会调用toString()方法，再按照string方法判断。\n  \nparseInt()转换规则\n  转换字符串，从第一个非空格字符开始，是数字或者进制符号就继续下一个字符。否则就NaN\n  浮点数转化成整数，空字符串转化成NaN\n  `parseInt('') = NaN`\n\nparseFloat()转化规则\n  从第一个字符开始判断，知道遇到非浮点数字符。\n  第一个小数点有效，其他的则无效。\n  16进制会被转化成0\n  忽略前导0\n\n## String类型\n用于表示有0到多个16位Unicode字符组成的字符序列，即字符串。用''或者\"\"表示\n1、字符字面量 即转义字符\n2、字符串特点\n  ES中，字符串一旦创建就不能改变，要改变就会销毁之前变量，然后生产新的变量。\n3、转换成字符串\ntoString()方法\n  Number，Boolean，Object，String都有这个方法，转换成相应的字符串。Null和Undefined没有这个方法。\n  如果有toString()方法，那就调用该方法\n  如果没有，null 转换成'null',undefined 转换成'undefined'\n\n## Object\nES中的对象就是一组数据和功能的集合。对象可以通过new操作符后加名字的来创建\n`var o = new Object()`\nObject类型是所有它的实例的基础，其具有的属性，在其他所有的实例中都会有。\nObject有的属性和方法\n  * constructor：保存用于创建当前对象的函数\n  * hasOwnProperty(propertyName): 用于判断是否有属于自己的属性，而不是在原型中的属性\n  * isPrototypeOf(object): 用于检查传入的对象是否是传入对象的原型\n  * propertyIsEnumerable(propertyName)：用于检查属性能否用for-in来遍历\n  * toLocaleString()：返回对象的字符串表示\n  * toString(): 返回对象的字符串表示\n  * valueOf()：返回对象的字符串，数值，布尔表示，通常和toString()结果一样。\n\n\n\n","slug":"Javascript基本概念（二）","published":1,"updated":"2018-06-19T06:31:19.000Z","_id":"cjil46y9x000gd6sp84ubzc44","comments":1,"layout":"post","photos":[],"link":"","content":"<p>JS高程的第三章第二节，对数据类型进行一下学习</p>\n<p>JS有五种基本数据类型：Number，String，Boolean，Undefined，Null和一种复杂类型：Object，Object本质上是由一组无序的名值对组成的（说好的万物皆对象来着）。JS不支持任何创建自定义类型的机制。</p>\n<h2 id=\"typeof-操作符\"><a href=\"#typeof-操作符\" class=\"headerlink\" title=\"typeof 操作符\"></a>typeof 操作符</h2><p>ECMAScript是松散类型的，typeof就是负责来检测给定变量的数据类型的操作符。<br>typeof是判断参数是什么类型的实例，就一个参数<br>typeof一般只能返回如下几个结果：”number”、”string”、”boolean”、”object”、”function” 和 “undefined”。</p>\n<h2 id=\"Undefined类型\"><a href=\"#Undefined类型\" class=\"headerlink\" title=\"Undefined类型\"></a>Undefined类型</h2><p>Undefined类型只有一个值，即特殊的undefined。只有在变量声明且未初始化的时候，变量的值为undefined。<br>建议显式的初始化undefined，这样发现值为undefined的时候，就会知道该变量未声明而不是未初始化。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"string\">'undefined'</span>;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Null类型\"><a href=\"#Null类型\" class=\"headerlink\" title=\"Null类型\"></a>Null类型</h2><p>Null类型只有一个值的数据类型，即特殊的null。从逻辑角度来看，null值表示一个空对象指针，使用typeof操作符检测null值时会返回’object’。<br>如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其他值。只要直接检查null值就可以知道相应的变量是否已经保存了一个对象的引用<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (obj != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\"><span class=\"comment\">// 对 car 对象执行某些操作</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>另外：undefined值是派生自null值的，在验证相等时，它们的相等性测试要返回true。但是在全等性测试时返回false。</p>\n<h2 id=\"Boolean类型\"><a href=\"#Boolean类型\" class=\"headerlink\" title=\"Boolean类型\"></a>Boolean类型</h2><p>Boolean类型是JS中使用得最多的一种类型，该类型只有两个字面值:true和false。Boolean类型的字面值true和false是区分大小写的。<br>Boolean类型的字面值只有两个，但JS中所有类型的值都有与这两个Boolean值等价的值。要将一个值转换为其对应的 Boolean值，可以调用转型函数Boolean(),可以对任何数据类型的值调用Boolean()函数，而且总会返回一个Boolean值<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> message = <span class=\"string\">'hello world'</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> bool = <span class=\"built_in\">Boolean</span>(message);</span><br></pre></td></tr></table></figure></p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th style=\"text-align:center\">true</th>\n<th style=\"text-align:center\">false </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>String</td>\n<td style=\"text-align:center\">任何非空字符串</td>\n<td style=\"text-align:center\">‘’(空字符串)</td>\n</tr>\n<tr>\n<td>Boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td>Number</td>\n<td style=\"text-align:center\">任何非0值</td>\n<td style=\"text-align:center\">0和NaN</td>\n</tr>\n<tr>\n<td>Object</td>\n<td style=\"text-align:center\">任何对象</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td>undefined</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">undefined</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Number类型\"><a href=\"#Number类型\" class=\"headerlink\" title=\"Number类型\"></a>Number类型</h2><p>Number类型使用IEEE754格式来表示整数和浮点数值(浮点数值在某些语言中也被称为双精度数值)。<br>最基本的数值字面量格式是十进制整数：<code>const num = 254;</code>，最高具有53位有效数字精度<br>八进制字面值的第一位必须是零(0)，然后是八进制数字序列(0~7)<code>const num2 = 03</code>;八进制字面量在严格模式下是无效的<br>十六进制字面值的前两位必须是 0x,<code>const num2 = 0xff</code><br>算术计算时，所有以八进制和十六进制表示的数值都会被转换成十进制数值<br>在JavaScript中保存数值的方式，可以保存正零(+0)和负零(0)。正零和负零被认为相等<br>1、浮点数值<br>数值中必须包含一个小数点，并且小数点后面必须至少有一位数字.浮点数保存空间是整数的两倍，如果小数点后的值为0或者没有任何数值，那么该数值就会保存成整数<br>用e或E表示10的幂。<code>2e5</code>,浮点数的最高精度为17位。算术运算的时候，精度比整数差的多。不要测试浮点数相等。<br>2、最值：<code>Number.MIN_VALUE, Number.MAX_VALUE</code><br>3、NaN：<br>该值表示一个本来要返回Number类型的操作数未返回数值的情况。<br>设计NaN的所有操作都等于NaN，且NaN与任何值都不想等，包括NaN<br>isNaN()函数,用来判断一个值是否为数值（number）<br>isNaN也适用于对象，在判断对象的时候，会先调用对象的valueOf()方法，确定该返回值是否是数值，如果不行，会调用toString()方法，再判断是否是数值。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">isNaN</span>()</span><br></pre></td></tr></table></figure></p>\n<p>4、数值转换<br>有3个方法可以将非数值类型的值转换成数值类型：Number() parseInt()  parseFloat()。<br>Number()方法可以将任何数值类型转化成数值类型，其他两个需要字符串类型<br>Number()转换规则：</p>\n<ul>\n<li>Boolean的值，true转换成1， false转化成0</li>\n<li>null 转化成0</li>\n<li>undefined 转化成NaN</li>\n<li>String变量 <ul>\n<li>是整数的转换成十进制整数，前导0将被去掉</li>\n<li>浮点数将被转化成浮点数，前导0将被去掉</li>\n<li>十六进制的数值将被转换成十进制相同大小的值</li>\n<li>空字符串将被转换成0</li>\n<li>其他的将被转换成NaN</li>\n</ul>\n</li>\n<li>Object对象 会先调用对象的valueOf()方法，确定该返回值是否是数值，如果NaN，会调用toString()方法，再按照string方法判断。</li>\n</ul>\n<p>parseInt()转换规则<br>  转换字符串，从第一个非空格字符开始，是数字或者进制符号就继续下一个字符。否则就NaN<br>  浮点数转化成整数，空字符串转化成NaN<br>  <code>parseInt(&#39;&#39;) = NaN</code></p>\n<p>parseFloat()转化规则<br>  从第一个字符开始判断，知道遇到非浮点数字符。<br>  第一个小数点有效，其他的则无效。<br>  16进制会被转化成0<br>  忽略前导0</p>\n<h2 id=\"String类型\"><a href=\"#String类型\" class=\"headerlink\" title=\"String类型\"></a>String类型</h2><p>用于表示有0到多个16位Unicode字符组成的字符序列，即字符串。用’’或者””表示<br>1、字符字面量 即转义字符<br>2、字符串特点<br>  ES中，字符串一旦创建就不能改变，要改变就会销毁之前变量，然后生产新的变量。<br>3、转换成字符串<br>toString()方法<br>  Number，Boolean，Object，String都有这个方法，转换成相应的字符串。Null和Undefined没有这个方法。<br>  如果有toString()方法，那就调用该方法<br>  如果没有，null 转换成’null’,undefined 转换成’undefined’</p>\n<h2 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h2><p>ES中的对象就是一组数据和功能的集合。对象可以通过new操作符后加名字的来创建<br><code>var o = new Object()</code><br>Object类型是所有它的实例的基础，其具有的属性，在其他所有的实例中都会有。<br>Object有的属性和方法</p>\n<ul>\n<li>constructor：保存用于创建当前对象的函数</li>\n<li>hasOwnProperty(propertyName): 用于判断是否有属于自己的属性，而不是在原型中的属性</li>\n<li>isPrototypeOf(object): 用于检查传入的对象是否是传入对象的原型</li>\n<li>propertyIsEnumerable(propertyName)：用于检查属性能否用for-in来遍历</li>\n<li>toLocaleString()：返回对象的字符串表示</li>\n<li>toString(): 返回对象的字符串表示</li>\n<li>valueOf()：返回对象的字符串，数值，布尔表示，通常和toString()结果一样。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>JS高程的第三章第二节，对数据类型进行一下学习</p>\n<p>JS有五种基本数据类型：Number，String，Boolean，Undefined，Null和一种复杂类型：Object，Object本质上是由一组无序的名值对组成的（说好的万物皆对象来着）。JS不支持任何创建自定义类型的机制。</p>\n<h2 id=\"typeof-操作符\"><a href=\"#typeof-操作符\" class=\"headerlink\" title=\"typeof 操作符\"></a>typeof 操作符</h2><p>ECMAScript是松散类型的，typeof就是负责来检测给定变量的数据类型的操作符。<br>typeof是判断参数是什么类型的实例，就一个参数<br>typeof一般只能返回如下几个结果：”number”、”string”、”boolean”、”object”、”function” 和 “undefined”。</p>\n<h2 id=\"Undefined类型\"><a href=\"#Undefined类型\" class=\"headerlink\" title=\"Undefined类型\"></a>Undefined类型</h2><p>Undefined类型只有一个值，即特殊的undefined。只有在变量声明且未初始化的时候，变量的值为undefined。<br>建议显式的初始化undefined，这样发现值为undefined的时候，就会知道该变量未声明而不是未初始化。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> message = <span class=\"string\">'undefined'</span>;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Null类型\"><a href=\"#Null类型\" class=\"headerlink\" title=\"Null类型\"></a>Null类型</h2><p>Null类型只有一个值的数据类型，即特殊的null。从逻辑角度来看，null值表示一个空对象指针，使用typeof操作符检测null值时会返回’object’。<br>如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其他值。只要直接检查null值就可以知道相应的变量是否已经保存了一个对象的引用<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (obj != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\"><span class=\"comment\">// 对 car 对象执行某些操作</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>另外：undefined值是派生自null值的，在验证相等时，它们的相等性测试要返回true。但是在全等性测试时返回false。</p>\n<h2 id=\"Boolean类型\"><a href=\"#Boolean类型\" class=\"headerlink\" title=\"Boolean类型\"></a>Boolean类型</h2><p>Boolean类型是JS中使用得最多的一种类型，该类型只有两个字面值:true和false。Boolean类型的字面值true和false是区分大小写的。<br>Boolean类型的字面值只有两个，但JS中所有类型的值都有与这两个Boolean值等价的值。要将一个值转换为其对应的 Boolean值，可以调用转型函数Boolean(),可以对任何数据类型的值调用Boolean()函数，而且总会返回一个Boolean值<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> message = <span class=\"string\">'hello world'</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> bool = <span class=\"built_in\">Boolean</span>(message);</span><br></pre></td></tr></table></figure></p>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th style=\"text-align:center\">true</th>\n<th style=\"text-align:center\">false </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>String</td>\n<td style=\"text-align:center\">任何非空字符串</td>\n<td style=\"text-align:center\">‘’(空字符串)</td>\n</tr>\n<tr>\n<td>Boolean</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td>Number</td>\n<td style=\"text-align:center\">任何非0值</td>\n<td style=\"text-align:center\">0和NaN</td>\n</tr>\n<tr>\n<td>Object</td>\n<td style=\"text-align:center\">任何对象</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td>undefined</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">undefined</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Number类型\"><a href=\"#Number类型\" class=\"headerlink\" title=\"Number类型\"></a>Number类型</h2><p>Number类型使用IEEE754格式来表示整数和浮点数值(浮点数值在某些语言中也被称为双精度数值)。<br>最基本的数值字面量格式是十进制整数：<code>const num = 254;</code>，最高具有53位有效数字精度<br>八进制字面值的第一位必须是零(0)，然后是八进制数字序列(0~7)<code>const num2 = 03</code>;八进制字面量在严格模式下是无效的<br>十六进制字面值的前两位必须是 0x,<code>const num2 = 0xff</code><br>算术计算时，所有以八进制和十六进制表示的数值都会被转换成十进制数值<br>在JavaScript中保存数值的方式，可以保存正零(+0)和负零(0)。正零和负零被认为相等<br>1、浮点数值<br>数值中必须包含一个小数点，并且小数点后面必须至少有一位数字.浮点数保存空间是整数的两倍，如果小数点后的值为0或者没有任何数值，那么该数值就会保存成整数<br>用e或E表示10的幂。<code>2e5</code>,浮点数的最高精度为17位。算术运算的时候，精度比整数差的多。不要测试浮点数相等。<br>2、最值：<code>Number.MIN_VALUE, Number.MAX_VALUE</code><br>3、NaN：<br>该值表示一个本来要返回Number类型的操作数未返回数值的情况。<br>设计NaN的所有操作都等于NaN，且NaN与任何值都不想等，包括NaN<br>isNaN()函数,用来判断一个值是否为数值（number）<br>isNaN也适用于对象，在判断对象的时候，会先调用对象的valueOf()方法，确定该返回值是否是数值，如果不行，会调用toString()方法，再判断是否是数值。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">isNaN</span>()</span><br></pre></td></tr></table></figure></p>\n<p>4、数值转换<br>有3个方法可以将非数值类型的值转换成数值类型：Number() parseInt()  parseFloat()。<br>Number()方法可以将任何数值类型转化成数值类型，其他两个需要字符串类型<br>Number()转换规则：</p>\n<ul>\n<li>Boolean的值，true转换成1， false转化成0</li>\n<li>null 转化成0</li>\n<li>undefined 转化成NaN</li>\n<li>String变量 <ul>\n<li>是整数的转换成十进制整数，前导0将被去掉</li>\n<li>浮点数将被转化成浮点数，前导0将被去掉</li>\n<li>十六进制的数值将被转换成十进制相同大小的值</li>\n<li>空字符串将被转换成0</li>\n<li>其他的将被转换成NaN</li>\n</ul>\n</li>\n<li>Object对象 会先调用对象的valueOf()方法，确定该返回值是否是数值，如果NaN，会调用toString()方法，再按照string方法判断。</li>\n</ul>\n<p>parseInt()转换规则<br>  转换字符串，从第一个非空格字符开始，是数字或者进制符号就继续下一个字符。否则就NaN<br>  浮点数转化成整数，空字符串转化成NaN<br>  <code>parseInt(&#39;&#39;) = NaN</code></p>\n<p>parseFloat()转化规则<br>  从第一个字符开始判断，知道遇到非浮点数字符。<br>  第一个小数点有效，其他的则无效。<br>  16进制会被转化成0<br>  忽略前导0</p>\n<h2 id=\"String类型\"><a href=\"#String类型\" class=\"headerlink\" title=\"String类型\"></a>String类型</h2><p>用于表示有0到多个16位Unicode字符组成的字符序列，即字符串。用’’或者””表示<br>1、字符字面量 即转义字符<br>2、字符串特点<br>  ES中，字符串一旦创建就不能改变，要改变就会销毁之前变量，然后生产新的变量。<br>3、转换成字符串<br>toString()方法<br>  Number，Boolean，Object，String都有这个方法，转换成相应的字符串。Null和Undefined没有这个方法。<br>  如果有toString()方法，那就调用该方法<br>  如果没有，null 转换成’null’,undefined 转换成’undefined’</p>\n<h2 id=\"Object\"><a href=\"#Object\" class=\"headerlink\" title=\"Object\"></a>Object</h2><p>ES中的对象就是一组数据和功能的集合。对象可以通过new操作符后加名字的来创建<br><code>var o = new Object()</code><br>Object类型是所有它的实例的基础，其具有的属性，在其他所有的实例中都会有。<br>Object有的属性和方法</p>\n<ul>\n<li>constructor：保存用于创建当前对象的函数</li>\n<li>hasOwnProperty(propertyName): 用于判断是否有属于自己的属性，而不是在原型中的属性</li>\n<li>isPrototypeOf(object): 用于检查传入的对象是否是传入对象的原型</li>\n<li>propertyIsEnumerable(propertyName)：用于检查属性能否用for-in来遍历</li>\n<li>toLocaleString()：返回对象的字符串表示</li>\n<li>toString(): 返回对象的字符串表示</li>\n<li>valueOf()：返回对象的字符串，数值，布尔表示，通常和toString()结果一样。</li>\n</ul>\n"},{"title":"ajax实现","date":"2018-05-16T03:18:33.000Z","_content":"Q1: 何谓ajax，它有何优点？\nA1:AJAX = 异步 JavaScript 和 XML。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据    交换，AJAX 可以使网页实现异步更新\n\nQ2:ajax 如何实现？\nA2: \n步骤：(1)创建XMLHttpRequest对象,也就是创建一个异步调用对象.\n     (2)创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息.\n     (3)设置响应HTTP请求状态变化的函数.\n     (4)发送HTTP请求.\n     (5)获取异步调用返回的数据.\n     (6)使用JavaScript和DOM实现局部刷新.\n\n  代码实现：\n\n```HTML\n  <html>\n    <head>\n      <title>AJAX实例</title>\n      <script language=\"javascript\" type=\"text/javascript\">    \n        var xmlHttpRequest;  //定义一个变量用于存放XMLHttpRequest对象\n        //定义一个用于创建XMLHttpRequest对象的函数\n        function createXMLHttpRequest(){\n          if(window.ActiveXObject){\n            //IE浏览器的创建方式\n            xmlHttpRequest = new ActiveXObject(\"Microsoft.XMLHTTP\");\n          }else if(windew.XMLHttpRequest){\n            //Netscape浏览器中的创建方式\n            xmlHttpRequest = new XMLHttpRequest();\n          }\n        }\n        //响应HTTP请求状态变化的函数\n        function httpStateChange(){\n          //判断异步调用是否完成\n          if(xmlHttpRequest.readyState == 4){\n            //判断异步调用是否成功,如果成功开始局部更新数据\n            if(xmlHttpRequest.status == 200||xmlHttpRequest.status == 0){\n              //查找节点\n              var node = document.getElementById(\"myDIv\");\n              //更新数据\n              node.firstChild.nodeValue = xmlHttpRequest .responseText;\n            }else{\n              //如果异步调用未成功,弹出警告框,并显示出错信息\n              alert(\"异步调用出错/n返回的HTTP状态码为:\"+xmlHttpRequest.status + \"/n返回的HTTP状态信息为:\" + xmlHttpRequest.statusText);\n            }\n          }\n        }\n        //异步调用服务器段数据\n        function getData(name,value){                   \n          //创建XMLHttpRequest对象\n          createXMLHttpRequest();\n          if(xmlHttpRequest!=null){\n            //创建HTTP请求\n            xmlHttpRequest.open(\"get\",\"ajax.text\",true)\n            //设置HTTP请求状态变化的函数\n            xmlHttpRequest.onreadystatechange = httpStateChange;\n            //发送请求\n            xmlHttpRequest.send(null);\n          }\n        }\n      </script>\n    </head>\n    <body>\n      <div id=\"myDiv\">原数据</div>\n      <input type = \"button\" value = \"更新数据\" onclick = \"getData()\">\n    </body>\n  </html>\n```","source":"_posts/ajax实现.md","raw":"---\ntitle: ajax实现\ndate: 2018-05-16 11:18:33\ntags: Javascript\ncategories: Demo练习\n---\nQ1: 何谓ajax，它有何优点？\nA1:AJAX = 异步 JavaScript 和 XML。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据    交换，AJAX 可以使网页实现异步更新\n\nQ2:ajax 如何实现？\nA2: \n步骤：(1)创建XMLHttpRequest对象,也就是创建一个异步调用对象.\n     (2)创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息.\n     (3)设置响应HTTP请求状态变化的函数.\n     (4)发送HTTP请求.\n     (5)获取异步调用返回的数据.\n     (6)使用JavaScript和DOM实现局部刷新.\n\n  代码实现：\n\n```HTML\n  <html>\n    <head>\n      <title>AJAX实例</title>\n      <script language=\"javascript\" type=\"text/javascript\">    \n        var xmlHttpRequest;  //定义一个变量用于存放XMLHttpRequest对象\n        //定义一个用于创建XMLHttpRequest对象的函数\n        function createXMLHttpRequest(){\n          if(window.ActiveXObject){\n            //IE浏览器的创建方式\n            xmlHttpRequest = new ActiveXObject(\"Microsoft.XMLHTTP\");\n          }else if(windew.XMLHttpRequest){\n            //Netscape浏览器中的创建方式\n            xmlHttpRequest = new XMLHttpRequest();\n          }\n        }\n        //响应HTTP请求状态变化的函数\n        function httpStateChange(){\n          //判断异步调用是否完成\n          if(xmlHttpRequest.readyState == 4){\n            //判断异步调用是否成功,如果成功开始局部更新数据\n            if(xmlHttpRequest.status == 200||xmlHttpRequest.status == 0){\n              //查找节点\n              var node = document.getElementById(\"myDIv\");\n              //更新数据\n              node.firstChild.nodeValue = xmlHttpRequest .responseText;\n            }else{\n              //如果异步调用未成功,弹出警告框,并显示出错信息\n              alert(\"异步调用出错/n返回的HTTP状态码为:\"+xmlHttpRequest.status + \"/n返回的HTTP状态信息为:\" + xmlHttpRequest.statusText);\n            }\n          }\n        }\n        //异步调用服务器段数据\n        function getData(name,value){                   \n          //创建XMLHttpRequest对象\n          createXMLHttpRequest();\n          if(xmlHttpRequest!=null){\n            //创建HTTP请求\n            xmlHttpRequest.open(\"get\",\"ajax.text\",true)\n            //设置HTTP请求状态变化的函数\n            xmlHttpRequest.onreadystatechange = httpStateChange;\n            //发送请求\n            xmlHttpRequest.send(null);\n          }\n        }\n      </script>\n    </head>\n    <body>\n      <div id=\"myDiv\">原数据</div>\n      <input type = \"button\" value = \"更新数据\" onclick = \"getData()\">\n    </body>\n  </html>\n```","slug":"ajax实现","published":1,"updated":"2018-05-16T03:29:29.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46y9y000id6spx5bonmee","content":"<p>Q1: 何谓ajax，它有何优点？<br>A1:AJAX = 异步 JavaScript 和 XML。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据    交换，AJAX 可以使网页实现异步更新</p>\n<p>Q2:ajax 如何实现？<br>A2:<br>步骤：(1)创建XMLHttpRequest对象,也就是创建一个异步调用对象.<br>     (2)创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息.<br>     (3)设置响应HTTP请求状态变化的函数.<br>     (4)发送HTTP请求.<br>     (5)获取异步调用返回的数据.<br>     (6)使用JavaScript和DOM实现局部刷新.</p>\n<p>  代码实现：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>AJAX实例<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">language</span>=<span class=\"string\">\"javascript\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\">    </span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> xmlHttpRequest;  <span class=\"comment\">//定义一个变量用于存放XMLHttpRequest对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//定义一个用于创建XMLHttpRequest对象的函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createXMLHttpRequest</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">window</span>.ActiveXObject)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//IE浏览器的创建方式</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">\"Microsoft.XMLHTTP\"</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(windew.XMLHttpRequest)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//Netscape浏览器中的创建方式</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest = <span class=\"keyword\">new</span> XMLHttpRequest();</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//响应HTTP请求状态变化的函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">httpStateChange</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//判断异步调用是否完成</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(xmlHttpRequest.readyState == <span class=\"number\">4</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//判断异步调用是否成功,如果成功开始局部更新数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">if</span>(xmlHttpRequest.status == <span class=\"number\">200</span>||xmlHttpRequest.status == <span class=\"number\">0</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//查找节点</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> node = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"myDIv\"</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//更新数据</span></span></span><br><span class=\"line\"><span class=\"undefined\">            node.firstChild.nodeValue = xmlHttpRequest .responseText;</span></span><br><span class=\"line\"><span class=\"javascript\">          &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//如果异步调用未成功,弹出警告框,并显示出错信息</span></span></span><br><span class=\"line\"><span class=\"javascript\">            alert(<span class=\"string\">\"异步调用出错/n返回的HTTP状态码为:\"</span>+xmlHttpRequest.status + <span class=\"string\">\"/n返回的HTTP状态信息为:\"</span> + xmlHttpRequest.statusText);</span></span><br><span class=\"line\"><span class=\"undefined\">          &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//异步调用服务器段数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">name,value</span>)</span>&#123;                   </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//创建XMLHttpRequest对象</span></span></span><br><span class=\"line\"><span class=\"undefined\">        createXMLHttpRequest();</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(xmlHttpRequest!=<span class=\"literal\">null</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//创建HTTP请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest.open(<span class=\"string\">\"get\"</span>,<span class=\"string\">\"ajax.text\"</span>,<span class=\"literal\">true</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//设置HTTP请求状态变化的函数</span></span></span><br><span class=\"line\"><span class=\"undefined\">          xmlHttpRequest.onreadystatechange = httpStateChange;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//发送请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest.send(<span class=\"literal\">null</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myDiv\"</span>&gt;</span>原数据<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span> = <span class=\"string\">\"button\"</span> <span class=\"attr\">value</span> = <span class=\"string\">\"更新数据\"</span> <span class=\"attr\">onclick</span> = <span class=\"string\">\"getData()\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>Q1: 何谓ajax，它有何优点？<br>A1:AJAX = 异步 JavaScript 和 XML。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据    交换，AJAX 可以使网页实现异步更新</p>\n<p>Q2:ajax 如何实现？<br>A2:<br>步骤：(1)创建XMLHttpRequest对象,也就是创建一个异步调用对象.<br>     (2)创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息.<br>     (3)设置响应HTTP请求状态变化的函数.<br>     (4)发送HTTP请求.<br>     (5)获取异步调用返回的数据.<br>     (6)使用JavaScript和DOM实现局部刷新.</p>\n<p>  代码实现：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>AJAX实例<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">language</span>=<span class=\"string\">\"javascript\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\">    </span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> xmlHttpRequest;  <span class=\"comment\">//定义一个变量用于存放XMLHttpRequest对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//定义一个用于创建XMLHttpRequest对象的函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createXMLHttpRequest</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">window</span>.ActiveXObject)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//IE浏览器的创建方式</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">\"Microsoft.XMLHTTP\"</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(windew.XMLHttpRequest)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//Netscape浏览器中的创建方式</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest = <span class=\"keyword\">new</span> XMLHttpRequest();</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//响应HTTP请求状态变化的函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">httpStateChange</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//判断异步调用是否完成</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(xmlHttpRequest.readyState == <span class=\"number\">4</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//判断异步调用是否成功,如果成功开始局部更新数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"keyword\">if</span>(xmlHttpRequest.status == <span class=\"number\">200</span>||xmlHttpRequest.status == <span class=\"number\">0</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//查找节点</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> node = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"myDIv\"</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//更新数据</span></span></span><br><span class=\"line\"><span class=\"undefined\">            node.firstChild.nodeValue = xmlHttpRequest .responseText;</span></span><br><span class=\"line\"><span class=\"javascript\">          &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//如果异步调用未成功,弹出警告框,并显示出错信息</span></span></span><br><span class=\"line\"><span class=\"javascript\">            alert(<span class=\"string\">\"异步调用出错/n返回的HTTP状态码为:\"</span>+xmlHttpRequest.status + <span class=\"string\">\"/n返回的HTTP状态信息为:\"</span> + xmlHttpRequest.statusText);</span></span><br><span class=\"line\"><span class=\"undefined\">          &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//异步调用服务器段数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">name,value</span>)</span>&#123;                   </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//创建XMLHttpRequest对象</span></span></span><br><span class=\"line\"><span class=\"undefined\">        createXMLHttpRequest();</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(xmlHttpRequest!=<span class=\"literal\">null</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//创建HTTP请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest.open(<span class=\"string\">\"get\"</span>,<span class=\"string\">\"ajax.text\"</span>,<span class=\"literal\">true</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//设置HTTP请求状态变化的函数</span></span></span><br><span class=\"line\"><span class=\"undefined\">          xmlHttpRequest.onreadystatechange = httpStateChange;</span></span><br><span class=\"line\"><span class=\"javascript\">          <span class=\"comment\">//发送请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">          xmlHttpRequest.send(<span class=\"literal\">null</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"myDiv\"</span>&gt;</span>原数据<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span> = <span class=\"string\">\"button\"</span> <span class=\"attr\">value</span> = <span class=\"string\">\"更新数据\"</span> <span class=\"attr\">onclick</span> = <span class=\"string\">\"getData()\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"PWA 之Q&A","date":"2018-05-08T08:11:07.000Z","_content":"——吉吉《PWA初窥》学习笔记\n\nQ1：什么是PWA？\nA1: PWA全称Progressive Web App，即渐进式WEB应用。一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用. 随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能\n\nQ2: PWA解决了什么问题？\nA2:  1)  可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏\n       2）实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能\n       3）实现了消息推送\n\nQ3:  App Manifest 是什么，有什么用？\nA3:  Web应用程序清单在一个JSON文本文件中提供有关应用程序的信息（如名称，作者，图标和描述）。manifest 的目的是将Web应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。\n\nQ4:  什么是service worker，有什么作用？\nA4:  Service Worker 是 Chrome 团队提出和力推的一个 WEB API，用于给 web 应用提供高级的可持续的后台处理能力。\n        Service Workers 就像介于服务器和网页之间的拦截器，能够拦截进出的HTTP 请求，从而完全控制你的网站。\n\nQ5:  service worker 有什么特点？\nA5：1）resource caching and push notifications\n        2）client-side programmable proxy between web app and the outside world\n        3）service workers run independent of the application they are associated with\n        4）the primary uses for a service workers are to act as a caching agent to handle network requests \n        5）and to store content for offline use and secondly to handle push messaging the\n        6）information that you need to persist and reuse across restartswork with IndexedDB databases\n        7）promise-based\n        8）only available on secure origins(https)\n\nQ6: HTTP缓存与service worker缓存有什么区别\nA6: HTTP缓存\n       Web 服务器可以使用 Expires 首部来通知 Web 客户端，它可以使用资源的当前副本，直到指定的“过期 \n       时间”。反过来，浏览器可以缓存此资源，并且只有在有效期满后才会再次检查新版本。\n       使用 HTTP 缓存意味着你要依赖服务器来告诉你何时缓存资源和何时过期。\n       service worker缓存\n       Service Workers 的强大在于它们拦截 HTTP 请求的能力\n       进入任何传入的 HTTP 请求，并决定想要如何响应。在你的 Service Worker 中，可以编写逻辑来决定 \n       想要缓存的资源，以及需要满足什么条件和资源需要缓存多久。一切尽归你掌控！\n       ![service worker缓存](https://github.com/kaisa911/studyNotes/blob/master/public/image/hc.png?raw=true)\n\nQ7: service worker的生命周期是怎样的？\nA7: ![生命周期](https://github.com/kaisa911/studyNotes/blob/master/public/image/lifecycle.png?raw=true)\n\nQ8: 怎么配置一个PWA\nA8: 1）准备一个html文件，以及相应的css等：\n```html\n<head>\n  <title>Minimal PWA</title>\n  <meta name=\"viewport\" content=\"width=device-width, user-scalable=no\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\">\n  <link rel=\"manifest\" href=\"manifest.json\" />\n</head>\n<body>\n  <h3>Revision 1</h3>\n  <div class=\"main-text\">Minimal PWA, open Console for more~~~</div>\n</body>\n```\n\n2）添加manifest.json文件\n\n```json\n{\n  \"name\": \"Minimal app to try PWA\",\n  \"short_name\": \"Minimal PWA\",\n  \"display\": \"standalone\",\n  \"start_url\": \"/\",\n  \"theme_color\": \"#8888ff\",\n  \"background_color\": \"#aaaaff\",\n  \"icons\": [\n    {\n      \"src\": \"e.png\",\n      \"sizes\": \"256x256\",\n      \"type\": \"image/png\"\n    }\n  ]\n}\n```\n3)添加Service Worker<br/>\nService Worker 在网页已经关闭的情况下还可以运行, 用来实现页面的缓存和离线, 后台通知等等功能。sw.js 文件需要在 HTML 当中引入:\n```html\n<script>\n  if (navigator.serviceWorker != null) {\n    navigator.serviceWorker.register('sw.js')\n    .then(function(registration) {\n      console.log('Registered events at scope: ', registration.scope);\n    });\n  }\n</script>\n```\n4)处理静态缓存\n```javascript\nvar cacheStorageKey = 'minimal-pwa-1'\n\nvar cacheList = [\n  '/',\n  \"index.html\",\n  \"main.css\",\n  \"e.png\"\n]\n```\n借助 Service Worker, 可以在注册完成安装 Service Worker 时, 抓取资源写入缓存:\n```javascript\nself.addEventListener('install', e => {\n  e.waitUntil(\n    caches.open(cacheStorageKey)\n    .then(cache => cache.addAll(cacheList))\n    .then(() => self.skipWaiting())\n  )\n})\n```\n调用 self.skipWaiting() 方法是为了在页面更新的过程当中, 新的 Service Worker 脚本能立即激活和生效。\n5）处理动态缓存\n网页抓取资源的过程中, 在 Service Worker 可以捕获到 fetch 事件, 可以编写代码决定如何响应资源的请求:\n```javascript\nself.addEventListener('fetch', function(e) {\n  e.respondWith(\n    caches.match(e.request).then(function(response) {\n      if (response != null) {\n        return response\n      }\n      return fetch(e.request.url)\n    })\n  )\n})\n```\n真实的项目当中, 可以根据资源的类型, 站点的特点, 可以专门设计复杂的策略。fetch 事件当中甚至可以手动生成 Response 返回给页面。\n6)更新静态资源\n缓存的资源随着版本的更新会过期, 所以会根据缓存的字符串名称(这里变量为 cacheStorageKey, 值用了 \"minimal-pwa-1\")清除旧缓存, 可以遍历所有的缓存名称逐一判断决决定是否清除(备注: 简化的写法, Promise.all 中 return undefined 可能出错, 见评论):\n\n```javascript\nself.addEventListener('activate', function(e) {\n  e.waitUntil(\n   Promise.all(\n        cacheNames.filter(name => {\n          return name !== cacheStorageKey\n        }).map(name => {\n          return caches.delete(name)\n        })\n      ).then(() => self.clients.claim())\n     })\n  )\n})\n```\n在新安装的 Service Worker 中通过调用 self.clients.claim() 取得页面的控制权, 这样之后打开页面都会使用版本更新的缓存。旧的 Service Worker 脚本不再控制着页面之后会被停止。\n\n\n相关文章：\n* [PWA 入门: 写个非常简单的 PWA 页面](https://zhuanlan.zhihu.com/p/25459319)\n* [讲讲PWA](https://segmentfault.com/a/1190000012353473)\n* [您的第一个 Progressive Web App](https://developers.google.cn/web/fundamentals/codelabs/your-first-pwapp/)\n\n\n\n","source":"_posts/PWA-之Q-A.md","raw":"---\ntitle: PWA 之Q&A\ndate: 2018-05-08 16:11:07\ntags:\ncategories: 学习笔记\n---\n——吉吉《PWA初窥》学习笔记\n\nQ1：什么是PWA？\nA1: PWA全称Progressive Web App，即渐进式WEB应用。一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用. 随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能\n\nQ2: PWA解决了什么问题？\nA2:  1)  可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏\n       2）实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能\n       3）实现了消息推送\n\nQ3:  App Manifest 是什么，有什么用？\nA3:  Web应用程序清单在一个JSON文本文件中提供有关应用程序的信息（如名称，作者，图标和描述）。manifest 的目的是将Web应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。\n\nQ4:  什么是service worker，有什么作用？\nA4:  Service Worker 是 Chrome 团队提出和力推的一个 WEB API，用于给 web 应用提供高级的可持续的后台处理能力。\n        Service Workers 就像介于服务器和网页之间的拦截器，能够拦截进出的HTTP 请求，从而完全控制你的网站。\n\nQ5:  service worker 有什么特点？\nA5：1）resource caching and push notifications\n        2）client-side programmable proxy between web app and the outside world\n        3）service workers run independent of the application they are associated with\n        4）the primary uses for a service workers are to act as a caching agent to handle network requests \n        5）and to store content for offline use and secondly to handle push messaging the\n        6）information that you need to persist and reuse across restartswork with IndexedDB databases\n        7）promise-based\n        8）only available on secure origins(https)\n\nQ6: HTTP缓存与service worker缓存有什么区别\nA6: HTTP缓存\n       Web 服务器可以使用 Expires 首部来通知 Web 客户端，它可以使用资源的当前副本，直到指定的“过期 \n       时间”。反过来，浏览器可以缓存此资源，并且只有在有效期满后才会再次检查新版本。\n       使用 HTTP 缓存意味着你要依赖服务器来告诉你何时缓存资源和何时过期。\n       service worker缓存\n       Service Workers 的强大在于它们拦截 HTTP 请求的能力\n       进入任何传入的 HTTP 请求，并决定想要如何响应。在你的 Service Worker 中，可以编写逻辑来决定 \n       想要缓存的资源，以及需要满足什么条件和资源需要缓存多久。一切尽归你掌控！\n       ![service worker缓存](https://github.com/kaisa911/studyNotes/blob/master/public/image/hc.png?raw=true)\n\nQ7: service worker的生命周期是怎样的？\nA7: ![生命周期](https://github.com/kaisa911/studyNotes/blob/master/public/image/lifecycle.png?raw=true)\n\nQ8: 怎么配置一个PWA\nA8: 1）准备一个html文件，以及相应的css等：\n```html\n<head>\n  <title>Minimal PWA</title>\n  <meta name=\"viewport\" content=\"width=device-width, user-scalable=no\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\">\n  <link rel=\"manifest\" href=\"manifest.json\" />\n</head>\n<body>\n  <h3>Revision 1</h3>\n  <div class=\"main-text\">Minimal PWA, open Console for more~~~</div>\n</body>\n```\n\n2）添加manifest.json文件\n\n```json\n{\n  \"name\": \"Minimal app to try PWA\",\n  \"short_name\": \"Minimal PWA\",\n  \"display\": \"standalone\",\n  \"start_url\": \"/\",\n  \"theme_color\": \"#8888ff\",\n  \"background_color\": \"#aaaaff\",\n  \"icons\": [\n    {\n      \"src\": \"e.png\",\n      \"sizes\": \"256x256\",\n      \"type\": \"image/png\"\n    }\n  ]\n}\n```\n3)添加Service Worker<br/>\nService Worker 在网页已经关闭的情况下还可以运行, 用来实现页面的缓存和离线, 后台通知等等功能。sw.js 文件需要在 HTML 当中引入:\n```html\n<script>\n  if (navigator.serviceWorker != null) {\n    navigator.serviceWorker.register('sw.js')\n    .then(function(registration) {\n      console.log('Registered events at scope: ', registration.scope);\n    });\n  }\n</script>\n```\n4)处理静态缓存\n```javascript\nvar cacheStorageKey = 'minimal-pwa-1'\n\nvar cacheList = [\n  '/',\n  \"index.html\",\n  \"main.css\",\n  \"e.png\"\n]\n```\n借助 Service Worker, 可以在注册完成安装 Service Worker 时, 抓取资源写入缓存:\n```javascript\nself.addEventListener('install', e => {\n  e.waitUntil(\n    caches.open(cacheStorageKey)\n    .then(cache => cache.addAll(cacheList))\n    .then(() => self.skipWaiting())\n  )\n})\n```\n调用 self.skipWaiting() 方法是为了在页面更新的过程当中, 新的 Service Worker 脚本能立即激活和生效。\n5）处理动态缓存\n网页抓取资源的过程中, 在 Service Worker 可以捕获到 fetch 事件, 可以编写代码决定如何响应资源的请求:\n```javascript\nself.addEventListener('fetch', function(e) {\n  e.respondWith(\n    caches.match(e.request).then(function(response) {\n      if (response != null) {\n        return response\n      }\n      return fetch(e.request.url)\n    })\n  )\n})\n```\n真实的项目当中, 可以根据资源的类型, 站点的特点, 可以专门设计复杂的策略。fetch 事件当中甚至可以手动生成 Response 返回给页面。\n6)更新静态资源\n缓存的资源随着版本的更新会过期, 所以会根据缓存的字符串名称(这里变量为 cacheStorageKey, 值用了 \"minimal-pwa-1\")清除旧缓存, 可以遍历所有的缓存名称逐一判断决决定是否清除(备注: 简化的写法, Promise.all 中 return undefined 可能出错, 见评论):\n\n```javascript\nself.addEventListener('activate', function(e) {\n  e.waitUntil(\n   Promise.all(\n        cacheNames.filter(name => {\n          return name !== cacheStorageKey\n        }).map(name => {\n          return caches.delete(name)\n        })\n      ).then(() => self.clients.claim())\n     })\n  )\n})\n```\n在新安装的 Service Worker 中通过调用 self.clients.claim() 取得页面的控制权, 这样之后打开页面都会使用版本更新的缓存。旧的 Service Worker 脚本不再控制着页面之后会被停止。\n\n\n相关文章：\n* [PWA 入门: 写个非常简单的 PWA 页面](https://zhuanlan.zhihu.com/p/25459319)\n* [讲讲PWA](https://segmentfault.com/a/1190000012353473)\n* [您的第一个 Progressive Web App](https://developers.google.cn/web/fundamentals/codelabs/your-first-pwapp/)\n\n\n\n","slug":"PWA-之Q-A","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya1000nd6spgnqk3me6","content":"<p>——吉吉《PWA初窥》学习笔记</p>\n<p>Q1：什么是PWA？<br>A1: PWA全称Progressive Web App，即渐进式WEB应用。一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用. 随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能</p>\n<p>Q2: PWA解决了什么问题？<br>A2:  1)  可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏<br>       2）实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能<br>       3）实现了消息推送</p>\n<p>Q3:  App Manifest 是什么，有什么用？<br>A3:  Web应用程序清单在一个JSON文本文件中提供有关应用程序的信息（如名称，作者，图标和描述）。manifest 的目的是将Web应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。</p>\n<p>Q4:  什么是service worker，有什么作用？<br>A4:  Service Worker 是 Chrome 团队提出和力推的一个 WEB API，用于给 web 应用提供高级的可持续的后台处理能力。<br>        Service Workers 就像介于服务器和网页之间的拦截器，能够拦截进出的HTTP 请求，从而完全控制你的网站。</p>\n<p>Q5:  service worker 有什么特点？<br>A5：1）resource caching and push notifications<br>        2）client-side programmable proxy between web app and the outside world<br>        3）service workers run independent of the application they are associated with<br>        4）the primary uses for a service workers are to act as a caching agent to handle network requests<br>        5）and to store content for offline use and secondly to handle push messaging the<br>        6）information that you need to persist and reuse across restartswork with IndexedDB databases<br>        7）promise-based<br>        8）only available on secure origins(https)</p>\n<p>Q6: HTTP缓存与service worker缓存有什么区别<br>A6: HTTP缓存<br>       Web 服务器可以使用 Expires 首部来通知 Web 客户端，它可以使用资源的当前副本，直到指定的“过期<br>       时间”。反过来，浏览器可以缓存此资源，并且只有在有效期满后才会再次检查新版本。<br>       使用 HTTP 缓存意味着你要依赖服务器来告诉你何时缓存资源和何时过期。<br>       service worker缓存<br>       Service Workers 的强大在于它们拦截 HTTP 请求的能力<br>       进入任何传入的 HTTP 请求，并决定想要如何响应。在你的 Service Worker 中，可以编写逻辑来决定<br>       想要缓存的资源，以及需要满足什么条件和资源需要缓存多久。一切尽归你掌控！<br>       <img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/hc.png?raw=true\" alt=\"service worker缓存\"></p>\n<p>Q7: service worker的生命周期是怎样的？<br>A7: <img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/lifecycle.png?raw=true\" alt=\"生命周期\"></p>\n<p>Q8: 怎么配置一个PWA<br>A8: 1）准备一个html文件，以及相应的css等：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Minimal PWA<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, user-scalable=no\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"main.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"manifest\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"manifest.json\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Revision 1<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main-text\"</span>&gt;</span>Minimal PWA, open Console for more~~~<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2）添加manifest.json文件</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Minimal app to try PWA\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"short_name\"</span>: <span class=\"string\">\"Minimal PWA\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"start_url\"</span>: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"theme_color\"</span>: <span class=\"string\">\"#8888ff\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"background_color\"</span>: <span class=\"string\">\"#aaaaff\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"icons\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"src\"</span>: <span class=\"string\">\"e.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"sizes\"</span>: <span class=\"string\">\"256x256\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3)添加Service Worker<br><br>Service Worker 在网页已经关闭的情况下还可以运行, 用来实现页面的缓存和离线, 后台通知等等功能。sw.js 文件需要在 HTML 当中引入:<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">if</span> (navigator.serviceWorker != <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    navigator.serviceWorker.register(<span class=\"string\">'sw.js'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">registration</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Registered events at scope: '</span>, registration.scope);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>4)处理静态缓存<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> cacheStorageKey = <span class=\"string\">'minimal-pwa-1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cacheList = [</span><br><span class=\"line\">  <span class=\"string\">'/'</span>,</span><br><span class=\"line\">  <span class=\"string\">\"index.html\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main.css\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"e.png\"</span></span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></p>\n<p>借助 Service Worker, 可以在注册完成安装 Service Worker 时, 抓取资源写入缓存:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'install'</span>, e =&gt; &#123;</span><br><span class=\"line\">  e.waitUntil(</span><br><span class=\"line\">    caches.open(cacheStorageKey)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">cache</span> =&gt;</span> cache.addAll(cacheList))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.skipWaiting())</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>调用 self.skipWaiting() 方法是为了在页面更新的过程当中, 新的 Service Worker 脚本能立即激活和生效。<br>5）处理动态缓存<br>网页抓取资源的过程中, 在 Service Worker 可以捕获到 fetch 事件, 可以编写代码决定如何响应资源的请求:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'fetch'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.respondWith(</span><br><span class=\"line\">    caches.match(e.request).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (response != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> fetch(e.request.url)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>真实的项目当中, 可以根据资源的类型, 站点的特点, 可以专门设计复杂的策略。fetch 事件当中甚至可以手动生成 Response 返回给页面。<br>6)更新静态资源<br>缓存的资源随着版本的更新会过期, 所以会根据缓存的字符串名称(这里变量为 cacheStorageKey, 值用了 “minimal-pwa-1”)清除旧缓存, 可以遍历所有的缓存名称逐一判断决决定是否清除(备注: 简化的写法, Promise.all 中 return undefined 可能出错, 见评论):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'activate'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.waitUntil(</span><br><span class=\"line\">   <span class=\"built_in\">Promise</span>.all(</span><br><span class=\"line\">        cacheNames.filter(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> name !== cacheStorageKey</span><br><span class=\"line\">        &#125;).map(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> caches.delete(name)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      ).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.clients.claim())</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>在新安装的 Service Worker 中通过调用 self.clients.claim() 取得页面的控制权, 这样之后打开页面都会使用版本更新的缓存。旧的 Service Worker 脚本不再控制着页面之后会被停止。</p>\n<p>相关文章：</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25459319\" target=\"_blank\" rel=\"noopener\">PWA 入门: 写个非常简单的 PWA 页面</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000012353473\" target=\"_blank\" rel=\"noopener\">讲讲PWA</a></li>\n<li><a href=\"https://developers.google.cn/web/fundamentals/codelabs/your-first-pwapp/\" target=\"_blank\" rel=\"noopener\">您的第一个 Progressive Web App</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>——吉吉《PWA初窥》学习笔记</p>\n<p>Q1：什么是PWA？<br>A1: PWA全称Progressive Web App，即渐进式WEB应用。一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用. 随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能</p>\n<p>Q2: PWA解决了什么问题？<br>A2:  1)  可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏<br>       2）实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能<br>       3）实现了消息推送</p>\n<p>Q3:  App Manifest 是什么，有什么用？<br>A3:  Web应用程序清单在一个JSON文本文件中提供有关应用程序的信息（如名称，作者，图标和描述）。manifest 的目的是将Web应用程序安装到设备的主屏幕，为用户提供更快的访问和更丰富的体验。</p>\n<p>Q4:  什么是service worker，有什么作用？<br>A4:  Service Worker 是 Chrome 团队提出和力推的一个 WEB API，用于给 web 应用提供高级的可持续的后台处理能力。<br>        Service Workers 就像介于服务器和网页之间的拦截器，能够拦截进出的HTTP 请求，从而完全控制你的网站。</p>\n<p>Q5:  service worker 有什么特点？<br>A5：1）resource caching and push notifications<br>        2）client-side programmable proxy between web app and the outside world<br>        3）service workers run independent of the application they are associated with<br>        4）the primary uses for a service workers are to act as a caching agent to handle network requests<br>        5）and to store content for offline use and secondly to handle push messaging the<br>        6）information that you need to persist and reuse across restartswork with IndexedDB databases<br>        7）promise-based<br>        8）only available on secure origins(https)</p>\n<p>Q6: HTTP缓存与service worker缓存有什么区别<br>A6: HTTP缓存<br>       Web 服务器可以使用 Expires 首部来通知 Web 客户端，它可以使用资源的当前副本，直到指定的“过期<br>       时间”。反过来，浏览器可以缓存此资源，并且只有在有效期满后才会再次检查新版本。<br>       使用 HTTP 缓存意味着你要依赖服务器来告诉你何时缓存资源和何时过期。<br>       service worker缓存<br>       Service Workers 的强大在于它们拦截 HTTP 请求的能力<br>       进入任何传入的 HTTP 请求，并决定想要如何响应。在你的 Service Worker 中，可以编写逻辑来决定<br>       想要缓存的资源，以及需要满足什么条件和资源需要缓存多久。一切尽归你掌控！<br>       <img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/hc.png?raw=true\" alt=\"service worker缓存\"></p>\n<p>Q7: service worker的生命周期是怎样的？<br>A7: <img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/lifecycle.png?raw=true\" alt=\"生命周期\"></p>\n<p>Q8: 怎么配置一个PWA<br>A8: 1）准备一个html文件，以及相应的css等：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Minimal PWA<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, user-scalable=no\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"main.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"manifest\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"manifest.json\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Revision 1<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main-text\"</span>&gt;</span>Minimal PWA, open Console for more~~~<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>2）添加manifest.json文件</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Minimal app to try PWA\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"short_name\"</span>: <span class=\"string\">\"Minimal PWA\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"start_url\"</span>: <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"theme_color\"</span>: <span class=\"string\">\"#8888ff\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"background_color\"</span>: <span class=\"string\">\"#aaaaff\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"icons\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"src\"</span>: <span class=\"string\">\"e.png\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"sizes\"</span>: <span class=\"string\">\"256x256\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3)添加Service Worker<br><br>Service Worker 在网页已经关闭的情况下还可以运行, 用来实现页面的缓存和离线, 后台通知等等功能。sw.js 文件需要在 HTML 当中引入:<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">if</span> (navigator.serviceWorker != <span class=\"literal\">null</span>) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    navigator.serviceWorker.register(<span class=\"string\">'sw.js'</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">registration</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Registered events at scope: '</span>, registration.scope);</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>4)处理静态缓存<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> cacheStorageKey = <span class=\"string\">'minimal-pwa-1'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> cacheList = [</span><br><span class=\"line\">  <span class=\"string\">'/'</span>,</span><br><span class=\"line\">  <span class=\"string\">\"index.html\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main.css\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"e.png\"</span></span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></p>\n<p>借助 Service Worker, 可以在注册完成安装 Service Worker 时, 抓取资源写入缓存:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'install'</span>, e =&gt; &#123;</span><br><span class=\"line\">  e.waitUntil(</span><br><span class=\"line\">    caches.open(cacheStorageKey)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">cache</span> =&gt;</span> cache.addAll(cacheList))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.skipWaiting())</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>调用 self.skipWaiting() 方法是为了在页面更新的过程当中, 新的 Service Worker 脚本能立即激活和生效。<br>5）处理动态缓存<br>网页抓取资源的过程中, 在 Service Worker 可以捕获到 fetch 事件, 可以编写代码决定如何响应资源的请求:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'fetch'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.respondWith(</span><br><span class=\"line\">    caches.match(e.request).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (response != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> response</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> fetch(e.request.url)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>真实的项目当中, 可以根据资源的类型, 站点的特点, 可以专门设计复杂的策略。fetch 事件当中甚至可以手动生成 Response 返回给页面。<br>6)更新静态资源<br>缓存的资源随着版本的更新会过期, 所以会根据缓存的字符串名称(这里变量为 cacheStorageKey, 值用了 “minimal-pwa-1”)清除旧缓存, 可以遍历所有的缓存名称逐一判断决决定是否清除(备注: 简化的写法, Promise.all 中 return undefined 可能出错, 见评论):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.addEventListener(<span class=\"string\">'activate'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  e.waitUntil(</span><br><span class=\"line\">   <span class=\"built_in\">Promise</span>.all(</span><br><span class=\"line\">        cacheNames.filter(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> name !== cacheStorageKey</span><br><span class=\"line\">        &#125;).map(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> caches.delete(name)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      ).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> self.clients.claim())</span><br><span class=\"line\">     &#125;)</span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>在新安装的 Service Worker 中通过调用 self.clients.claim() 取得页面的控制权, 这样之后打开页面都会使用版本更新的缓存。旧的 Service Worker 脚本不再控制着页面之后会被停止。</p>\n<p>相关文章：</p>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/25459319\" target=\"_blank\" rel=\"noopener\">PWA 入门: 写个非常简单的 PWA 页面</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000012353473\" target=\"_blank\" rel=\"noopener\">讲讲PWA</a></li>\n<li><a href=\"https://developers.google.cn/web/fundamentals/codelabs/your-first-pwapp/\" target=\"_blank\" rel=\"noopener\">您的第一个 Progressive Web App</a></li>\n</ul>\n"},{"title":"display的属性们","date":"2018-06-13T03:11:58.000Z","_content":"display： none | inline | block | list-item | inline-block | table | inline-table | table-caption | table-cell | table-row | table-row-group | table-column | table-column-group | table-footer-group | table-header-group | run-in | box | inline-box | flexbox | inline-flexbox | flex | inline-flex\n默认值：inline\n\nnone： 隐藏对象。与visibility属性的hidden值不同，其不为被隐藏的对象保留其物理空间 \ninline： 指定对象为内联元素。 \nblock： 指定对象为块元素。 \nlist-item： 指定对象为列表项目。 \ninline-block： 指定对象为内联块元素。（CSS2） \ntable： 指定对象作为块元素级的表格。类同于html标签&lt;table&gt;（CSS2） \ninline-table： 指定对象作为内联元素级的表格。类同于html标签&lt;table&gt;（CSS2） \ntable-caption： 指定对象作为表格标题。类同于html标签&lt;caption&gt;（CSS2） \ntable-cell： 指定对象作为表格单元格。类同于html标签&lt;td&gt;（CSS2） \ntable-row： 指定对象作为表格行。类同于html标签&lt;tr&gt;（CSS2） \ntable-row-group： 指定对象作为表格行组。类同于html标签&lt;tbody&gt;（CSS2） \ntable-column： 指定对象作为表格列。类同于html标签&lt;col&gt;（CSS2） \ntable-column-group： 指定对象作为表格列组显示。类同于html标签&lt;colgroup&gt;（CSS2） \ntable-header-group： 指定对象作为表格标题组。类同于html标签&lt;thead&gt;（CSS2） \ntable-footer-group： 指定对象作为表格脚注组。类同于html标签&lt;tfoot&gt;（CSS2） \nrun-in： 根据上下文决定对象是内联对象还是块级对象。（CSS3） \nbox： 将对象作为弹性伸缩盒显示。（伸缩盒最老版本）（CSS3） \ninline-box： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最老版本）（CSS3） \nflexbox： 将对象作为弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3） \ninline-flexbox： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3） \nflex： 将对象作为弹性伸缩盒显示。（伸缩盒最新版本）（CSS3） \ninline-flex： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）","source":"_posts/display的属性们.md","raw":"---\ntitle: display的属性们\ndate: 2018-06-13 11:11:58\ntags: CSS\ncategories: 面试锦囊\n---\ndisplay： none | inline | block | list-item | inline-block | table | inline-table | table-caption | table-cell | table-row | table-row-group | table-column | table-column-group | table-footer-group | table-header-group | run-in | box | inline-box | flexbox | inline-flexbox | flex | inline-flex\n默认值：inline\n\nnone： 隐藏对象。与visibility属性的hidden值不同，其不为被隐藏的对象保留其物理空间 \ninline： 指定对象为内联元素。 \nblock： 指定对象为块元素。 \nlist-item： 指定对象为列表项目。 \ninline-block： 指定对象为内联块元素。（CSS2） \ntable： 指定对象作为块元素级的表格。类同于html标签&lt;table&gt;（CSS2） \ninline-table： 指定对象作为内联元素级的表格。类同于html标签&lt;table&gt;（CSS2） \ntable-caption： 指定对象作为表格标题。类同于html标签&lt;caption&gt;（CSS2） \ntable-cell： 指定对象作为表格单元格。类同于html标签&lt;td&gt;（CSS2） \ntable-row： 指定对象作为表格行。类同于html标签&lt;tr&gt;（CSS2） \ntable-row-group： 指定对象作为表格行组。类同于html标签&lt;tbody&gt;（CSS2） \ntable-column： 指定对象作为表格列。类同于html标签&lt;col&gt;（CSS2） \ntable-column-group： 指定对象作为表格列组显示。类同于html标签&lt;colgroup&gt;（CSS2） \ntable-header-group： 指定对象作为表格标题组。类同于html标签&lt;thead&gt;（CSS2） \ntable-footer-group： 指定对象作为表格脚注组。类同于html标签&lt;tfoot&gt;（CSS2） \nrun-in： 根据上下文决定对象是内联对象还是块级对象。（CSS3） \nbox： 将对象作为弹性伸缩盒显示。（伸缩盒最老版本）（CSS3） \ninline-box： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最老版本）（CSS3） \nflexbox： 将对象作为弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3） \ninline-flexbox： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3） \nflex： 将对象作为弹性伸缩盒显示。（伸缩盒最新版本）（CSS3） \ninline-flex： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）","slug":"display的属性们","published":1,"updated":"2018-06-13T03:17:02.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya2000qd6spznkq6ht3","content":"<p>display： none | inline | block | list-item | inline-block | table | inline-table | table-caption | table-cell | table-row | table-row-group | table-column | table-column-group | table-footer-group | table-header-group | run-in | box | inline-box | flexbox | inline-flexbox | flex | inline-flex<br>默认值：inline</p>\n<p>none： 隐藏对象。与visibility属性的hidden值不同，其不为被隐藏的对象保留其物理空间<br>inline： 指定对象为内联元素。<br>block： 指定对象为块元素。<br>list-item： 指定对象为列表项目。<br>inline-block： 指定对象为内联块元素。（CSS2）<br>table： 指定对象作为块元素级的表格。类同于html标签&lt;table&gt;（CSS2）<br>inline-table： 指定对象作为内联元素级的表格。类同于html标签&lt;table&gt;（CSS2）<br>table-caption： 指定对象作为表格标题。类同于html标签&lt;caption&gt;（CSS2）<br>table-cell： 指定对象作为表格单元格。类同于html标签&lt;td&gt;（CSS2）<br>table-row： 指定对象作为表格行。类同于html标签&lt;tr&gt;（CSS2）<br>table-row-group： 指定对象作为表格行组。类同于html标签&lt;tbody&gt;（CSS2）<br>table-column： 指定对象作为表格列。类同于html标签&lt;col&gt;（CSS2）<br>table-column-group： 指定对象作为表格列组显示。类同于html标签&lt;colgroup&gt;（CSS2）<br>table-header-group： 指定对象作为表格标题组。类同于html标签&lt;thead&gt;（CSS2）<br>table-footer-group： 指定对象作为表格脚注组。类同于html标签&lt;tfoot&gt;（CSS2）<br>run-in： 根据上下文决定对象是内联对象还是块级对象。（CSS3）<br>box： 将对象作为弹性伸缩盒显示。（伸缩盒最老版本）（CSS3）<br>inline-box： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最老版本）（CSS3）<br>flexbox： 将对象作为弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3）<br>inline-flexbox： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3）<br>flex： 将对象作为弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）<br>inline-flex： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）</p>\n","site":{"data":{}},"excerpt":"","more":"<p>display： none | inline | block | list-item | inline-block | table | inline-table | table-caption | table-cell | table-row | table-row-group | table-column | table-column-group | table-footer-group | table-header-group | run-in | box | inline-box | flexbox | inline-flexbox | flex | inline-flex<br>默认值：inline</p>\n<p>none： 隐藏对象。与visibility属性的hidden值不同，其不为被隐藏的对象保留其物理空间<br>inline： 指定对象为内联元素。<br>block： 指定对象为块元素。<br>list-item： 指定对象为列表项目。<br>inline-block： 指定对象为内联块元素。（CSS2）<br>table： 指定对象作为块元素级的表格。类同于html标签&lt;table&gt;（CSS2）<br>inline-table： 指定对象作为内联元素级的表格。类同于html标签&lt;table&gt;（CSS2）<br>table-caption： 指定对象作为表格标题。类同于html标签&lt;caption&gt;（CSS2）<br>table-cell： 指定对象作为表格单元格。类同于html标签&lt;td&gt;（CSS2）<br>table-row： 指定对象作为表格行。类同于html标签&lt;tr&gt;（CSS2）<br>table-row-group： 指定对象作为表格行组。类同于html标签&lt;tbody&gt;（CSS2）<br>table-column： 指定对象作为表格列。类同于html标签&lt;col&gt;（CSS2）<br>table-column-group： 指定对象作为表格列组显示。类同于html标签&lt;colgroup&gt;（CSS2）<br>table-header-group： 指定对象作为表格标题组。类同于html标签&lt;thead&gt;（CSS2）<br>table-footer-group： 指定对象作为表格脚注组。类同于html标签&lt;tfoot&gt;（CSS2）<br>run-in： 根据上下文决定对象是内联对象还是块级对象。（CSS3）<br>box： 将对象作为弹性伸缩盒显示。（伸缩盒最老版本）（CSS3）<br>inline-box： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最老版本）（CSS3）<br>flexbox： 将对象作为弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3）<br>inline-flexbox： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒过渡版本）（CSS3）<br>flex： 将对象作为弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）<br>inline-flex： 将对象作为内联块级弹性伸缩盒显示。（伸缩盒最新版本）（CSS3）</p>\n"},{"title":"html5语意化学习","date":"2018-05-28T02:46:36.000Z","_content":"<h1>百度前端技术学院学习笔记（二）</h1>\n\n百度前端技术学院，第二天课程已经脱了好几天了，最近项目上线以及一些其他的事情，一只拖延着我这只拖延狗的进度。。今天终于抽出时间来整理一下这个知识点。\n\n## 目标简介\n\n* Date: 2018.05.28 Mon\n* Target: 熟悉html语意化。\n* Time: 1day\n\n## 语意化探究\n\n语意化，就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析。那通俗一点来说，就是为了让编写让人和机器都认识的代码。\n\n语意化的意义\n* 为了在没有样式的时候，页面也能呈现出很好地内容结构、代码结构\n* 更好的用户体验\n* 便于SEO\n* 方便其他设备解析\n* 便于团队开发和维护，语义化更具可读性，是下一步吧网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。\n\n部分语意化标签\n\n| 标签 | 意义 | 用法 \n| :-: |:------:| :-----:\n| header | 头部标签 | 用于网页顶部，作为头部 |  \n| footer | 底部标签 | 用于网页底部，内容多相关信息 |  \n| hgroup | 网页标签 | 网页或者含有多个h标签的 |  \n| nav  | 导航标签 | 放置导航栏 |\n| aside | 侧栏标签 | 侧边栏的内容 |  \n| section | 区块的标签 | 一个独立的区域 |  \n| article | 文章标签 | 一片文章的区域 |  \n| h1-h6 | 标题标签 | 按照标题的大小选择 |  \n| p | 段落标签 | 一个段落 |  \n| audio | 声音标签 | 用来链接音频 |  \n| video | 视频标签 | 用来链接视频 |  \n\n## 相关问题\nQ1: HTML是什么，HTML5是什么？\nA1: 超级文本标记语言是标准通用标记语言下的一个应用，也是一种规范，一种标准，它通过标记符号来标记要显示的网页中的各个部分。HTML5是HTML的第五次修改，HTML5的革新之一：语义化标签一节元素标签。\n\nQ2: HTML元素标签、属性都是什么概念？\nA2: HTML的标签就是一个个网页的结构元素，一个网页是由一个个元素组合起来的。属性是标签的一些性质，包括ID、名称、URI、数字、长度单位、语言、媒体描述符、颜色、字符编码、日期和时间等。\n\nQ3: 文档类型是什么概念，起什么作用？\nA3: 文档类型有严格模式和非严格模式，应用严格模式来编写页面，更严谨。H5没有文档类型。\n\nQ4: meta标签都用来做什么的？\nA4: 元素可提供相关页面的元信息（meta-information），标签位于文档的头部，不包含任何内容。标签的属性定义了与文档相关联的名称/值对。\n* meta标签共有两个属性，它们分别是http-equiv属性和name属性，不同的属性又有不同的参数值，这些不同的参数值就实现了不同的网页功能。\n* meta 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词。\n* meta 标签位于文档的头部，不包含任何内容。\n* meta 标签的属性定义了与文档相关联的名称/值对。\n\nQ5: Web语义化是什么，是为了解决什么问题\nA5：就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析\n解决了SEO等问题\n\nQ6: 链接是什么概念，对应什么标签？\nA6: 是支持浏览器文档与外部资源的关系。对应link标签\n\n","source":"_posts/html5语意化学习.md","raw":"---\ntitle: html5语意化学习\ndate: 2018-05-28 10:46:36\ntags: html\ncategories: Glory Road\n---\n<h1>百度前端技术学院学习笔记（二）</h1>\n\n百度前端技术学院，第二天课程已经脱了好几天了，最近项目上线以及一些其他的事情，一只拖延着我这只拖延狗的进度。。今天终于抽出时间来整理一下这个知识点。\n\n## 目标简介\n\n* Date: 2018.05.28 Mon\n* Target: 熟悉html语意化。\n* Time: 1day\n\n## 语意化探究\n\n语意化，就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析。那通俗一点来说，就是为了让编写让人和机器都认识的代码。\n\n语意化的意义\n* 为了在没有样式的时候，页面也能呈现出很好地内容结构、代码结构\n* 更好的用户体验\n* 便于SEO\n* 方便其他设备解析\n* 便于团队开发和维护，语义化更具可读性，是下一步吧网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。\n\n部分语意化标签\n\n| 标签 | 意义 | 用法 \n| :-: |:------:| :-----:\n| header | 头部标签 | 用于网页顶部，作为头部 |  \n| footer | 底部标签 | 用于网页底部，内容多相关信息 |  \n| hgroup | 网页标签 | 网页或者含有多个h标签的 |  \n| nav  | 导航标签 | 放置导航栏 |\n| aside | 侧栏标签 | 侧边栏的内容 |  \n| section | 区块的标签 | 一个独立的区域 |  \n| article | 文章标签 | 一片文章的区域 |  \n| h1-h6 | 标题标签 | 按照标题的大小选择 |  \n| p | 段落标签 | 一个段落 |  \n| audio | 声音标签 | 用来链接音频 |  \n| video | 视频标签 | 用来链接视频 |  \n\n## 相关问题\nQ1: HTML是什么，HTML5是什么？\nA1: 超级文本标记语言是标准通用标记语言下的一个应用，也是一种规范，一种标准，它通过标记符号来标记要显示的网页中的各个部分。HTML5是HTML的第五次修改，HTML5的革新之一：语义化标签一节元素标签。\n\nQ2: HTML元素标签、属性都是什么概念？\nA2: HTML的标签就是一个个网页的结构元素，一个网页是由一个个元素组合起来的。属性是标签的一些性质，包括ID、名称、URI、数字、长度单位、语言、媒体描述符、颜色、字符编码、日期和时间等。\n\nQ3: 文档类型是什么概念，起什么作用？\nA3: 文档类型有严格模式和非严格模式，应用严格模式来编写页面，更严谨。H5没有文档类型。\n\nQ4: meta标签都用来做什么的？\nA4: 元素可提供相关页面的元信息（meta-information），标签位于文档的头部，不包含任何内容。标签的属性定义了与文档相关联的名称/值对。\n* meta标签共有两个属性，它们分别是http-equiv属性和name属性，不同的属性又有不同的参数值，这些不同的参数值就实现了不同的网页功能。\n* meta 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词。\n* meta 标签位于文档的头部，不包含任何内容。\n* meta 标签的属性定义了与文档相关联的名称/值对。\n\nQ5: Web语义化是什么，是为了解决什么问题\nA5：就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析\n解决了SEO等问题\n\nQ6: 链接是什么概念，对应什么标签？\nA6: 是支持浏览器文档与外部资源的关系。对应link标签\n\n","slug":"html5语意化学习","published":1,"updated":"2018-05-28T03:54:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya4000vd6spwqeump3r","content":"<h1>百度前端技术学院学习笔记（二）</h1>\n\n<p>百度前端技术学院，第二天课程已经脱了好几天了，最近项目上线以及一些其他的事情，一只拖延着我这只拖延狗的进度。。今天终于抽出时间来整理一下这个知识点。</p>\n<h2 id=\"目标简介\"><a href=\"#目标简介\" class=\"headerlink\" title=\"目标简介\"></a>目标简介</h2><ul>\n<li>Date: 2018.05.28 Mon</li>\n<li>Target: 熟悉html语意化。</li>\n<li>Time: 1day</li>\n</ul>\n<h2 id=\"语意化探究\"><a href=\"#语意化探究\" class=\"headerlink\" title=\"语意化探究\"></a>语意化探究</h2><p>语意化，就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析。那通俗一点来说，就是为了让编写让人和机器都认识的代码。</p>\n<p>语意化的意义</p>\n<ul>\n<li>为了在没有样式的时候，页面也能呈现出很好地内容结构、代码结构</li>\n<li>更好的用户体验</li>\n<li>便于SEO</li>\n<li>方便其他设备解析</li>\n<li>便于团队开发和维护，语义化更具可读性，是下一步吧网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。</li>\n</ul>\n<p>部分语意化标签</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">标签</th>\n<th style=\"text-align:center\">意义</th>\n<th style=\"text-align:center\">用法 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">header</td>\n<td style=\"text-align:center\">头部标签</td>\n<td style=\"text-align:center\">用于网页顶部，作为头部</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">footer</td>\n<td style=\"text-align:center\">底部标签</td>\n<td style=\"text-align:center\">用于网页底部，内容多相关信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">hgroup</td>\n<td style=\"text-align:center\">网页标签</td>\n<td style=\"text-align:center\">网页或者含有多个h标签的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">nav</td>\n<td style=\"text-align:center\">导航标签</td>\n<td style=\"text-align:center\">放置导航栏</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">aside</td>\n<td style=\"text-align:center\">侧栏标签</td>\n<td style=\"text-align:center\">侧边栏的内容</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">section</td>\n<td style=\"text-align:center\">区块的标签</td>\n<td style=\"text-align:center\">一个独立的区域</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">article</td>\n<td style=\"text-align:center\">文章标签</td>\n<td style=\"text-align:center\">一片文章的区域</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">h1-h6</td>\n<td style=\"text-align:center\">标题标签</td>\n<td style=\"text-align:center\">按照标题的大小选择</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">p</td>\n<td style=\"text-align:center\">段落标签</td>\n<td style=\"text-align:center\">一个段落</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">audio</td>\n<td style=\"text-align:center\">声音标签</td>\n<td style=\"text-align:center\">用来链接音频</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">video</td>\n<td style=\"text-align:center\">视频标签</td>\n<td style=\"text-align:center\">用来链接视频</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"相关问题\"><a href=\"#相关问题\" class=\"headerlink\" title=\"相关问题\"></a>相关问题</h2><p>Q1: HTML是什么，HTML5是什么？<br>A1: 超级文本标记语言是标准通用标记语言下的一个应用，也是一种规范，一种标准，它通过标记符号来标记要显示的网页中的各个部分。HTML5是HTML的第五次修改，HTML5的革新之一：语义化标签一节元素标签。</p>\n<p>Q2: HTML元素标签、属性都是什么概念？<br>A2: HTML的标签就是一个个网页的结构元素，一个网页是由一个个元素组合起来的。属性是标签的一些性质，包括ID、名称、URI、数字、长度单位、语言、媒体描述符、颜色、字符编码、日期和时间等。</p>\n<p>Q3: 文档类型是什么概念，起什么作用？<br>A3: 文档类型有严格模式和非严格模式，应用严格模式来编写页面，更严谨。H5没有文档类型。</p>\n<p>Q4: meta标签都用来做什么的？<br>A4: 元素可提供相关页面的元信息（meta-information），标签位于文档的头部，不包含任何内容。标签的属性定义了与文档相关联的名称/值对。</p>\n<ul>\n<li>meta标签共有两个属性，它们分别是http-equiv属性和name属性，不同的属性又有不同的参数值，这些不同的参数值就实现了不同的网页功能。</li>\n<li>meta 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词。</li>\n<li>meta 标签位于文档的头部，不包含任何内容。</li>\n<li>meta 标签的属性定义了与文档相关联的名称/值对。</li>\n</ul>\n<p>Q5: Web语义化是什么，是为了解决什么问题<br>A5：就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析<br>解决了SEO等问题</p>\n<p>Q6: 链接是什么概念，对应什么标签？<br>A6: 是支持浏览器文档与外部资源的关系。对应link标签</p>\n","site":{"data":{}},"excerpt":"","more":"<h1>百度前端技术学院学习笔记（二）</h1>\n\n<p>百度前端技术学院，第二天课程已经脱了好几天了，最近项目上线以及一些其他的事情，一只拖延着我这只拖延狗的进度。。今天终于抽出时间来整理一下这个知识点。</p>\n<h2 id=\"目标简介\"><a href=\"#目标简介\" class=\"headerlink\" title=\"目标简介\"></a>目标简介</h2><ul>\n<li>Date: 2018.05.28 Mon</li>\n<li>Target: 熟悉html语意化。</li>\n<li>Time: 1day</li>\n</ul>\n<h2 id=\"语意化探究\"><a href=\"#语意化探究\" class=\"headerlink\" title=\"语意化探究\"></a>语意化探究</h2><p>语意化，就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析。那通俗一点来说，就是为了让编写让人和机器都认识的代码。</p>\n<p>语意化的意义</p>\n<ul>\n<li>为了在没有样式的时候，页面也能呈现出很好地内容结构、代码结构</li>\n<li>更好的用户体验</li>\n<li>便于SEO</li>\n<li>方便其他设备解析</li>\n<li>便于团队开发和维护，语义化更具可读性，是下一步吧网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。</li>\n</ul>\n<p>部分语意化标签</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">标签</th>\n<th style=\"text-align:center\">意义</th>\n<th style=\"text-align:center\">用法 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">header</td>\n<td style=\"text-align:center\">头部标签</td>\n<td style=\"text-align:center\">用于网页顶部，作为头部</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">footer</td>\n<td style=\"text-align:center\">底部标签</td>\n<td style=\"text-align:center\">用于网页底部，内容多相关信息</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">hgroup</td>\n<td style=\"text-align:center\">网页标签</td>\n<td style=\"text-align:center\">网页或者含有多个h标签的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">nav</td>\n<td style=\"text-align:center\">导航标签</td>\n<td style=\"text-align:center\">放置导航栏</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">aside</td>\n<td style=\"text-align:center\">侧栏标签</td>\n<td style=\"text-align:center\">侧边栏的内容</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">section</td>\n<td style=\"text-align:center\">区块的标签</td>\n<td style=\"text-align:center\">一个独立的区域</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">article</td>\n<td style=\"text-align:center\">文章标签</td>\n<td style=\"text-align:center\">一片文章的区域</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">h1-h6</td>\n<td style=\"text-align:center\">标题标签</td>\n<td style=\"text-align:center\">按照标题的大小选择</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">p</td>\n<td style=\"text-align:center\">段落标签</td>\n<td style=\"text-align:center\">一个段落</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">audio</td>\n<td style=\"text-align:center\">声音标签</td>\n<td style=\"text-align:center\">用来链接音频</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">video</td>\n<td style=\"text-align:center\">视频标签</td>\n<td style=\"text-align:center\">用来链接视频</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"相关问题\"><a href=\"#相关问题\" class=\"headerlink\" title=\"相关问题\"></a>相关问题</h2><p>Q1: HTML是什么，HTML5是什么？<br>A1: 超级文本标记语言是标准通用标记语言下的一个应用，也是一种规范，一种标准，它通过标记符号来标记要显示的网页中的各个部分。HTML5是HTML的第五次修改，HTML5的革新之一：语义化标签一节元素标签。</p>\n<p>Q2: HTML元素标签、属性都是什么概念？<br>A2: HTML的标签就是一个个网页的结构元素，一个网页是由一个个元素组合起来的。属性是标签的一些性质，包括ID、名称、URI、数字、长度单位、语言、媒体描述符、颜色、字符编码、日期和时间等。</p>\n<p>Q3: 文档类型是什么概念，起什么作用？<br>A3: 文档类型有严格模式和非严格模式，应用严格模式来编写页面，更严谨。H5没有文档类型。</p>\n<p>Q4: meta标签都用来做什么的？<br>A4: 元素可提供相关页面的元信息（meta-information），标签位于文档的头部，不包含任何内容。标签的属性定义了与文档相关联的名称/值对。</p>\n<ul>\n<li>meta标签共有两个属性，它们分别是http-equiv属性和name属性，不同的属性又有不同的参数值，这些不同的参数值就实现了不同的网页功能。</li>\n<li>meta 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词。</li>\n<li>meta 标签位于文档的头部，不包含任何内容。</li>\n<li>meta 标签的属性定义了与文档相关联的名称/值对。</li>\n</ul>\n<p>Q5: Web语义化是什么，是为了解决什么问题<br>A5：就是根据内容的结构化（内容语义化），选择合适的标签（代码语义化）便于开发者阅读和写出更优雅的代码的同时让浏览器的爬虫和机器很好地解析<br>解决了SEO等问题</p>\n<p>Q6: 链接是什么概念，对应什么标签？<br>A6: 是支持浏览器文档与外部资源的关系。对应link标签</p>\n"},{"title":"jquery对追加事件的绑定","date":"2018-05-14T07:01:10.000Z","_content":"写项目的时候又用到了jquery，突然发现，对于用jquery追加的元素，on方法绑定不能用。\n\n发现：\non要原始存在才绑定上，否则要用delegate来动态绑定\n```javascript\n$(document).delegate('selecter','click', function () { alert(this.innerHTML) });\n```","source":"_posts/jquery对追加事件的绑定.md","raw":"---\ntitle: jquery对追加事件的绑定\ndate: 2018-05-14 15:01:10\ntags: [Javascript, Jquery]\ncategories: bug汇总\n---\n写项目的时候又用到了jquery，突然发现，对于用jquery追加的元素，on方法绑定不能用。\n\n发现：\non要原始存在才绑定上，否则要用delegate来动态绑定\n```javascript\n$(document).delegate('selecter','click', function () { alert(this.innerHTML) });\n```","slug":"jquery对追加事件的绑定","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya5000yd6spg9tb0k5x","content":"<p>写项目的时候又用到了jquery，突然发现，对于用jquery追加的元素，on方法绑定不能用。</p>\n<p>发现：<br>on要原始存在才绑定上，否则要用delegate来动态绑定<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).delegate(<span class=\"string\">'selecter'</span>,<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert(<span class=\"keyword\">this</span>.innerHTML) &#125;);</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>写项目的时候又用到了jquery，突然发现，对于用jquery追加的元素，on方法绑定不能用。</p>\n<p>发现：<br>on要原始存在才绑定上，否则要用delegate来动态绑定<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"built_in\">document</span>).delegate(<span class=\"string\">'selecter'</span>,<span class=\"string\">'click'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert(<span class=\"keyword\">this</span>.innerHTML) &#125;);</span><br></pre></td></tr></table></figure></p>\n"},{"title":"jquery监控浏览器大小变化","date":"2018-05-14T10:10:06.000Z","_content":"```javascript\nvar screenWidth = window.screen.width;\n\n$(window).resize(function () {//当浏览器大小变化时\n  if($(window).width()!== screenWidth){\n    //history.go(0)\n  }\n});\n//监控浏览器旋转\nfunction orientationChange() {\n  switch (window.orientation) {\n    case 0:\n      //history.go(0)\n      break;\n    case -90:\n      //history.go(0)\n      break;\n    case 90:\n     // history.go(0)\n      break;\n    case 180:\n      //history.go(0)\n      break;\n  }\n}\nwindow.addEventListener('orientationchange', orientationChange);\n```","source":"_posts/jquery监控浏览器大小变化.md","raw":"---\ntitle: jquery监控浏览器大小变化\ndate: 2018-05-14 18:10:06\ntags: Jquery\ncategories: Demo练习\n---\n```javascript\nvar screenWidth = window.screen.width;\n\n$(window).resize(function () {//当浏览器大小变化时\n  if($(window).width()!== screenWidth){\n    //history.go(0)\n  }\n});\n//监控浏览器旋转\nfunction orientationChange() {\n  switch (window.orientation) {\n    case 0:\n      //history.go(0)\n      break;\n    case -90:\n      //history.go(0)\n      break;\n    case 90:\n     // history.go(0)\n      break;\n    case 180:\n      //history.go(0)\n      break;\n  }\n}\nwindow.addEventListener('orientationchange', orientationChange);\n```","slug":"jquery监控浏览器大小变化","published":1,"updated":"2018-05-14T10:13:13.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya70013d6sp8ch91hff","content":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> screenWidth = <span class=\"built_in\">window</span>.screen.width;</span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">window</span>).resize(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//当浏览器大小变化时</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>($(<span class=\"built_in\">window</span>).width()!== screenWidth)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//监控浏览器旋转</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">orientationChange</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (<span class=\"built_in\">window</span>.orientation) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">-90</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">90</span>:</span><br><span class=\"line\">     <span class=\"comment\">// history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">180</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'orientationchange'</span>, orientationChange);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> screenWidth = <span class=\"built_in\">window</span>.screen.width;</span><br><span class=\"line\"></span><br><span class=\"line\">$(<span class=\"built_in\">window</span>).resize(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">//当浏览器大小变化时</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>($(<span class=\"built_in\">window</span>).width()!== screenWidth)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//监控浏览器旋转</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">orientationChange</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (<span class=\"built_in\">window</span>.orientation) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">-90</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">90</span>:</span><br><span class=\"line\">     <span class=\"comment\">// history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"number\">180</span>:</span><br><span class=\"line\">      <span class=\"comment\">//history.go(0)</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'orientationchange'</span>, orientationChange);</span><br></pre></td></tr></table></figure>"},{"title":"immutable.js 学习","date":"2018-05-11T05:37:21.000Z","_content":"JavaScript 中的对象一般是可变的，因为Javascript为了节省内存，都是使用引用赋值，生成一个新对象如果简单的引用了原始对象，那对新对象作出的改变，也将影响到原始对象。平时简单的应用还不会特别明显，但是如果在复杂的应用中，对象的改变就会引起比较复杂的问题。往往都会使用deepCopy来解决这个问题，但是deepCopy往往会对整个对象的树进行拷贝，也会造成 CPU 和内存的浪费。\n一、什么是immutable data？\nImmutable Data 就是被创建之后不能给改变数据。Immutable 实现的原理是 Persistent Data Structure（持久化数据结构），新数据通过旧的数据创建，需要使旧数据依旧可用而且不能被改变。Immutable的这种实现原理，也避免了deepCopy复制所有节点带来的性能损耗。Immutable的实现原理见下图：\n![Immutable原理](http://img.alicdn.com/tps/i2/TB1zzi_KXXXXXctXFXXbrb8OVXX-613-575.gif)\n\n二、Immutable 优点\n1. Immutable 降低了 Mutable 带来的复杂度\n2. 节省内存\n3. Undo/Redo，Copy/Paste，甚至时间旅行这些功能做起来小菜一碟\n4. 并发安全\n5. 拥抱函数式编程\n\n三、Immutable 缺点：\n1. 需要学习新的 API\n2. 增加了资源文件大小\n3. 容易与原生对象混淆\n\n四、Immutable的数据类型\nImmutable 的几种数据类型\n1.List: 有序索引集，类似JavaScript中的Array。\n2.Map: 无序索引集，类似JavaScript中的Object。\n3.OrderedMap: 有序的Map，根据数据的set()进行排序。\n4.Set: 没有重复值的集合。\n5.OrderedSet: 有序的Set，根据数据的add进行排序。\n6.Stack: 有序集合，支持使用unshift（）和shift（）添加和删除。\n7.Range(): 返回一个Seq.Indexed类型的集合，这个方法有三个参数，start表示开始值，默认值为0，end表示结束值，默认为无穷大，step代表每次增大的数值，默认为1.如果start = end,则返回空集合。\n8.Repeat(): 返回一个vSeq.Indexe类型的集合，这个方法有两个参数，value代表需要重复的值，times代表要重复的次数，默认为无穷大。\n9.Record: 一个用于生成Record实例的类。类似于JavaScript的Object，但是只接收特定字符串为key，具有默认值。\n10.Seq: 序列，但是可能不能由具体的数据结构支持。\n11.Collection: 是构建所有数据结构的基类，不可以直接构建。\n\n用的最多就是List和Map，所以在这里主要介绍这两种数据类型的API。\n\n五、常用的API\n1.fromJS() 将一个js数据转换为Immutable类型的数据。\n用法：fromJS(value, converter)\n简介：value是要转变的数据，converter是要做的操作。第二个参数可不填，默认情况会将数组准换为List类型，将对象转换为Map类型，其余不做操作。\n\n```javascript\nconst obj = Immutable.fromJS({a:'123',b:'234'},function (key, value, path) {\n   console.log(key, value, path)\n   return isIndexed(value) ? value.toList() : value.toOrderedMap())\n})\n```\n2.toJS()\n作用：将一个Immutable数据转换为JS类型的数据。\n用法：value.toJS()\n\n3.is()对两个对象进行比较。\n用法：is(map1,map2)\n简介：和js中对象的比较不同，在js中比较两个对象比较的是地址，但是在Immutable中比较的是这个对象hashCode和valueOf，只要两个对象的hashCode相等，值就是相同的，避免了深度遍历，提高了性能。\n\n```javascript\nimport { Map, is } from 'immutable'\nconst map1 = Map({ a: 1, b: 1, c: 1 })\nconst map2 = Map({ a: 1, b: 1, c: 1 })\nmap1 === map2   //false\nObject.is(map1, map2) // false\nis(map1, map2) // true\n```\n\n4.List 和 Map\n创建\nList() 和 Map()\n\n作用：用来创建一个新的List/Map对象\n\n用法:\n\n```javascript\n//List\n\nList(): List<any>\nList<T>(): List<T>\n\n//Map\n\nMap(): Map<any>\nMap<T>(): Map<T>\nList.of() 和 Map.of()\n```\n作用：创建一个新的包含value的List/Map对象\n用法：\n```javascript\nList.of<T>(...values: Array<T>): List<T>\n\nMap.of<T>(...values: Object<T>): Map<T>\n```\n判断\n\n```javascript\nList.isList() 和 Map.isMap()\n```\n作用：判断一个数据结构是不是List/Map类型\n用法：\n```javascript\nList.isList(maybeList: any): boolean\n\nMap.isMap(maybeMap: any): boolean\n```\n长度\nsize\n\n作用：获取List/Map的长度\n\n数据读取\nget() 、 getIn()\n\n作用：获取数据结构中的数据\n\nhas() 、 hasIn()\n\n作用:判断是否存在某一个key\n\n用法：\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).has('0'); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).has('0'); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).hasIn([3,'b']) //true\nincludes()\n```\n作用：判断是否存在某一个value\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(2); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes('2'); //false 不包含字符2\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(5); //false \nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes({a:4,b:5}) //false\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(Immutable.fromJS({a:4,b:5})) //true\nfirst() 、 last()\n\n```\n作用：用来获取第一个元素或者最后一个元素，若没有则返回undefined\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).first()//1\nImmutable.fromJS([1,2,3,{a:4,b:5}]).last()//{a:4,b:5}\n\nImmutable.fromJS({a:1,b:2,c:{d:3,e:4}}).first() //1\nImmutable.fromJS({a:1,b:2,c:{d:3,e:4}}).first() //{d:3,e:4}\n```\n\n数据修改\n注：这里对于数据的修改，是对原数据进行操作后的值赋值给一个新的数据，并不会对原数据进行修改，因为Immutable是不可变的数据类型。\n\n设置 set()\n\n作用：设置第一层key、index的值\n\n用法：\n\n```javascript\nset(index: number, value: T): List<T>\nset(key: K, value: V): this\nList在使用的时候，将index为number值设置为value。Map在使用的时候，将key的值设置为value。\n```\n\n在List中使用时，若传入的number为负数，则将index为size+index的值设置为value，例，若传入-1，则将size-1的值设为value。若传入的number的值超过了List的长度，则将List自动补全为传入的number的值，将number设置为value，其余用undefined补全。注：跟js中不同，List中不存在空位，[,,,],List中若没有值，则为undefined。\n\n代码实现：\n```javascript\n//////List\nconst originalList = List([ 0 ]);\n// List [ 0 ]\noriginalList.set(1, 1);\n// List [ 0, 1 ]\noriginalList.set(0, 'overwritten');\n// List [ \"overwritten\" ]\noriginalList.set(2, 2);\n// List [ 0, undefined, 2 ]\n\nList().set(50000, 'value').size;\n// 50001\n\n//////Map\nconst { Map } = require('immutable')\nconst originalMap = Map()\nconst newerMap = originalMap.set('key', 'value')\nconst newestMap = newerMap.set('key', 'newer value')\n\noriginalMap\n// Map {}\nnewerMap\n// Map { \"key\": \"value\" }\nnewestMap\n// Map { \"key\": \"newer value\" }\n```\nsetIn()\n作用：设置深层结构中某属性的值\n用法：\n```javascript\nsetIn(keyPath: Iterable<any>, value: any): this\n用法与set()一样，只是第一个参数是一个数组，代表要设置的属性所在的位置\n```\n\n\n\n删除 delete\n\n作用：用来删除第一层结构中的属性\n\n用法：\n```javascript\ndelete(index: number): List<T>  //List\ndelete(key: K): this  //Map\ndeleteIn()\n```\n用来删除深层数据，用法参考setIn\ndeleteAll() (Map独有，List没有)\n作用：用来删除Map中的多个key\n用法：\n```javascript\ndeleteAll(keys: Iterable<K>): this\n```\n\n代码示例：\n```javascript\nconst names = Map({ a: \"Aaron\", b: \"Barry\", c: \"Connor\" })\nnames.deleteAll([ 'a', 'c' ])\n// Map { \"b\": \"Barry\" }\n```\n更新 update()\n作用：对对象中的某个属性进行更新，可对原数据进行相关操作\n用法：\n```javascript\nupdate(index: number, updater: (value: T) => T): this //List\nupdate(key: K, updater: (value: V) => V): this  //Map\n```\n代码示例：\n```javascript\n////List\nconst list = List([ 'a', 'b', 'c' ])\nconst result = list.update(2, val => val.toUpperCase())\n\n///Map\nconst aMap = Map({ key: 'value' })\nconst newMap = aMap.update('key', value => value + value)\nupdateIn()\n```\n用法参考setIn\n\n清除 clear()\n\n作用：清除所有数据\n\n用法：clear(): this\n\n代码示例：\n```javascript\nMap({ key: 'value' }).clear()  //Map\nList([ 1, 2, 3, 4 ]).clear()   // List\n```\nList中的各种删除与插入\nList对应的数据结构是js中的数组，所以数组的一些方法在Immutable中也是通用的，比如push，pop,shift，unshift，insert。\n\npush()：在List末尾插入一个元素\npop(): 在List末尾删除一个元素\nunshift: 在List首部插入一个元素\nshift: 在List首部删除一个元素\ninsert：在List的index处插入元素\n代码实现：\n```javascript\nList([ 0, 1, 2, 3, 4 ]).insert(6, 5) \n//List [ 0, 1, 2, 3, 4, 5 ]\nList([ 1, 2, 3, 4 ]).push(5)\n// List [ 1, 2, 3, 4, 5 ]\nList([ 1, 2, 3, 4 ]).pop()\n// List[ 1, 2, 3 ]\nList([ 2, 3, 4]).unshift(1);\n// List [ 1, 2, 3, 4 ]\nList([ 0, 1, 2, 3, 4 ]).shift();\n// List [ 1, 2, 3, 4 ]\nList中还有一个特有的方法用法设置List的长度，setSize()\nList([]).setSize(2).toJS() //[undefined,undefined]\n\n```\n\n关于merge\nmerge\n\n作用：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，就数据中已存在的属性用新数据中的覆盖\n\nmergrWith\n\n作用：自定义浅合并，可自行设置某些属性的值\n\nmergeIn\n\n作用：对深层数据进行浅合并\n\nmergeDeep\n\n作用：深合并，新旧数据中同时存在的的属性为新旧数据合并之后的数据\n\nmergeDeepIn\n\n作用：对深层数据进行深合并\n\nmergrDeepWith\n\n作用:自定义深合并，可自行设置某些属性的值\n这里用一段示例彻底搞懂merge，此示例为Map结构，List与Map原理相同\n```javascript\n const Map1 = Immutable.fromJS({a:111,b:222,c:{d:333,e:444}});\n const Map2 = Immutable.fromJS({a:111,b:222,c:{e:444,f:555}});\n\n const Map3 = Map1.merge(Map2);\n  //Map {a:111,b:222,c:{e:444,f:555}}\n const Map4 = Map1.mergeDeep(Map2);\n  //Map {a:111,b:222,c:{d:333,e:444,f:555}}\n const Map5 = Map1.mergeWith((oldData,newData,key)=>{\n      if(key === 'a'){\n        return 666;\n      }else{\n        return newData\n      }\n    },Map2);\n  //Map {a:666,b:222,c:{e:444,f:555}}\n\n```\n序列算法\nconcat()\n作用：对象的拼接，用法与js数组中的concat()相同，返回一个新的对象。\n用法：\n```javascript\nconst List = list1.concat(list2)\n```\nmap()\n作用：遍历整个对象，对Map/List元素进行操作，返回一个新的对象。\n用法：\n```javascript\nMap({a:1,b:2}).map(val=>10*val)\n//Map{a:10,b:20}\n```\nMap特有的mapKey()\n作用：遍历整个对象，对Map元素的key进行操作，返回一个新的对象。\n用法：\n```javascript\nMap({a:1,b:2}).mapKey(val=>val+'l')\n//Map{al:10,bl:20}\n```\nMap特有的mapEntries()\n\n作用：遍历整个对象，对Map元素的key和value同时进行操作，返回一个新的对象。Map的map()也可实现此功能。\n用法：\n```javascript\nMap({a:1,b:2}).map((key,val)=>{\n  return [key+'l',val*10]\n})\n//Map{al:10,bl:20}\n```\n过滤 filter\n作用：返回一个新的对象，包括所有满足过滤条件的元素\n用法：\n```javascript\nMap({a:1,b:2}).filter((key,val)=>{\n  return val == 2\n})\n//Map{b:2}\n```\n还有一个filterNot()方法，与此方法正好相反。\n反转 reverse\n作用：将数据的结构进行反转\n代码示例：\n```javascript\nImmutable.fromJS([1, 2, 3, 4, 5]).reverse();\n// List [5,4,3,2,1]\nImmutable.fromJS({a:1,b:{c:2,d:3},e:4}).recerse();\n//Map {e:4,b:{c:2,d:3},a:1}\n```\n排序 sort & sortBy\n作用：对数据结构进行排序\n代码示例：\n```javascript\n///List\nImmutable.fromJS([4,3,5,2,6,1]).sort()\n// List [1,2,3,4,5,6]\nImmutable.fromJS([4,3,5,2,6,1]).sort((a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n// List [1,2,3,4,5,6]\nImmutable.fromJS([{a:3},{a:2},{a:4},{a:1}]).sortBy((val,index,obj)=>{\n  return val.get('a')\n},(a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n//List  [ {a:3}, {a:2}, {a:4}, {a:1} ]\n\n//Map\n\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sort()\n//Map {b: 1, c: 2, a: 3, d: 5}\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sort((a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n//Map {b: 1, c: 2, a: 3, d: 5}\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sortBy((value, key, obj)=> {\n  return value\n})\n//Map {b: 1, c: 2, a: 3, d: 5}\n```\n分组 groupBy\n作用：对数据进行分组\n```javascript\nconst listOfMaps = List([\n  Map({ v: 0 }),\n  Map({ v: 1 }),\n  Map({ v: 1 }),\n  Map({ v: 0 }),\n  Map({ v: 2 })\n])\nconst groupsOfMaps = listOfMaps.groupBy(x => x.get('v'))\n// Map {\n//   0: List [ Map{ \"v\": 0 }, Map { \"v\": 0 } ],\n//   1: List [ Map{ \"v\": 1 }, Map { \"v\": 1 } ],\n//   2: List [ Map{ \"v\": 2 } ],\n// }\n```\n查找数据\nindexOf() 、 lastIndexOf Map不存在此方法\n作用：和js数组中的方法相同，查找第一个或者最后一个value的index值，找不到则返回-1\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).indexof(3) //2\nImmutable.fromJS([1,2,3,4]).lastIndexof(3) //2\n```\nfindIndex() 、 findLastIndex() Map不存在此方法\n作用：查找满足要求的元素的index值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findIndex((value,index,array)=>{\n  return value%2 === 0;\n})   // 1\nImmutable.fromJS([1,2,3,4]).findLastIndex((value,index,array)=>{\n  return index%2 === 0;\n})  // 3\n```\nfind() 、 findLast()\n作用：查找满足条件的元素的value值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).find((value,index,array)=>{\n  return value%2 === 0;\n})  // 2\n\nImmutable.fromJS([1,2,3,4]).findLast((value,index,array)=>{\n  return value%2 === 0;\n})  // 4\n```\nfindKey() 、 findLastKey()\n作用：查找满足条件的元素的key值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findKey((value,index,array)=>{\n  return value%2 === 0;\n})  // 1\n\nImmutable.fromJS([1,2,3,4]).findLastKey((value,index,array)=>{\n  return value%2 === 0;\n})  // 3\n```\nfindEntry() 、 findLastEntry()\n作用：查找满足条件的元素的键值对 key:value\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findEntry((value,index,array)=>{\n  return value%2 === 0;\n})  // [1,2]\n\nImmutable.fromJS([1,2,3,4]).findLastEntry((value,index,array)=>{\n  return value%2 === 0;\n})  // [3,4]\n```\nkeyOf() lastKeyOf()\n作用：查找某一个value对应的key值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).keyOf(2) //1\nImmutable.fromJS([1,2,3,4]).lastKeyOf(2) //1\n```\nmax() 、 maxBy()\n作用：查找最大值\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).max() //4\n\nImmutable.fromJS([{a;1},{a:2},{a: 3},{a:4}]).maxBy((value,index,array)=>{\n  return value.get('a')\n})  //{a:4}\n```\n\nmin() 、 minBy()\n\n作用：查找最小值\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).min() //1\n\nImmutable.fromJS([{a;1},{a:2},{a: 3},{a:4}]).minBy((value,index,array)=>{\n  return value.get('a')\n})  //{a:1}\n```\n创建子集\nslice()\n\n作用： 和原生js中数组的slice数组一样，包含两个参数，start和end，start代表开始截取的位置，end代表结束的位置，不包括第end的元素。若不包括end，则返回整个对象，若end为负数，则返回（start，length-end）对应的数据。若start只有一个并且为负数，则返回最后的end个元素。\n\n用法：\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).slice(0); //[1,2,3,4]\nImmutable.fromJS([1, 2, 3, 4]).slice(0,2); //[1,2]\nImmutable.fromJS([1, 2, 3, 4]).slice(-2); //[3,4]\nImmutable.fromJS([1, 2, 3, 4]).slice(0,-2); //[1,2]\n```\n\n\nrest()\n作用：返回除第一个元素之外的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).rest()//[2,3,4]\n```\nbutLast()\n作用：返回除最后一个元素之外的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).rest()//[1,2,3]\n```\nskip()\n作用：有一个参数n, 返回截掉前n个元素之后剩下的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skip(1)//[2,3,4]\n```\n\n\n\nskipLast()\n\n作用：有一个参数n, 返回截掉最后n个元素之后剩下的所有元素\n\n用法:\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skip(1)//[1,2,3]\n```\nskipWhile()\n\n作用：返回从第一次返回false之后的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipWhile(list.skipWhile((value,index,list)=>{\n  return value > 2;\n}))// [1,2,3,4]\n```\n\n\nskipUntil()\n\n作用：返回从第一次返回true之后的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipUntil(list.skipWhile((value,index,list)=>{\n  return value > 2;\n}))// [3,4]\n```\n\n\ntake()\n\n作用：有一个参数n, 返回前n个元素\n\n用法:Immutable.fromJS([1, 2, 3, 4]).take(2)//[1,2]\n\ntakeLast()\n\n作用：有一个参数n, 返回最后n个元素\n\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).takeLast(2)//[3,4]\n```\n\n\ntakeWhile()\n\n作用：返回从第一次返回false之前的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipWhile(list.takeWhile((value,index,list)=>{\n  return value > 2;\n}))// []\n```\n\n\ntakeUntil()\n\n作用：返回从第一次返回true之前的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipUntil(list.takeUntil((value,index,list)=>{\n  return value > 2;\n}))// [1,2]\n```\n\n\n处理数据\nreduce()\n\n作用：和js中数组中的reduce相同,按索引升序的顺序处理元素\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).reduce((pre,next,index,arr)=>{\n  console.log(pre+next)\n  return pre+next; \n})\n// 3 6 10\n```\n\n\nreduceRight()\n\n作用：和js中数组中的reduce相同,按索引降序的顺序处理元素\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).reduceRight((pre,next,index,arr)=>{\n  console.log(pre+next)\n  return pre+next; \n})\n// 7 9 10\n```\n\n\nevery()\n\n作用：判断整个对象总中所有的元素是不是都满足某一个条件，都满足返回true，反之返回false。\n\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).every((value,index,arr)=>{\n  return value > 2\n}) // false\n```\n\n\nsome()\n\n作用：判断整个对象总中所有的元素是不是存在满足某一个条件的元素，若存在返回true，反之返回false。\n\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).some((value,index,arr)=>{\n  return value > 2\n}) // true\n```\n\n\njoin()\n\n作用：同js中数组的join方法。把准换为字符串\n\n用法：Immutable.fromJS([1,2,3,4]).join(',') //1,2,3,4\n\nisEmpty()\n\n作用：判断是否为空\n\n用法:\n\n```javascript\nImmutable.fromJS([]).isEmpty(); // true\nImmutable.fromJS({}).isEmpty(); // true\n```\n\n\ncount()\n\n作用：返回元素个数，可自定义条件，返回满足条件的个数\n\n用法：\n\n```javascript\nconst list = Immutable.fromJS([1,2,3,4]);\nconst map = Immutable.fromJS({a:1,b:2,c:3,d:4});\n\nlist.count((value,index,list)=>{\n  return value > 2;\n})    //2\n\nmap.count((value,index,list)=>{\n  return value > 2;\n})    //2\n```\n\n\n\ncountBy()\n\n作用：与count不同的是，countBy返回一个对象\n\n用法：\n\n```javascript\nconst list = Immutable.fromJS([1,2,3,4]);\nconst map = Immutable.fromJS({a:1,b:2,c:3,d:4});\nlist.countBy((value,index,list)=>{\n  return value > 2;\n} //{false: 2, true: 2}\nmap.countBy((value,index,list)=>{\n  return value > 2;\n} //{false: 2, true: 2}\n```\n\n","source":"_posts/immutable-js-学习.md","raw":"---\ntitle: immutable.js 学习\ndate: 2018-05-11 13:37:21\ntags: [Javascript, immutable, react]\ncategories: 学习笔记\n---\nJavaScript 中的对象一般是可变的，因为Javascript为了节省内存，都是使用引用赋值，生成一个新对象如果简单的引用了原始对象，那对新对象作出的改变，也将影响到原始对象。平时简单的应用还不会特别明显，但是如果在复杂的应用中，对象的改变就会引起比较复杂的问题。往往都会使用deepCopy来解决这个问题，但是deepCopy往往会对整个对象的树进行拷贝，也会造成 CPU 和内存的浪费。\n一、什么是immutable data？\nImmutable Data 就是被创建之后不能给改变数据。Immutable 实现的原理是 Persistent Data Structure（持久化数据结构），新数据通过旧的数据创建，需要使旧数据依旧可用而且不能被改变。Immutable的这种实现原理，也避免了deepCopy复制所有节点带来的性能损耗。Immutable的实现原理见下图：\n![Immutable原理](http://img.alicdn.com/tps/i2/TB1zzi_KXXXXXctXFXXbrb8OVXX-613-575.gif)\n\n二、Immutable 优点\n1. Immutable 降低了 Mutable 带来的复杂度\n2. 节省内存\n3. Undo/Redo，Copy/Paste，甚至时间旅行这些功能做起来小菜一碟\n4. 并发安全\n5. 拥抱函数式编程\n\n三、Immutable 缺点：\n1. 需要学习新的 API\n2. 增加了资源文件大小\n3. 容易与原生对象混淆\n\n四、Immutable的数据类型\nImmutable 的几种数据类型\n1.List: 有序索引集，类似JavaScript中的Array。\n2.Map: 无序索引集，类似JavaScript中的Object。\n3.OrderedMap: 有序的Map，根据数据的set()进行排序。\n4.Set: 没有重复值的集合。\n5.OrderedSet: 有序的Set，根据数据的add进行排序。\n6.Stack: 有序集合，支持使用unshift（）和shift（）添加和删除。\n7.Range(): 返回一个Seq.Indexed类型的集合，这个方法有三个参数，start表示开始值，默认值为0，end表示结束值，默认为无穷大，step代表每次增大的数值，默认为1.如果start = end,则返回空集合。\n8.Repeat(): 返回一个vSeq.Indexe类型的集合，这个方法有两个参数，value代表需要重复的值，times代表要重复的次数，默认为无穷大。\n9.Record: 一个用于生成Record实例的类。类似于JavaScript的Object，但是只接收特定字符串为key，具有默认值。\n10.Seq: 序列，但是可能不能由具体的数据结构支持。\n11.Collection: 是构建所有数据结构的基类，不可以直接构建。\n\n用的最多就是List和Map，所以在这里主要介绍这两种数据类型的API。\n\n五、常用的API\n1.fromJS() 将一个js数据转换为Immutable类型的数据。\n用法：fromJS(value, converter)\n简介：value是要转变的数据，converter是要做的操作。第二个参数可不填，默认情况会将数组准换为List类型，将对象转换为Map类型，其余不做操作。\n\n```javascript\nconst obj = Immutable.fromJS({a:'123',b:'234'},function (key, value, path) {\n   console.log(key, value, path)\n   return isIndexed(value) ? value.toList() : value.toOrderedMap())\n})\n```\n2.toJS()\n作用：将一个Immutable数据转换为JS类型的数据。\n用法：value.toJS()\n\n3.is()对两个对象进行比较。\n用法：is(map1,map2)\n简介：和js中对象的比较不同，在js中比较两个对象比较的是地址，但是在Immutable中比较的是这个对象hashCode和valueOf，只要两个对象的hashCode相等，值就是相同的，避免了深度遍历，提高了性能。\n\n```javascript\nimport { Map, is } from 'immutable'\nconst map1 = Map({ a: 1, b: 1, c: 1 })\nconst map2 = Map({ a: 1, b: 1, c: 1 })\nmap1 === map2   //false\nObject.is(map1, map2) // false\nis(map1, map2) // true\n```\n\n4.List 和 Map\n创建\nList() 和 Map()\n\n作用：用来创建一个新的List/Map对象\n\n用法:\n\n```javascript\n//List\n\nList(): List<any>\nList<T>(): List<T>\n\n//Map\n\nMap(): Map<any>\nMap<T>(): Map<T>\nList.of() 和 Map.of()\n```\n作用：创建一个新的包含value的List/Map对象\n用法：\n```javascript\nList.of<T>(...values: Array<T>): List<T>\n\nMap.of<T>(...values: Object<T>): Map<T>\n```\n判断\n\n```javascript\nList.isList() 和 Map.isMap()\n```\n作用：判断一个数据结构是不是List/Map类型\n用法：\n```javascript\nList.isList(maybeList: any): boolean\n\nMap.isMap(maybeMap: any): boolean\n```\n长度\nsize\n\n作用：获取List/Map的长度\n\n数据读取\nget() 、 getIn()\n\n作用：获取数据结构中的数据\n\nhas() 、 hasIn()\n\n作用:判断是否存在某一个key\n\n用法：\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).has('0'); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).has('0'); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).hasIn([3,'b']) //true\nincludes()\n```\n作用：判断是否存在某一个value\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(2); //true\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes('2'); //false 不包含字符2\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(5); //false \nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes({a:4,b:5}) //false\nImmutable.fromJS([1,2,3,{a:4,b:5}]).includes(Immutable.fromJS({a:4,b:5})) //true\nfirst() 、 last()\n\n```\n作用：用来获取第一个元素或者最后一个元素，若没有则返回undefined\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,{a:4,b:5}]).first()//1\nImmutable.fromJS([1,2,3,{a:4,b:5}]).last()//{a:4,b:5}\n\nImmutable.fromJS({a:1,b:2,c:{d:3,e:4}}).first() //1\nImmutable.fromJS({a:1,b:2,c:{d:3,e:4}}).first() //{d:3,e:4}\n```\n\n数据修改\n注：这里对于数据的修改，是对原数据进行操作后的值赋值给一个新的数据，并不会对原数据进行修改，因为Immutable是不可变的数据类型。\n\n设置 set()\n\n作用：设置第一层key、index的值\n\n用法：\n\n```javascript\nset(index: number, value: T): List<T>\nset(key: K, value: V): this\nList在使用的时候，将index为number值设置为value。Map在使用的时候，将key的值设置为value。\n```\n\n在List中使用时，若传入的number为负数，则将index为size+index的值设置为value，例，若传入-1，则将size-1的值设为value。若传入的number的值超过了List的长度，则将List自动补全为传入的number的值，将number设置为value，其余用undefined补全。注：跟js中不同，List中不存在空位，[,,,],List中若没有值，则为undefined。\n\n代码实现：\n```javascript\n//////List\nconst originalList = List([ 0 ]);\n// List [ 0 ]\noriginalList.set(1, 1);\n// List [ 0, 1 ]\noriginalList.set(0, 'overwritten');\n// List [ \"overwritten\" ]\noriginalList.set(2, 2);\n// List [ 0, undefined, 2 ]\n\nList().set(50000, 'value').size;\n// 50001\n\n//////Map\nconst { Map } = require('immutable')\nconst originalMap = Map()\nconst newerMap = originalMap.set('key', 'value')\nconst newestMap = newerMap.set('key', 'newer value')\n\noriginalMap\n// Map {}\nnewerMap\n// Map { \"key\": \"value\" }\nnewestMap\n// Map { \"key\": \"newer value\" }\n```\nsetIn()\n作用：设置深层结构中某属性的值\n用法：\n```javascript\nsetIn(keyPath: Iterable<any>, value: any): this\n用法与set()一样，只是第一个参数是一个数组，代表要设置的属性所在的位置\n```\n\n\n\n删除 delete\n\n作用：用来删除第一层结构中的属性\n\n用法：\n```javascript\ndelete(index: number): List<T>  //List\ndelete(key: K): this  //Map\ndeleteIn()\n```\n用来删除深层数据，用法参考setIn\ndeleteAll() (Map独有，List没有)\n作用：用来删除Map中的多个key\n用法：\n```javascript\ndeleteAll(keys: Iterable<K>): this\n```\n\n代码示例：\n```javascript\nconst names = Map({ a: \"Aaron\", b: \"Barry\", c: \"Connor\" })\nnames.deleteAll([ 'a', 'c' ])\n// Map { \"b\": \"Barry\" }\n```\n更新 update()\n作用：对对象中的某个属性进行更新，可对原数据进行相关操作\n用法：\n```javascript\nupdate(index: number, updater: (value: T) => T): this //List\nupdate(key: K, updater: (value: V) => V): this  //Map\n```\n代码示例：\n```javascript\n////List\nconst list = List([ 'a', 'b', 'c' ])\nconst result = list.update(2, val => val.toUpperCase())\n\n///Map\nconst aMap = Map({ key: 'value' })\nconst newMap = aMap.update('key', value => value + value)\nupdateIn()\n```\n用法参考setIn\n\n清除 clear()\n\n作用：清除所有数据\n\n用法：clear(): this\n\n代码示例：\n```javascript\nMap({ key: 'value' }).clear()  //Map\nList([ 1, 2, 3, 4 ]).clear()   // List\n```\nList中的各种删除与插入\nList对应的数据结构是js中的数组，所以数组的一些方法在Immutable中也是通用的，比如push，pop,shift，unshift，insert。\n\npush()：在List末尾插入一个元素\npop(): 在List末尾删除一个元素\nunshift: 在List首部插入一个元素\nshift: 在List首部删除一个元素\ninsert：在List的index处插入元素\n代码实现：\n```javascript\nList([ 0, 1, 2, 3, 4 ]).insert(6, 5) \n//List [ 0, 1, 2, 3, 4, 5 ]\nList([ 1, 2, 3, 4 ]).push(5)\n// List [ 1, 2, 3, 4, 5 ]\nList([ 1, 2, 3, 4 ]).pop()\n// List[ 1, 2, 3 ]\nList([ 2, 3, 4]).unshift(1);\n// List [ 1, 2, 3, 4 ]\nList([ 0, 1, 2, 3, 4 ]).shift();\n// List [ 1, 2, 3, 4 ]\nList中还有一个特有的方法用法设置List的长度，setSize()\nList([]).setSize(2).toJS() //[undefined,undefined]\n\n```\n\n关于merge\nmerge\n\n作用：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，就数据中已存在的属性用新数据中的覆盖\n\nmergrWith\n\n作用：自定义浅合并，可自行设置某些属性的值\n\nmergeIn\n\n作用：对深层数据进行浅合并\n\nmergeDeep\n\n作用：深合并，新旧数据中同时存在的的属性为新旧数据合并之后的数据\n\nmergeDeepIn\n\n作用：对深层数据进行深合并\n\nmergrDeepWith\n\n作用:自定义深合并，可自行设置某些属性的值\n这里用一段示例彻底搞懂merge，此示例为Map结构，List与Map原理相同\n```javascript\n const Map1 = Immutable.fromJS({a:111,b:222,c:{d:333,e:444}});\n const Map2 = Immutable.fromJS({a:111,b:222,c:{e:444,f:555}});\n\n const Map3 = Map1.merge(Map2);\n  //Map {a:111,b:222,c:{e:444,f:555}}\n const Map4 = Map1.mergeDeep(Map2);\n  //Map {a:111,b:222,c:{d:333,e:444,f:555}}\n const Map5 = Map1.mergeWith((oldData,newData,key)=>{\n      if(key === 'a'){\n        return 666;\n      }else{\n        return newData\n      }\n    },Map2);\n  //Map {a:666,b:222,c:{e:444,f:555}}\n\n```\n序列算法\nconcat()\n作用：对象的拼接，用法与js数组中的concat()相同，返回一个新的对象。\n用法：\n```javascript\nconst List = list1.concat(list2)\n```\nmap()\n作用：遍历整个对象，对Map/List元素进行操作，返回一个新的对象。\n用法：\n```javascript\nMap({a:1,b:2}).map(val=>10*val)\n//Map{a:10,b:20}\n```\nMap特有的mapKey()\n作用：遍历整个对象，对Map元素的key进行操作，返回一个新的对象。\n用法：\n```javascript\nMap({a:1,b:2}).mapKey(val=>val+'l')\n//Map{al:10,bl:20}\n```\nMap特有的mapEntries()\n\n作用：遍历整个对象，对Map元素的key和value同时进行操作，返回一个新的对象。Map的map()也可实现此功能。\n用法：\n```javascript\nMap({a:1,b:2}).map((key,val)=>{\n  return [key+'l',val*10]\n})\n//Map{al:10,bl:20}\n```\n过滤 filter\n作用：返回一个新的对象，包括所有满足过滤条件的元素\n用法：\n```javascript\nMap({a:1,b:2}).filter((key,val)=>{\n  return val == 2\n})\n//Map{b:2}\n```\n还有一个filterNot()方法，与此方法正好相反。\n反转 reverse\n作用：将数据的结构进行反转\n代码示例：\n```javascript\nImmutable.fromJS([1, 2, 3, 4, 5]).reverse();\n// List [5,4,3,2,1]\nImmutable.fromJS({a:1,b:{c:2,d:3},e:4}).recerse();\n//Map {e:4,b:{c:2,d:3},a:1}\n```\n排序 sort & sortBy\n作用：对数据结构进行排序\n代码示例：\n```javascript\n///List\nImmutable.fromJS([4,3,5,2,6,1]).sort()\n// List [1,2,3,4,5,6]\nImmutable.fromJS([4,3,5,2,6,1]).sort((a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n// List [1,2,3,4,5,6]\nImmutable.fromJS([{a:3},{a:2},{a:4},{a:1}]).sortBy((val,index,obj)=>{\n  return val.get('a')\n},(a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n//List  [ {a:3}, {a:2}, {a:4}, {a:1} ]\n\n//Map\n\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sort()\n//Map {b: 1, c: 2, a: 3, d: 5}\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sort((a,b)=>{\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  if (a === b) { return 0; }\n})\n//Map {b: 1, c: 2, a: 3, d: 5}\nImmutable.fromJS( {b:1, a: 3, c: 2, d:5} ).sortBy((value, key, obj)=> {\n  return value\n})\n//Map {b: 1, c: 2, a: 3, d: 5}\n```\n分组 groupBy\n作用：对数据进行分组\n```javascript\nconst listOfMaps = List([\n  Map({ v: 0 }),\n  Map({ v: 1 }),\n  Map({ v: 1 }),\n  Map({ v: 0 }),\n  Map({ v: 2 })\n])\nconst groupsOfMaps = listOfMaps.groupBy(x => x.get('v'))\n// Map {\n//   0: List [ Map{ \"v\": 0 }, Map { \"v\": 0 } ],\n//   1: List [ Map{ \"v\": 1 }, Map { \"v\": 1 } ],\n//   2: List [ Map{ \"v\": 2 } ],\n// }\n```\n查找数据\nindexOf() 、 lastIndexOf Map不存在此方法\n作用：和js数组中的方法相同，查找第一个或者最后一个value的index值，找不到则返回-1\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).indexof(3) //2\nImmutable.fromJS([1,2,3,4]).lastIndexof(3) //2\n```\nfindIndex() 、 findLastIndex() Map不存在此方法\n作用：查找满足要求的元素的index值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findIndex((value,index,array)=>{\n  return value%2 === 0;\n})   // 1\nImmutable.fromJS([1,2,3,4]).findLastIndex((value,index,array)=>{\n  return index%2 === 0;\n})  // 3\n```\nfind() 、 findLast()\n作用：查找满足条件的元素的value值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).find((value,index,array)=>{\n  return value%2 === 0;\n})  // 2\n\nImmutable.fromJS([1,2,3,4]).findLast((value,index,array)=>{\n  return value%2 === 0;\n})  // 4\n```\nfindKey() 、 findLastKey()\n作用：查找满足条件的元素的key值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findKey((value,index,array)=>{\n  return value%2 === 0;\n})  // 1\n\nImmutable.fromJS([1,2,3,4]).findLastKey((value,index,array)=>{\n  return value%2 === 0;\n})  // 3\n```\nfindEntry() 、 findLastEntry()\n作用：查找满足条件的元素的键值对 key:value\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).findEntry((value,index,array)=>{\n  return value%2 === 0;\n})  // [1,2]\n\nImmutable.fromJS([1,2,3,4]).findLastEntry((value,index,array)=>{\n  return value%2 === 0;\n})  // [3,4]\n```\nkeyOf() lastKeyOf()\n作用：查找某一个value对应的key值\n用法：\n```javascript\nImmutable.fromJS([1,2,3,4]).keyOf(2) //1\nImmutable.fromJS([1,2,3,4]).lastKeyOf(2) //1\n```\nmax() 、 maxBy()\n作用：查找最大值\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).max() //4\n\nImmutable.fromJS([{a;1},{a:2},{a: 3},{a:4}]).maxBy((value,index,array)=>{\n  return value.get('a')\n})  //{a:4}\n```\n\nmin() 、 minBy()\n\n作用：查找最小值\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).min() //1\n\nImmutable.fromJS([{a;1},{a:2},{a: 3},{a:4}]).minBy((value,index,array)=>{\n  return value.get('a')\n})  //{a:1}\n```\n创建子集\nslice()\n\n作用： 和原生js中数组的slice数组一样，包含两个参数，start和end，start代表开始截取的位置，end代表结束的位置，不包括第end的元素。若不包括end，则返回整个对象，若end为负数，则返回（start，length-end）对应的数据。若start只有一个并且为负数，则返回最后的end个元素。\n\n用法：\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).slice(0); //[1,2,3,4]\nImmutable.fromJS([1, 2, 3, 4]).slice(0,2); //[1,2]\nImmutable.fromJS([1, 2, 3, 4]).slice(-2); //[3,4]\nImmutable.fromJS([1, 2, 3, 4]).slice(0,-2); //[1,2]\n```\n\n\nrest()\n作用：返回除第一个元素之外的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).rest()//[2,3,4]\n```\nbutLast()\n作用：返回除最后一个元素之外的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).rest()//[1,2,3]\n```\nskip()\n作用：有一个参数n, 返回截掉前n个元素之后剩下的所有元素\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skip(1)//[2,3,4]\n```\n\n\n\nskipLast()\n\n作用：有一个参数n, 返回截掉最后n个元素之后剩下的所有元素\n\n用法:\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skip(1)//[1,2,3]\n```\nskipWhile()\n\n作用：返回从第一次返回false之后的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipWhile(list.skipWhile((value,index,list)=>{\n  return value > 2;\n}))// [1,2,3,4]\n```\n\n\nskipUntil()\n\n作用：返回从第一次返回true之后的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipUntil(list.skipWhile((value,index,list)=>{\n  return value > 2;\n}))// [3,4]\n```\n\n\ntake()\n\n作用：有一个参数n, 返回前n个元素\n\n用法:Immutable.fromJS([1, 2, 3, 4]).take(2)//[1,2]\n\ntakeLast()\n\n作用：有一个参数n, 返回最后n个元素\n\n用法:\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).takeLast(2)//[3,4]\n```\n\n\ntakeWhile()\n\n作用：返回从第一次返回false之前的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipWhile(list.takeWhile((value,index,list)=>{\n  return value > 2;\n}))// []\n```\n\n\ntakeUntil()\n\n作用：返回从第一次返回true之前的所有元素\n\n```javascript\nImmutable.fromJS([1, 2, 3, 4]).skipUntil(list.takeUntil((value,index,list)=>{\n  return value > 2;\n}))// [1,2]\n```\n\n\n处理数据\nreduce()\n\n作用：和js中数组中的reduce相同,按索引升序的顺序处理元素\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).reduce((pre,next,index,arr)=>{\n  console.log(pre+next)\n  return pre+next; \n})\n// 3 6 10\n```\n\n\nreduceRight()\n\n作用：和js中数组中的reduce相同,按索引降序的顺序处理元素\n\n用法：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).reduceRight((pre,next,index,arr)=>{\n  console.log(pre+next)\n  return pre+next; \n})\n// 7 9 10\n```\n\n\nevery()\n\n作用：判断整个对象总中所有的元素是不是都满足某一个条件，都满足返回true，反之返回false。\n\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).every((value,index,arr)=>{\n  return value > 2\n}) // false\n```\n\n\nsome()\n\n作用：判断整个对象总中所有的元素是不是存在满足某一个条件的元素，若存在返回true，反之返回false。\n\n代码：\n\n```javascript\nImmutable.fromJS([1,2,3,4]).some((value,index,arr)=>{\n  return value > 2\n}) // true\n```\n\n\njoin()\n\n作用：同js中数组的join方法。把准换为字符串\n\n用法：Immutable.fromJS([1,2,3,4]).join(',') //1,2,3,4\n\nisEmpty()\n\n作用：判断是否为空\n\n用法:\n\n```javascript\nImmutable.fromJS([]).isEmpty(); // true\nImmutable.fromJS({}).isEmpty(); // true\n```\n\n\ncount()\n\n作用：返回元素个数，可自定义条件，返回满足条件的个数\n\n用法：\n\n```javascript\nconst list = Immutable.fromJS([1,2,3,4]);\nconst map = Immutable.fromJS({a:1,b:2,c:3,d:4});\n\nlist.count((value,index,list)=>{\n  return value > 2;\n})    //2\n\nmap.count((value,index,list)=>{\n  return value > 2;\n})    //2\n```\n\n\n\ncountBy()\n\n作用：与count不同的是，countBy返回一个对象\n\n用法：\n\n```javascript\nconst list = Immutable.fromJS([1,2,3,4]);\nconst map = Immutable.fromJS({a:1,b:2,c:3,d:4});\nlist.countBy((value,index,list)=>{\n  return value > 2;\n} //{false: 2, true: 2}\nmap.countBy((value,index,list)=>{\n  return value > 2;\n} //{false: 2, true: 2}\n```\n\n","slug":"immutable-js-学习","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya80016d6sp4w2o8cnt","content":"<p>JavaScript 中的对象一般是可变的，因为Javascript为了节省内存，都是使用引用赋值，生成一个新对象如果简单的引用了原始对象，那对新对象作出的改变，也将影响到原始对象。平时简单的应用还不会特别明显，但是如果在复杂的应用中，对象的改变就会引起比较复杂的问题。往往都会使用deepCopy来解决这个问题，但是deepCopy往往会对整个对象的树进行拷贝，也会造成 CPU 和内存的浪费。<br>一、什么是immutable data？<br>Immutable Data 就是被创建之后不能给改变数据。Immutable 实现的原理是 Persistent Data Structure（持久化数据结构），新数据通过旧的数据创建，需要使旧数据依旧可用而且不能被改变。Immutable的这种实现原理，也避免了deepCopy复制所有节点带来的性能损耗。Immutable的实现原理见下图：<br><img src=\"http://img.alicdn.com/tps/i2/TB1zzi_KXXXXXctXFXXbrb8OVXX-613-575.gif\" alt=\"Immutable原理\"></p>\n<p>二、Immutable 优点</p>\n<ol>\n<li>Immutable 降低了 Mutable 带来的复杂度</li>\n<li>节省内存</li>\n<li>Undo/Redo，Copy/Paste，甚至时间旅行这些功能做起来小菜一碟</li>\n<li>并发安全</li>\n<li>拥抱函数式编程</li>\n</ol>\n<p>三、Immutable 缺点：</p>\n<ol>\n<li>需要学习新的 API</li>\n<li>增加了资源文件大小</li>\n<li>容易与原生对象混淆</li>\n</ol>\n<p>四、Immutable的数据类型<br>Immutable 的几种数据类型<br>1.List: 有序索引集，类似JavaScript中的Array。<br>2.Map: 无序索引集，类似JavaScript中的Object。<br>3.OrderedMap: 有序的Map，根据数据的set()进行排序。<br>4.Set: 没有重复值的集合。<br>5.OrderedSet: 有序的Set，根据数据的add进行排序。<br>6.Stack: 有序集合，支持使用unshift（）和shift（）添加和删除。<br>7.Range(): 返回一个Seq.Indexed类型的集合，这个方法有三个参数，start表示开始值，默认值为0，end表示结束值，默认为无穷大，step代表每次增大的数值，默认为1.如果start = end,则返回空集合。<br>8.Repeat(): 返回一个vSeq.Indexe类型的集合，这个方法有两个参数，value代表需要重复的值，times代表要重复的次数，默认为无穷大。<br>9.Record: 一个用于生成Record实例的类。类似于JavaScript的Object，但是只接收特定字符串为key，具有默认值。<br>10.Seq: 序列，但是可能不能由具体的数据结构支持。<br>11.Collection: 是构建所有数据结构的基类，不可以直接构建。</p>\n<p>用的最多就是List和Map，所以在这里主要介绍这两种数据类型的API。</p>\n<p>五、常用的API<br>1.fromJS() 将一个js数据转换为Immutable类型的数据。<br>用法：fromJS(value, converter)<br>简介：value是要转变的数据，converter是要做的操作。第二个参数可不填，默认情况会将数组准换为List类型，将对象转换为Map类型，其余不做操作。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"string\">'123'</span>,<span class=\"attr\">b</span>:<span class=\"string\">'234'</span>&#125;,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, value, path</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(key, value, path)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> isIndexed(value) ? value.toList() : value.toOrderedMap())</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>2.toJS()<br>作用：将一个Immutable数据转换为JS类型的数据。<br>用法：value.toJS()</p>\n<p>3.is()对两个对象进行比较。<br>用法：is(map1,map2)<br>简介：和js中对象的比较不同，在js中比较两个对象比较的是地址，但是在Immutable中比较的是这个对象hashCode和valueOf，只要两个对象的hashCode相等，值就是相同的，避免了深度遍历，提高了性能。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"built_in\">Map</span>, is &#125; <span class=\"keyword\">from</span> <span class=\"string\">'immutable'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> map1 = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">1</span>, <span class=\"attr\">c</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> map2 = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">1</span>, <span class=\"attr\">c</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">map1 === map2   <span class=\"comment\">//false</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.is(map1, map2) <span class=\"comment\">// false</span></span><br><span class=\"line\">is(map1, map2) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>4.List 和 Map<br>创建<br>List() 和 Map()</p>\n<p>作用：用来创建一个新的List/Map对象</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//List</span></span><br><span class=\"line\"></span><br><span class=\"line\">List(): List&lt;any&gt;</span><br><span class=\"line\">List&lt;T&gt;(): List&lt;T&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Map</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>(): <span class=\"built_in\">Map</span>&lt;any&gt;</span><br><span class=\"line\"><span class=\"built_in\">Map</span>&lt;T&gt;(): <span class=\"built_in\">Map</span>&lt;T&gt;</span><br><span class=\"line\">List.of() 和 <span class=\"built_in\">Map</span>.of()</span><br></pre></td></tr></table></figure>\n<p>作用：创建一个新的包含value的List/Map对象<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.of&lt;T&gt;(...values: <span class=\"built_in\">Array</span>&lt;T&gt;): List&lt;T&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>.of&lt;T&gt;(...values: <span class=\"built_in\">Object</span>&lt;T&gt;): <span class=\"built_in\">Map</span>&lt;T&gt;</span><br></pre></td></tr></table></figure></p>\n<p>判断</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.isList() 和 <span class=\"built_in\">Map</span>.isMap()</span><br></pre></td></tr></table></figure>\n<p>作用：判断一个数据结构是不是List/Map类型<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.isList(maybeList: any): boolean</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>.isMap(maybeMap: any): boolean</span><br></pre></td></tr></table></figure></p>\n<p>长度<br>size</p>\n<p>作用：获取List/Map的长度</p>\n<p>数据读取<br>get() 、 getIn()</p>\n<p>作用：获取数据结构中的数据</p>\n<p>has() 、 hasIn()</p>\n<p>作用:判断是否存在某一个key</p>\n<p>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).has(<span class=\"string\">'0'</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).has(<span class=\"string\">'0'</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).hasIn([<span class=\"number\">3</span>,<span class=\"string\">'b'</span>]) <span class=\"comment\">//true</span></span><br><span class=\"line\">includes()</span><br></pre></td></tr></table></figure></p>\n<p>作用：判断是否存在某一个value</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"number\">2</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"string\">'2'</span>); <span class=\"comment\">//false 不包含字符2</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"number\">5</span>); <span class=\"comment\">//false </span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;) <span class=\"comment\">//false</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;)) <span class=\"comment\">//true</span></span><br><span class=\"line\">first() 、 last()</span><br></pre></td></tr></table></figure>\n<p>作用：用来获取第一个元素或者最后一个元素，若没有则返回undefined<br>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).first()<span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).last()<span class=\"comment\">//&#123;a:4,b:5&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">3</span>,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;&#125;).first() <span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">3</span>,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;&#125;).first() <span class=\"comment\">//&#123;d:3,e:4&#125;</span></span><br></pre></td></tr></table></figure>\n<p>数据修改<br>注：这里对于数据的修改，是对原数据进行操作后的值赋值给一个新的数据，并不会对原数据进行修改，因为Immutable是不可变的数据类型。</p>\n<p>设置 set()</p>\n<p>作用：设置第一层key、index的值</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set(index: number, <span class=\"attr\">value</span>: T): List&lt;T&gt;</span><br><span class=\"line\">set(key: K, <span class=\"attr\">value</span>: V): <span class=\"keyword\">this</span></span><br><span class=\"line\">List在使用的时候，将index为number值设置为value。<span class=\"built_in\">Map</span>在使用的时候，将key的值设置为value。</span><br></pre></td></tr></table></figure>\n<p>在List中使用时，若传入的number为负数，则将index为size+index的值设置为value，例，若传入-1，则将size-1的值设为value。若传入的number的值超过了List的长度，则将List自动补全为传入的number的值，将number设置为value，其余用undefined补全。注：跟js中不同，List中不存在空位，[,,,],List中若没有值，则为undefined。</p>\n<p>代码实现：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//////List</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> originalList = List([ <span class=\"number\">0</span> ]);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0 ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0, 1 ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">0</span>, <span class=\"string\">'overwritten'</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ \"overwritten\" ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">2</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0, undefined, 2 ]</span></span><br><span class=\"line\"></span><br><span class=\"line\">List().set(<span class=\"number\">50000</span>, <span class=\"string\">'value'</span>).size;</span><br><span class=\"line\"><span class=\"comment\">// 50001</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//////Map</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"built_in\">Map</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'immutable'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> originalMap = <span class=\"built_in\">Map</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> newerMap = originalMap.set(<span class=\"string\">'key'</span>, <span class=\"string\">'value'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> newestMap = newerMap.set(<span class=\"string\">'key'</span>, <span class=\"string\">'newer value'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">originalMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123;&#125;</span></span><br><span class=\"line\">newerMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"key\": \"value\" &#125;</span></span><br><span class=\"line\">newestMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"key\": \"newer value\" &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>setIn()<br>作用：设置深层结构中某属性的值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setIn(keyPath: Iterable&lt;any&gt;, <span class=\"attr\">value</span>: any): <span class=\"keyword\">this</span></span><br><span class=\"line\">用法与set()一样，只是第一个参数是一个数组，代表要设置的属性所在的位置</span><br></pre></td></tr></table></figure></p>\n<p>删除 delete</p>\n<p>作用：用来删除第一层结构中的属性</p>\n<p>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span>(index: number): List&lt;T&gt;  <span class=\"comment\">//List</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span>(key: K): <span class=\"keyword\">this</span>  <span class=\"comment\">//Map</span></span><br><span class=\"line\">deleteIn()</span><br></pre></td></tr></table></figure></p>\n<p>用来删除深层数据，用法参考setIn<br>deleteAll() (Map独有，List没有)<br>作用：用来删除Map中的多个key<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deleteAll(keys: Iterable&lt;K&gt;): <span class=\"keyword\">this</span></span><br></pre></td></tr></table></figure></p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> names = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"string\">\"Aaron\"</span>, <span class=\"attr\">b</span>: <span class=\"string\">\"Barry\"</span>, <span class=\"attr\">c</span>: <span class=\"string\">\"Connor\"</span> &#125;)</span><br><span class=\"line\">names.deleteAll([ <span class=\"string\">'a'</span>, <span class=\"string\">'c'</span> ])</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"b\": \"Barry\" &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>更新 update()<br>作用：对对象中的某个属性进行更新，可对原数据进行相关操作<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update(index: number, <span class=\"attr\">updater</span>: <span class=\"function\">(<span class=\"params\">value: T</span>) =&gt;</span> T): <span class=\"keyword\">this</span> <span class=\"comment\">//List</span></span><br><span class=\"line\">update(key: K, <span class=\"attr\">updater</span>: <span class=\"function\">(<span class=\"params\">value: V</span>) =&gt;</span> V): <span class=\"keyword\">this</span>  <span class=\"comment\">//Map</span></span><br></pre></td></tr></table></figure></p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">////List</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> list = List([ <span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span> ])</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = list.update(<span class=\"number\">2</span>, val =&gt; val.toUpperCase())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">///Map</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> aMap = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">key</span>: <span class=\"string\">'value'</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> newMap = aMap.update(<span class=\"string\">'key'</span>, value =&gt; value + value)</span><br><span class=\"line\">updateIn()</span><br></pre></td></tr></table></figure></p>\n<p>用法参考setIn</p>\n<p>清除 clear()</p>\n<p>作用：清除所有数据</p>\n<p>用法：clear(): this</p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">key</span>: <span class=\"string\">'value'</span> &#125;).clear()  <span class=\"comment\">//Map</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).clear()   <span class=\"comment\">// List</span></span><br></pre></td></tr></table></figure></p>\n<p>List中的各种删除与插入<br>List对应的数据结构是js中的数组，所以数组的一些方法在Immutable中也是通用的，比如push，pop,shift，unshift，insert。</p>\n<p>push()：在List末尾插入一个元素<br>pop(): 在List末尾删除一个元素<br>unshift: 在List首部插入一个元素<br>shift: 在List首部删除一个元素<br>insert：在List的index处插入元素<br>代码实现：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List([ <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).insert(<span class=\"number\">6</span>, <span class=\"number\">5</span>) </span><br><span class=\"line\"><span class=\"comment\">//List [ 0, 1, 2, 3, 4, 5 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).push(<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4, 5 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).pop()</span><br><span class=\"line\"><span class=\"comment\">// List[ 1, 2, 3 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).unshift(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).shift();</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">List中还有一个特有的方法用法设置List的长度，setSize()</span><br><span class=\"line\">List([]).setSize(<span class=\"number\">2</span>).toJS() <span class=\"comment\">//[undefined,undefined]</span></span><br></pre></td></tr></table></figure></p>\n<p>关于merge<br>merge</p>\n<p>作用：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，就数据中已存在的属性用新数据中的覆盖</p>\n<p>mergrWith</p>\n<p>作用：自定义浅合并，可自行设置某些属性的值</p>\n<p>mergeIn</p>\n<p>作用：对深层数据进行浅合并</p>\n<p>mergeDeep</p>\n<p>作用：深合并，新旧数据中同时存在的的属性为新旧数据合并之后的数据</p>\n<p>mergeDeepIn</p>\n<p>作用：对深层数据进行深合并</p>\n<p>mergrDeepWith</p>\n<p>作用:自定义深合并，可自行设置某些属性的值<br>这里用一段示例彻底搞懂merge，此示例为Map结构，List与Map原理相同<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Map1 = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">111</span>,<span class=\"attr\">b</span>:<span class=\"number\">222</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">333</span>,<span class=\"attr\">e</span>:<span class=\"number\">444</span>&#125;&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Map2 = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">111</span>,<span class=\"attr\">b</span>:<span class=\"number\">222</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">e</span>:<span class=\"number\">444</span>,<span class=\"attr\">f</span>:<span class=\"number\">555</span>&#125;&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map3 = Map1.merge(Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:111,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map4 = Map1.mergeDeep(Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:111,b:222,c:&#123;d:333,e:444,f:555&#125;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map5 = Map1.mergeWith(<span class=\"function\">(<span class=\"params\">oldData,newData,key</span>)=&gt;</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(key === <span class=\"string\">'a'</span>)&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">666</span>;</span><br><span class=\"line\">     &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> newData</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;,Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:666,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>序列算法<br>concat()<br>作用：对象的拼接，用法与js数组中的concat()相同，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> List = list1.concat(list2)</span><br></pre></td></tr></table></figure></p>\n<p>map()<br>作用：遍历整个对象，对Map/List元素进行操作，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).map(<span class=\"function\"><span class=\"params\">val</span>=&gt;</span><span class=\"number\">10</span>*val)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;a:10,b:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>Map特有的mapKey()<br>作用：遍历整个对象，对Map元素的key进行操作，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).mapKey(<span class=\"function\"><span class=\"params\">val</span>=&gt;</span>val+<span class=\"string\">'l'</span>)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;al:10,bl:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>Map特有的mapEntries()</p>\n<p>作用：遍历整个对象，对Map元素的key和value同时进行操作，返回一个新的对象。Map的map()也可实现此功能。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).map(<span class=\"function\">(<span class=\"params\">key,val</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [key+<span class=\"string\">'l'</span>,val*<span class=\"number\">10</span>]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;al:10,bl:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>过滤 filter<br>作用：返回一个新的对象，包括所有满足过滤条件的元素<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).filter(<span class=\"function\">(<span class=\"params\">key,val</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> val == <span class=\"number\">2</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;b:2&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>还有一个filterNot()方法，与此方法正好相反。<br>反转 reverse<br>作用：将数据的结构进行反转<br>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]).reverse();</span><br><span class=\"line\"><span class=\"comment\">// List [5,4,3,2,1]</span></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:&#123;<span class=\"attr\">c</span>:<span class=\"number\">2</span>,<span class=\"attr\">d</span>:<span class=\"number\">3</span>&#125;,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;).recerse();</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;e:4,b:&#123;c:2,d:3&#125;,a:1&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>排序 sort &amp; sortBy<br>作用：对数据结构进行排序<br>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">///List</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">1</span>]).sort()</span><br><span class=\"line\"><span class=\"comment\">// List [1,2,3,4,5,6]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">1</span>]).sort(<span class=\"function\">(<span class=\"params\">a,b</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// List [1,2,3,4,5,6]</span></span><br><span class=\"line\">Immutable.fromJS([&#123;<span class=\"attr\">a</span>:<span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;]).sortBy(<span class=\"function\">(<span class=\"params\">val,index,obj</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> val.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;,(a,b)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//List  [ &#123;a:3&#125;, &#123;a:2&#125;, &#123;a:4&#125;, &#123;a:1&#125; ]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Map</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sort()</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sort(<span class=\"function\">(<span class=\"params\">a,b</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sortBy(<span class=\"function\">(<span class=\"params\">value, key, obj</span>)=&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>分组 groupBy<br>作用：对数据进行分组<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> listOfMaps = List([</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">0</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">1</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">1</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">0</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">2</span> &#125;)</span><br><span class=\"line\">])</span><br><span class=\"line\"><span class=\"keyword\">const</span> groupsOfMaps = listOfMaps.groupBy(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x.get(<span class=\"string\">'v'</span>))</span><br><span class=\"line\"><span class=\"comment\">// Map &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   0: List [ Map&#123; \"v\": 0 &#125;, Map &#123; \"v\": 0 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">//   1: List [ Map&#123; \"v\": 1 &#125;, Map &#123; \"v\": 1 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">//   2: List [ Map&#123; \"v\": 2 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>查找数据<br>indexOf() 、 lastIndexOf Map不存在此方法<br>作用：和js数组中的方法相同，查找第一个或者最后一个value的index值，找不到则返回-1<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).indexof(<span class=\"number\">3</span>) <span class=\"comment\">//2</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).lastIndexof(<span class=\"number\">3</span>) <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure></p>\n<p>findIndex() 、 findLastIndex() Map不存在此方法<br>作用：查找满足要求的元素的index值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findIndex(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)   <span class=\"comment\">// 1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastIndex(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> index%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure></p>\n<p>find() 、 findLast()<br>作用：查找满足条件的元素的value值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).find(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLast(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure></p>\n<p>findKey() 、 findLastKey()<br>作用：查找满足条件的元素的key值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findKey(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastKey(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure></p>\n<p>findEntry() 、 findLastEntry()<br>作用：查找满足条件的元素的键值对 key:value<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findEntry(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// [1,2]</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastEntry(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// [3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>keyOf() lastKeyOf()<br>作用：查找某一个value对应的key值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).keyOf(<span class=\"number\">2</span>) <span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).lastKeyOf(<span class=\"number\">2</span>) <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure></p>\n<p>max() 、 maxBy()<br>作用：查找最大值<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).max() <span class=\"comment\">//4</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([&#123;a;<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>: <span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;]).maxBy(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;)  <span class=\"comment\">//&#123;a:4&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>min() 、 minBy()</p>\n<p>作用：查找最小值<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).min() <span class=\"comment\">//1</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([&#123;a;<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>: <span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;]).minBy(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;)  <span class=\"comment\">//&#123;a:1&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>创建子集<br>slice()</p>\n<p>作用： 和原生js中数组的slice数组一样，包含两个参数，start和end，start代表开始截取的位置，end代表结束的位置，不包括第end的元素。若不包括end，则返回整个对象，若end为负数，则返回（start，length-end）对应的数据。若start只有一个并且为负数，则返回最后的end个元素。</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>); <span class=\"comment\">//[1,2,3,4]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>,<span class=\"number\">2</span>); <span class=\"comment\">//[1,2]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">-2</span>); <span class=\"comment\">//[3,4]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>,<span class=\"number\">-2</span>); <span class=\"comment\">//[1,2]</span></span><br></pre></td></tr></table></figure>\n<p>rest()<br>作用：返回除第一个元素之外的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).rest()<span class=\"comment\">//[2,3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>butLast()<br>作用：返回除最后一个元素之外的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).rest()<span class=\"comment\">//[1,2,3]</span></span><br></pre></td></tr></table></figure></p>\n<p>skip()<br>作用：有一个参数n, 返回截掉前n个元素之后剩下的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skip(<span class=\"number\">1</span>)<span class=\"comment\">//[2,3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>skipLast()</p>\n<p>作用：有一个参数n, 返回截掉最后n个元素之后剩下的所有元素</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skip(<span class=\"number\">1</span>)<span class=\"comment\">//[1,2,3]</span></span><br></pre></td></tr></table></figure>\n<p>skipWhile()</p>\n<p>作用：返回从第一次返回false之后的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipWhile(list.skipWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure>\n<p>skipUntil()</p>\n<p>作用：返回从第一次返回true之后的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipUntil(list.skipWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [3,4]</span></span><br></pre></td></tr></table></figure>\n<p>take()</p>\n<p>作用：有一个参数n, 返回前n个元素</p>\n<p>用法:Immutable.fromJS([1, 2, 3, 4]).take(2)//[1,2]</p>\n<p>takeLast()</p>\n<p>作用：有一个参数n, 返回最后n个元素</p>\n<p>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).takeLast(<span class=\"number\">2</span>)<span class=\"comment\">//[3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>takeWhile()</p>\n<p>作用：返回从第一次返回false之前的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipWhile(list.takeWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// []</span></span><br></pre></td></tr></table></figure>\n<p>takeUntil()</p>\n<p>作用：返回从第一次返回true之前的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipUntil(list.takeUntil(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [1,2]</span></span><br></pre></td></tr></table></figure>\n<p>处理数据<br>reduce()</p>\n<p>作用：和js中数组中的reduce相同,按索引升序的顺序处理元素</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).reduce(<span class=\"function\">(<span class=\"params\">pre,next,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pre+next)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> pre+next; </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 3 6 10</span></span><br></pre></td></tr></table></figure>\n<p>reduceRight()</p>\n<p>作用：和js中数组中的reduce相同,按索引降序的顺序处理元素</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).reduceRight(<span class=\"function\">(<span class=\"params\">pre,next,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pre+next)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> pre+next; </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 7 9 10</span></span><br></pre></td></tr></table></figure>\n<p>every()</p>\n<p>作用：判断整个对象总中所有的元素是不是都满足某一个条件，都满足返回true，反之返回false。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).every(<span class=\"function\">(<span class=\"params\">value,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span></span><br><span class=\"line\">&#125;) <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<p>some()</p>\n<p>作用：判断整个对象总中所有的元素是不是存在满足某一个条件的元素，若存在返回true，反之返回false。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).some(<span class=\"function\">(<span class=\"params\">value,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span></span><br><span class=\"line\">&#125;) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>join()</p>\n<p>作用：同js中数组的join方法。把准换为字符串</p>\n<p>用法：Immutable.fromJS([1,2,3,4]).join(‘,’) //1,2,3,4</p>\n<p>isEmpty()</p>\n<p>作用：判断是否为空</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([]).isEmpty(); <span class=\"comment\">// true</span></span><br><span class=\"line\">Immutable.fromJS(&#123;&#125;).isEmpty(); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>count()</p>\n<p>作用：返回元素个数，可自定义条件，返回满足条件的个数</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> map = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:<span class=\"number\">3</span>,<span class=\"attr\">d</span>:<span class=\"number\">4</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">list.count(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;)    <span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br><span class=\"line\">map.count(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;)    <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n<p>countBy()</p>\n<p>作用：与count不同的是，countBy返回一个对象</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> map = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:<span class=\"number\">3</span>,<span class=\"attr\">d</span>:<span class=\"number\">4</span>&#125;);</span><br><span class=\"line\">list.countBy(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"comment\">//&#123;false: 2, true: 2&#125;</span></span><br><span class=\"line\">map.countBy(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"comment\">//&#123;false: 2, true: 2&#125;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>JavaScript 中的对象一般是可变的，因为Javascript为了节省内存，都是使用引用赋值，生成一个新对象如果简单的引用了原始对象，那对新对象作出的改变，也将影响到原始对象。平时简单的应用还不会特别明显，但是如果在复杂的应用中，对象的改变就会引起比较复杂的问题。往往都会使用deepCopy来解决这个问题，但是deepCopy往往会对整个对象的树进行拷贝，也会造成 CPU 和内存的浪费。<br>一、什么是immutable data？<br>Immutable Data 就是被创建之后不能给改变数据。Immutable 实现的原理是 Persistent Data Structure（持久化数据结构），新数据通过旧的数据创建，需要使旧数据依旧可用而且不能被改变。Immutable的这种实现原理，也避免了deepCopy复制所有节点带来的性能损耗。Immutable的实现原理见下图：<br><img src=\"http://img.alicdn.com/tps/i2/TB1zzi_KXXXXXctXFXXbrb8OVXX-613-575.gif\" alt=\"Immutable原理\"></p>\n<p>二、Immutable 优点</p>\n<ol>\n<li>Immutable 降低了 Mutable 带来的复杂度</li>\n<li>节省内存</li>\n<li>Undo/Redo，Copy/Paste，甚至时间旅行这些功能做起来小菜一碟</li>\n<li>并发安全</li>\n<li>拥抱函数式编程</li>\n</ol>\n<p>三、Immutable 缺点：</p>\n<ol>\n<li>需要学习新的 API</li>\n<li>增加了资源文件大小</li>\n<li>容易与原生对象混淆</li>\n</ol>\n<p>四、Immutable的数据类型<br>Immutable 的几种数据类型<br>1.List: 有序索引集，类似JavaScript中的Array。<br>2.Map: 无序索引集，类似JavaScript中的Object。<br>3.OrderedMap: 有序的Map，根据数据的set()进行排序。<br>4.Set: 没有重复值的集合。<br>5.OrderedSet: 有序的Set，根据数据的add进行排序。<br>6.Stack: 有序集合，支持使用unshift（）和shift（）添加和删除。<br>7.Range(): 返回一个Seq.Indexed类型的集合，这个方法有三个参数，start表示开始值，默认值为0，end表示结束值，默认为无穷大，step代表每次增大的数值，默认为1.如果start = end,则返回空集合。<br>8.Repeat(): 返回一个vSeq.Indexe类型的集合，这个方法有两个参数，value代表需要重复的值，times代表要重复的次数，默认为无穷大。<br>9.Record: 一个用于生成Record实例的类。类似于JavaScript的Object，但是只接收特定字符串为key，具有默认值。<br>10.Seq: 序列，但是可能不能由具体的数据结构支持。<br>11.Collection: 是构建所有数据结构的基类，不可以直接构建。</p>\n<p>用的最多就是List和Map，所以在这里主要介绍这两种数据类型的API。</p>\n<p>五、常用的API<br>1.fromJS() 将一个js数据转换为Immutable类型的数据。<br>用法：fromJS(value, converter)<br>简介：value是要转变的数据，converter是要做的操作。第二个参数可不填，默认情况会将数组准换为List类型，将对象转换为Map类型，其余不做操作。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> obj = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"string\">'123'</span>,<span class=\"attr\">b</span>:<span class=\"string\">'234'</span>&#125;,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key, value, path</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(key, value, path)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> isIndexed(value) ? value.toList() : value.toOrderedMap())</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>2.toJS()<br>作用：将一个Immutable数据转换为JS类型的数据。<br>用法：value.toJS()</p>\n<p>3.is()对两个对象进行比较。<br>用法：is(map1,map2)<br>简介：和js中对象的比较不同，在js中比较两个对象比较的是地址，但是在Immutable中比较的是这个对象hashCode和valueOf，只要两个对象的hashCode相等，值就是相同的，避免了深度遍历，提高了性能。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"built_in\">Map</span>, is &#125; <span class=\"keyword\">from</span> <span class=\"string\">'immutable'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> map1 = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">1</span>, <span class=\"attr\">c</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> map2 = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">1</span>, <span class=\"attr\">c</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">map1 === map2   <span class=\"comment\">//false</span></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.is(map1, map2) <span class=\"comment\">// false</span></span><br><span class=\"line\">is(map1, map2) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>4.List 和 Map<br>创建<br>List() 和 Map()</p>\n<p>作用：用来创建一个新的List/Map对象</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//List</span></span><br><span class=\"line\"></span><br><span class=\"line\">List(): List&lt;any&gt;</span><br><span class=\"line\">List&lt;T&gt;(): List&lt;T&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Map</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>(): <span class=\"built_in\">Map</span>&lt;any&gt;</span><br><span class=\"line\"><span class=\"built_in\">Map</span>&lt;T&gt;(): <span class=\"built_in\">Map</span>&lt;T&gt;</span><br><span class=\"line\">List.of() 和 <span class=\"built_in\">Map</span>.of()</span><br></pre></td></tr></table></figure>\n<p>作用：创建一个新的包含value的List/Map对象<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.of&lt;T&gt;(...values: <span class=\"built_in\">Array</span>&lt;T&gt;): List&lt;T&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>.of&lt;T&gt;(...values: <span class=\"built_in\">Object</span>&lt;T&gt;): <span class=\"built_in\">Map</span>&lt;T&gt;</span><br></pre></td></tr></table></figure></p>\n<p>判断</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.isList() 和 <span class=\"built_in\">Map</span>.isMap()</span><br></pre></td></tr></table></figure>\n<p>作用：判断一个数据结构是不是List/Map类型<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List.isList(maybeList: any): boolean</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Map</span>.isMap(maybeMap: any): boolean</span><br></pre></td></tr></table></figure></p>\n<p>长度<br>size</p>\n<p>作用：获取List/Map的长度</p>\n<p>数据读取<br>get() 、 getIn()</p>\n<p>作用：获取数据结构中的数据</p>\n<p>has() 、 hasIn()</p>\n<p>作用:判断是否存在某一个key</p>\n<p>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).has(<span class=\"string\">'0'</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).has(<span class=\"string\">'0'</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).hasIn([<span class=\"number\">3</span>,<span class=\"string\">'b'</span>]) <span class=\"comment\">//true</span></span><br><span class=\"line\">includes()</span><br></pre></td></tr></table></figure></p>\n<p>作用：判断是否存在某一个value</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"number\">2</span>); <span class=\"comment\">//true</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"string\">'2'</span>); <span class=\"comment\">//false 不包含字符2</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(<span class=\"number\">5</span>); <span class=\"comment\">//false </span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;) <span class=\"comment\">//false</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).includes(Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;)) <span class=\"comment\">//true</span></span><br><span class=\"line\">first() 、 last()</span><br></pre></td></tr></table></figure>\n<p>作用：用来获取第一个元素或者最后一个元素，若没有则返回undefined<br>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).first()<span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>,<span class=\"attr\">b</span>:<span class=\"number\">5</span>&#125;]).last()<span class=\"comment\">//&#123;a:4,b:5&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">3</span>,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;&#125;).first() <span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">3</span>,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;&#125;).first() <span class=\"comment\">//&#123;d:3,e:4&#125;</span></span><br></pre></td></tr></table></figure>\n<p>数据修改<br>注：这里对于数据的修改，是对原数据进行操作后的值赋值给一个新的数据，并不会对原数据进行修改，因为Immutable是不可变的数据类型。</p>\n<p>设置 set()</p>\n<p>作用：设置第一层key、index的值</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set(index: number, <span class=\"attr\">value</span>: T): List&lt;T&gt;</span><br><span class=\"line\">set(key: K, <span class=\"attr\">value</span>: V): <span class=\"keyword\">this</span></span><br><span class=\"line\">List在使用的时候，将index为number值设置为value。<span class=\"built_in\">Map</span>在使用的时候，将key的值设置为value。</span><br></pre></td></tr></table></figure>\n<p>在List中使用时，若传入的number为负数，则将index为size+index的值设置为value，例，若传入-1，则将size-1的值设为value。若传入的number的值超过了List的长度，则将List自动补全为传入的number的值，将number设置为value，其余用undefined补全。注：跟js中不同，List中不存在空位，[,,,],List中若没有值，则为undefined。</p>\n<p>代码实现：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//////List</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> originalList = List([ <span class=\"number\">0</span> ]);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0 ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0, 1 ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">0</span>, <span class=\"string\">'overwritten'</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ \"overwritten\" ]</span></span><br><span class=\"line\">originalList.set(<span class=\"number\">2</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 0, undefined, 2 ]</span></span><br><span class=\"line\"></span><br><span class=\"line\">List().set(<span class=\"number\">50000</span>, <span class=\"string\">'value'</span>).size;</span><br><span class=\"line\"><span class=\"comment\">// 50001</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//////Map</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"built_in\">Map</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'immutable'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> originalMap = <span class=\"built_in\">Map</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> newerMap = originalMap.set(<span class=\"string\">'key'</span>, <span class=\"string\">'value'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> newestMap = newerMap.set(<span class=\"string\">'key'</span>, <span class=\"string\">'newer value'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">originalMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123;&#125;</span></span><br><span class=\"line\">newerMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"key\": \"value\" &#125;</span></span><br><span class=\"line\">newestMap</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"key\": \"newer value\" &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>setIn()<br>作用：设置深层结构中某属性的值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setIn(keyPath: Iterable&lt;any&gt;, <span class=\"attr\">value</span>: any): <span class=\"keyword\">this</span></span><br><span class=\"line\">用法与set()一样，只是第一个参数是一个数组，代表要设置的属性所在的位置</span><br></pre></td></tr></table></figure></p>\n<p>删除 delete</p>\n<p>作用：用来删除第一层结构中的属性</p>\n<p>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span>(index: number): List&lt;T&gt;  <span class=\"comment\">//List</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span>(key: K): <span class=\"keyword\">this</span>  <span class=\"comment\">//Map</span></span><br><span class=\"line\">deleteIn()</span><br></pre></td></tr></table></figure></p>\n<p>用来删除深层数据，用法参考setIn<br>deleteAll() (Map独有，List没有)<br>作用：用来删除Map中的多个key<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deleteAll(keys: Iterable&lt;K&gt;): <span class=\"keyword\">this</span></span><br></pre></td></tr></table></figure></p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> names = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">a</span>: <span class=\"string\">\"Aaron\"</span>, <span class=\"attr\">b</span>: <span class=\"string\">\"Barry\"</span>, <span class=\"attr\">c</span>: <span class=\"string\">\"Connor\"</span> &#125;)</span><br><span class=\"line\">names.deleteAll([ <span class=\"string\">'a'</span>, <span class=\"string\">'c'</span> ])</span><br><span class=\"line\"><span class=\"comment\">// Map &#123; \"b\": \"Barry\" &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>更新 update()<br>作用：对对象中的某个属性进行更新，可对原数据进行相关操作<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update(index: number, <span class=\"attr\">updater</span>: <span class=\"function\">(<span class=\"params\">value: T</span>) =&gt;</span> T): <span class=\"keyword\">this</span> <span class=\"comment\">//List</span></span><br><span class=\"line\">update(key: K, <span class=\"attr\">updater</span>: <span class=\"function\">(<span class=\"params\">value: V</span>) =&gt;</span> V): <span class=\"keyword\">this</span>  <span class=\"comment\">//Map</span></span><br></pre></td></tr></table></figure></p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">////List</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> list = List([ <span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'c'</span> ])</span><br><span class=\"line\"><span class=\"keyword\">const</span> result = list.update(<span class=\"number\">2</span>, val =&gt; val.toUpperCase())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">///Map</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> aMap = <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">key</span>: <span class=\"string\">'value'</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> newMap = aMap.update(<span class=\"string\">'key'</span>, value =&gt; value + value)</span><br><span class=\"line\">updateIn()</span><br></pre></td></tr></table></figure></p>\n<p>用法参考setIn</p>\n<p>清除 clear()</p>\n<p>作用：清除所有数据</p>\n<p>用法：clear(): this</p>\n<p>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">key</span>: <span class=\"string\">'value'</span> &#125;).clear()  <span class=\"comment\">//Map</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).clear()   <span class=\"comment\">// List</span></span><br></pre></td></tr></table></figure></p>\n<p>List中的各种删除与插入<br>List对应的数据结构是js中的数组，所以数组的一些方法在Immutable中也是通用的，比如push，pop,shift，unshift，insert。</p>\n<p>push()：在List末尾插入一个元素<br>pop(): 在List末尾删除一个元素<br>unshift: 在List首部插入一个元素<br>shift: 在List首部删除一个元素<br>insert：在List的index处插入元素<br>代码实现：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List([ <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).insert(<span class=\"number\">6</span>, <span class=\"number\">5</span>) </span><br><span class=\"line\"><span class=\"comment\">//List [ 0, 1, 2, 3, 4, 5 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).push(<span class=\"number\">5</span>)</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4, 5 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).pop()</span><br><span class=\"line\"><span class=\"comment\">// List[ 1, 2, 3 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).unshift(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">List([ <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span> ]).shift();</span><br><span class=\"line\"><span class=\"comment\">// List [ 1, 2, 3, 4 ]</span></span><br><span class=\"line\">List中还有一个特有的方法用法设置List的长度，setSize()</span><br><span class=\"line\">List([]).setSize(<span class=\"number\">2</span>).toJS() <span class=\"comment\">//[undefined,undefined]</span></span><br></pre></td></tr></table></figure></p>\n<p>关于merge<br>merge</p>\n<p>作用：浅合并，新数据与旧数据对比，旧数据中不存在的属性直接添加，就数据中已存在的属性用新数据中的覆盖</p>\n<p>mergrWith</p>\n<p>作用：自定义浅合并，可自行设置某些属性的值</p>\n<p>mergeIn</p>\n<p>作用：对深层数据进行浅合并</p>\n<p>mergeDeep</p>\n<p>作用：深合并，新旧数据中同时存在的的属性为新旧数据合并之后的数据</p>\n<p>mergeDeepIn</p>\n<p>作用：对深层数据进行深合并</p>\n<p>mergrDeepWith</p>\n<p>作用:自定义深合并，可自行设置某些属性的值<br>这里用一段示例彻底搞懂merge，此示例为Map结构，List与Map原理相同<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Map1 = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">111</span>,<span class=\"attr\">b</span>:<span class=\"number\">222</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">d</span>:<span class=\"number\">333</span>,<span class=\"attr\">e</span>:<span class=\"number\">444</span>&#125;&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Map2 = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">111</span>,<span class=\"attr\">b</span>:<span class=\"number\">222</span>,<span class=\"attr\">c</span>:&#123;<span class=\"attr\">e</span>:<span class=\"number\">444</span>,<span class=\"attr\">f</span>:<span class=\"number\">555</span>&#125;&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map3 = Map1.merge(Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:111,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map4 = Map1.mergeDeep(Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:111,b:222,c:&#123;d:333,e:444,f:555&#125;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Map5 = Map1.mergeWith(<span class=\"function\">(<span class=\"params\">oldData,newData,key</span>)=&gt;</span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(key === <span class=\"string\">'a'</span>)&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"number\">666</span>;</span><br><span class=\"line\">     &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> newData</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;,Map2);</span><br><span class=\"line\"> <span class=\"comment\">//Map &#123;a:666,b:222,c:&#123;e:444,f:555&#125;&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>序列算法<br>concat()<br>作用：对象的拼接，用法与js数组中的concat()相同，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> List = list1.concat(list2)</span><br></pre></td></tr></table></figure></p>\n<p>map()<br>作用：遍历整个对象，对Map/List元素进行操作，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).map(<span class=\"function\"><span class=\"params\">val</span>=&gt;</span><span class=\"number\">10</span>*val)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;a:10,b:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>Map特有的mapKey()<br>作用：遍历整个对象，对Map元素的key进行操作，返回一个新的对象。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).mapKey(<span class=\"function\"><span class=\"params\">val</span>=&gt;</span>val+<span class=\"string\">'l'</span>)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;al:10,bl:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>Map特有的mapEntries()</p>\n<p>作用：遍历整个对象，对Map元素的key和value同时进行操作，返回一个新的对象。Map的map()也可实现此功能。<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).map(<span class=\"function\">(<span class=\"params\">key,val</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [key+<span class=\"string\">'l'</span>,val*<span class=\"number\">10</span>]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;al:10,bl:20&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>过滤 filter<br>作用：返回一个新的对象，包括所有满足过滤条件的元素<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Map</span>(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>&#125;).filter(<span class=\"function\">(<span class=\"params\">key,val</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> val == <span class=\"number\">2</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map&#123;b:2&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>还有一个filterNot()方法，与此方法正好相反。<br>反转 reverse<br>作用：将数据的结构进行反转<br>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]).reverse();</span><br><span class=\"line\"><span class=\"comment\">// List [5,4,3,2,1]</span></span><br><span class=\"line\">Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:&#123;<span class=\"attr\">c</span>:<span class=\"number\">2</span>,<span class=\"attr\">d</span>:<span class=\"number\">3</span>&#125;,<span class=\"attr\">e</span>:<span class=\"number\">4</span>&#125;).recerse();</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;e:4,b:&#123;c:2,d:3&#125;,a:1&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>排序 sort &amp; sortBy<br>作用：对数据结构进行排序<br>代码示例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">///List</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">1</span>]).sort()</span><br><span class=\"line\"><span class=\"comment\">// List [1,2,3,4,5,6]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">1</span>]).sort(<span class=\"function\">(<span class=\"params\">a,b</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// List [1,2,3,4,5,6]</span></span><br><span class=\"line\">Immutable.fromJS([&#123;<span class=\"attr\">a</span>:<span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;]).sortBy(<span class=\"function\">(<span class=\"params\">val,index,obj</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> val.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;,(a,b)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//List  [ &#123;a:3&#125;, &#123;a:2&#125;, &#123;a:4&#125;, &#123;a:1&#125; ]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Map</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sort()</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sort(<span class=\"function\">(<span class=\"params\">a,b</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &lt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">-1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a &gt; b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">1</span>; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (a === b) &#123; <span class=\"keyword\">return</span> <span class=\"number\">0</span>; &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br><span class=\"line\">Immutable.fromJS( &#123;<span class=\"attr\">b</span>:<span class=\"number\">1</span>, <span class=\"attr\">a</span>: <span class=\"number\">3</span>, <span class=\"attr\">c</span>: <span class=\"number\">2</span>, <span class=\"attr\">d</span>:<span class=\"number\">5</span>&#125; ).sortBy(<span class=\"function\">(<span class=\"params\">value, key, obj</span>)=&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//Map &#123;b: 1, c: 2, a: 3, d: 5&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>分组 groupBy<br>作用：对数据进行分组<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> listOfMaps = List([</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">0</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">1</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">1</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">0</span> &#125;),</span><br><span class=\"line\">  <span class=\"built_in\">Map</span>(&#123; <span class=\"attr\">v</span>: <span class=\"number\">2</span> &#125;)</span><br><span class=\"line\">])</span><br><span class=\"line\"><span class=\"keyword\">const</span> groupsOfMaps = listOfMaps.groupBy(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x.get(<span class=\"string\">'v'</span>))</span><br><span class=\"line\"><span class=\"comment\">// Map &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   0: List [ Map&#123; \"v\": 0 &#125;, Map &#123; \"v\": 0 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">//   1: List [ Map&#123; \"v\": 1 &#125;, Map &#123; \"v\": 1 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">//   2: List [ Map&#123; \"v\": 2 &#125; ],</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>查找数据<br>indexOf() 、 lastIndexOf Map不存在此方法<br>作用：和js数组中的方法相同，查找第一个或者最后一个value的index值，找不到则返回-1<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).indexof(<span class=\"number\">3</span>) <span class=\"comment\">//2</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).lastIndexof(<span class=\"number\">3</span>) <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure></p>\n<p>findIndex() 、 findLastIndex() Map不存在此方法<br>作用：查找满足要求的元素的index值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findIndex(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)   <span class=\"comment\">// 1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastIndex(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> index%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure></p>\n<p>find() 、 findLast()<br>作用：查找满足条件的元素的value值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).find(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 2</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLast(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure></p>\n<p>findKey() 、 findLastKey()<br>作用：查找满足条件的元素的key值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findKey(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 1</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastKey(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure></p>\n<p>findEntry() 、 findLastEntry()<br>作用：查找满足条件的元素的键值对 key:value<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findEntry(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// [1,2]</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).findLastEntry(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value%<span class=\"number\">2</span> === <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)  <span class=\"comment\">// [3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>keyOf() lastKeyOf()<br>作用：查找某一个value对应的key值<br>用法：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).keyOf(<span class=\"number\">2</span>) <span class=\"comment\">//1</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).lastKeyOf(<span class=\"number\">2</span>) <span class=\"comment\">//1</span></span><br></pre></td></tr></table></figure></p>\n<p>max() 、 maxBy()<br>作用：查找最大值<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).max() <span class=\"comment\">//4</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([&#123;a;<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>: <span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;]).maxBy(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;)  <span class=\"comment\">//&#123;a:4&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>min() 、 minBy()</p>\n<p>作用：查找最小值<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).min() <span class=\"comment\">//1</span></span><br><span class=\"line\"></span><br><span class=\"line\">Immutable.fromJS([&#123;a;<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">2</span>&#125;,&#123;<span class=\"attr\">a</span>: <span class=\"number\">3</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">4</span>&#125;]).minBy(<span class=\"function\">(<span class=\"params\">value,index,array</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value.get(<span class=\"string\">'a'</span>)</span><br><span class=\"line\">&#125;)  <span class=\"comment\">//&#123;a:1&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>创建子集<br>slice()</p>\n<p>作用： 和原生js中数组的slice数组一样，包含两个参数，start和end，start代表开始截取的位置，end代表结束的位置，不包括第end的元素。若不包括end，则返回整个对象，若end为负数，则返回（start，length-end）对应的数据。若start只有一个并且为负数，则返回最后的end个元素。</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>); <span class=\"comment\">//[1,2,3,4]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>,<span class=\"number\">2</span>); <span class=\"comment\">//[1,2]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">-2</span>); <span class=\"comment\">//[3,4]</span></span><br><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).slice(<span class=\"number\">0</span>,<span class=\"number\">-2</span>); <span class=\"comment\">//[1,2]</span></span><br></pre></td></tr></table></figure>\n<p>rest()<br>作用：返回除第一个元素之外的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).rest()<span class=\"comment\">//[2,3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>butLast()<br>作用：返回除最后一个元素之外的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).rest()<span class=\"comment\">//[1,2,3]</span></span><br></pre></td></tr></table></figure></p>\n<p>skip()<br>作用：有一个参数n, 返回截掉前n个元素之后剩下的所有元素<br>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skip(<span class=\"number\">1</span>)<span class=\"comment\">//[2,3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>skipLast()</p>\n<p>作用：有一个参数n, 返回截掉最后n个元素之后剩下的所有元素</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skip(<span class=\"number\">1</span>)<span class=\"comment\">//[1,2,3]</span></span><br></pre></td></tr></table></figure>\n<p>skipWhile()</p>\n<p>作用：返回从第一次返回false之后的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipWhile(list.skipWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure>\n<p>skipUntil()</p>\n<p>作用：返回从第一次返回true之后的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipUntil(list.skipWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [3,4]</span></span><br></pre></td></tr></table></figure>\n<p>take()</p>\n<p>作用：有一个参数n, 返回前n个元素</p>\n<p>用法:Immutable.fromJS([1, 2, 3, 4]).take(2)//[1,2]</p>\n<p>takeLast()</p>\n<p>作用：有一个参数n, 返回最后n个元素</p>\n<p>用法:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).takeLast(<span class=\"number\">2</span>)<span class=\"comment\">//[3,4]</span></span><br></pre></td></tr></table></figure></p>\n<p>takeWhile()</p>\n<p>作用：返回从第一次返回false之前的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipWhile(list.takeWhile(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// []</span></span><br></pre></td></tr></table></figure>\n<p>takeUntil()</p>\n<p>作用：返回从第一次返回true之前的所有元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]).skipUntil(list.takeUntil(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;))<span class=\"comment\">// [1,2]</span></span><br></pre></td></tr></table></figure>\n<p>处理数据<br>reduce()</p>\n<p>作用：和js中数组中的reduce相同,按索引升序的顺序处理元素</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).reduce(<span class=\"function\">(<span class=\"params\">pre,next,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pre+next)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> pre+next; </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 3 6 10</span></span><br></pre></td></tr></table></figure>\n<p>reduceRight()</p>\n<p>作用：和js中数组中的reduce相同,按索引降序的顺序处理元素</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).reduceRight(<span class=\"function\">(<span class=\"params\">pre,next,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pre+next)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> pre+next; </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">// 7 9 10</span></span><br></pre></td></tr></table></figure>\n<p>every()</p>\n<p>作用：判断整个对象总中所有的元素是不是都满足某一个条件，都满足返回true，反之返回false。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).every(<span class=\"function\">(<span class=\"params\">value,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span></span><br><span class=\"line\">&#125;) <span class=\"comment\">// false</span></span><br></pre></td></tr></table></figure>\n<p>some()</p>\n<p>作用：判断整个对象总中所有的元素是不是存在满足某一个条件的元素，若存在返回true，反之返回false。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]).some(<span class=\"function\">(<span class=\"params\">value,index,arr</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span></span><br><span class=\"line\">&#125;) <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>join()</p>\n<p>作用：同js中数组的join方法。把准换为字符串</p>\n<p>用法：Immutable.fromJS([1,2,3,4]).join(‘,’) //1,2,3,4</p>\n<p>isEmpty()</p>\n<p>作用：判断是否为空</p>\n<p>用法:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Immutable.fromJS([]).isEmpty(); <span class=\"comment\">// true</span></span><br><span class=\"line\">Immutable.fromJS(&#123;&#125;).isEmpty(); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<p>count()</p>\n<p>作用：返回元素个数，可自定义条件，返回满足条件的个数</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> map = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:<span class=\"number\">3</span>,<span class=\"attr\">d</span>:<span class=\"number\">4</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">list.count(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;)    <span class=\"comment\">//2</span></span><br><span class=\"line\"></span><br><span class=\"line\">map.count(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;)    <span class=\"comment\">//2</span></span><br></pre></td></tr></table></figure>\n<p>countBy()</p>\n<p>作用：与count不同的是，countBy返回一个对象</p>\n<p>用法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> list = Immutable.fromJS([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>]);</span><br><span class=\"line\"><span class=\"keyword\">const</span> map = Immutable.fromJS(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>,<span class=\"attr\">b</span>:<span class=\"number\">2</span>,<span class=\"attr\">c</span>:<span class=\"number\">3</span>,<span class=\"attr\">d</span>:<span class=\"number\">4</span>&#125;);</span><br><span class=\"line\">list.countBy(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"comment\">//&#123;false: 2, true: 2&#125;</span></span><br><span class=\"line\">map.countBy(<span class=\"function\">(<span class=\"params\">value,index,list</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> value &gt; <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125; <span class=\"comment\">//&#123;false: 2, true: 2&#125;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"koa2源码学习--application.js","date":"2018-05-24T06:00:14.000Z","_content":"一直很想研究下koa2，虽然还是小白一枚，但终于决定入坑koa2。之前只知道koa2采用了ES2015和ES2016的一些东西，还知道洋葱头的中间件的运行机制。还是先研究一下源码，学习一下大神写代码的畅快感。\n\n把代码拉下来之后，发现lib里只有四个源码文件：application.js, context.js, request.js, response.js。\n\napplication.js 是koa的入口文件,是一个构造函数，它暴露整个应用的class, 这个class继承自node自带的events，并且把 context、request 和 response 属性指向了原型链指向其他三个文件导出对象的实例。\n\napplication暴露了一些公用的api, 比如listen，use, callback等。\n\n下面来研究一些application.js的源码\n\n```javascript\n\n'use strict';\n\n/**\n * 依赖的模块\n */\n\nconst isGeneratorFunction = require('is-generator-function'); //判断函数是否为generator函数\nconst debug = require('debug')('koa:application'); //调试模式\nconst onFinished = require('on-finished'); //HTTP请求关闭，完成或错误时执行回调。\nconst response = require('./response'); //reponse.js\nconst compose = require('koa-compose'); //koa中间件组合工具\nconst isJSON = require('koa-is-json'); //检查body应该是一个json格式\nconst context = require('./context'); //上下文context.js\nconst request = require('./request'); //request.js\nconst statuses = require('statuses'); ////http状态工具status(403) // => 'Forbidden'，可以通过code转换成msg，也可以通过msg转换成code\nconst Cookies = require('cookies'); //提供一个读写cookie的API\nconst accepts = require('accepts'); //一个比较高级的API用来http处理请求中的接受类型，\nconst Emitter = require('events'); //node的events模块？\nconst assert = require('assert'); //通过状态码进行断言？\nconst Stream = require('stream'); //流文件？\nconst http = require('http'); // node的http模块？\nconst only = require('only'); //返回白名单中的值。其实就是根据一个列表获取一个对象中的部分属性返回一个obj\nconst convert = require('koa-convert'); //提供function *的语法的转换器\nconst deprecate = require('depd')('koa'); //提示？\n\n/**\n * 暴露一个application的类\n * 继承自 `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * 初始化一个新的 `Application`.\n   *\n   * @api public\n   */\n\n  constructor() {\n    super();\n\n    //定义下面的属性\n    this.proxy = false; //代理\n    this.middleware = []; //中间件的队列\n    this.subdomainOffset = 2; //对于要忽略的 .subdomains 偏移[2]\n    this.env = process.env.NODE_ENV || 'development'; //env默认是 NODE_ENV 或 \"development\"\n    this.context = Object.create(context); //创建一个新context对象，使用context对象来提供新创建的对象的__proto__。 \n    this.request = Object.create(request);//创建一个新request对象\n    this.response = Object.create(response);//创建一个新response对象\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  //listen(),调用node的createServer方法，返回一个服务器。参数为端口号，\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());//\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  //toJSON 方法，通过only方法，把key放到obj里 返回一个object对象\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n  //检查,返回一个object对象\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * 把给定的中间件函数fn，推入到middleware队列中\n   *\n   * 以前写法的中间件将会被转换\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  //返回适用于 http.createServer() 方法的回调函数来处理请求。\n  //启动server和接收请求\n  callback() {\n    const fn = compose(this.middleware);//启动server时执行，初始化中间件\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    //接收请求时执行处理请求的函数\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);//创建一个最终可用的context\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * callback里的一个处理请求的方法，\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.cookies = new Cookies(req, res, {\n      keys: this.keys,\n      secure: request.secure\n    });\n    request.ip = request.ips[0] || req.socket.remoteAddress || '';\n    context.accept = request.accept = accepts(req);\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    assert(err instanceof Error, `non-error thrown: ${err}`);\n\n    if (404 == err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error();\n    console.error(msg.replace(/^/gm, '  '));\n    console.error();\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  const res = ctx.res;\n  if (!ctx.writable) return;\n\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' == ctx.method) {\n    if (!res.headersSent && isJSON(body)) {\n      ctx.length = Buffer.byteLength(JSON.stringify(body));\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    body = ctx.message || String(code);\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' == typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n\n```\n","source":"_posts/koa2源码学习--application.js.md","raw":"---\ntitle: koa2源码学习--application.js\ndate: 2018-05-24 14:00:14\ntags: [Koa, Node]\ncategories: koa2源码学习\n---\n一直很想研究下koa2，虽然还是小白一枚，但终于决定入坑koa2。之前只知道koa2采用了ES2015和ES2016的一些东西，还知道洋葱头的中间件的运行机制。还是先研究一下源码，学习一下大神写代码的畅快感。\n\n把代码拉下来之后，发现lib里只有四个源码文件：application.js, context.js, request.js, response.js。\n\napplication.js 是koa的入口文件,是一个构造函数，它暴露整个应用的class, 这个class继承自node自带的events，并且把 context、request 和 response 属性指向了原型链指向其他三个文件导出对象的实例。\n\napplication暴露了一些公用的api, 比如listen，use, callback等。\n\n下面来研究一些application.js的源码\n\n```javascript\n\n'use strict';\n\n/**\n * 依赖的模块\n */\n\nconst isGeneratorFunction = require('is-generator-function'); //判断函数是否为generator函数\nconst debug = require('debug')('koa:application'); //调试模式\nconst onFinished = require('on-finished'); //HTTP请求关闭，完成或错误时执行回调。\nconst response = require('./response'); //reponse.js\nconst compose = require('koa-compose'); //koa中间件组合工具\nconst isJSON = require('koa-is-json'); //检查body应该是一个json格式\nconst context = require('./context'); //上下文context.js\nconst request = require('./request'); //request.js\nconst statuses = require('statuses'); ////http状态工具status(403) // => 'Forbidden'，可以通过code转换成msg，也可以通过msg转换成code\nconst Cookies = require('cookies'); //提供一个读写cookie的API\nconst accepts = require('accepts'); //一个比较高级的API用来http处理请求中的接受类型，\nconst Emitter = require('events'); //node的events模块？\nconst assert = require('assert'); //通过状态码进行断言？\nconst Stream = require('stream'); //流文件？\nconst http = require('http'); // node的http模块？\nconst only = require('only'); //返回白名单中的值。其实就是根据一个列表获取一个对象中的部分属性返回一个obj\nconst convert = require('koa-convert'); //提供function *的语法的转换器\nconst deprecate = require('depd')('koa'); //提示？\n\n/**\n * 暴露一个application的类\n * 继承自 `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * 初始化一个新的 `Application`.\n   *\n   * @api public\n   */\n\n  constructor() {\n    super();\n\n    //定义下面的属性\n    this.proxy = false; //代理\n    this.middleware = []; //中间件的队列\n    this.subdomainOffset = 2; //对于要忽略的 .subdomains 偏移[2]\n    this.env = process.env.NODE_ENV || 'development'; //env默认是 NODE_ENV 或 \"development\"\n    this.context = Object.create(context); //创建一个新context对象，使用context对象来提供新创建的对象的__proto__。 \n    this.request = Object.create(request);//创建一个新request对象\n    this.response = Object.create(response);//创建一个新response对象\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  //listen(),调用node的createServer方法，返回一个服务器。参数为端口号，\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());//\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  //toJSON 方法，通过only方法，把key放到obj里 返回一个object对象\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n  //检查,返回一个object对象\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * 把给定的中间件函数fn，推入到middleware队列中\n   *\n   * 以前写法的中间件将会被转换\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  //返回适用于 http.createServer() 方法的回调函数来处理请求。\n  //启动server和接收请求\n  callback() {\n    const fn = compose(this.middleware);//启动server时执行，初始化中间件\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    //接收请求时执行处理请求的函数\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);//创建一个最终可用的context\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * callback里的一个处理请求的方法，\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.cookies = new Cookies(req, res, {\n      keys: this.keys,\n      secure: request.secure\n    });\n    request.ip = request.ips[0] || req.socket.remoteAddress || '';\n    context.accept = request.accept = accepts(req);\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    assert(err instanceof Error, `non-error thrown: ${err}`);\n\n    if (404 == err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error();\n    console.error(msg.replace(/^/gm, '  '));\n    console.error();\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  const res = ctx.res;\n  if (!ctx.writable) return;\n\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' == ctx.method) {\n    if (!res.headersSent && isJSON(body)) {\n      ctx.length = Buffer.byteLength(JSON.stringify(body));\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    body = ctx.message || String(code);\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' == typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n\n```\n","slug":"koa2源码学习--application.js","published":1,"updated":"2018-05-25T05:58:14.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ya90019d6spjgbpx2wb","content":"<p>一直很想研究下koa2，虽然还是小白一枚，但终于决定入坑koa2。之前只知道koa2采用了ES2015和ES2016的一些东西，还知道洋葱头的中间件的运行机制。还是先研究一下源码，学习一下大神写代码的畅快感。</p>\n<p>把代码拉下来之后，发现lib里只有四个源码文件：application.js, context.js, request.js, response.js。</p>\n<p>application.js 是koa的入口文件,是一个构造函数，它暴露整个应用的class, 这个class继承自node自带的events，并且把 context、request 和 response 属性指向了原型链指向其他三个文件导出对象的实例。</p>\n<p>application暴露了一些公用的api, 比如listen，use, callback等。</p>\n<p>下面来研究一些application.js的源码</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 依赖的模块</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isGeneratorFunction = <span class=\"built_in\">require</span>(<span class=\"string\">'is-generator-function'</span>); <span class=\"comment\">//判断函数是否为generator函数</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> debug = <span class=\"built_in\">require</span>(<span class=\"string\">'debug'</span>)(<span class=\"string\">'koa:application'</span>); <span class=\"comment\">//调试模式</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> onFinished = <span class=\"built_in\">require</span>(<span class=\"string\">'on-finished'</span>); <span class=\"comment\">//HTTP请求关闭，完成或错误时执行回调。</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> response = <span class=\"built_in\">require</span>(<span class=\"string\">'./response'</span>); <span class=\"comment\">//reponse.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-compose'</span>); <span class=\"comment\">//koa中间件组合工具</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> isJSON = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-is-json'</span>); <span class=\"comment\">//检查body应该是一个json格式</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> context = <span class=\"built_in\">require</span>(<span class=\"string\">'./context'</span>); <span class=\"comment\">//上下文context.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">'./request'</span>); <span class=\"comment\">//request.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statuses = <span class=\"built_in\">require</span>(<span class=\"string\">'statuses'</span>); <span class=\"comment\">////http状态工具status(403) // =&gt; 'Forbidden'，可以通过code转换成msg，也可以通过msg转换成code</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Cookies = <span class=\"built_in\">require</span>(<span class=\"string\">'cookies'</span>); <span class=\"comment\">//提供一个读写cookie的API</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> accepts = <span class=\"built_in\">require</span>(<span class=\"string\">'accepts'</span>); <span class=\"comment\">//一个比较高级的API用来http处理请求中的接受类型，</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Emitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>); <span class=\"comment\">//node的events模块？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">'assert'</span>); <span class=\"comment\">//通过状态码进行断言？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Stream = <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>); <span class=\"comment\">//流文件？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>); <span class=\"comment\">// node的http模块？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> only = <span class=\"built_in\">require</span>(<span class=\"string\">'only'</span>); <span class=\"comment\">//返回白名单中的值。其实就是根据一个列表获取一个对象中的部分属性返回一个obj</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> convert = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-convert'</span>); <span class=\"comment\">//提供function *的语法的转换器</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> deprecate = <span class=\"built_in\">require</span>(<span class=\"string\">'depd'</span>)(<span class=\"string\">'koa'</span>); <span class=\"comment\">//提示？</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 暴露一个application的类</span></span><br><span class=\"line\"><span class=\"comment\"> * 继承自 `Emitter.prototype`.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Application</span> <span class=\"keyword\">extends</span> <span class=\"title\">Emitter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 初始化一个新的 `Application`.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定义下面的属性</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.proxy = <span class=\"literal\">false</span>; <span class=\"comment\">//代理</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []; <span class=\"comment\">//中间件的队列</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subdomainOffset = <span class=\"number\">2</span>; <span class=\"comment\">//对于要忽略的 .subdomains 偏移[2]</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.env = process.env.NODE_ENV || <span class=\"string\">'development'</span>; <span class=\"comment\">//env默认是 NODE_ENV 或 \"development\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.context = <span class=\"built_in\">Object</span>.create(context); <span class=\"comment\">//创建一个新context对象，使用context对象来提供新创建的对象的__proto__。 </span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.request = <span class=\"built_in\">Object</span>.create(request);<span class=\"comment\">//创建一个新request对象</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.response = <span class=\"built_in\">Object</span>.create(response);<span class=\"comment\">//创建一个新response对象</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Shorthand for:</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   *    http.createServer(app.callback()).listen(...)</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Mixed&#125; ...</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Server&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//listen(),调用node的createServer方法，返回一个服务器。参数为端口号，</span></span><br><span class=\"line\">  listen(...args) &#123;</span><br><span class=\"line\">    debug(<span class=\"string\">'listen'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> server = http.createServer(<span class=\"keyword\">this</span>.callback());<span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> server.listen(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Return JSON representation.</span></span><br><span class=\"line\"><span class=\"comment\">   * We only bother showing settings.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Object&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//toJSON 方法，通过only方法，把key放到obj里 返回一个object对象</span></span><br><span class=\"line\">  toJSON() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> only(<span class=\"keyword\">this</span>, [</span><br><span class=\"line\">      <span class=\"string\">'subdomainOffset'</span>,</span><br><span class=\"line\">      <span class=\"string\">'proxy'</span>,</span><br><span class=\"line\">      <span class=\"string\">'env'</span></span><br><span class=\"line\">    ]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Inspect implementation.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Object&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"comment\">//检查,返回一个object对象</span></span><br><span class=\"line\">  inspect() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.toJSON();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 把给定的中间件函数fn，推入到middleware队列中</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * 以前写法的中间件将会被转换</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Function&#125; fn</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Application&#125; self</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> fn !== <span class=\"string\">'function'</span>) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'middleware must be a function!'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isGeneratorFunction(fn)) &#123;</span><br><span class=\"line\">      deprecate(<span class=\"string\">'Support for generators will be removed in v3. '</span> +</span><br><span class=\"line\">                <span class=\"string\">'See the documentation for examples of how to convert old middleware '</span> +</span><br><span class=\"line\">                <span class=\"string\">'https://github.com/koajs/koa/blob/master/docs/migration.md'</span>);</span><br><span class=\"line\">      fn = convert(fn);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    debug(<span class=\"string\">'use %s'</span>, fn._name || fn.name || <span class=\"string\">'-'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Return a request handler callback</span></span><br><span class=\"line\"><span class=\"comment\">   * for node's native http server.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Function&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回适用于 http.createServer() 方法的回调函数来处理请求。</span></span><br><span class=\"line\">  <span class=\"comment\">//启动server和接收请求</span></span><br><span class=\"line\">  callback() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fn = compose(<span class=\"keyword\">this</span>.middleware);<span class=\"comment\">//启动server时执行，初始化中间件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.listenerCount(<span class=\"string\">'error'</span>)) <span class=\"keyword\">this</span>.on(<span class=\"string\">'error'</span>, <span class=\"keyword\">this</span>.onerror);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//接收请求时执行处理请求的函数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleRequest = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> ctx = <span class=\"keyword\">this</span>.createContext(req, res);<span class=\"comment\">//创建一个最终可用的context</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.handleRequest(ctx, fn);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> handleRequest;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * callback里的一个处理请求的方法，</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  handleRequest(ctx, fnMiddleware) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = ctx.res;</span><br><span class=\"line\">    res.statusCode = <span class=\"number\">404</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> onerror = <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> ctx.onerror(err);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleResponse = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> respond(ctx);</span><br><span class=\"line\">    onFinished(res, onerror);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fnMiddleware(ctx).then(handleResponse).catch(onerror);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Initialize a new context.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  createContext(req, res) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> context = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.context);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> request = context.request = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.request);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = context.response = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.response);</span><br><span class=\"line\">    context.app = request.app = response.app = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    context.req = request.req = response.req = req;</span><br><span class=\"line\">    context.res = request.res = response.res = res;</span><br><span class=\"line\">    request.ctx = response.ctx = context;</span><br><span class=\"line\">    request.response = response;</span><br><span class=\"line\">    response.request = request;</span><br><span class=\"line\">    context.originalUrl = request.originalUrl = req.url;</span><br><span class=\"line\">    context.cookies = <span class=\"keyword\">new</span> Cookies(req, res, &#123;</span><br><span class=\"line\">      keys: <span class=\"keyword\">this</span>.keys,</span><br><span class=\"line\">      secure: request.secure</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    request.ip = request.ips[<span class=\"number\">0</span>] || req.socket.remoteAddress || <span class=\"string\">''</span>;</span><br><span class=\"line\">    context.accept = request.accept = accepts(req);</span><br><span class=\"line\">    context.state = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> context;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Default error handler.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Error&#125; err</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  onerror(err) &#123;</span><br><span class=\"line\">    assert(err <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Error</span>, <span class=\"string\">`non-error thrown: <span class=\"subst\">$&#123;err&#125;</span>`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"number\">404</span> == err.status || err.expose) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.silent) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = err.stack || err.toString();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(msg.replace(<span class=\"regexp\">/^/gm</span>, <span class=\"string\">'  '</span>));</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Response helper.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">respond</span>(<span class=\"params\">ctx</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// allow bypassing koa</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">false</span> === ctx.respond) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = ctx.res;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!ctx.writable) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> body = ctx.body;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> code = ctx.status;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ignore body</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (statuses.empty[code]) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// strip headers</span></span><br><span class=\"line\">    ctx.body = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">'HEAD'</span> == ctx.method) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!res.headersSent &amp;&amp; isJSON(body)) &#123;</span><br><span class=\"line\">      ctx.length = Buffer.byteLength(<span class=\"built_in\">JSON</span>.stringify(body));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// status body</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> == body) &#123;</span><br><span class=\"line\">    body = ctx.message || <span class=\"built_in\">String</span>(code);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!res.headersSent) &#123;</span><br><span class=\"line\">      ctx.type = <span class=\"string\">'text'</span>;</span><br><span class=\"line\">      ctx.length = Buffer.byteLength(body);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// responses</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (Buffer.isBuffer(body)) <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">'string'</span> == <span class=\"keyword\">typeof</span> body) <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (body <span class=\"keyword\">instanceof</span> Stream) <span class=\"keyword\">return</span> body.pipe(res);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// body: json</span></span><br><span class=\"line\">  body = <span class=\"built_in\">JSON</span>.stringify(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!res.headersSent) &#123;</span><br><span class=\"line\">    ctx.length = Buffer.byteLength(body);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  res.end(body);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>一直很想研究下koa2，虽然还是小白一枚，但终于决定入坑koa2。之前只知道koa2采用了ES2015和ES2016的一些东西，还知道洋葱头的中间件的运行机制。还是先研究一下源码，学习一下大神写代码的畅快感。</p>\n<p>把代码拉下来之后，发现lib里只有四个源码文件：application.js, context.js, request.js, response.js。</p>\n<p>application.js 是koa的入口文件,是一个构造函数，它暴露整个应用的class, 这个class继承自node自带的events，并且把 context、request 和 response 属性指向了原型链指向其他三个文件导出对象的实例。</p>\n<p>application暴露了一些公用的api, 比如listen，use, callback等。</p>\n<p>下面来研究一些application.js的源码</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 依赖的模块</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> isGeneratorFunction = <span class=\"built_in\">require</span>(<span class=\"string\">'is-generator-function'</span>); <span class=\"comment\">//判断函数是否为generator函数</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> debug = <span class=\"built_in\">require</span>(<span class=\"string\">'debug'</span>)(<span class=\"string\">'koa:application'</span>); <span class=\"comment\">//调试模式</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> onFinished = <span class=\"built_in\">require</span>(<span class=\"string\">'on-finished'</span>); <span class=\"comment\">//HTTP请求关闭，完成或错误时执行回调。</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> response = <span class=\"built_in\">require</span>(<span class=\"string\">'./response'</span>); <span class=\"comment\">//reponse.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-compose'</span>); <span class=\"comment\">//koa中间件组合工具</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> isJSON = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-is-json'</span>); <span class=\"comment\">//检查body应该是一个json格式</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> context = <span class=\"built_in\">require</span>(<span class=\"string\">'./context'</span>); <span class=\"comment\">//上下文context.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> request = <span class=\"built_in\">require</span>(<span class=\"string\">'./request'</span>); <span class=\"comment\">//request.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> statuses = <span class=\"built_in\">require</span>(<span class=\"string\">'statuses'</span>); <span class=\"comment\">////http状态工具status(403) // =&gt; 'Forbidden'，可以通过code转换成msg，也可以通过msg转换成code</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Cookies = <span class=\"built_in\">require</span>(<span class=\"string\">'cookies'</span>); <span class=\"comment\">//提供一个读写cookie的API</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> accepts = <span class=\"built_in\">require</span>(<span class=\"string\">'accepts'</span>); <span class=\"comment\">//一个比较高级的API用来http处理请求中的接受类型，</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Emitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>); <span class=\"comment\">//node的events模块？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> assert = <span class=\"built_in\">require</span>(<span class=\"string\">'assert'</span>); <span class=\"comment\">//通过状态码进行断言？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Stream = <span class=\"built_in\">require</span>(<span class=\"string\">'stream'</span>); <span class=\"comment\">//流文件？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>); <span class=\"comment\">// node的http模块？</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> only = <span class=\"built_in\">require</span>(<span class=\"string\">'only'</span>); <span class=\"comment\">//返回白名单中的值。其实就是根据一个列表获取一个对象中的部分属性返回一个obj</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> convert = <span class=\"built_in\">require</span>(<span class=\"string\">'koa-convert'</span>); <span class=\"comment\">//提供function *的语法的转换器</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> deprecate = <span class=\"built_in\">require</span>(<span class=\"string\">'depd'</span>)(<span class=\"string\">'koa'</span>); <span class=\"comment\">//提示？</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 暴露一个application的类</span></span><br><span class=\"line\"><span class=\"comment\"> * 继承自 `Emitter.prototype`.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Application</span> <span class=\"keyword\">extends</span> <span class=\"title\">Emitter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 初始化一个新的 `Application`.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定义下面的属性</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.proxy = <span class=\"literal\">false</span>; <span class=\"comment\">//代理</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []; <span class=\"comment\">//中间件的队列</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subdomainOffset = <span class=\"number\">2</span>; <span class=\"comment\">//对于要忽略的 .subdomains 偏移[2]</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.env = process.env.NODE_ENV || <span class=\"string\">'development'</span>; <span class=\"comment\">//env默认是 NODE_ENV 或 \"development\"</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.context = <span class=\"built_in\">Object</span>.create(context); <span class=\"comment\">//创建一个新context对象，使用context对象来提供新创建的对象的__proto__。 </span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.request = <span class=\"built_in\">Object</span>.create(request);<span class=\"comment\">//创建一个新request对象</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.response = <span class=\"built_in\">Object</span>.create(response);<span class=\"comment\">//创建一个新response对象</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Shorthand for:</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   *    http.createServer(app.callback()).listen(...)</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Mixed&#125; ...</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Server&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//listen(),调用node的createServer方法，返回一个服务器。参数为端口号，</span></span><br><span class=\"line\">  listen(...args) &#123;</span><br><span class=\"line\">    debug(<span class=\"string\">'listen'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> server = http.createServer(<span class=\"keyword\">this</span>.callback());<span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> server.listen(...args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Return JSON representation.</span></span><br><span class=\"line\"><span class=\"comment\">   * We only bother showing settings.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Object&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//toJSON 方法，通过only方法，把key放到obj里 返回一个object对象</span></span><br><span class=\"line\">  toJSON() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> only(<span class=\"keyword\">this</span>, [</span><br><span class=\"line\">      <span class=\"string\">'subdomainOffset'</span>,</span><br><span class=\"line\">      <span class=\"string\">'proxy'</span>,</span><br><span class=\"line\">      <span class=\"string\">'env'</span></span><br><span class=\"line\">    ]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Inspect implementation.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Object&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"comment\">//检查,返回一个object对象</span></span><br><span class=\"line\">  inspect() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.toJSON();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 把给定的中间件函数fn，推入到middleware队列中</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * 以前写法的中间件将会被转换</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Function&#125; fn</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Application&#125; self</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> fn !== <span class=\"string\">'function'</span>) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'middleware must be a function!'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isGeneratorFunction(fn)) &#123;</span><br><span class=\"line\">      deprecate(<span class=\"string\">'Support for generators will be removed in v3. '</span> +</span><br><span class=\"line\">                <span class=\"string\">'See the documentation for examples of how to convert old middleware '</span> +</span><br><span class=\"line\">                <span class=\"string\">'https://github.com/koajs/koa/blob/master/docs/migration.md'</span>);</span><br><span class=\"line\">      fn = convert(fn);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    debug(<span class=\"string\">'use %s'</span>, fn._name || fn.name || <span class=\"string\">'-'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Return a request handler callback</span></span><br><span class=\"line\"><span class=\"comment\">   * for node's native http server.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @return &#123;Function&#125;</span></span><br><span class=\"line\"><span class=\"comment\">   * @api public</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回适用于 http.createServer() 方法的回调函数来处理请求。</span></span><br><span class=\"line\">  <span class=\"comment\">//启动server和接收请求</span></span><br><span class=\"line\">  callback() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fn = compose(<span class=\"keyword\">this</span>.middleware);<span class=\"comment\">//启动server时执行，初始化中间件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.listenerCount(<span class=\"string\">'error'</span>)) <span class=\"keyword\">this</span>.on(<span class=\"string\">'error'</span>, <span class=\"keyword\">this</span>.onerror);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//接收请求时执行处理请求的函数</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleRequest = <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> ctx = <span class=\"keyword\">this</span>.createContext(req, res);<span class=\"comment\">//创建一个最终可用的context</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.handleRequest(ctx, fn);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> handleRequest;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * callback里的一个处理请求的方法，</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  handleRequest(ctx, fnMiddleware) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = ctx.res;</span><br><span class=\"line\">    res.statusCode = <span class=\"number\">404</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> onerror = <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> ctx.onerror(err);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> handleResponse = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> respond(ctx);</span><br><span class=\"line\">    onFinished(res, onerror);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fnMiddleware(ctx).then(handleResponse).catch(onerror);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Initialize a new context.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  createContext(req, res) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> context = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.context);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> request = context.request = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.request);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = context.response = <span class=\"built_in\">Object</span>.create(<span class=\"keyword\">this</span>.response);</span><br><span class=\"line\">    context.app = request.app = response.app = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    context.req = request.req = response.req = req;</span><br><span class=\"line\">    context.res = request.res = response.res = res;</span><br><span class=\"line\">    request.ctx = response.ctx = context;</span><br><span class=\"line\">    request.response = response;</span><br><span class=\"line\">    response.request = request;</span><br><span class=\"line\">    context.originalUrl = request.originalUrl = req.url;</span><br><span class=\"line\">    context.cookies = <span class=\"keyword\">new</span> Cookies(req, res, &#123;</span><br><span class=\"line\">      keys: <span class=\"keyword\">this</span>.keys,</span><br><span class=\"line\">      secure: request.secure</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    request.ip = request.ips[<span class=\"number\">0</span>] || req.socket.remoteAddress || <span class=\"string\">''</span>;</span><br><span class=\"line\">    context.accept = request.accept = accepts(req);</span><br><span class=\"line\">    context.state = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> context;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Default error handler.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * @param &#123;Error&#125; err</span></span><br><span class=\"line\"><span class=\"comment\">   * @api private</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  onerror(err) &#123;</span><br><span class=\"line\">    assert(err <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Error</span>, <span class=\"string\">`non-error thrown: <span class=\"subst\">$&#123;err&#125;</span>`</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"number\">404</span> == err.status || err.expose) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.silent) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = err.stack || err.toString();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(msg.replace(<span class=\"regexp\">/^/gm</span>, <span class=\"string\">'  '</span>));</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Response helper.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">respond</span>(<span class=\"params\">ctx</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// allow bypassing koa</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">false</span> === ctx.respond) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = ctx.res;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!ctx.writable) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> body = ctx.body;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> code = ctx.status;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ignore body</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (statuses.empty[code]) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// strip headers</span></span><br><span class=\"line\">    ctx.body = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">'HEAD'</span> == ctx.method) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!res.headersSent &amp;&amp; isJSON(body)) &#123;</span><br><span class=\"line\">      ctx.length = Buffer.byteLength(<span class=\"built_in\">JSON</span>.stringify(body));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// status body</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">null</span> == body) &#123;</span><br><span class=\"line\">    body = ctx.message || <span class=\"built_in\">String</span>(code);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!res.headersSent) &#123;</span><br><span class=\"line\">      ctx.type = <span class=\"string\">'text'</span>;</span><br><span class=\"line\">      ctx.length = Buffer.byteLength(body);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// responses</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (Buffer.isBuffer(body)) <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"string\">'string'</span> == <span class=\"keyword\">typeof</span> body) <span class=\"keyword\">return</span> res.end(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (body <span class=\"keyword\">instanceof</span> Stream) <span class=\"keyword\">return</span> body.pipe(res);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// body: json</span></span><br><span class=\"line\">  body = <span class=\"built_in\">JSON</span>.stringify(body);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!res.headersSent) &#123;</span><br><span class=\"line\">    ctx.length = Buffer.byteLength(body);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  res.end(body);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"react生命周期理解","date":"2018-05-22T06:13:57.000Z","_content":"<h1>react组建的生命周期</h1>\n\nReact组件的生命周期有两种情况，初次渲染和状态更新导致再次渲染。\nReact 生命周期分为三种状态 1. 挂载 2.更新 3.销毁\n\n## 组件加载\n\n组件的初次挂载，有以下几个步骤，分别是\n1、构造函数，指定This，初始状态，绑定函数（constructor）\n2、组件安装（componentWillMount）\n3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n4、组件生成，DOM查找等(componentDidMount)\n\n\n## 组件更新\n\n组件的更新，有三种情况：\n1.父组件的props发生更新\n2.调用this.forceUpdate更新（重复componentWillUpdate方法之后的操作）\n3.调用this.setState方法更新组件state,触发组件更新\n\n### 状态更新\n\n步骤：\n1、构造函数，指定This，初始状态，绑定函数（constructor）\n2、组件安装（componentWillMount）\n3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n4、组件生成，DOM查找等(componentDidMount)\n5、组建更新状态(componentWillUpdate)\n6、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n7、组建更新完成(componentDidUpdate)\n\n### 调用this.forceUpdate更新\n\n当组件调用forceUpdata方法更新时，会进入componentWillUpdate方法。\n直接跳过shouldComponentUpdtavoid\n之后执行render函数更新DOMReactElement \n执行完render函数之后执行componentDidUpdata,\n除了首次render之后调用componentDidMount，其它render结束之后都是调用componentDidUpdate。\n\n\n### 父组建更新props\n\n步骤：\n1、父组件构造函数，指定This，初始状态，绑定函数（constructor）\n2、父组件安装（componentWillMount）\n3、父组件或者虚拟DOM元素渲染到真实的DOM上（render）\n4、子组件或者虚拟DOM元素渲染到真实的DOM上（render）\n5、父组件生成，DOM查找等(componentDidMount)\n6、父组建更新状态(componentWillUpdate)\n7、父组件或者虚拟DOM元素渲染到真实的DOM上（render）\n8、子组件接收父组件props(componentWillReceiveProps)\n9、子组件判断是否更新(shouldComponentUpdate)\n10、子组建更新状态(componentWillUpdate)\n11、子组件或者虚拟DOM元素渲染到真实的DOM上（render）\n12、子组件更新完成(componentDidUpdate)\n12、父组件更新完成(componentDidUpdate)\n\n## 组件销毁\n\n单页应用中，切换页面原组件需要销毁释放资源，如果原组件中有定时器等不能销毁时，需要在componentWillUnmount中清理资源占用，手动销毁定时器。\n\n<h1>总结</h1>\n\n![react生命周期](https://github.com/kaisa911/studyNotes/blob/master/public/image/reactLifeCycle.png?raw=true)","source":"_posts/react生命周期理解.md","raw":"---\ntitle: react生命周期理解\ndate: 2018-05-22 14:13:57\ntags: [Javascript, react]\ncategories: 学习笔记\n---\n<h1>react组建的生命周期</h1>\n\nReact组件的生命周期有两种情况，初次渲染和状态更新导致再次渲染。\nReact 生命周期分为三种状态 1. 挂载 2.更新 3.销毁\n\n## 组件加载\n\n组件的初次挂载，有以下几个步骤，分别是\n1、构造函数，指定This，初始状态，绑定函数（constructor）\n2、组件安装（componentWillMount）\n3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n4、组件生成，DOM查找等(componentDidMount)\n\n\n## 组件更新\n\n组件的更新，有三种情况：\n1.父组件的props发生更新\n2.调用this.forceUpdate更新（重复componentWillUpdate方法之后的操作）\n3.调用this.setState方法更新组件state,触发组件更新\n\n### 状态更新\n\n步骤：\n1、构造函数，指定This，初始状态，绑定函数（constructor）\n2、组件安装（componentWillMount）\n3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n4、组件生成，DOM查找等(componentDidMount)\n5、组建更新状态(componentWillUpdate)\n6、将组建或者虚拟DOM元素渲染到真实的DOM上（render）\n7、组建更新完成(componentDidUpdate)\n\n### 调用this.forceUpdate更新\n\n当组件调用forceUpdata方法更新时，会进入componentWillUpdate方法。\n直接跳过shouldComponentUpdtavoid\n之后执行render函数更新DOMReactElement \n执行完render函数之后执行componentDidUpdata,\n除了首次render之后调用componentDidMount，其它render结束之后都是调用componentDidUpdate。\n\n\n### 父组建更新props\n\n步骤：\n1、父组件构造函数，指定This，初始状态，绑定函数（constructor）\n2、父组件安装（componentWillMount）\n3、父组件或者虚拟DOM元素渲染到真实的DOM上（render）\n4、子组件或者虚拟DOM元素渲染到真实的DOM上（render）\n5、父组件生成，DOM查找等(componentDidMount)\n6、父组建更新状态(componentWillUpdate)\n7、父组件或者虚拟DOM元素渲染到真实的DOM上（render）\n8、子组件接收父组件props(componentWillReceiveProps)\n9、子组件判断是否更新(shouldComponentUpdate)\n10、子组建更新状态(componentWillUpdate)\n11、子组件或者虚拟DOM元素渲染到真实的DOM上（render）\n12、子组件更新完成(componentDidUpdate)\n12、父组件更新完成(componentDidUpdate)\n\n## 组件销毁\n\n单页应用中，切换页面原组件需要销毁释放资源，如果原组件中有定时器等不能销毁时，需要在componentWillUnmount中清理资源占用，手动销毁定时器。\n\n<h1>总结</h1>\n\n![react生命周期](https://github.com/kaisa911/studyNotes/blob/master/public/image/reactLifeCycle.png?raw=true)","slug":"react生命周期理解","published":1,"updated":"2018-05-24T08:29:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yaa001dd6spm74fwluo","content":"<h1>react组建的生命周期</h1>\n\n<p>React组件的生命周期有两种情况，初次渲染和状态更新导致再次渲染。<br>React 生命周期分为三种状态 1. 挂载 2.更新 3.销毁</p>\n<h2 id=\"组件加载\"><a href=\"#组件加载\" class=\"headerlink\" title=\"组件加载\"></a>组件加载</h2><p>组件的初次挂载，有以下几个步骤，分别是<br>1、构造函数，指定This，初始状态，绑定函数（constructor）<br>2、组件安装（componentWillMount）<br>3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、组件生成，DOM查找等(componentDidMount)</p>\n<h2 id=\"组件更新\"><a href=\"#组件更新\" class=\"headerlink\" title=\"组件更新\"></a>组件更新</h2><p>组件的更新，有三种情况：<br>1.父组件的props发生更新<br>2.调用this.forceUpdate更新（重复componentWillUpdate方法之后的操作）<br>3.调用this.setState方法更新组件state,触发组件更新</p>\n<h3 id=\"状态更新\"><a href=\"#状态更新\" class=\"headerlink\" title=\"状态更新\"></a>状态更新</h3><p>步骤：<br>1、构造函数，指定This，初始状态，绑定函数（constructor）<br>2、组件安装（componentWillMount）<br>3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、组件生成，DOM查找等(componentDidMount)<br>5、组建更新状态(componentWillUpdate)<br>6、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>7、组建更新完成(componentDidUpdate)</p>\n<h3 id=\"调用this-forceUpdate更新\"><a href=\"#调用this-forceUpdate更新\" class=\"headerlink\" title=\"调用this.forceUpdate更新\"></a>调用this.forceUpdate更新</h3><p>当组件调用forceUpdata方法更新时，会进入componentWillUpdate方法。<br>直接跳过shouldComponentUpdtavoid<br>之后执行render函数更新DOMReactElement<br>执行完render函数之后执行componentDidUpdata,<br>除了首次render之后调用componentDidMount，其它render结束之后都是调用componentDidUpdate。</p>\n<h3 id=\"父组建更新props\"><a href=\"#父组建更新props\" class=\"headerlink\" title=\"父组建更新props\"></a>父组建更新props</h3><p>步骤：<br>1、父组件构造函数，指定This，初始状态，绑定函数（constructor）<br>2、父组件安装（componentWillMount）<br>3、父组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、子组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>5、父组件生成，DOM查找等(componentDidMount)<br>6、父组建更新状态(componentWillUpdate)<br>7、父组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>8、子组件接收父组件props(componentWillReceiveProps)<br>9、子组件判断是否更新(shouldComponentUpdate)<br>10、子组建更新状态(componentWillUpdate)<br>11、子组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>12、子组件更新完成(componentDidUpdate)<br>12、父组件更新完成(componentDidUpdate)</p>\n<h2 id=\"组件销毁\"><a href=\"#组件销毁\" class=\"headerlink\" title=\"组件销毁\"></a>组件销毁</h2><p>单页应用中，切换页面原组件需要销毁释放资源，如果原组件中有定时器等不能销毁时，需要在componentWillUnmount中清理资源占用，手动销毁定时器。</p>\n<h1>总结</h1>\n\n<p><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/reactLifeCycle.png?raw=true\" alt=\"react生命周期\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>react组建的生命周期</h1>\n\n<p>React组件的生命周期有两种情况，初次渲染和状态更新导致再次渲染。<br>React 生命周期分为三种状态 1. 挂载 2.更新 3.销毁</p>\n<h2 id=\"组件加载\"><a href=\"#组件加载\" class=\"headerlink\" title=\"组件加载\"></a>组件加载</h2><p>组件的初次挂载，有以下几个步骤，分别是<br>1、构造函数，指定This，初始状态，绑定函数（constructor）<br>2、组件安装（componentWillMount）<br>3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、组件生成，DOM查找等(componentDidMount)</p>\n<h2 id=\"组件更新\"><a href=\"#组件更新\" class=\"headerlink\" title=\"组件更新\"></a>组件更新</h2><p>组件的更新，有三种情况：<br>1.父组件的props发生更新<br>2.调用this.forceUpdate更新（重复componentWillUpdate方法之后的操作）<br>3.调用this.setState方法更新组件state,触发组件更新</p>\n<h3 id=\"状态更新\"><a href=\"#状态更新\" class=\"headerlink\" title=\"状态更新\"></a>状态更新</h3><p>步骤：<br>1、构造函数，指定This，初始状态，绑定函数（constructor）<br>2、组件安装（componentWillMount）<br>3、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、组件生成，DOM查找等(componentDidMount)<br>5、组建更新状态(componentWillUpdate)<br>6、将组建或者虚拟DOM元素渲染到真实的DOM上（render）<br>7、组建更新完成(componentDidUpdate)</p>\n<h3 id=\"调用this-forceUpdate更新\"><a href=\"#调用this-forceUpdate更新\" class=\"headerlink\" title=\"调用this.forceUpdate更新\"></a>调用this.forceUpdate更新</h3><p>当组件调用forceUpdata方法更新时，会进入componentWillUpdate方法。<br>直接跳过shouldComponentUpdtavoid<br>之后执行render函数更新DOMReactElement<br>执行完render函数之后执行componentDidUpdata,<br>除了首次render之后调用componentDidMount，其它render结束之后都是调用componentDidUpdate。</p>\n<h3 id=\"父组建更新props\"><a href=\"#父组建更新props\" class=\"headerlink\" title=\"父组建更新props\"></a>父组建更新props</h3><p>步骤：<br>1、父组件构造函数，指定This，初始状态，绑定函数（constructor）<br>2、父组件安装（componentWillMount）<br>3、父组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>4、子组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>5、父组件生成，DOM查找等(componentDidMount)<br>6、父组建更新状态(componentWillUpdate)<br>7、父组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>8、子组件接收父组件props(componentWillReceiveProps)<br>9、子组件判断是否更新(shouldComponentUpdate)<br>10、子组建更新状态(componentWillUpdate)<br>11、子组件或者虚拟DOM元素渲染到真实的DOM上（render）<br>12、子组件更新完成(componentDidUpdate)<br>12、父组件更新完成(componentDidUpdate)</p>\n<h2 id=\"组件销毁\"><a href=\"#组件销毁\" class=\"headerlink\" title=\"组件销毁\"></a>组件销毁</h2><p>单页应用中，切换页面原组件需要销毁释放资源，如果原组件中有定时器等不能销毁时，需要在componentWillUnmount中清理资源占用，手动销毁定时器。</p>\n<h1>总结</h1>\n\n<p><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/reactLifeCycle.png?raw=true\" alt=\"react生命周期\"></p>\n"},{"title":"link和@import之争","date":"2018-06-13T02:52:26.000Z","_content":"看到知乎大神说，先问是不是，再问为什么\n\n我页不知道为什么要写这句话，反正就是很奇怪的想法，就先记下来。\n今天研究的link和@import，是外部引入外部引入 CSS 的两种方式。\n两者是有区别的（是不是）。\n我们来研究一下有哪些区别（为什么）\n\n\n* link是XHTML(HTML)标签，除了加载CSS外，还可以定义RSS,rel等其他事务； @import是 CSS 提供的语法规则, 只有导入样式表的作用。\n* link引用CSS时，在页面载入时同时加载； @import需要页面网页完全载入以后加载。\n* link是XHTML(HTML)标签，无兼容问题； @import是在CSS2.1提出的，低版本的浏览器不支持(IE5+)。\n* link支持使用Javascript控制DOM去改变样式；而@import不支持。\n\n```html\n<link href=\"style.css\" rel=\"stylesheet\" type=\"text/css\"> \n<style>\n  @import url(style.css);\n</style>\n```","source":"_posts/link和-import之争.md","raw":"---\ntitle: link和@import之争\ndate: 2018-06-13 10:52:26\ntags: CSS\ncategories: 面试锦囊\n---\n看到知乎大神说，先问是不是，再问为什么\n\n我页不知道为什么要写这句话，反正就是很奇怪的想法，就先记下来。\n今天研究的link和@import，是外部引入外部引入 CSS 的两种方式。\n两者是有区别的（是不是）。\n我们来研究一下有哪些区别（为什么）\n\n\n* link是XHTML(HTML)标签，除了加载CSS外，还可以定义RSS,rel等其他事务； @import是 CSS 提供的语法规则, 只有导入样式表的作用。\n* link引用CSS时，在页面载入时同时加载； @import需要页面网页完全载入以后加载。\n* link是XHTML(HTML)标签，无兼容问题； @import是在CSS2.1提出的，低版本的浏览器不支持(IE5+)。\n* link支持使用Javascript控制DOM去改变样式；而@import不支持。\n\n```html\n<link href=\"style.css\" rel=\"stylesheet\" type=\"text/css\"> \n<style>\n  @import url(style.css);\n</style>\n```","slug":"link和-import之争","published":1,"updated":"2018-06-13T03:05:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yab001fd6spii82g1zq","content":"<p>看到知乎大神说，先问是不是，再问为什么</p>\n<p>我页不知道为什么要写这句话，反正就是很奇怪的想法，就先记下来。<br>今天研究的link和@import，是外部引入外部引入 CSS 的两种方式。<br>两者是有区别的（是不是）。<br>我们来研究一下有哪些区别（为什么）</p>\n<ul>\n<li>link是XHTML(HTML)标签，除了加载CSS外，还可以定义RSS,rel等其他事务； @import是 CSS 提供的语法规则, 只有导入样式表的作用。</li>\n<li>link引用CSS时，在页面载入时同时加载； @import需要页面网页完全载入以后加载。</li>\n<li>link是XHTML(HTML)标签，无兼容问题； @import是在CSS2.1提出的，低版本的浏览器不支持(IE5+)。</li>\n<li>link支持使用Javascript控制DOM去改变样式；而@import不支持。</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">  @import url(style.css);</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>看到知乎大神说，先问是不是，再问为什么</p>\n<p>我页不知道为什么要写这句话，反正就是很奇怪的想法，就先记下来。<br>今天研究的link和@import，是外部引入外部引入 CSS 的两种方式。<br>两者是有区别的（是不是）。<br>我们来研究一下有哪些区别（为什么）</p>\n<ul>\n<li>link是XHTML(HTML)标签，除了加载CSS外，还可以定义RSS,rel等其他事务； @import是 CSS 提供的语法规则, 只有导入样式表的作用。</li>\n<li>link引用CSS时，在页面载入时同时加载； @import需要页面网页完全载入以后加载。</li>\n<li>link是XHTML(HTML)标签，无兼容问题； @import是在CSS2.1提出的，低版本的浏览器不支持(IE5+)。</li>\n<li>link支持使用Javascript控制DOM去改变样式；而@import不支持。</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"undefined\">  @import url(style.css);</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"redux-devtools学习理解","date":"2018-05-11T08:52:11.000Z","_content":"<h1>redux-devtools</h1>\nA live-editing time travel environment for Redux.\nredux-devtools是一个有趣而又高效的redux开发工具，通过redux-devtools，我们可以清晰的看到当前 store 仓库中的 state 是怎么样的，在可视化工具的左边，我们还可以看到触发的action的变化。这样，使得我们开发过程中很方便地进行调试。 \n\n## 安装\n\n```javascript\nnpm install --save-dev redux-devtools\nnpm install --save-dev redux-devtools-log-monitor\nnpm install --save-dev redux-devtools-dock-monitor\n```\n## 使用\n\n* 通过createDevTools来创建`DevTools`组件\n\n```javascript\nimport React from 'react'\n//从redux-devtools中引入createDevTools\nlet DevTools;\nif (process.env.NODE_ENV === 'development') {\n  const {createDevTools} = require('redux-devtools');\n  const LogMonitor = require('redux-devtools-log-monitor').default;\n  const DockMonitor = require('redux-devtools-dock-monitor').default;\n\n  DevTools = createDevTools(\n    <DockMonitor toggleVisibilityKey=\"ctrl-h\"\n                 changePositionKey=\"ctrl-w\"\n                 defaultIsVisible={false}\n                 defaultPosition=\"right\">\n      <LogMonitor theme=\"tomorrow\" preserveScrollTop={false}/>\n    </DockMonitor>\n  );\n}\n```\n* 采用DevTools.instrument()通过redux的compose来扩展store\n\n```javascript\nexport function configureStore(history, reducers, initialState) {\n  // Installs hooks that always keep react-router and redux store in sync\n  const middleware = [thunk, routerMiddleware(history)];\n  if (process.env.NODE_ENV === 'development') { //开发环境\n    const {createLogger} = require('redux-logger');\n    middleware.push(createLogger());\n  }\n\n  let devTools = [];\n  if (DevTools && typeof document !== 'undefined') {\n    devTools = [DevTools.instrument()]\n  }\n\n  const store = createStore(\n    reducers,\n    initialState,\n    compose(\n      applyMiddleware(...middleware),\n      ...devTools\n    ));\n\n  return store;\n}\n```\n用createDevTools()创建的DevTools组件有个特殊的静态方法instrument(),它返回一个store的增强器,在开发中你需要在compose中使用。注意：DevTools.instrument()要放在applyMiddleware后，因为你的applyMiddleware可以存在异步行为，为了确保所有的actions显示在store中，所以要放在后面\n\n* Render `<DevTools />`\n\n```javascript\nconst store = configureStore();\n\nrender(\n  <Provider store={store}>\n    <div>\n      <Router />\n      <DevTools />\n    </div>\n  </Provider>\n  document.getElementById('app')\n);\n```","source":"_posts/redux-devtools学习理解.md","raw":"---\ntitle: redux-devtools学习理解\ndate: 2018-05-11 16:52:11\ntags: redux\ncategories: 学习笔记\n---\n<h1>redux-devtools</h1>\nA live-editing time travel environment for Redux.\nredux-devtools是一个有趣而又高效的redux开发工具，通过redux-devtools，我们可以清晰的看到当前 store 仓库中的 state 是怎么样的，在可视化工具的左边，我们还可以看到触发的action的变化。这样，使得我们开发过程中很方便地进行调试。 \n\n## 安装\n\n```javascript\nnpm install --save-dev redux-devtools\nnpm install --save-dev redux-devtools-log-monitor\nnpm install --save-dev redux-devtools-dock-monitor\n```\n## 使用\n\n* 通过createDevTools来创建`DevTools`组件\n\n```javascript\nimport React from 'react'\n//从redux-devtools中引入createDevTools\nlet DevTools;\nif (process.env.NODE_ENV === 'development') {\n  const {createDevTools} = require('redux-devtools');\n  const LogMonitor = require('redux-devtools-log-monitor').default;\n  const DockMonitor = require('redux-devtools-dock-monitor').default;\n\n  DevTools = createDevTools(\n    <DockMonitor toggleVisibilityKey=\"ctrl-h\"\n                 changePositionKey=\"ctrl-w\"\n                 defaultIsVisible={false}\n                 defaultPosition=\"right\">\n      <LogMonitor theme=\"tomorrow\" preserveScrollTop={false}/>\n    </DockMonitor>\n  );\n}\n```\n* 采用DevTools.instrument()通过redux的compose来扩展store\n\n```javascript\nexport function configureStore(history, reducers, initialState) {\n  // Installs hooks that always keep react-router and redux store in sync\n  const middleware = [thunk, routerMiddleware(history)];\n  if (process.env.NODE_ENV === 'development') { //开发环境\n    const {createLogger} = require('redux-logger');\n    middleware.push(createLogger());\n  }\n\n  let devTools = [];\n  if (DevTools && typeof document !== 'undefined') {\n    devTools = [DevTools.instrument()]\n  }\n\n  const store = createStore(\n    reducers,\n    initialState,\n    compose(\n      applyMiddleware(...middleware),\n      ...devTools\n    ));\n\n  return store;\n}\n```\n用createDevTools()创建的DevTools组件有个特殊的静态方法instrument(),它返回一个store的增强器,在开发中你需要在compose中使用。注意：DevTools.instrument()要放在applyMiddleware后，因为你的applyMiddleware可以存在异步行为，为了确保所有的actions显示在store中，所以要放在后面\n\n* Render `<DevTools />`\n\n```javascript\nconst store = configureStore();\n\nrender(\n  <Provider store={store}>\n    <div>\n      <Router />\n      <DevTools />\n    </div>\n  </Provider>\n  document.getElementById('app')\n);\n```","slug":"redux-devtools学习理解","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yad001jd6spimxmzu7h","content":"<p></p><h1>redux-devtools</h1><br>A live-editing time travel environment for Redux.<br>redux-devtools是一个有趣而又高效的redux开发工具，通过redux-devtools，我们可以清晰的看到当前 store 仓库中的 state 是怎么样的，在可视化工具的左边，我们还可以看到触发的action的变化。这样，使得我们开发过程中很方便地进行调试。 <p></p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save-dev redux-devtools</span><br><span class=\"line\">npm install --save-dev redux-devtools-log-monitor</span><br><span class=\"line\">npm install --save-dev redux-devtools-dock-monitor</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><ul>\n<li>通过createDevTools来创建<code>DevTools</code>组件</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"comment\">//从redux-devtools中引入createDevTools</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> DevTools;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;createDevTools&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> LogMonitor = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools-log-monitor'</span>).default;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> DockMonitor = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools-dock-monitor'</span>).default;</span><br><span class=\"line\"></span><br><span class=\"line\">  DevTools = createDevTools(</span><br><span class=\"line\">    &lt;DockMonitor toggleVisibilityKey=<span class=\"string\">\"ctrl-h\"</span></span><br><span class=\"line\">                 changePositionKey=<span class=\"string\">\"ctrl-w\"</span></span><br><span class=\"line\">                 defaultIsVisible=&#123;<span class=\"literal\">false</span>&#125;</span><br><span class=\"line\">                 defaultPosition=<span class=\"string\">\"right\"</span>&gt;</span><br><span class=\"line\">      &lt;LogMonitor theme=<span class=\"string\">\"tomorrow\"</span> preserveScrollTop=&#123;<span class=\"literal\">false</span>&#125;/&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/DockMonitor&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  );</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>采用DevTools.instrument()通过redux的compose来扩展store</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">configureStore</span>(<span class=\"params\">history, reducers, initialState</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Installs hooks that always keep react-router and redux store in sync</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> middleware = [thunk, routerMiddleware(history)];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span>) &#123; <span class=\"comment\">//开发环境</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;createLogger&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-logger'</span>);</span><br><span class=\"line\">    middleware.push(createLogger());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> devTools = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (DevTools &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">document</span> !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    devTools = [DevTools.instrument()]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">    reducers,</span><br><span class=\"line\">    initialState,</span><br><span class=\"line\">    compose(</span><br><span class=\"line\">      applyMiddleware(...middleware),</span><br><span class=\"line\">      ...devTools</span><br><span class=\"line\">    ));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> store;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>用createDevTools()创建的DevTools组件有个特殊的静态方法instrument(),它返回一个store的增强器,在开发中你需要在compose中使用。注意：DevTools.instrument()要放在applyMiddleware后，因为你的applyMiddleware可以存在异步行为，为了确保所有的actions显示在store中，所以要放在后面</p>\n<ul>\n<li>Render <code>&lt;DevTools /&gt;</code></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> store = configureStore();</span><br><span class=\"line\"></span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Router /&gt;</span><br><span class=\"line\">      &lt;DevTools /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>Provider&gt;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'app'</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p></p><h1>redux-devtools</h1><br>A live-editing time travel environment for Redux.<br>redux-devtools是一个有趣而又高效的redux开发工具，通过redux-devtools，我们可以清晰的看到当前 store 仓库中的 state 是怎么样的，在可视化工具的左边，我们还可以看到触发的action的变化。这样，使得我们开发过程中很方便地进行调试。 <p></p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save-dev redux-devtools</span><br><span class=\"line\">npm install --save-dev redux-devtools-log-monitor</span><br><span class=\"line\">npm install --save-dev redux-devtools-dock-monitor</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><ul>\n<li>通过createDevTools来创建<code>DevTools</code>组件</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">'react'</span></span><br><span class=\"line\"><span class=\"comment\">//从redux-devtools中引入createDevTools</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> DevTools;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;createDevTools&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> LogMonitor = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools-log-monitor'</span>).default;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> DockMonitor = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-devtools-dock-monitor'</span>).default;</span><br><span class=\"line\"></span><br><span class=\"line\">  DevTools = createDevTools(</span><br><span class=\"line\">    &lt;DockMonitor toggleVisibilityKey=<span class=\"string\">\"ctrl-h\"</span></span><br><span class=\"line\">                 changePositionKey=<span class=\"string\">\"ctrl-w\"</span></span><br><span class=\"line\">                 defaultIsVisible=&#123;<span class=\"literal\">false</span>&#125;</span><br><span class=\"line\">                 defaultPosition=<span class=\"string\">\"right\"</span>&gt;</span><br><span class=\"line\">      &lt;LogMonitor theme=<span class=\"string\">\"tomorrow\"</span> preserveScrollTop=&#123;<span class=\"literal\">false</span>&#125;/&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/DockMonitor&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  );</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>采用DevTools.instrument()通过redux的compose来扩展store</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">configureStore</span>(<span class=\"params\">history, reducers, initialState</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Installs hooks that always keep react-router and redux store in sync</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> middleware = [thunk, routerMiddleware(history)];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span>) &#123; <span class=\"comment\">//开发环境</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;createLogger&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'redux-logger'</span>);</span><br><span class=\"line\">    middleware.push(createLogger());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> devTools = [];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (DevTools &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">document</span> !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    devTools = [DevTools.instrument()]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> store = createStore(</span><br><span class=\"line\">    reducers,</span><br><span class=\"line\">    initialState,</span><br><span class=\"line\">    compose(</span><br><span class=\"line\">      applyMiddleware(...middleware),</span><br><span class=\"line\">      ...devTools</span><br><span class=\"line\">    ));</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> store;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>用createDevTools()创建的DevTools组件有个特殊的静态方法instrument(),它返回一个store的增强器,在开发中你需要在compose中使用。注意：DevTools.instrument()要放在applyMiddleware后，因为你的applyMiddleware可以存在异步行为，为了确保所有的actions显示在store中，所以要放在后面</p>\n<ul>\n<li>Render <code>&lt;DevTools /&gt;</code></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> store = configureStore();</span><br><span class=\"line\"></span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;Router /&gt;</span><br><span class=\"line\">      &lt;DevTools /&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>Provider&gt;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'app'</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>"},{"title":"react 16.0 新特性学习","date":"2018-05-09T02:23:39.000Z","_content":"## 1、Fragment\n\n新版本的render可以返回数组、字符串、react组件、数字、boolean值\nv15.x必须要一个标签来包裹<br>\nBefore v16\n```javascript\nreturn (\n        <div>\n            <label htmlFor=\"name\">名字：</label>\n            <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n            <button>搜索</button>\n        </div>\n    );\n```\nWhen v16.0.0\n```javascript\nreturn (\n    [\n        <label htmlFor=\"name\">名字：</label>,\n        <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>,\n        <button>搜索</button>\n    ]\n);\n```\nNow v16.2.0\n```javascript\nreturn (\n    <React.Fragment>\n       <label htmlFor=\"name\">名字：</label>\n       <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n       <button>搜索</button>\n    </React.Fragment>\n);\n```\n片段(fragments) 可以让你将子元素列表添加到一个分组中，并且不会在DOM中增加额外节点。key 是唯一可以传递给 Fragment 的属性\n```javascript\nreturn (\n    <dl>\n      {props.items.map(item => (\n        // 没有`key`，将会触发一个key警告\n        <React.Fragment key={item.id}>\n          <dt>{item.term}</dt>\n          <dd>{item.description}</dd>\n        </React.Fragment>\n      ))}\n    </dl>\n  );\n```\n简明写法<></>，但是还没有被更多的工具支持，它不支持 键(keys) 或 属性(attributes)。\nFurther\n\nbabel v7.0.0+ , babel-plugin-transform-react-jsx-source or babel-preset-react\n\n```javascript\nreturn (\n    <>\n       <label htmlFor=\"name\">名字：</label>\n       <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n       <button>搜索</button>\n    </>\n);\n```\nDOM Fragment\n\n```javascript\nconst select = document.getElementById('select')\nconst values = [1, 2, 3]\nconst fragment = document.createDocumentFragment()\nvalues.map(item => {\n    const option = document.createElement('option')\n    option.value = item\n    option.innerHTML = `小明${item}号`\n    fragment.appendChild(option)\n})\nselect.appendChild(fragment)\n```\n## 2、Portals\nPortals是reactjs16提供的官方解决方案，使得组件可以脱离父组件层级挂载在DOM树的任何位置。\n普通情况下，组件的render函数返回的元素会被挂载在它的父级组件上。\n然而，有些元素需要被挂载在更高层级的位置。最典型的应用场景：当父组件具有overflow: hidden或者z-index的样式设置时，组件有可能被其他元素遮挡，就可以考虑使用Portal使组件的挂载脱离父组件。\n组件的挂载点虽然可以脱离父组件，但组件的事件通过冒泡机制仍可以传给父组件。\n```javascript\n<body>\n    <div id=\"bd\"></div>\n    <div id=\"modal\"></div>\n</body>\n```\n```javascript\nrender(\n  <App>\n    <SearchBox>\n      <Modal>\n        <div>模态框</div>\n      </Modal>\n    </SearchBox>\n  </App>,\n  document.getElementById('bd'),\n  () => {\n  console.log(arguments)\n})\n```\n```javascript\nclass App extends Component{\n  constructor(options) {\n    super(options)\n    this.handleClick = this.handleClick.bind(this)\n  }\n  handleClick() {\n    alert('react component tree propagation!')\n  }\n  render() {\n    return <div className=\"app\" onClick={this.handleClick}>\n      {this.props.children}\n    </div>\n  }\n}\n```\n```javascript\nclass Modal extends Component {\n    constructor(options) {\n      super(options)\n    }\n    render() {\n      return createPortal(this.props.children, document.getElementById('modal'))\n    }\n  }\n```\n```javascript\n<div id=\"bd\">\n    <div class=\"app\">\n        <label for=\"name\">名字：</label>\n        <input type=\"text\" id=\"name\" placeholder=\"请输入名字\">\n        <button>搜索</button>\n    </div>\n</div>\n<div id=\"modal\">\n    <div>模态框</div>\n</div>\n```\n```\n<App>\n    <div className=\"app\" onClick=bound handleClick()>\n        <SearchBox>\n            <labelhtmlFor=\"name\">名字：</label>\n            <inputid=\"name\"type=\"text\"placeholder=\"请输入名字\"></input>\n            <button>搜索</button>\n            <Modal>\n                <ReactPortal target=HTMLDivElement{…}>\n                    <div>模态框</div>\n                </ReactPortal>\n            </Modal>\n        </SearchBox>\n    </div>\n</App>\n```\n\nBefore portals\n\n```javascript\nReactDom.render(reactChild, container, callback)\n\nReactDom.unmountComponentAtNode(container)\n\n\nReactDom.unstable_renderSubtreeIntoContainer(\n    context,\n    reactChild,\n    domNode,\n    callback\n)\n\nReactDom.unmountComponentAtNode(container)\n\n\nrender: ReactMount._renderSubtreeIntoContainer(null, reactChild, container, callback )\n\nunstable_renderSubtreeIntoContainer: ReactMount._renderSubtreeIntoContainer(context, reactChild, container, callback)\n```\n\n## 3、Error Boundaries\n\n之前react在渲染过程中或者是生命周期内出现了致命的错误，react会从根组件上把所有的组件都卸载下来，以防止展现错误的数据，但这不是最好的用户体验。React 16修复了这一点，引入了Error Boundary的概念，中文译为“错误边界”，当某个组件发生错误时，我们可以通过Error Boundary捕获到错误并对错误做优雅处理。（注：它并不能捕获runtime所有的错误，比如组件回调事件里的错误，可以把它想象成传统的try-catch语句）\n\n```javascript\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n// 新增了componentDidCatch这个生命周期函数，它可以捕获自身及子树上的错误并对错误做优雅处理，包括上报错误日志、展示出错提示，而不是卸载整个组件树。\n  componentDidCatch(error, info) {\n    // 错误代理组件的展示与否\n    this.setState({ hasError: true });\n    // 在这里我们可以对错误进行记录\n    logErrorToMyService(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // 在这里我们可以书写自己想要展示的ui组件\n      return <h1>Something went wrong.</h1>;\n    }\n    return this.props.children;\n  }\n}\n```\n上面的组件是当页面中有错误时我们想要展示的效果，具体用法如下:\n```javascript\nrender(){\n  return (\n    <div>\n      <ErrorBoundary>    // 外层组件我们定义的错误组件\n        <Profile user={this.state.user} />     // 内层组件是我们将要监视的自定义组件\n      </ErrorBoundary>\n      <button onClick={this.onClick}>Update</button>\n    </div>\n  )\n}\n```\n\n这个组件能够不仅仅能够监听到本组件的错误，连同它下面的子组件的错误也可以监听到\n\n###不能捕获的错误\n\n - 事件处理 \n - 异步回调 \n - 服务端渲染 \n - error boundary组件自身抛出的错误（只能由父级捕获）\n###**react遇到未捕获的错误会怎么办**\n对 React16 来说，一个未捕获的错误会导致整个应用不能被挂载\n\n## 4、setState传入null时不会再触发更新\n\n之前的setState不管传入什么只要调用了这么方法就会渲染\n```javascript\nselectCity(e){\n  const newValue = e.target.value;\n  this.setState((state)=>{\n    if(state.city===newValue){\n      return null;\n    }\n    return {city:newValue}\n  })\n)\n```\n## 5、v16.0支持自定义的dom属性\n\n之前的版本对于自定义属性react会在属性前加上data-**来进行处理，现在对于部分属性去除了这种写法，拥抱了原生dom，这样可以减少react的代码，提升了性能\n\n## 6、其他\n\n更好的服务器端渲染：React 16的SSR被完全重写，新的实现非常快，接近3倍性能于React 15，现在提供一种流模式streaming，可以更快地把渲染的字节发送到客户端。\n\nreact v16采用了最新的技术“Fiber.”\n\nReact Server Side Rendering 解决 SPA 应用的 SEO 问题","source":"_posts/react-16-0-新特性学习.md","raw":"---\ntitle: react 16.0 新特性学习\ndate: 2018-05-09 10:23:39\ntags: [Javascript, react]\ncategories: 学习笔记\n---\n## 1、Fragment\n\n新版本的render可以返回数组、字符串、react组件、数字、boolean值\nv15.x必须要一个标签来包裹<br>\nBefore v16\n```javascript\nreturn (\n        <div>\n            <label htmlFor=\"name\">名字：</label>\n            <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n            <button>搜索</button>\n        </div>\n    );\n```\nWhen v16.0.0\n```javascript\nreturn (\n    [\n        <label htmlFor=\"name\">名字：</label>,\n        <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>,\n        <button>搜索</button>\n    ]\n);\n```\nNow v16.2.0\n```javascript\nreturn (\n    <React.Fragment>\n       <label htmlFor=\"name\">名字：</label>\n       <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n       <button>搜索</button>\n    </React.Fragment>\n);\n```\n片段(fragments) 可以让你将子元素列表添加到一个分组中，并且不会在DOM中增加额外节点。key 是唯一可以传递给 Fragment 的属性\n```javascript\nreturn (\n    <dl>\n      {props.items.map(item => (\n        // 没有`key`，将会触发一个key警告\n        <React.Fragment key={item.id}>\n          <dt>{item.term}</dt>\n          <dd>{item.description}</dd>\n        </React.Fragment>\n      ))}\n    </dl>\n  );\n```\n简明写法<></>，但是还没有被更多的工具支持，它不支持 键(keys) 或 属性(attributes)。\nFurther\n\nbabel v7.0.0+ , babel-plugin-transform-react-jsx-source or babel-preset-react\n\n```javascript\nreturn (\n    <>\n       <label htmlFor=\"name\">名字：</label>\n       <input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/>\n       <button>搜索</button>\n    </>\n);\n```\nDOM Fragment\n\n```javascript\nconst select = document.getElementById('select')\nconst values = [1, 2, 3]\nconst fragment = document.createDocumentFragment()\nvalues.map(item => {\n    const option = document.createElement('option')\n    option.value = item\n    option.innerHTML = `小明${item}号`\n    fragment.appendChild(option)\n})\nselect.appendChild(fragment)\n```\n## 2、Portals\nPortals是reactjs16提供的官方解决方案，使得组件可以脱离父组件层级挂载在DOM树的任何位置。\n普通情况下，组件的render函数返回的元素会被挂载在它的父级组件上。\n然而，有些元素需要被挂载在更高层级的位置。最典型的应用场景：当父组件具有overflow: hidden或者z-index的样式设置时，组件有可能被其他元素遮挡，就可以考虑使用Portal使组件的挂载脱离父组件。\n组件的挂载点虽然可以脱离父组件，但组件的事件通过冒泡机制仍可以传给父组件。\n```javascript\n<body>\n    <div id=\"bd\"></div>\n    <div id=\"modal\"></div>\n</body>\n```\n```javascript\nrender(\n  <App>\n    <SearchBox>\n      <Modal>\n        <div>模态框</div>\n      </Modal>\n    </SearchBox>\n  </App>,\n  document.getElementById('bd'),\n  () => {\n  console.log(arguments)\n})\n```\n```javascript\nclass App extends Component{\n  constructor(options) {\n    super(options)\n    this.handleClick = this.handleClick.bind(this)\n  }\n  handleClick() {\n    alert('react component tree propagation!')\n  }\n  render() {\n    return <div className=\"app\" onClick={this.handleClick}>\n      {this.props.children}\n    </div>\n  }\n}\n```\n```javascript\nclass Modal extends Component {\n    constructor(options) {\n      super(options)\n    }\n    render() {\n      return createPortal(this.props.children, document.getElementById('modal'))\n    }\n  }\n```\n```javascript\n<div id=\"bd\">\n    <div class=\"app\">\n        <label for=\"name\">名字：</label>\n        <input type=\"text\" id=\"name\" placeholder=\"请输入名字\">\n        <button>搜索</button>\n    </div>\n</div>\n<div id=\"modal\">\n    <div>模态框</div>\n</div>\n```\n```\n<App>\n    <div className=\"app\" onClick=bound handleClick()>\n        <SearchBox>\n            <labelhtmlFor=\"name\">名字：</label>\n            <inputid=\"name\"type=\"text\"placeholder=\"请输入名字\"></input>\n            <button>搜索</button>\n            <Modal>\n                <ReactPortal target=HTMLDivElement{…}>\n                    <div>模态框</div>\n                </ReactPortal>\n            </Modal>\n        </SearchBox>\n    </div>\n</App>\n```\n\nBefore portals\n\n```javascript\nReactDom.render(reactChild, container, callback)\n\nReactDom.unmountComponentAtNode(container)\n\n\nReactDom.unstable_renderSubtreeIntoContainer(\n    context,\n    reactChild,\n    domNode,\n    callback\n)\n\nReactDom.unmountComponentAtNode(container)\n\n\nrender: ReactMount._renderSubtreeIntoContainer(null, reactChild, container, callback )\n\nunstable_renderSubtreeIntoContainer: ReactMount._renderSubtreeIntoContainer(context, reactChild, container, callback)\n```\n\n## 3、Error Boundaries\n\n之前react在渲染过程中或者是生命周期内出现了致命的错误，react会从根组件上把所有的组件都卸载下来，以防止展现错误的数据，但这不是最好的用户体验。React 16修复了这一点，引入了Error Boundary的概念，中文译为“错误边界”，当某个组件发生错误时，我们可以通过Error Boundary捕获到错误并对错误做优雅处理。（注：它并不能捕获runtime所有的错误，比如组件回调事件里的错误，可以把它想象成传统的try-catch语句）\n\n```javascript\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n// 新增了componentDidCatch这个生命周期函数，它可以捕获自身及子树上的错误并对错误做优雅处理，包括上报错误日志、展示出错提示，而不是卸载整个组件树。\n  componentDidCatch(error, info) {\n    // 错误代理组件的展示与否\n    this.setState({ hasError: true });\n    // 在这里我们可以对错误进行记录\n    logErrorToMyService(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // 在这里我们可以书写自己想要展示的ui组件\n      return <h1>Something went wrong.</h1>;\n    }\n    return this.props.children;\n  }\n}\n```\n上面的组件是当页面中有错误时我们想要展示的效果，具体用法如下:\n```javascript\nrender(){\n  return (\n    <div>\n      <ErrorBoundary>    // 外层组件我们定义的错误组件\n        <Profile user={this.state.user} />     // 内层组件是我们将要监视的自定义组件\n      </ErrorBoundary>\n      <button onClick={this.onClick}>Update</button>\n    </div>\n  )\n}\n```\n\n这个组件能够不仅仅能够监听到本组件的错误，连同它下面的子组件的错误也可以监听到\n\n###不能捕获的错误\n\n - 事件处理 \n - 异步回调 \n - 服务端渲染 \n - error boundary组件自身抛出的错误（只能由父级捕获）\n###**react遇到未捕获的错误会怎么办**\n对 React16 来说，一个未捕获的错误会导致整个应用不能被挂载\n\n## 4、setState传入null时不会再触发更新\n\n之前的setState不管传入什么只要调用了这么方法就会渲染\n```javascript\nselectCity(e){\n  const newValue = e.target.value;\n  this.setState((state)=>{\n    if(state.city===newValue){\n      return null;\n    }\n    return {city:newValue}\n  })\n)\n```\n## 5、v16.0支持自定义的dom属性\n\n之前的版本对于自定义属性react会在属性前加上data-**来进行处理，现在对于部分属性去除了这种写法，拥抱了原生dom，这样可以减少react的代码，提升了性能\n\n## 6、其他\n\n更好的服务器端渲染：React 16的SSR被完全重写，新的实现非常快，接近3倍性能于React 15，现在提供一种流模式streaming，可以更快地把渲染的字节发送到客户端。\n\nreact v16采用了最新的技术“Fiber.”\n\nReact Server Side Rendering 解决 SPA 应用的 SEO 问题","slug":"react-16-0-新特性学习","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yae001nd6spe1wb05cr","content":"<h2 id=\"1、Fragment\"><a href=\"#1、Fragment\" class=\"headerlink\" title=\"1、Fragment\"></a>1、Fragment</h2><p>新版本的render可以返回数组、字符串、react组件、数字、boolean值<br>v15.x必须要一个标签来包裹<br><br>Before v16<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">            &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">    );</span><br></pre></td></tr></table></figure></p>\n<p>When v16.0.0<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    [</span><br><span class=\"line\">        &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;,</span><br><span class=\"line\">        &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    ]</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure></p>\n<p>Now v16.2.0<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;React.Fragment&gt;</span><br><span class=\"line\">       &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">       &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">       &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>React.Fragment&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<p>片段(fragments) 可以让你将子元素列表添加到一个分组中，并且不会在DOM中增加额外节点。key 是唯一可以传递给 Fragment 的属性<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;dl&gt;</span><br><span class=\"line\">      &#123;props.items.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> (</span><br><span class=\"line\">        <span class=\"comment\">// 没有`key`，将会触发一个key警告</span></span><br><span class=\"line\">        &lt;React.Fragment key=&#123;item.id&#125;&gt;</span><br><span class=\"line\">          &lt;dt&gt;&#123;item.term&#125;&lt;<span class=\"regexp\">/dt&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;dd&gt;&#123;item.description&#125;&lt;/</span>dd&gt;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/React.Fragment&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      ))&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>dl&gt;</span><br><span class=\"line\">  );</span><br></pre></td></tr></table></figure></p>\n<p>简明写法&lt;&gt;&lt;/&gt;，但是还没有被更多的工具支持，它不支持 键(keys) 或 属性(attributes)。<br>Further</p>\n<p>babel v7.0.0+ , babel-plugin-transform-react-jsx-source or babel-preset-react</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">       &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">       &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">       &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>DOM Fragment</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> select = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'select'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> values = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> fragment = <span class=\"built_in\">document</span>.createDocumentFragment()</span><br><span class=\"line\">values.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> option = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'option'</span>)</span><br><span class=\"line\">    option.value = item</span><br><span class=\"line\">    option.innerHTML = <span class=\"string\">`小明<span class=\"subst\">$&#123;item&#125;</span>号`</span></span><br><span class=\"line\">    fragment.appendChild(option)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">select.appendChild(fragment)</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、Portals\"><a href=\"#2、Portals\" class=\"headerlink\" title=\"2、Portals\"></a>2、Portals</h2><p>Portals是reactjs16提供的官方解决方案，使得组件可以脱离父组件层级挂载在DOM树的任何位置。<br>普通情况下，组件的render函数返回的元素会被挂载在它的父级组件上。<br>然而，有些元素需要被挂载在更高层级的位置。最典型的应用场景：当父组件具有overflow: hidden或者z-index的样式设置时，组件有可能被其他元素遮挡，就可以考虑使用Portal使组件的挂载脱离父组件。<br>组件的挂载点虽然可以脱离父组件，但组件的事件通过冒泡机制仍可以传给父组件。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"bd\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"modal\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;<span class=\"regexp\">/body&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render(</span><br><span class=\"line\">  &lt;App&gt;</span><br><span class=\"line\">    &lt;SearchBox&gt;</span><br><span class=\"line\">      &lt;Modal&gt;</span><br><span class=\"line\">        &lt;div&gt;模态框&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>Modal&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/SearchBox&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>App&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'bd'</span>),</span><br><span class=\"line\">  () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(options)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.handleClick = <span class=\"keyword\">this</span>.handleClick.bind(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleClick() &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'react component tree propagation!'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"app\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.handleClick&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">      &#123;this.props.children&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Modal</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>(options)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    render() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> createPortal(<span class=\"keyword\">this</span>.props.children, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'modal'</span>))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"bd\"</span>&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;label <span class=\"keyword\">for</span>=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;input type=\"text\" id=\"name\" placeholder=\"请输入名字\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;button&gt;搜索&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>div&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"modal\"</span>&gt;</span><br><span class=\"line\">    &lt;div&gt;模态框&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;App&gt;</span><br><span class=\"line\">    &lt;div className=&quot;app&quot; onClick=bound handleClick()&gt;</span><br><span class=\"line\">        &lt;SearchBox&gt;</span><br><span class=\"line\">            &lt;labelhtmlFor=&quot;name&quot;&gt;名字：&lt;/label&gt;</span><br><span class=\"line\">            &lt;inputid=&quot;name&quot;type=&quot;text&quot;placeholder=&quot;请输入名字&quot;&gt;&lt;/input&gt;</span><br><span class=\"line\">            &lt;button&gt;搜索&lt;/button&gt;</span><br><span class=\"line\">            &lt;Modal&gt;</span><br><span class=\"line\">                &lt;ReactPortal target=HTMLDivElement&#123;…&#125;&gt;</span><br><span class=\"line\">                    &lt;div&gt;模态框&lt;/div&gt;</span><br><span class=\"line\">                &lt;/ReactPortal&gt;</span><br><span class=\"line\">            &lt;/Modal&gt;</span><br><span class=\"line\">        &lt;/SearchBox&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/App&gt;</span><br></pre></td></tr></table></figure>\n<p>Before portals</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ReactDom.render(reactChild, container, callback)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unmountComponentAtNode(container)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unstable_renderSubtreeIntoContainer(</span><br><span class=\"line\">    context,</span><br><span class=\"line\">    reactChild,</span><br><span class=\"line\">    domNode,</span><br><span class=\"line\">    callback</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unmountComponentAtNode(container)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">render: ReactMount._renderSubtreeIntoContainer(<span class=\"literal\">null</span>, reactChild, container, callback )</span><br><span class=\"line\"></span><br><span class=\"line\">unstable_renderSubtreeIntoContainer: ReactMount._renderSubtreeIntoContainer(context, reactChild, container, callback)</span><br></pre></td></tr></table></figure>\n<h2 id=\"3、Error-Boundaries\"><a href=\"#3、Error-Boundaries\" class=\"headerlink\" title=\"3、Error Boundaries\"></a>3、Error Boundaries</h2><p>之前react在渲染过程中或者是生命周期内出现了致命的错误，react会从根组件上把所有的组件都卸载下来，以防止展现错误的数据，但这不是最好的用户体验。React 16修复了这一点，引入了Error Boundary的概念，中文译为“错误边界”，当某个组件发生错误时，我们可以通过Error Boundary捕获到错误并对错误做优雅处理。（注：它并不能捕获runtime所有的错误，比如组件回调事件里的错误，可以把它想象成传统的try-catch语句）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorBoundary</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">// 新增了componentDidCatch这个生命周期函数，它可以捕获自身及子树上的错误并对错误做优雅处理，包括上报错误日志、展示出错提示，而不是卸载整个组件树。</span></span><br><span class=\"line\">  componentDidCatch(error, info) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 错误代理组件的展示与否</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// 在这里我们可以对错误进行记录</span></span><br><span class=\"line\">    logErrorToMyService(error, info);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state.hasError) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 在这里我们可以书写自己想要展示的ui组件</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Something went wrong.<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.props.children;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上面的组件是当页面中有错误时我们想要展示的效果，具体用法如下:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ErrorBoundary&gt;    <span class=\"comment\">// 外层组件我们定义的错误组件</span></span><br><span class=\"line\">        &lt;Profile user=&#123;<span class=\"keyword\">this</span>.state.user&#125; /&gt;     <span class=\"comment\">// 内层组件是我们将要监视的自定义组件</span></span><br><span class=\"line\">      &lt;<span class=\"regexp\">/ErrorBoundary&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;this.onClick&#125;&gt;Update&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>这个组件能够不仅仅能够监听到本组件的错误，连同它下面的子组件的错误也可以监听到</p>\n<p>###不能捕获的错误</p>\n<ul>\n<li>事件处理 </li>\n<li>异步回调 </li>\n<li>服务端渲染 </li>\n<li>error boundary组件自身抛出的错误（只能由父级捕获）<br>###<strong>react遇到未捕获的错误会怎么办</strong><br>对 React16 来说，一个未捕获的错误会导致整个应用不能被挂载</li>\n</ul>\n<h2 id=\"4、setState传入null时不会再触发更新\"><a href=\"#4、setState传入null时不会再触发更新\" class=\"headerlink\" title=\"4、setState传入null时不会再触发更新\"></a>4、setState传入null时不会再触发更新</h2><p>之前的setState不管传入什么只要调用了这么方法就会渲染<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectCity(e)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newValue = e.target.value;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(<span class=\"function\">(<span class=\"params\">state</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(state.city===newValue)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;<span class=\"attr\">city</span>:newValue&#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"5、v16-0支持自定义的dom属性\"><a href=\"#5、v16-0支持自定义的dom属性\" class=\"headerlink\" title=\"5、v16.0支持自定义的dom属性\"></a>5、v16.0支持自定义的dom属性</h2><p>之前的版本对于自定义属性react会在属性前加上data-**来进行处理，现在对于部分属性去除了这种写法，拥抱了原生dom，这样可以减少react的代码，提升了性能</p>\n<h2 id=\"6、其他\"><a href=\"#6、其他\" class=\"headerlink\" title=\"6、其他\"></a>6、其他</h2><p>更好的服务器端渲染：React 16的SSR被完全重写，新的实现非常快，接近3倍性能于React 15，现在提供一种流模式streaming，可以更快地把渲染的字节发送到客户端。</p>\n<p>react v16采用了最新的技术“Fiber.”</p>\n<p>React Server Side Rendering 解决 SPA 应用的 SEO 问题</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1、Fragment\"><a href=\"#1、Fragment\" class=\"headerlink\" title=\"1、Fragment\"></a>1、Fragment</h2><p>新版本的render可以返回数组、字符串、react组件、数字、boolean值<br>v15.x必须要一个标签来包裹<br><br>Before v16<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">            &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">            &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">            &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">    );</span><br></pre></td></tr></table></figure></p>\n<p>When v16.0.0<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    [</span><br><span class=\"line\">        &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;,</span><br><span class=\"line\">        &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    ]</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure></p>\n<p>Now v16.2.0<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;React.Fragment&gt;</span><br><span class=\"line\">       &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">       &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">       &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>React.Fragment&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure></p>\n<p>片段(fragments) 可以让你将子元素列表添加到一个分组中，并且不会在DOM中增加额外节点。key 是唯一可以传递给 Fragment 的属性<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;dl&gt;</span><br><span class=\"line\">      &#123;props.items.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> (</span><br><span class=\"line\">        <span class=\"comment\">// 没有`key`，将会触发一个key警告</span></span><br><span class=\"line\">        &lt;React.Fragment key=&#123;item.id&#125;&gt;</span><br><span class=\"line\">          &lt;dt&gt;&#123;item.term&#125;&lt;<span class=\"regexp\">/dt&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">          &lt;dd&gt;&#123;item.description&#125;&lt;/</span>dd&gt;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/React.Fragment&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      ))&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>dl&gt;</span><br><span class=\"line\">  );</span><br></pre></td></tr></table></figure></p>\n<p>简明写法&lt;&gt;&lt;/&gt;，但是还没有被更多的工具支持，它不支持 键(keys) 或 属性(attributes)。<br>Further</p>\n<p>babel v7.0.0+ , babel-plugin-transform-react-jsx-source or babel-preset-react</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">       &lt;label htmlFor=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">       &lt;input id=\"name\" type=\"text\" placeholder=\"请输入名字\"/</span>&gt;</span><br><span class=\"line\">       &lt;button&gt;搜索&lt;<span class=\"regexp\">/button&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>DOM Fragment</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> select = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'select'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> values = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> fragment = <span class=\"built_in\">document</span>.createDocumentFragment()</span><br><span class=\"line\">values.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> option = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'option'</span>)</span><br><span class=\"line\">    option.value = item</span><br><span class=\"line\">    option.innerHTML = <span class=\"string\">`小明<span class=\"subst\">$&#123;item&#125;</span>号`</span></span><br><span class=\"line\">    fragment.appendChild(option)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">select.appendChild(fragment)</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、Portals\"><a href=\"#2、Portals\" class=\"headerlink\" title=\"2、Portals\"></a>2、Portals</h2><p>Portals是reactjs16提供的官方解决方案，使得组件可以脱离父组件层级挂载在DOM树的任何位置。<br>普通情况下，组件的render函数返回的元素会被挂载在它的父级组件上。<br>然而，有些元素需要被挂载在更高层级的位置。最典型的应用场景：当父组件具有overflow: hidden或者z-index的样式设置时，组件有可能被其他元素遮挡，就可以考虑使用Portal使组件的挂载脱离父组件。<br>组件的挂载点虽然可以脱离父组件，但组件的事件通过冒泡机制仍可以传给父组件。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"bd\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    &lt;div id=<span class=\"string\">\"modal\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;<span class=\"regexp\">/body&gt;</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render(</span><br><span class=\"line\">  &lt;App&gt;</span><br><span class=\"line\">    &lt;SearchBox&gt;</span><br><span class=\"line\">      &lt;Modal&gt;</span><br><span class=\"line\">        &lt;div&gt;模态框&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>Modal&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/SearchBox&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>App&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'bd'</span>),</span><br><span class=\"line\">  () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(options)</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.handleClick = <span class=\"keyword\">this</span>.handleClick.bind(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleClick() &#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'react component tree propagation!'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"app\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;this.handleClick&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">      &#123;this.props.children&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Modal</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>(options) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>(options)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    render() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> createPortal(<span class=\"keyword\">this</span>.props.children, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'modal'</span>))</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=<span class=\"string\">\"bd\"</span>&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">        &lt;label <span class=\"keyword\">for</span>=<span class=\"string\">\"name\"</span>&gt;名字：&lt;<span class=\"regexp\">/label&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;input type=\"text\" id=\"name\" placeholder=\"请输入名字\"&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;button&gt;搜索&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>div&gt;</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"modal\"</span>&gt;</span><br><span class=\"line\">    &lt;div&gt;模态框&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;App&gt;</span><br><span class=\"line\">    &lt;div className=&quot;app&quot; onClick=bound handleClick()&gt;</span><br><span class=\"line\">        &lt;SearchBox&gt;</span><br><span class=\"line\">            &lt;labelhtmlFor=&quot;name&quot;&gt;名字：&lt;/label&gt;</span><br><span class=\"line\">            &lt;inputid=&quot;name&quot;type=&quot;text&quot;placeholder=&quot;请输入名字&quot;&gt;&lt;/input&gt;</span><br><span class=\"line\">            &lt;button&gt;搜索&lt;/button&gt;</span><br><span class=\"line\">            &lt;Modal&gt;</span><br><span class=\"line\">                &lt;ReactPortal target=HTMLDivElement&#123;…&#125;&gt;</span><br><span class=\"line\">                    &lt;div&gt;模态框&lt;/div&gt;</span><br><span class=\"line\">                &lt;/ReactPortal&gt;</span><br><span class=\"line\">            &lt;/Modal&gt;</span><br><span class=\"line\">        &lt;/SearchBox&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/App&gt;</span><br></pre></td></tr></table></figure>\n<p>Before portals</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ReactDom.render(reactChild, container, callback)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unmountComponentAtNode(container)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unstable_renderSubtreeIntoContainer(</span><br><span class=\"line\">    context,</span><br><span class=\"line\">    reactChild,</span><br><span class=\"line\">    domNode,</span><br><span class=\"line\">    callback</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDom.unmountComponentAtNode(container)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">render: ReactMount._renderSubtreeIntoContainer(<span class=\"literal\">null</span>, reactChild, container, callback )</span><br><span class=\"line\"></span><br><span class=\"line\">unstable_renderSubtreeIntoContainer: ReactMount._renderSubtreeIntoContainer(context, reactChild, container, callback)</span><br></pre></td></tr></table></figure>\n<h2 id=\"3、Error-Boundaries\"><a href=\"#3、Error-Boundaries\" class=\"headerlink\" title=\"3、Error Boundaries\"></a>3、Error Boundaries</h2><p>之前react在渲染过程中或者是生命周期内出现了致命的错误，react会从根组件上把所有的组件都卸载下来，以防止展现错误的数据，但这不是最好的用户体验。React 16修复了这一点，引入了Error Boundary的概念，中文译为“错误边界”，当某个组件发生错误时，我们可以通过Error Boundary捕获到错误并对错误做优雅处理。（注：它并不能捕获runtime所有的错误，比如组件回调事件里的错误，可以把它想象成传统的try-catch语句）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ErrorBoundary</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(props) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(props);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">// 新增了componentDidCatch这个生命周期函数，它可以捕获自身及子树上的错误并对错误做优雅处理，包括上报错误日志、展示出错提示，而不是卸载整个组件树。</span></span><br><span class=\"line\">  componentDidCatch(error, info) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 错误代理组件的展示与否</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">hasError</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// 在这里我们可以对错误进行记录</span></span><br><span class=\"line\">    logErrorToMyService(error, info);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.state.hasError) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 在这里我们可以书写自己想要展示的ui组件</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Something went wrong.<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.props.children;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上面的组件是当页面中有错误时我们想要展示的效果，具体用法如下:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">render()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ErrorBoundary&gt;    <span class=\"comment\">// 外层组件我们定义的错误组件</span></span><br><span class=\"line\">        &lt;Profile user=&#123;<span class=\"keyword\">this</span>.state.user&#125; /&gt;     <span class=\"comment\">// 内层组件是我们将要监视的自定义组件</span></span><br><span class=\"line\">      &lt;<span class=\"regexp\">/ErrorBoundary&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;button onClick=&#123;this.onClick&#125;&gt;Update&lt;/</span>button&gt;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure></p>\n<p>这个组件能够不仅仅能够监听到本组件的错误，连同它下面的子组件的错误也可以监听到</p>\n<p>###不能捕获的错误</p>\n<ul>\n<li>事件处理 </li>\n<li>异步回调 </li>\n<li>服务端渲染 </li>\n<li>error boundary组件自身抛出的错误（只能由父级捕获）<br>###<strong>react遇到未捕获的错误会怎么办</strong><br>对 React16 来说，一个未捕获的错误会导致整个应用不能被挂载</li>\n</ul>\n<h2 id=\"4、setState传入null时不会再触发更新\"><a href=\"#4、setState传入null时不会再触发更新\" class=\"headerlink\" title=\"4、setState传入null时不会再触发更新\"></a>4、setState传入null时不会再触发更新</h2><p>之前的setState不管传入什么只要调用了这么方法就会渲染<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectCity(e)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> newValue = e.target.value;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.setState(<span class=\"function\">(<span class=\"params\">state</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(state.city===newValue)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;<span class=\"attr\">city</span>:newValue&#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"5、v16-0支持自定义的dom属性\"><a href=\"#5、v16-0支持自定义的dom属性\" class=\"headerlink\" title=\"5、v16.0支持自定义的dom属性\"></a>5、v16.0支持自定义的dom属性</h2><p>之前的版本对于自定义属性react会在属性前加上data-**来进行处理，现在对于部分属性去除了这种写法，拥抱了原生dom，这样可以减少react的代码，提升了性能</p>\n<h2 id=\"6、其他\"><a href=\"#6、其他\" class=\"headerlink\" title=\"6、其他\"></a>6、其他</h2><p>更好的服务器端渲染：React 16的SSR被完全重写，新的实现非常快，接近3倍性能于React 15，现在提供一种流模式streaming，可以更快地把渲染的字节发送到客户端。</p>\n<p>react v16采用了最新的技术“Fiber.”</p>\n<p>React Server Side Rendering 解决 SPA 应用的 SEO 问题</p>\n"},{"title":"redux 源码学习——createStore","date":"2018-05-11T02:07:29.000Z","_content":"<h1>createStore 理解</h1>\n\n创建一个保存state树的Redux store，store，可以让你阅读state，发送actions，并订阅更改。改变store数据的唯一方法是调用`dispatch（）`方法。\n应用中只能有一个store，指定state树的不同部分如何响应actions，可以通过使用`combineReducers`方法来组合多个reducer，将其转换为单个reducer。\n\n\n## 返回值\ncreateStore.js是redux的核心文件，对外暴露了一个createStore函数，函数执行后返回一个对象，这个对象包括四个方法，分别是dispatch, subscribe, getState, replaceReducer。这些方法都redux中store的关键方法，后面将慢慢的展开理解。\n```javascript\nexport default function createStore(reducer, preloadedState, enhancer) {\n    //other codes\n    return {\n        dispatch,\n        subscribe,\n        getState,\n        replaceReducer,\n        [$$observable]: observable\n      }\n}\n```\n## createStore 的参数理解\ncreateStore有三个参数：reducer, preloadedState, enhancer。\n* reducer：reducer是一个函数，通过给定当前state树和要处理的actions，返回下一个state树。\n* preloadedState：初始state，初始状态。您可以选择指定它从应用程序的服务器中来融合state，或者还原先前序列化的用户会话。如果使用`combineReducers`来生成根reducer函数，则必须是一个与“combineReducers”键相同的对象。\n* enhancer：store增强器。您可以选择指定它通过第三方功能增强store，如中间件，时间旅行，持久化等。Redux附带的唯一store增强器是`applyMiddleware（）`方法。\n这个参数特别有意思，如果该enhancer参数存在的话，会将当前的createStore函数作为参数传入enhancer函数，并且，enhancer执行之后得到一个新函数，该新函数其实就是一个加强版的createStore函数，新的函数会把之前的reducer和preloadeState作为参数传入并执行。这个enhancer参数为redux中间件提供了入口。\n\n## 参数检查及异常处理\n```javascript\n//如果没有传preloadedState参数，但是enhancer参数传了，把两者交换一下\nif (typeof preloadedState === 'function' && typeof enhancer === 'undefined')          \n  {\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n//如果enhancer传了，但是不是函数，就抛出错误，否则执行enhancer函数，\n//并继续执行enhancer函数返回的加强版的createStore函数，\n//参数reducer以及preloadeState和原createStore函数保持一致\nif (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.')\n    }\n    return enhancer(createStore)(reducer, preloadedState)\n  }\n//如果reducer不是函数，则抛出错误\nif (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.')\n}\n```\n## 定义局部变量\n```javascript\nlet currentReducer = reducer //保存了当前的reducer函数，该reducer函数可以被动态替换掉\nlet currentState = preloadedState //保存了当前的state数据\nlet currentListeners = [] //保存了当前注册的函数列表\nlet nextListeners = currentListeners\nlet isDispatching = false  //是否正在dispatch一个action\n```\n## 定义返回store的方法\n```javascript\n//确保nextListeners和currentListeners不是同一个引用\nfunction ensureCanMutateNextListeners() {\n  if (nextListeners === currentListeners) {\n    //如果是同一个引用，则浅拷贝currentListeners到nextListeners\n    nextListeners = currentListeners.slice()\n  }\n}\n```\n```javascript\n//getState函数，返回局部变量currentState，以获取当前状态\nfunction getState() {\n  return currentState\n}\n```\n```javascript\n//注册一个函数，将注册函数放入局部变量nextListeners数组里面\n//注册函数的返回值是一个注销函数，注销函数执行可以将刚刚添加进nextListeners的listener函数又删除掉。这里很有意思，外部必须在调用subscribe执行现场保存好unsubscribe函数，否则将无法注销一个函数\nfunction subscribe(listener) {\n  //如果listener不是函数，直接报错\n  if (typeof listener !== 'function') {\n    throw new Error('Expected listener to be a function.')\n  }\n\n  let isSubscribed = true\n  //确保nextListeners不是currentListeners，以保证修改的是nextListeners，而不是currentListeners\n  ensureCanMutateNextListeners()\n  //将监听函数放入监听函数列表尾部\n  nextListeners.push(listener)\n\n  //返回一个函数，该函数可以从监听函数列表中删除刚刚注册的监听函数\n  return function unsubscribe() {\n    if (!isSubscribed) {\n      return\n    }\n\n    isSubscribed = false\n\n    ensureCanMutateNextListeners()\n    const index = nextListeners.indexOf(listener)\n    nextListeners.splice(index, 1)\n  }\n}\n```\n```javascript\n//触发action的函数：每次触发一个action，currentListeners中的所有函数都要执行一遍\nfunction dispatch(action) {\n  //如果action不是普通的对象，直接报错\n  if (!isPlainObject(action)) {\n    throw new Error(\n      'Actions must be plain objects. ' +\n      'Use custom middleware for async actions.'\n    )\n  }\n  //如果action没有type属性，直接报错：说明action对象必须要包含type字段\n  if (typeof action.type === 'undefined') {\n    throw new Error(\n      'Actions may not have an undefined \"type\" property. ' +\n      'Have you misspelled a constant?'\n    )\n  }\n  //如果当前正在触发另外一个action，直接报错\n  if (isDispatching) {\n    throw new Error('Reducers may not dispatch actions.')\n  }\n\n  try {\n    //先将标志位置为true\n    isDispatching = true\n    //执行传入的reducer函数，该函数返回一个新的state对象，并赋值给currentState变量\n    currentState = currentReducer(currentState, action)\n  } finally {\n    //reducer函数执行完成后，将isDispatching恢复成false，方便下次action的触发\n    isDispatching = false\n  }\n\n  //每一次触发一个action，所有的监听函数都要全部重新执行一遍，\n  //并且把上次得到的新的监听函数列表赋值成为当前的监听函数列表。这是一个懒操作，并不是在subscribe的时候就操作了，而是在dispatch的时候才操作\n  const listeners = currentListeners = nextListeners\n  for (let i = 0; i < listeners.length; i++) {\n    const listener = listeners[i]\n    listener()\n  }\n\n  //该dispatch函数的返回值是原来的action\n  return action\n}\n```\n```javascript\n//替换reducer函数：这个函数允许运行时动态替换最开始调用createStore函数时传入的reducer，并且替换掉reducer之后，重新dispatch一个action，得到全新的currentState对象\nfunction replaceReducer(nextReducer) {\n  //如果nextReducer不是函数，直接报错\n  if (typeof nextReducer !== 'function') {\n    throw new Error('Expected the nextReducer to be a function.')\n  }\n  //把新的reducer赋值给当前的currentReducer变量，得到一个全新的currentReducer\n  currentReducer = nextReducer\n  // 触发一个初始action：\n  // 1.这样就可以完成一次监听函数列表的全部调用\n  // 2.可以得到一个全新的currentState；\n  dispatch({type: ActionTypes.INIT})\n}\n```\n```javascript\nfunction observable() {\n  const outerSubscribe = subscribe\n  return {\n    /**\n      * The minimal observable subscription method.\n      * @param {Object} observer Any object that can be used as an observer.\n      * The observer object should have a `next` method.\n      * @returns {subscription} An object with an `unsubscribe` method that can\n      * be used to unsubscribe the observable from the store, and prevent further\n      * emission of values from the observable.\n      */\n    subscribe(observer) {\n      if (typeof observer !== 'object') {\n        throw new TypeError('Expected the observer to be an object.')\n      }\n\n      function observeState() {\n        if (observer.next) {\n          observer.next(getState())\n        }\n      }\n\n      observeState()\n      const unsubscribe = outerSubscribe(observeState)\n      return {unsubscribe}\n    },\n\n    [$$observable]() {\n      return this\n    }\n  }\n}\n```\n## 初始化:\n初始化很简单，一句代码，直接调用一次dispatch，就会执行所有的注册函数，并且执行reducer函数，生成初始化的state\n```javascript\n//马上内部调用一次初始化的操作，根据传入的reducer函数，preloadedState生成一个全新的currentState和全新的reducer\ndispatch({type: ActionTypes.INIT})\n```\n\n<h1>总结</h1>\n\n* createStore函数定义了几个局部变量用于记录状态，主要包括currentState记录数据状态，currentListeners记录注册函数列表，currentReducer记录当前的reducer函数。\n* 定义了几个函数用于修改上面的几个局部变量：主要包括getState函数用于获取currentState；replaceReducer用于替换currentReducer；subscribe用于修改currentListeners列表；dispatch用于触发currentReducer执行，生成新的currentState，并且，执行currentListeners列表中的每一个函数。","source":"_posts/redux-源码学习—createStore.md","raw":"---\ntitle: redux 源码学习——createStore\ndate: 2018-05-11 10:07:29\ntags: [Javascript, react, redux]\ncategories: redux源码学习\n---\n<h1>createStore 理解</h1>\n\n创建一个保存state树的Redux store，store，可以让你阅读state，发送actions，并订阅更改。改变store数据的唯一方法是调用`dispatch（）`方法。\n应用中只能有一个store，指定state树的不同部分如何响应actions，可以通过使用`combineReducers`方法来组合多个reducer，将其转换为单个reducer。\n\n\n## 返回值\ncreateStore.js是redux的核心文件，对外暴露了一个createStore函数，函数执行后返回一个对象，这个对象包括四个方法，分别是dispatch, subscribe, getState, replaceReducer。这些方法都redux中store的关键方法，后面将慢慢的展开理解。\n```javascript\nexport default function createStore(reducer, preloadedState, enhancer) {\n    //other codes\n    return {\n        dispatch,\n        subscribe,\n        getState,\n        replaceReducer,\n        [$$observable]: observable\n      }\n}\n```\n## createStore 的参数理解\ncreateStore有三个参数：reducer, preloadedState, enhancer。\n* reducer：reducer是一个函数，通过给定当前state树和要处理的actions，返回下一个state树。\n* preloadedState：初始state，初始状态。您可以选择指定它从应用程序的服务器中来融合state，或者还原先前序列化的用户会话。如果使用`combineReducers`来生成根reducer函数，则必须是一个与“combineReducers”键相同的对象。\n* enhancer：store增强器。您可以选择指定它通过第三方功能增强store，如中间件，时间旅行，持久化等。Redux附带的唯一store增强器是`applyMiddleware（）`方法。\n这个参数特别有意思，如果该enhancer参数存在的话，会将当前的createStore函数作为参数传入enhancer函数，并且，enhancer执行之后得到一个新函数，该新函数其实就是一个加强版的createStore函数，新的函数会把之前的reducer和preloadeState作为参数传入并执行。这个enhancer参数为redux中间件提供了入口。\n\n## 参数检查及异常处理\n```javascript\n//如果没有传preloadedState参数，但是enhancer参数传了，把两者交换一下\nif (typeof preloadedState === 'function' && typeof enhancer === 'undefined')          \n  {\n    enhancer = preloadedState\n    preloadedState = undefined\n  }\n//如果enhancer传了，但是不是函数，就抛出错误，否则执行enhancer函数，\n//并继续执行enhancer函数返回的加强版的createStore函数，\n//参数reducer以及preloadeState和原createStore函数保持一致\nif (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.')\n    }\n    return enhancer(createStore)(reducer, preloadedState)\n  }\n//如果reducer不是函数，则抛出错误\nif (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.')\n}\n```\n## 定义局部变量\n```javascript\nlet currentReducer = reducer //保存了当前的reducer函数，该reducer函数可以被动态替换掉\nlet currentState = preloadedState //保存了当前的state数据\nlet currentListeners = [] //保存了当前注册的函数列表\nlet nextListeners = currentListeners\nlet isDispatching = false  //是否正在dispatch一个action\n```\n## 定义返回store的方法\n```javascript\n//确保nextListeners和currentListeners不是同一个引用\nfunction ensureCanMutateNextListeners() {\n  if (nextListeners === currentListeners) {\n    //如果是同一个引用，则浅拷贝currentListeners到nextListeners\n    nextListeners = currentListeners.slice()\n  }\n}\n```\n```javascript\n//getState函数，返回局部变量currentState，以获取当前状态\nfunction getState() {\n  return currentState\n}\n```\n```javascript\n//注册一个函数，将注册函数放入局部变量nextListeners数组里面\n//注册函数的返回值是一个注销函数，注销函数执行可以将刚刚添加进nextListeners的listener函数又删除掉。这里很有意思，外部必须在调用subscribe执行现场保存好unsubscribe函数，否则将无法注销一个函数\nfunction subscribe(listener) {\n  //如果listener不是函数，直接报错\n  if (typeof listener !== 'function') {\n    throw new Error('Expected listener to be a function.')\n  }\n\n  let isSubscribed = true\n  //确保nextListeners不是currentListeners，以保证修改的是nextListeners，而不是currentListeners\n  ensureCanMutateNextListeners()\n  //将监听函数放入监听函数列表尾部\n  nextListeners.push(listener)\n\n  //返回一个函数，该函数可以从监听函数列表中删除刚刚注册的监听函数\n  return function unsubscribe() {\n    if (!isSubscribed) {\n      return\n    }\n\n    isSubscribed = false\n\n    ensureCanMutateNextListeners()\n    const index = nextListeners.indexOf(listener)\n    nextListeners.splice(index, 1)\n  }\n}\n```\n```javascript\n//触发action的函数：每次触发一个action，currentListeners中的所有函数都要执行一遍\nfunction dispatch(action) {\n  //如果action不是普通的对象，直接报错\n  if (!isPlainObject(action)) {\n    throw new Error(\n      'Actions must be plain objects. ' +\n      'Use custom middleware for async actions.'\n    )\n  }\n  //如果action没有type属性，直接报错：说明action对象必须要包含type字段\n  if (typeof action.type === 'undefined') {\n    throw new Error(\n      'Actions may not have an undefined \"type\" property. ' +\n      'Have you misspelled a constant?'\n    )\n  }\n  //如果当前正在触发另外一个action，直接报错\n  if (isDispatching) {\n    throw new Error('Reducers may not dispatch actions.')\n  }\n\n  try {\n    //先将标志位置为true\n    isDispatching = true\n    //执行传入的reducer函数，该函数返回一个新的state对象，并赋值给currentState变量\n    currentState = currentReducer(currentState, action)\n  } finally {\n    //reducer函数执行完成后，将isDispatching恢复成false，方便下次action的触发\n    isDispatching = false\n  }\n\n  //每一次触发一个action，所有的监听函数都要全部重新执行一遍，\n  //并且把上次得到的新的监听函数列表赋值成为当前的监听函数列表。这是一个懒操作，并不是在subscribe的时候就操作了，而是在dispatch的时候才操作\n  const listeners = currentListeners = nextListeners\n  for (let i = 0; i < listeners.length; i++) {\n    const listener = listeners[i]\n    listener()\n  }\n\n  //该dispatch函数的返回值是原来的action\n  return action\n}\n```\n```javascript\n//替换reducer函数：这个函数允许运行时动态替换最开始调用createStore函数时传入的reducer，并且替换掉reducer之后，重新dispatch一个action，得到全新的currentState对象\nfunction replaceReducer(nextReducer) {\n  //如果nextReducer不是函数，直接报错\n  if (typeof nextReducer !== 'function') {\n    throw new Error('Expected the nextReducer to be a function.')\n  }\n  //把新的reducer赋值给当前的currentReducer变量，得到一个全新的currentReducer\n  currentReducer = nextReducer\n  // 触发一个初始action：\n  // 1.这样就可以完成一次监听函数列表的全部调用\n  // 2.可以得到一个全新的currentState；\n  dispatch({type: ActionTypes.INIT})\n}\n```\n```javascript\nfunction observable() {\n  const outerSubscribe = subscribe\n  return {\n    /**\n      * The minimal observable subscription method.\n      * @param {Object} observer Any object that can be used as an observer.\n      * The observer object should have a `next` method.\n      * @returns {subscription} An object with an `unsubscribe` method that can\n      * be used to unsubscribe the observable from the store, and prevent further\n      * emission of values from the observable.\n      */\n    subscribe(observer) {\n      if (typeof observer !== 'object') {\n        throw new TypeError('Expected the observer to be an object.')\n      }\n\n      function observeState() {\n        if (observer.next) {\n          observer.next(getState())\n        }\n      }\n\n      observeState()\n      const unsubscribe = outerSubscribe(observeState)\n      return {unsubscribe}\n    },\n\n    [$$observable]() {\n      return this\n    }\n  }\n}\n```\n## 初始化:\n初始化很简单，一句代码，直接调用一次dispatch，就会执行所有的注册函数，并且执行reducer函数，生成初始化的state\n```javascript\n//马上内部调用一次初始化的操作，根据传入的reducer函数，preloadedState生成一个全新的currentState和全新的reducer\ndispatch({type: ActionTypes.INIT})\n```\n\n<h1>总结</h1>\n\n* createStore函数定义了几个局部变量用于记录状态，主要包括currentState记录数据状态，currentListeners记录注册函数列表，currentReducer记录当前的reducer函数。\n* 定义了几个函数用于修改上面的几个局部变量：主要包括getState函数用于获取currentState；replaceReducer用于替换currentReducer；subscribe用于修改currentListeners列表；dispatch用于触发currentReducer执行，生成新的currentState，并且，执行currentListeners列表中的每一个函数。","slug":"redux-源码学习—createStore","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yag001rd6sp3odnlpe9","content":"<h1>createStore 理解</h1>\n\n<p>创建一个保存state树的Redux store，store，可以让你阅读state，发送actions，并订阅更改。改变store数据的唯一方法是调用<code>dispatch（）</code>方法。<br>应用中只能有一个store，指定state树的不同部分如何响应actions，可以通过使用<code>combineReducers</code>方法来组合多个reducer，将其转换为单个reducer。</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>createStore.js是redux的核心文件，对外暴露了一个createStore函数，函数执行后返回一个对象，这个对象包括四个方法，分别是dispatch, subscribe, getState, replaceReducer。这些方法都redux中store的关键方法，后面将慢慢的展开理解。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//other codes</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        dispatch,</span><br><span class=\"line\">        subscribe,</span><br><span class=\"line\">        getState,</span><br><span class=\"line\">        replaceReducer,</span><br><span class=\"line\">        [$$observable]: observable</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"createStore-的参数理解\"><a href=\"#createStore-的参数理解\" class=\"headerlink\" title=\"createStore 的参数理解\"></a>createStore 的参数理解</h2><p>createStore有三个参数：reducer, preloadedState, enhancer。</p>\n<ul>\n<li>reducer：reducer是一个函数，通过给定当前state树和要处理的actions，返回下一个state树。</li>\n<li>preloadedState：初始state，初始状态。您可以选择指定它从应用程序的服务器中来融合state，或者还原先前序列化的用户会话。如果使用<code>combineReducers</code>来生成根reducer函数，则必须是一个与“combineReducers”键相同的对象。</li>\n<li>enhancer：store增强器。您可以选择指定它通过第三方功能增强store，如中间件，时间旅行，持久化等。Redux附带的唯一store增强器是<code>applyMiddleware（）</code>方法。<br>这个参数特别有意思，如果该enhancer参数存在的话，会将当前的createStore函数作为参数传入enhancer函数，并且，enhancer执行之后得到一个新函数，该新函数其实就是一个加强版的createStore函数，新的函数会把之前的reducer和preloadeState作为参数传入并执行。这个enhancer参数为redux中间件提供了入口。</li>\n</ul>\n<h2 id=\"参数检查及异常处理\"><a href=\"#参数检查及异常处理\" class=\"headerlink\" title=\"参数检查及异常处理\"></a>参数检查及异常处理</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//如果没有传preloadedState参数，但是enhancer参数传了，把两者交换一下</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>)          </span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果enhancer传了，但是不是函数，就抛出错误，否则执行enhancer函数，</span></span><br><span class=\"line\"><span class=\"comment\">//并继续执行enhancer函数返回的加强版的createStore函数，</span></span><br><span class=\"line\"><span class=\"comment\">//参数reducer以及preloadeState和原createStore函数保持一致</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the enhancer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果reducer不是函数，则抛出错误</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the reducer to be a function.'</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"定义局部变量\"><a href=\"#定义局部变量\" class=\"headerlink\" title=\"定义局部变量\"></a>定义局部变量</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> currentReducer = reducer <span class=\"comment\">//保存了当前的reducer函数，该reducer函数可以被动态替换掉</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentState = preloadedState <span class=\"comment\">//保存了当前的state数据</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentListeners = [] <span class=\"comment\">//保存了当前注册的函数列表</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> nextListeners = currentListeners</span><br><span class=\"line\"><span class=\"keyword\">let</span> isDispatching = <span class=\"literal\">false</span>  <span class=\"comment\">//是否正在dispatch一个action</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"定义返回store的方法\"><a href=\"#定义返回store的方法\" class=\"headerlink\" title=\"定义返回store的方法\"></a>定义返回store的方法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//确保nextListeners和currentListeners不是同一个引用</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ensureCanMutateNextListeners</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (nextListeners === currentListeners) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果是同一个引用，则浅拷贝currentListeners到nextListeners</span></span><br><span class=\"line\">    nextListeners = currentListeners.slice()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//getState函数，返回局部变量currentState，以获取当前状态</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> currentState</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//注册一个函数，将注册函数放入局部变量nextListeners数组里面</span></span><br><span class=\"line\"><span class=\"comment\">//注册函数的返回值是一个注销函数，注销函数执行可以将刚刚添加进nextListeners的listener函数又删除掉。这里很有意思，外部必须在调用subscribe执行现场保存好unsubscribe函数，否则将无法注销一个函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">subscribe</span>(<span class=\"params\">listener</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果listener不是函数，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected listener to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> isSubscribed = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\">//确保nextListeners不是currentListeners，以保证修改的是nextListeners，而不是currentListeners</span></span><br><span class=\"line\">  ensureCanMutateNextListeners()</span><br><span class=\"line\">  <span class=\"comment\">//将监听函数放入监听函数列表尾部</span></span><br><span class=\"line\">  nextListeners.push(listener)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回一个函数，该函数可以从监听函数列表中删除刚刚注册的监听函数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unsubscribe</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isSubscribed) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    isSubscribed = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">    ensureCanMutateNextListeners()</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = nextListeners.indexOf(listener)</span><br><span class=\"line\">    nextListeners.splice(index, <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//触发action的函数：每次触发一个action，currentListeners中的所有函数都要执行一遍</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果action不是普通的对象，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isPlainObject(action)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">'Actions must be plain objects. '</span> +</span><br><span class=\"line\">      <span class=\"string\">'Use custom middleware for async actions.'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果action没有type属性，直接报错：说明action对象必须要包含type字段</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action.type === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">'Actions may not have an undefined \"type\" property. '</span> +</span><br><span class=\"line\">      <span class=\"string\">'Have you misspelled a constant?'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果当前正在触发另外一个action，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Reducers may not dispatch actions.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//先将标志位置为true</span></span><br><span class=\"line\">    isDispatching = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">//执行传入的reducer函数，该函数返回一个新的state对象，并赋值给currentState变量</span></span><br><span class=\"line\">    currentState = currentReducer(currentState, action)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//reducer函数执行完成后，将isDispatching恢复成false，方便下次action的触发</span></span><br><span class=\"line\">    isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//每一次触发一个action，所有的监听函数都要全部重新执行一遍，</span></span><br><span class=\"line\">  <span class=\"comment\">//并且把上次得到的新的监听函数列表赋值成为当前的监听函数列表。这是一个懒操作，并不是在subscribe的时候就操作了，而是在dispatch的时候才操作</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> listeners = currentListeners = nextListeners</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listener = listeners[i]</span><br><span class=\"line\">    listener()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//该dispatch函数的返回值是原来的action</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> action</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//替换reducer函数：这个函数允许运行时动态替换最开始调用createStore函数时传入的reducer，并且替换掉reducer之后，重新dispatch一个action，得到全新的currentState对象</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceReducer</span>(<span class=\"params\">nextReducer</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果nextReducer不是函数，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextReducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the nextReducer to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//把新的reducer赋值给当前的currentReducer变量，得到一个全新的currentReducer</span></span><br><span class=\"line\">  currentReducer = nextReducer</span><br><span class=\"line\">  <span class=\"comment\">// 触发一个初始action：</span></span><br><span class=\"line\">  <span class=\"comment\">// 1.这样就可以完成一次监听函数列表的全部调用</span></span><br><span class=\"line\">  <span class=\"comment\">// 2.可以得到一个全新的currentState；</span></span><br><span class=\"line\">  dispatch(&#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observable</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> outerSubscribe = subscribe</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * The minimal observable subscription method.</span></span><br><span class=\"line\"><span class=\"comment\">      * @param &#123;Object&#125; observer Any object that can be used as an observer.</span></span><br><span class=\"line\"><span class=\"comment\">      * The observer object should have a `next` method.</span></span><br><span class=\"line\"><span class=\"comment\">      * @returns &#123;subscription&#125; An object with an `unsubscribe` method that can</span></span><br><span class=\"line\"><span class=\"comment\">      * be used to unsubscribe the observable from the store, and prevent further</span></span><br><span class=\"line\"><span class=\"comment\">      * emission of values from the observable.</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">    subscribe(observer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> observer !== <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Expected the observer to be an object.'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observeState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (observer.next) &#123;</span><br><span class=\"line\">          observer.next(getState())</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      observeState()</span><br><span class=\"line\">      <span class=\"keyword\">const</span> unsubscribe = outerSubscribe(observeState)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;unsubscribe&#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    [$$observable]() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"初始化\"><a href=\"#初始化\" class=\"headerlink\" title=\"初始化:\"></a>初始化:</h2><p>初始化很简单，一句代码，直接调用一次dispatch，就会执行所有的注册函数，并且执行reducer函数，生成初始化的state<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//马上内部调用一次初始化的操作，根据传入的reducer函数，preloadedState生成一个全新的currentState和全新的reducer</span></span><br><span class=\"line\">dispatch(&#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br></pre></td></tr></table></figure></p>\n<h1>总结</h1>\n\n<ul>\n<li>createStore函数定义了几个局部变量用于记录状态，主要包括currentState记录数据状态，currentListeners记录注册函数列表，currentReducer记录当前的reducer函数。</li>\n<li>定义了几个函数用于修改上面的几个局部变量：主要包括getState函数用于获取currentState；replaceReducer用于替换currentReducer；subscribe用于修改currentListeners列表；dispatch用于触发currentReducer执行，生成新的currentState，并且，执行currentListeners列表中的每一个函数。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>createStore 理解</h1>\n\n<p>创建一个保存state树的Redux store，store，可以让你阅读state，发送actions，并订阅更改。改变store数据的唯一方法是调用<code>dispatch（）</code>方法。<br>应用中只能有一个store，指定state树的不同部分如何响应actions，可以通过使用<code>combineReducers</code>方法来组合多个reducer，将其转换为单个reducer。</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>createStore.js是redux的核心文件，对外暴露了一个createStore函数，函数执行后返回一个对象，这个对象包括四个方法，分别是dispatch, subscribe, getState, replaceReducer。这些方法都redux中store的关键方法，后面将慢慢的展开理解。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createStore</span>(<span class=\"params\">reducer, preloadedState, enhancer</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//other codes</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        dispatch,</span><br><span class=\"line\">        subscribe,</span><br><span class=\"line\">        getState,</span><br><span class=\"line\">        replaceReducer,</span><br><span class=\"line\">        [$$observable]: observable</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"createStore-的参数理解\"><a href=\"#createStore-的参数理解\" class=\"headerlink\" title=\"createStore 的参数理解\"></a>createStore 的参数理解</h2><p>createStore有三个参数：reducer, preloadedState, enhancer。</p>\n<ul>\n<li>reducer：reducer是一个函数，通过给定当前state树和要处理的actions，返回下一个state树。</li>\n<li>preloadedState：初始state，初始状态。您可以选择指定它从应用程序的服务器中来融合state，或者还原先前序列化的用户会话。如果使用<code>combineReducers</code>来生成根reducer函数，则必须是一个与“combineReducers”键相同的对象。</li>\n<li>enhancer：store增强器。您可以选择指定它通过第三方功能增强store，如中间件，时间旅行，持久化等。Redux附带的唯一store增强器是<code>applyMiddleware（）</code>方法。<br>这个参数特别有意思，如果该enhancer参数存在的话，会将当前的createStore函数作为参数传入enhancer函数，并且，enhancer执行之后得到一个新函数，该新函数其实就是一个加强版的createStore函数，新的函数会把之前的reducer和preloadeState作为参数传入并执行。这个enhancer参数为redux中间件提供了入口。</li>\n</ul>\n<h2 id=\"参数检查及异常处理\"><a href=\"#参数检查及异常处理\" class=\"headerlink\" title=\"参数检查及异常处理\"></a>参数检查及异常处理</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//如果没有传preloadedState参数，但是enhancer参数传了，把两者交换一下</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> preloadedState === <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> enhancer === <span class=\"string\">'undefined'</span>)          </span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    enhancer = preloadedState</span><br><span class=\"line\">    preloadedState = <span class=\"literal\">undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果enhancer传了，但是不是函数，就抛出错误，否则执行enhancer函数，</span></span><br><span class=\"line\"><span class=\"comment\">//并继续执行enhancer函数返回的加强版的createStore函数，</span></span><br><span class=\"line\"><span class=\"comment\">//参数reducer以及preloadeState和原createStore函数保持一致</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> enhancer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the enhancer to be a function.'</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> enhancer(createStore)(reducer, preloadedState)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"><span class=\"comment\">//如果reducer不是函数，则抛出错误</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the reducer to be a function.'</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"定义局部变量\"><a href=\"#定义局部变量\" class=\"headerlink\" title=\"定义局部变量\"></a>定义局部变量</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> currentReducer = reducer <span class=\"comment\">//保存了当前的reducer函数，该reducer函数可以被动态替换掉</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentState = preloadedState <span class=\"comment\">//保存了当前的state数据</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> currentListeners = [] <span class=\"comment\">//保存了当前注册的函数列表</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> nextListeners = currentListeners</span><br><span class=\"line\"><span class=\"keyword\">let</span> isDispatching = <span class=\"literal\">false</span>  <span class=\"comment\">//是否正在dispatch一个action</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"定义返回store的方法\"><a href=\"#定义返回store的方法\" class=\"headerlink\" title=\"定义返回store的方法\"></a>定义返回store的方法</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//确保nextListeners和currentListeners不是同一个引用</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ensureCanMutateNextListeners</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (nextListeners === currentListeners) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果是同一个引用，则浅拷贝currentListeners到nextListeners</span></span><br><span class=\"line\">    nextListeners = currentListeners.slice()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//getState函数，返回局部变量currentState，以获取当前状态</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> currentState</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//注册一个函数，将注册函数放入局部变量nextListeners数组里面</span></span><br><span class=\"line\"><span class=\"comment\">//注册函数的返回值是一个注销函数，注销函数执行可以将刚刚添加进nextListeners的listener函数又删除掉。这里很有意思，外部必须在调用subscribe执行现场保存好unsubscribe函数，否则将无法注销一个函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">subscribe</span>(<span class=\"params\">listener</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果listener不是函数，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> listener !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected listener to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> isSubscribed = <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\">//确保nextListeners不是currentListeners，以保证修改的是nextListeners，而不是currentListeners</span></span><br><span class=\"line\">  ensureCanMutateNextListeners()</span><br><span class=\"line\">  <span class=\"comment\">//将监听函数放入监听函数列表尾部</span></span><br><span class=\"line\">  nextListeners.push(listener)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回一个函数，该函数可以从监听函数列表中删除刚刚注册的监听函数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unsubscribe</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isSubscribed) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    isSubscribed = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">    ensureCanMutateNextListeners()</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = nextListeners.indexOf(listener)</span><br><span class=\"line\">    nextListeners.splice(index, <span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//触发action的函数：每次触发一个action，currentListeners中的所有函数都要执行一遍</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果action不是普通的对象，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isPlainObject(action)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">'Actions must be plain objects. '</span> +</span><br><span class=\"line\">      <span class=\"string\">'Use custom middleware for async actions.'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果action没有type属性，直接报错：说明action对象必须要包含type字段</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> action.type === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">'Actions may not have an undefined \"type\" property. '</span> +</span><br><span class=\"line\">      <span class=\"string\">'Have you misspelled a constant?'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果当前正在触发另外一个action，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isDispatching) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Reducers may not dispatch actions.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//先将标志位置为true</span></span><br><span class=\"line\">    isDispatching = <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">//执行传入的reducer函数，该函数返回一个新的state对象，并赋值给currentState变量</span></span><br><span class=\"line\">    currentState = currentReducer(currentState, action)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//reducer函数执行完成后，将isDispatching恢复成false，方便下次action的触发</span></span><br><span class=\"line\">    isDispatching = <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//每一次触发一个action，所有的监听函数都要全部重新执行一遍，</span></span><br><span class=\"line\">  <span class=\"comment\">//并且把上次得到的新的监听函数列表赋值成为当前的监听函数列表。这是一个懒操作，并不是在subscribe的时候就操作了，而是在dispatch的时候才操作</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> listeners = currentListeners = nextListeners</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; listeners.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listener = listeners[i]</span><br><span class=\"line\">    listener()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//该dispatch函数的返回值是原来的action</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> action</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//替换reducer函数：这个函数允许运行时动态替换最开始调用createStore函数时传入的reducer，并且替换掉reducer之后，重新dispatch一个action，得到全新的currentState对象</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceReducer</span>(<span class=\"params\">nextReducer</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果nextReducer不是函数，直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextReducer !== <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Expected the nextReducer to be a function.'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//把新的reducer赋值给当前的currentReducer变量，得到一个全新的currentReducer</span></span><br><span class=\"line\">  currentReducer = nextReducer</span><br><span class=\"line\">  <span class=\"comment\">// 触发一个初始action：</span></span><br><span class=\"line\">  <span class=\"comment\">// 1.这样就可以完成一次监听函数列表的全部调用</span></span><br><span class=\"line\">  <span class=\"comment\">// 2.可以得到一个全新的currentState；</span></span><br><span class=\"line\">  dispatch(&#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observable</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> outerSubscribe = subscribe</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">      * The minimal observable subscription method.</span></span><br><span class=\"line\"><span class=\"comment\">      * @param &#123;Object&#125; observer Any object that can be used as an observer.</span></span><br><span class=\"line\"><span class=\"comment\">      * The observer object should have a `next` method.</span></span><br><span class=\"line\"><span class=\"comment\">      * @returns &#123;subscription&#125; An object with an `unsubscribe` method that can</span></span><br><span class=\"line\"><span class=\"comment\">      * be used to unsubscribe the observable from the store, and prevent further</span></span><br><span class=\"line\"><span class=\"comment\">      * emission of values from the observable.</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">    subscribe(observer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> observer !== <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Expected the observer to be an object.'</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">observeState</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (observer.next) &#123;</span><br><span class=\"line\">          observer.next(getState())</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      observeState()</span><br><span class=\"line\">      <span class=\"keyword\">const</span> unsubscribe = outerSubscribe(observeState)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;unsubscribe&#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    [$$observable]() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"初始化\"><a href=\"#初始化\" class=\"headerlink\" title=\"初始化:\"></a>初始化:</h2><p>初始化很简单，一句代码，直接调用一次dispatch，就会执行所有的注册函数，并且执行reducer函数，生成初始化的state<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//马上内部调用一次初始化的操作，根据传入的reducer函数，preloadedState生成一个全新的currentState和全新的reducer</span></span><br><span class=\"line\">dispatch(&#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br></pre></td></tr></table></figure></p>\n<h1>总结</h1>\n\n<ul>\n<li>createStore函数定义了几个局部变量用于记录状态，主要包括currentState记录数据状态，currentListeners记录注册函数列表，currentReducer记录当前的reducer函数。</li>\n<li>定义了几个函数用于修改上面的几个局部变量：主要包括getState函数用于获取currentState；replaceReducer用于替换currentReducer；subscribe用于修改currentListeners列表；dispatch用于触发currentReducer执行，生成新的currentState，并且，执行currentListeners列表中的每一个函数。</li>\n</ul>\n"},{"title":"redux源码学习--bindActionCreators","date":"2018-05-11T07:24:40.000Z","_content":"<h1>bindActionCreators</h1>\n\n以前这样触发一个action，即dispatch(actionCreator(args))，现在变成这样触发一个action: boundActionCreator(args)。目的很单纯，简化某个action的调用。\n\nRedux中的bindActionCreators，是通过dispatch将action包裹起来，这样可以通过bindActionCreators创建的方法，直接调用dispatch(action)(隐式调用）。一般情况下，我们可以通过Provider将store通过React的connext属性向下传递，bindActionCreators的唯一用处就是需要传递action creater到子组件，并且改子组件并没有接收到父组件上传递的store和dispatch。\n\n实现上面那个效果，仅需一行代码，也就是源码文件中的第一个函数：\n```javascript\n// 返回一个函数fn：函数目的是将actionCreator绑定到dispatch上，不用麻烦调用dispatch(actionCreator(args))了\n// 返回一个函数fn，该函数fn用dispatch来调用，其参数是actionCreator执行结果，\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function() {\n    return dispatch(actionCreator.apply(this, arguments))\n  }\n}\n```\n\n## 参数理解\nactionCreators: actionCreators是一个对象，它的值是actions creator函数。也可以传递一个函数。\n`dispatch`: 等同于store中的store.dispatch，用于组合action\n\n## 返回值\nboundActionCreators: 返回一个boundActionCreators对象\n\n```javascript\nexport default function bindActionCreators(actionCreators, dispatch) {\n  //如果actionCreators是一个函数，则说明只有一个actionCreator，那直接调用bindActionCreator就行了\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n\n  //如果是actionCreator是对象，或者是null的话，报错喽\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\n      `bindActionCreators expected an object or a function, instead received ${actionCreators === null ? 'null' : typeof actionCreators}. ` +\n      `Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`\n    )\n  }\n\n  //保持actionCreators里面原来的key，只是把key对应的value都转成了boundActionCreator\n  const keys = Object.keys(actionCreators)\n  const boundActionCreators = {}\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i]\n    const actionCreator = actionCreators[key]\n    //只对value是函数的key进行转换，其他的都过滤掉了\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }\n\n  //返回绑定之后的对象\n  return boundActionCreators\n}\n```\n<h1>总结</h1>\n\nbindActionCreators函数把actionCreators这个对象里面包含的每一个actionCreator按照原来的key的方式全部都封装了一遍。","source":"_posts/redux源码学习-bindActionCreators.md","raw":"---\ntitle: redux源码学习--bindActionCreators\ndate: 2018-05-11 15:24:40\ntags: [Javascript, react, redux]\ncategories: redux源码学习\n---\n<h1>bindActionCreators</h1>\n\n以前这样触发一个action，即dispatch(actionCreator(args))，现在变成这样触发一个action: boundActionCreator(args)。目的很单纯，简化某个action的调用。\n\nRedux中的bindActionCreators，是通过dispatch将action包裹起来，这样可以通过bindActionCreators创建的方法，直接调用dispatch(action)(隐式调用）。一般情况下，我们可以通过Provider将store通过React的connext属性向下传递，bindActionCreators的唯一用处就是需要传递action creater到子组件，并且改子组件并没有接收到父组件上传递的store和dispatch。\n\n实现上面那个效果，仅需一行代码，也就是源码文件中的第一个函数：\n```javascript\n// 返回一个函数fn：函数目的是将actionCreator绑定到dispatch上，不用麻烦调用dispatch(actionCreator(args))了\n// 返回一个函数fn，该函数fn用dispatch来调用，其参数是actionCreator执行结果，\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function() {\n    return dispatch(actionCreator.apply(this, arguments))\n  }\n}\n```\n\n## 参数理解\nactionCreators: actionCreators是一个对象，它的值是actions creator函数。也可以传递一个函数。\n`dispatch`: 等同于store中的store.dispatch，用于组合action\n\n## 返回值\nboundActionCreators: 返回一个boundActionCreators对象\n\n```javascript\nexport default function bindActionCreators(actionCreators, dispatch) {\n  //如果actionCreators是一个函数，则说明只有一个actionCreator，那直接调用bindActionCreator就行了\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n\n  //如果是actionCreator是对象，或者是null的话，报错喽\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\n      `bindActionCreators expected an object or a function, instead received ${actionCreators === null ? 'null' : typeof actionCreators}. ` +\n      `Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`\n    )\n  }\n\n  //保持actionCreators里面原来的key，只是把key对应的value都转成了boundActionCreator\n  const keys = Object.keys(actionCreators)\n  const boundActionCreators = {}\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i]\n    const actionCreator = actionCreators[key]\n    //只对value是函数的key进行转换，其他的都过滤掉了\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }\n\n  //返回绑定之后的对象\n  return boundActionCreators\n}\n```\n<h1>总结</h1>\n\nbindActionCreators函数把actionCreators这个对象里面包含的每一个actionCreator按照原来的key的方式全部都封装了一遍。","slug":"redux源码学习-bindActionCreators","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yah001vd6sphtppe7tl","content":"<h1>bindActionCreators</h1>\n\n<p>以前这样触发一个action，即dispatch(actionCreator(args))，现在变成这样触发一个action: boundActionCreator(args)。目的很单纯，简化某个action的调用。</p>\n<p>Redux中的bindActionCreators，是通过dispatch将action包裹起来，这样可以通过bindActionCreators创建的方法，直接调用dispatch(action)(隐式调用）。一般情况下，我们可以通过Provider将store通过React的connext属性向下传递，bindActionCreators的唯一用处就是需要传递action creater到子组件，并且改子组件并没有接收到父组件上传递的store和dispatch。</p>\n<p>实现上面那个效果，仅需一行代码，也就是源码文件中的第一个函数：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 返回一个函数fn：函数目的是将actionCreator绑定到dispatch上，不用麻烦调用dispatch(actionCreator(args))了</span></span><br><span class=\"line\"><span class=\"comment\">// 返回一个函数fn，该函数fn用dispatch来调用，其参数是actionCreator执行结果，</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dispatch(actionCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p>actionCreators: actionCreators是一个对象，它的值是actions creator函数。也可以传递一个函数。<br><code>dispatch</code>: 等同于store中的store.dispatch，用于组合action</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>boundActionCreators: 返回一个boundActionCreators对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreators</span>(<span class=\"params\">actionCreators, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果actionCreators是一个函数，则说明只有一个actionCreator，那直接调用bindActionCreator就行了</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//如果是actionCreator是对象，或者是null的话，报错喽</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">`bindActionCreators expected an object or a function, instead received <span class=\"subst\">$&#123;actionCreators === <span class=\"literal\">null</span> ? <span class=\"string\">'null'</span> : <span class=\"keyword\">typeof</span> actionCreators&#125;</span>. `</span> +</span><br><span class=\"line\">      <span class=\"string\">`Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//保持actionCreators里面原来的key，只是把key对应的value都转成了boundActionCreator</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = keys[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">    <span class=\"comment\">//只对value是函数的key进行转换，其他的都过滤掉了</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回绑定之后的对象</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> boundActionCreators</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1>总结</h1>\n\n<p>bindActionCreators函数把actionCreators这个对象里面包含的每一个actionCreator按照原来的key的方式全部都封装了一遍。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1>bindActionCreators</h1>\n\n<p>以前这样触发一个action，即dispatch(actionCreator(args))，现在变成这样触发一个action: boundActionCreator(args)。目的很单纯，简化某个action的调用。</p>\n<p>Redux中的bindActionCreators，是通过dispatch将action包裹起来，这样可以通过bindActionCreators创建的方法，直接调用dispatch(action)(隐式调用）。一般情况下，我们可以通过Provider将store通过React的connext属性向下传递，bindActionCreators的唯一用处就是需要传递action creater到子组件，并且改子组件并没有接收到父组件上传递的store和dispatch。</p>\n<p>实现上面那个效果，仅需一行代码，也就是源码文件中的第一个函数：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 返回一个函数fn：函数目的是将actionCreator绑定到dispatch上，不用麻烦调用dispatch(actionCreator(args))了</span></span><br><span class=\"line\"><span class=\"comment\">// 返回一个函数fn，该函数fn用dispatch来调用，其参数是actionCreator执行结果，</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreator</span>(<span class=\"params\">actionCreator, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> dispatch(actionCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p>actionCreators: actionCreators是一个对象，它的值是actions creator函数。也可以传递一个函数。<br><code>dispatch</code>: 等同于store中的store.dispatch，用于组合action</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>boundActionCreators: 返回一个boundActionCreators对象</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindActionCreators</span>(<span class=\"params\">actionCreators, dispatch</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果actionCreators是一个函数，则说明只有一个actionCreator，那直接调用bindActionCreator就行了</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> bindActionCreator(actionCreators, dispatch)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//如果是actionCreator是对象，或者是null的话，报错喽</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreators !== <span class=\"string\">'object'</span> || actionCreators === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">`bindActionCreators expected an object or a function, instead received <span class=\"subst\">$&#123;actionCreators === <span class=\"literal\">null</span> ? <span class=\"string\">'null'</span> : <span class=\"keyword\">typeof</span> actionCreators&#125;</span>. `</span> +</span><br><span class=\"line\">      <span class=\"string\">`Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//保持actionCreators里面原来的key，只是把key对应的value都转成了boundActionCreator</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> keys = <span class=\"built_in\">Object</span>.keys(actionCreators)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> boundActionCreators = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = keys[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> actionCreator = actionCreators[key]</span><br><span class=\"line\">    <span class=\"comment\">//只对value是函数的key进行转换，其他的都过滤掉了</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> actionCreator === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//返回绑定之后的对象</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> boundActionCreators</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1>总结</h1>\n\n<p>bindActionCreators函数把actionCreators这个对象里面包含的每一个actionCreator按照原来的key的方式全部都封装了一遍。</p>\n"},{"title":"redux源码学习--applyMiddleware","date":"2018-05-11T08:03:07.000Z","_content":"<h1>applyMiddleware理解</h1>\n\n中间件的本质是作为enhancer而存在的。它是通过createStore方法传递到redux的内部中的,中间件模块是一个高阶函数\n下面是redux中间件的基本格式：\n```javascript\nconst reduxMiddleware = ({dispatch, getState}[简化的store]) => (next[上一个中间件的dispatch方法]) => (action[实际派发的action对象]) => {}\n```\n\n```javascript\nexport default function applyMiddleware(...middlewares) {\n  // middlewares就是我们传递给applyMiddlewarez函数的一系列中间件函数\n  return (createStore) => (...args) => {\n    // createStore就是redux用于创建store的方法,args === [reducers, preloadedState]。下面这句话就是在中间件的内部，使用我们传递的参数创建一个store对象\n    // 注：这一块没有传递enhancer,所以返回的就是我们经常使用的store对象\n    const store = createStore(...args)\n    // 获取store对象的dispatch方法\n    let dispatch = () => {\n      throw new Error(\n        `Dispatching while constructing your middleware is not allowed. ` +\n          `Other middleware would not be applied to this dispatch.`\n      )\n    }\n    // 传递给中间件的第一层的函数的参数，\n    const middlewareAPI = {\n      getState: store.getState,\n      // 重写了dispatch方法，其实就是store.dispatch(...args)\n      dispatch: (...args) => dispatch(...args)\n    }\n\n    /** \n     * 着重给大家详细的解释一下这一块\n     * 假设我们给applyMiddleware函数传递的中间件是\n     * applyMiddleware(\n     *      f1 => g1 => h1(...arg) => {},\n     *      f2 => g2 => h2(...arg) => {}\n     * )\n     * 运行下面的这行代码之后，chain中保存的内容是\n     * chain = [g1 => h1(...arg) => {}, g2 => h2(...arg) => {}]\n     */\n    \n    const chain = middlewares.map(middleware => middleware(middlewareAPI))\n    /**\n     * 当我们把chain传入到 compose中后，根据我们对compose的分析，\n     * compose(...chain)(store.dispatch)的结果就是:\n     * g1(h2(...arg)) => h1(...arg)\n     * \n     * 也就是说，按照上面的这个形式，下面的dispatch和h1函数是一样的，所以，h1的参数，就是我们需要派发的action，当我们调用dispatch的时候，其实就相当于调用h1(action)，而在h1的内部，这个action是由g1的参数\n     * 也就是h2进行派发的，所以这个时候action就传递到了h2的内部，而h2的参数是由g2的参数，也就是实际传入的store.dispatch进行派发的，就这样层层传入，层层输出，就形成了我们强大的中间件机制。\n     */\n    dispatch = compose(...chain)(store.dispatch)\n\n    // 返回的也是一个store对象\n    return {\n      ...store,\n      // 这个dispatch其实就是，各个中间件的最底层(第三层)的哪个函数组成的圆环函数构成的\n      dispatch\n    }\n  }\n}\n```","source":"_posts/redux源码学习-applyMiddleware.md","raw":"---\ntitle: redux源码学习--applyMiddleware\ndate: 2018-05-11 16:03:07\ntags: [Javascript, react, redux]\ncategories: redux源码学习\n---\n<h1>applyMiddleware理解</h1>\n\n中间件的本质是作为enhancer而存在的。它是通过createStore方法传递到redux的内部中的,中间件模块是一个高阶函数\n下面是redux中间件的基本格式：\n```javascript\nconst reduxMiddleware = ({dispatch, getState}[简化的store]) => (next[上一个中间件的dispatch方法]) => (action[实际派发的action对象]) => {}\n```\n\n```javascript\nexport default function applyMiddleware(...middlewares) {\n  // middlewares就是我们传递给applyMiddlewarez函数的一系列中间件函数\n  return (createStore) => (...args) => {\n    // createStore就是redux用于创建store的方法,args === [reducers, preloadedState]。下面这句话就是在中间件的内部，使用我们传递的参数创建一个store对象\n    // 注：这一块没有传递enhancer,所以返回的就是我们经常使用的store对象\n    const store = createStore(...args)\n    // 获取store对象的dispatch方法\n    let dispatch = () => {\n      throw new Error(\n        `Dispatching while constructing your middleware is not allowed. ` +\n          `Other middleware would not be applied to this dispatch.`\n      )\n    }\n    // 传递给中间件的第一层的函数的参数，\n    const middlewareAPI = {\n      getState: store.getState,\n      // 重写了dispatch方法，其实就是store.dispatch(...args)\n      dispatch: (...args) => dispatch(...args)\n    }\n\n    /** \n     * 着重给大家详细的解释一下这一块\n     * 假设我们给applyMiddleware函数传递的中间件是\n     * applyMiddleware(\n     *      f1 => g1 => h1(...arg) => {},\n     *      f2 => g2 => h2(...arg) => {}\n     * )\n     * 运行下面的这行代码之后，chain中保存的内容是\n     * chain = [g1 => h1(...arg) => {}, g2 => h2(...arg) => {}]\n     */\n    \n    const chain = middlewares.map(middleware => middleware(middlewareAPI))\n    /**\n     * 当我们把chain传入到 compose中后，根据我们对compose的分析，\n     * compose(...chain)(store.dispatch)的结果就是:\n     * g1(h2(...arg)) => h1(...arg)\n     * \n     * 也就是说，按照上面的这个形式，下面的dispatch和h1函数是一样的，所以，h1的参数，就是我们需要派发的action，当我们调用dispatch的时候，其实就相当于调用h1(action)，而在h1的内部，这个action是由g1的参数\n     * 也就是h2进行派发的，所以这个时候action就传递到了h2的内部，而h2的参数是由g2的参数，也就是实际传入的store.dispatch进行派发的，就这样层层传入，层层输出，就形成了我们强大的中间件机制。\n     */\n    dispatch = compose(...chain)(store.dispatch)\n\n    // 返回的也是一个store对象\n    return {\n      ...store,\n      // 这个dispatch其实就是，各个中间件的最底层(第三层)的哪个函数组成的圆环函数构成的\n      dispatch\n    }\n  }\n}\n```","slug":"redux源码学习-applyMiddleware","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yaj001zd6spy185sbev","content":"<h1>applyMiddleware理解</h1>\n\n<p>中间件的本质是作为enhancer而存在的。它是通过createStore方法传递到redux的内部中的,中间件模块是一个高阶函数<br>下面是redux中间件的基本格式：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reduxMiddleware = <span class=\"function\">(<span class=\"params\">&#123;dispatch, getState&#125;[简化的store]</span>) =&gt;</span> (next[上一个中间件的dispatch方法]) =&gt; <span class=\"function\">(<span class=\"params\">action[实际派发的action对象]</span>) =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMiddleware</span>(<span class=\"params\">...middlewares</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// middlewares就是我们传递给applyMiddlewarez函数的一系列中间件函数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">createStore</span>) =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// createStore就是redux用于创建store的方法,args === [reducers, preloadedState]。下面这句话就是在中间件的内部，使用我们传递的参数创建一个store对象</span></span><br><span class=\"line\">    <span class=\"comment\">// 注：这一块没有传递enhancer,所以返回的就是我们经常使用的store对象</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> store = createStore(...args)</span><br><span class=\"line\">    <span class=\"comment\">// 获取store对象的dispatch方法</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> dispatch = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Dispatching while constructing your middleware is not allowed. `</span> +</span><br><span class=\"line\">          <span class=\"string\">`Other middleware would not be applied to this dispatch.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 传递给中间件的第一层的函数的参数，</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> middlewareAPI = &#123;</span><br><span class=\"line\">      getState: store.getState,</span><br><span class=\"line\">      <span class=\"comment\">// 重写了dispatch方法，其实就是store.dispatch(...args)</span></span><br><span class=\"line\">      dispatch: <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(...args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">     * 着重给大家详细的解释一下这一块</span></span><br><span class=\"line\"><span class=\"comment\">     * 假设我们给applyMiddleware函数传递的中间件是</span></span><br><span class=\"line\"><span class=\"comment\">     * applyMiddleware(</span></span><br><span class=\"line\"><span class=\"comment\">     *      f1 =&gt; g1 =&gt; h1(...arg) =&gt; &#123;&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     *      f2 =&gt; g2 =&gt; h2(...arg) =&gt; &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * )</span></span><br><span class=\"line\"><span class=\"comment\">     * 运行下面的这行代码之后，chain中保存的内容是</span></span><br><span class=\"line\"><span class=\"comment\">     * chain = [g1 =&gt; h1(...arg) =&gt; &#123;&#125;, g2 =&gt; h2(...arg) =&gt; &#123;&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">const</span> chain = middlewares.map(<span class=\"function\"><span class=\"params\">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当我们把chain传入到 compose中后，根据我们对compose的分析，</span></span><br><span class=\"line\"><span class=\"comment\">     * compose(...chain)(store.dispatch)的结果就是:</span></span><br><span class=\"line\"><span class=\"comment\">     * g1(h2(...arg)) =&gt; h1(...arg)</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * 也就是说，按照上面的这个形式，下面的dispatch和h1函数是一样的，所以，h1的参数，就是我们需要派发的action，当我们调用dispatch的时候，其实就相当于调用h1(action)，而在h1的内部，这个action是由g1的参数</span></span><br><span class=\"line\"><span class=\"comment\">     * 也就是h2进行派发的，所以这个时候action就传递到了h2的内部，而h2的参数是由g2的参数，也就是实际传入的store.dispatch进行派发的，就这样层层传入，层层输出，就形成了我们强大的中间件机制。</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    dispatch = compose(...chain)(store.dispatch)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 返回的也是一个store对象</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...store,</span><br><span class=\"line\">      <span class=\"comment\">// 这个dispatch其实就是，各个中间件的最底层(第三层)的哪个函数组成的圆环函数构成的</span></span><br><span class=\"line\">      dispatch</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1>applyMiddleware理解</h1>\n\n<p>中间件的本质是作为enhancer而存在的。它是通过createStore方法传递到redux的内部中的,中间件模块是一个高阶函数<br>下面是redux中间件的基本格式：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reduxMiddleware = <span class=\"function\">(<span class=\"params\">&#123;dispatch, getState&#125;[简化的store]</span>) =&gt;</span> (next[上一个中间件的dispatch方法]) =&gt; <span class=\"function\">(<span class=\"params\">action[实际派发的action对象]</span>) =&gt;</span> &#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMiddleware</span>(<span class=\"params\">...middlewares</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// middlewares就是我们传递给applyMiddlewarez函数的一系列中间件函数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">createStore</span>) =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// createStore就是redux用于创建store的方法,args === [reducers, preloadedState]。下面这句话就是在中间件的内部，使用我们传递的参数创建一个store对象</span></span><br><span class=\"line\">    <span class=\"comment\">// 注：这一块没有传递enhancer,所以返回的就是我们经常使用的store对象</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> store = createStore(...args)</span><br><span class=\"line\">    <span class=\"comment\">// 获取store对象的dispatch方法</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> dispatch = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Dispatching while constructing your middleware is not allowed. `</span> +</span><br><span class=\"line\">          <span class=\"string\">`Other middleware would not be applied to this dispatch.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 传递给中间件的第一层的函数的参数，</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> middlewareAPI = &#123;</span><br><span class=\"line\">      getState: store.getState,</span><br><span class=\"line\">      <span class=\"comment\">// 重写了dispatch方法，其实就是store.dispatch(...args)</span></span><br><span class=\"line\">      dispatch: <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> dispatch(...args)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">     * 着重给大家详细的解释一下这一块</span></span><br><span class=\"line\"><span class=\"comment\">     * 假设我们给applyMiddleware函数传递的中间件是</span></span><br><span class=\"line\"><span class=\"comment\">     * applyMiddleware(</span></span><br><span class=\"line\"><span class=\"comment\">     *      f1 =&gt; g1 =&gt; h1(...arg) =&gt; &#123;&#125;,</span></span><br><span class=\"line\"><span class=\"comment\">     *      f2 =&gt; g2 =&gt; h2(...arg) =&gt; &#123;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">     * )</span></span><br><span class=\"line\"><span class=\"comment\">     * 运行下面的这行代码之后，chain中保存的内容是</span></span><br><span class=\"line\"><span class=\"comment\">     * chain = [g1 =&gt; h1(...arg) =&gt; &#123;&#125;, g2 =&gt; h2(...arg) =&gt; &#123;&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">const</span> chain = middlewares.map(<span class=\"function\"><span class=\"params\">middleware</span> =&gt;</span> middleware(middlewareAPI))</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当我们把chain传入到 compose中后，根据我们对compose的分析，</span></span><br><span class=\"line\"><span class=\"comment\">     * compose(...chain)(store.dispatch)的结果就是:</span></span><br><span class=\"line\"><span class=\"comment\">     * g1(h2(...arg)) =&gt; h1(...arg)</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     * 也就是说，按照上面的这个形式，下面的dispatch和h1函数是一样的，所以，h1的参数，就是我们需要派发的action，当我们调用dispatch的时候，其实就相当于调用h1(action)，而在h1的内部，这个action是由g1的参数</span></span><br><span class=\"line\"><span class=\"comment\">     * 也就是h2进行派发的，所以这个时候action就传递到了h2的内部，而h2的参数是由g2的参数，也就是实际传入的store.dispatch进行派发的，就这样层层传入，层层输出，就形成了我们强大的中间件机制。</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    dispatch = compose(...chain)(store.dispatch)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 返回的也是一个store对象</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...store,</span><br><span class=\"line\">      <span class=\"comment\">// 这个dispatch其实就是，各个中间件的最底层(第三层)的哪个函数组成的圆环函数构成的</span></span><br><span class=\"line\">      dispatch</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"redux源码学习--compose","date":"2018-05-11T05:48:56.000Z","_content":"<h1>compose</h1>\ncompose 是一个从右向左编写单参数组成的函数。最右边的函数可以接受多个参数，因为它提供了签名由此产生的复合函数。\n\n## 参数理解\n`{...funcs}`需要合成的多个函数。每个函数都接收一个函数作为参数，然后返回一个函数。\n\n## 返回值\n`(Function)` 从右到左把接收到的函数合成后的最终函数。\n\n## 代码理解\n```javascript\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n  //对参数进行一个累加，就是依次以右边的参数作为左边方法的参数累加到最左边\n  return funcs.reduce((a, b) => (...args) => a(b(...args)))\n}\n```\n<h1>总结</h1>\ncompose 主要用于 applyMiddleware / createStore enhancer.\ncompose 做的只是让你不使用深度右括号的情况下来写深度嵌套的函数\ncompose的运行结果是一个函数，调用这个函数所传递的参数将会作为compose最后一个参数的参数，从而由内向外，逐步调用。\n\n\n","source":"_posts/redux源码学习-compose.md","raw":"---\ntitle: redux源码学习--compose\ndate: 2018-05-11 13:48:56\ntags: [Javascript, react, redux]\ncategories: redux源码学习\n---\n<h1>compose</h1>\ncompose 是一个从右向左编写单参数组成的函数。最右边的函数可以接受多个参数，因为它提供了签名由此产生的复合函数。\n\n## 参数理解\n`{...funcs}`需要合成的多个函数。每个函数都接收一个函数作为参数，然后返回一个函数。\n\n## 返回值\n`(Function)` 从右到左把接收到的函数合成后的最终函数。\n\n## 代码理解\n```javascript\nexport default function compose(...funcs) {\n  if (funcs.length === 0) {\n    return arg => arg\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n  //对参数进行一个累加，就是依次以右边的参数作为左边方法的参数累加到最左边\n  return funcs.reduce((a, b) => (...args) => a(b(...args)))\n}\n```\n<h1>总结</h1>\ncompose 主要用于 applyMiddleware / createStore enhancer.\ncompose 做的只是让你不使用深度右括号的情况下来写深度嵌套的函数\ncompose的运行结果是一个函数，调用这个函数所传递的参数将会作为compose最后一个参数的参数，从而由内向外，逐步调用。\n\n\n","slug":"redux源码学习-compose","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yak0021d6spn8lqeogm","content":"<p></p><h1>compose</h1><br>compose 是一个从右向左编写单参数组成的函数。最右边的函数可以接受多个参数，因为它提供了签名由此产生的复合函数。<p></p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p><code>{...funcs}</code>需要合成的多个函数。每个函数都接收一个函数作为参数，然后返回一个函数。</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p><code>(Function)</code> 从右到左把接收到的函数合成后的最终函数。</p>\n<h2 id=\"代码理解\"><a href=\"#代码理解\" class=\"headerlink\" title=\"代码理解\"></a>代码理解</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compose</span>(<span class=\"params\">...funcs</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">arg</span> =&gt;</span> arg</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> funcs[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//对参数进行一个累加，就是依次以右边的参数作为左边方法的参数累加到最左边</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> funcs.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p><h1>总结</h1><br>compose 主要用于 applyMiddleware / createStore enhancer.<br>compose 做的只是让你不使用深度右括号的情况下来写深度嵌套的函数<br>compose的运行结果是一个函数，调用这个函数所传递的参数将会作为compose最后一个参数的参数，从而由内向外，逐步调用。<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p></p><h1>compose</h1><br>compose 是一个从右向左编写单参数组成的函数。最右边的函数可以接受多个参数，因为它提供了签名由此产生的复合函数。<p></p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p><code>{...funcs}</code>需要合成的多个函数。每个函数都接收一个函数作为参数，然后返回一个函数。</p>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p><code>(Function)</code> 从右到左把接收到的函数合成后的最终函数。</p>\n<h2 id=\"代码理解\"><a href=\"#代码理解\" class=\"headerlink\" title=\"代码理解\"></a>代码理解</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">compose</span>(<span class=\"params\">...funcs</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">arg</span> =&gt;</span> arg</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (funcs.length === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> funcs[<span class=\"number\">0</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//对参数进行一个累加，就是依次以右边的参数作为左边方法的参数累加到最左边</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> funcs.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p><h1>总结</h1><br>compose 主要用于 applyMiddleware / createStore enhancer.<br>compose 做的只是让你不使用深度右括号的情况下来写深度嵌套的函数<br>compose的运行结果是一个函数，调用这个函数所传递的参数将会作为compose最后一个参数的参数，从而由内向外，逐步调用。<p></p>\n"},{"title":"window.location的属性","date":"2018-06-10T03:23:35.000Z","_content":"关于http的相关的BOM的问题\n\n获取当前url的协议\n```javascript\nconst protocol = window.location.protocol;\n```\n获取当前的host和端口号\n```javascript\nconst host = window.location.host;\n```\n获取当前完整的URL\n```javascript\nconst host = window.location.href;\n```\n获取当前pathName\n```javascript\nconst host = window.location.pathname;\n```\n获取当前url的查找内容\n```javascript\nconst host = window.location.search;\n```","source":"_posts/window.location的属性.md","raw":"---\ntitle: window.location的属性\ndate: 2018-06-10 11:23:35\ntags: Javascript\ncategories: bug汇总\n---\n关于http的相关的BOM的问题\n\n获取当前url的协议\n```javascript\nconst protocol = window.location.protocol;\n```\n获取当前的host和端口号\n```javascript\nconst host = window.location.host;\n```\n获取当前完整的URL\n```javascript\nconst host = window.location.href;\n```\n获取当前pathName\n```javascript\nconst host = window.location.pathname;\n```\n获取当前url的查找内容\n```javascript\nconst host = window.location.search;\n```","slug":"window.location的属性","published":1,"updated":"2018-06-10T03:42:04.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yfy003ed6spq1pogjg0","content":"<p>关于http的相关的BOM的问题</p>\n<p>获取当前url的协议<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> protocol = <span class=\"built_in\">window</span>.location.protocol;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前的host和端口号<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.host;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前完整的URL<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.href;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前pathName<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.pathname;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前url的查找内容<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.search;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>关于http的相关的BOM的问题</p>\n<p>获取当前url的协议<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> protocol = <span class=\"built_in\">window</span>.location.protocol;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前的host和端口号<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.host;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前完整的URL<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.href;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前pathName<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.pathname;</span><br></pre></td></tr></table></figure></p>\n<p>获取当前url的查找内容<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> host = <span class=\"built_in\">window</span>.location.search;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"redux源码学习--combineReducers","date":"2018-05-11T06:16:47.000Z","_content":"<h1>combineReducers 理解</h1>\n\ncombineReducers.js文件对外暴露了一个函数combineReducers，combineReducer函数是redux的一个辅助性的函数，用于拆分createStore里面的第一个参数：reducer函数。combineReducer函数的返回值是一个函数，该函数是组合之后的一个标准的reducer函数。\ncombineReducers将多个值不同的reducer对象转换为单个reducer。它将调用每个子reducer，并将它们的结果收集到单个状态对象中，该对象的键对应于传递的reducer函数的键。\n\n## 参数理解\n`{reducers}`：一个对象，它的值对应于需要被组合成一个的不同的reducer函数。获得它的一种简便方法是使用ES6`import * as reducers`语法。对于任何的actions，reducer可能永远不会返回undefined。相反，如果传递给它们的state是undefined，则返回初始state，以及任何未识别action的当前state。\n```javascript\nlet reducers = {\n    usersId: function getUsersIdReducer(){}, \n    userName: function getUserNameReducer(){}\n}\n```\n## 参数处理\n* 从传入的参数里面提取出合法的reducers（reducers的每一个key对应的value值是函数，才是合法的子reducer），赋值给新的局部变量：finalReducers\n\n```javascript\nconst reducerKeys = Object.keys(reducers)\n//定义一个局部变量 finalReducers\nconst finalReducers = {}\nfor (let i = 0; i < reducerKeys.length; i++) {\n  const key = reducerKeys[i]\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof reducers[key] === 'undefined') {\n      warning(`No reducer provided for key \"${key}\"`)\n    }\n  }\n  //过滤出reducers对应的value值是function的key，将其放入finalReducers对象\n  if (typeof reducers[key] === 'function') {\n    finalReducers[key] = reducers[key]\n  }\n}\n```\n\n* 校验finalReducers, 判断其每一个子reducer是否能返回正常的子state\n\n```javascript\n//取出过滤出来的有效的keys列表\nconst finalReducerKeys = Object.keys(finalReducers)\n\nlet unexpectedKeyCache\nif (process.env.NODE_ENV !== 'production') {\n  unexpectedKeyCache = {}\n}\n\nlet shapeAssertionError\ntry {\n  assertReducerShape(finalReducers)\n} catch (e) {\n  shapeAssertionError = e\n}\n```\n\n* 调用assertReducerShape函数：\n\n```javascript\n//确认reducer是否是合法的reducer，即返回的state是不是undefined，如果是undefined，则是非法reducer\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(key => {\n  const reducer = reducers[key]\n  const initialState = reducer(undefined, {type: ActionTypes.INIT})\n\n  //如果初始state是undefined，则抛出错误\n  if (typeof initialState === 'undefined') {\n    throw new Error(\n      `Reducer \"${key}\" returned undefined during initialization. ` +\n      `If the state passed to the reducer is undefined, you must ` +\n      `explicitly return the initial state. The initial state may ` +\n      `not be undefined. If you don't want to set a value for this reducer, ` +\n      `you can use null instead of undefined.`\n    )\n  }\n  \n  //如果reducer是undefined，抛出错误\n  if (\n    typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined'\n  ) {\n      throw new Error(\n        `Reducer \"${key}\" returned undefined when probed with a random type. ` +\n        `Don't try to handle ${\n          ActionTypes.INIT\n        } or other actions in \"redux/*\" ` +\n        `namespace. They are considered private. Instead, you must return the ` +\n        `current state for any unknown actions, unless it is undefined, ` +\n        `in which case you must return the initial state, regardless of the ` +\n        `action type. The initial state may not be undefined, but can be null.`\n      )\n    }\n  })\n}\n```\n## 返回值\ncombineReducers函数返回一个combination函数，combination是一个标准的reducer函数，有初始化的state参数，和一个携带了actionType和数据的action对象。\n```javascript\nreturn function combination(state = {}, action) {\n  //如果有非法的reducer，就直接报错\n  if (shapeAssertionError) {\n    throw shapeAssertionError\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const warningMessage = getUnexpectedStateShapeWarningMessage(\n      state,\n      finalReducers,\n      action,\n      unexpectedKeyCache\n    )\n    if (warningMessage) {\n      warning(warningMessage)\n    }\n  }\n\n  let hasChanged = false\n  //定义新的nextState\n  const nextState = {}\n  // 1，遍历reducers对象中的有效key，\n  // 2，执行该key对应的value函数，即子reducer函数，并得到对应的state对象，即子state\n  // 3，将新的子state挂到新的nextState对象上，key不变\n  for (let i = 0; i < finalReducerKeys.length; i++) {\n    const key = finalReducerKeys[i]\n    const reducer = finalReducers[key]\n    const previousStateForKey = state[key]\n    const nextStateForKey = reducer(previousStateForKey, action)\n    if (typeof nextStateForKey === 'undefined') {\n      const errorMessage = getUndefinedStateErrorMessage(key, action)\n      throw new Error(errorMessage)\n    }\n    nextState[key] = nextStateForKey\n    //如果hasChanged为true，那就是true了   后面的判断是，只要有一次nextStateForKey!== previousStateForKey不同，就说明整个state不同\n    hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n  }\n  //如果state发生变化了，直接返回新的nextState，否则，还是返回旧的state\n  return hasChanged ? nextState : state\n}\n```\n\n<h1>总结</h1>\n\n* combineReducers 辅助函数的作用是，把一个由多个不同 reducer 函数作为 value 的 object，合并成一个最终的 reducer 函数，然后就可以对这个 reducer 调用 createStore。\n\n* 合并后的 reducer 可以调用各个子 reducer，并把它们的结果合并成一个 state 对象。state 对象的结构由传入的多个 reducer 的 key 决定。\n\n* 每个传入 combineReducers 的 reducer 都需满足以下规则：\n\n  所有未匹配到的 action，必须把它接收到的第一个参数也就是那个 state 原封不动返回。\n\n  永远不能返回 undefined。当过早 return 时非常容易犯这个错误，为了避免错误扩散，遇到这种情况时 combineReducers 会抛异常。\n\n  如果传入的 state 就是 undefined，一定要返回对应 reducer 的初始 state。根据上一条规则，初始 state 禁止使用 undefined。使用 ES6 的默认参数值语法来设置初始 state 很容易，但你也可以手动检查第一个参数是否为 undefined。\n","source":"_posts/redux源码学习—combineReducers.md","raw":"---\ntitle: redux源码学习--combineReducers\ndate: 2018-05-11 14:16:47\ntags: [Javascript, react, redux]\ncategories: redux源码学习\n---\n<h1>combineReducers 理解</h1>\n\ncombineReducers.js文件对外暴露了一个函数combineReducers，combineReducer函数是redux的一个辅助性的函数，用于拆分createStore里面的第一个参数：reducer函数。combineReducer函数的返回值是一个函数，该函数是组合之后的一个标准的reducer函数。\ncombineReducers将多个值不同的reducer对象转换为单个reducer。它将调用每个子reducer，并将它们的结果收集到单个状态对象中，该对象的键对应于传递的reducer函数的键。\n\n## 参数理解\n`{reducers}`：一个对象，它的值对应于需要被组合成一个的不同的reducer函数。获得它的一种简便方法是使用ES6`import * as reducers`语法。对于任何的actions，reducer可能永远不会返回undefined。相反，如果传递给它们的state是undefined，则返回初始state，以及任何未识别action的当前state。\n```javascript\nlet reducers = {\n    usersId: function getUsersIdReducer(){}, \n    userName: function getUserNameReducer(){}\n}\n```\n## 参数处理\n* 从传入的参数里面提取出合法的reducers（reducers的每一个key对应的value值是函数，才是合法的子reducer），赋值给新的局部变量：finalReducers\n\n```javascript\nconst reducerKeys = Object.keys(reducers)\n//定义一个局部变量 finalReducers\nconst finalReducers = {}\nfor (let i = 0; i < reducerKeys.length; i++) {\n  const key = reducerKeys[i]\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof reducers[key] === 'undefined') {\n      warning(`No reducer provided for key \"${key}\"`)\n    }\n  }\n  //过滤出reducers对应的value值是function的key，将其放入finalReducers对象\n  if (typeof reducers[key] === 'function') {\n    finalReducers[key] = reducers[key]\n  }\n}\n```\n\n* 校验finalReducers, 判断其每一个子reducer是否能返回正常的子state\n\n```javascript\n//取出过滤出来的有效的keys列表\nconst finalReducerKeys = Object.keys(finalReducers)\n\nlet unexpectedKeyCache\nif (process.env.NODE_ENV !== 'production') {\n  unexpectedKeyCache = {}\n}\n\nlet shapeAssertionError\ntry {\n  assertReducerShape(finalReducers)\n} catch (e) {\n  shapeAssertionError = e\n}\n```\n\n* 调用assertReducerShape函数：\n\n```javascript\n//确认reducer是否是合法的reducer，即返回的state是不是undefined，如果是undefined，则是非法reducer\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(key => {\n  const reducer = reducers[key]\n  const initialState = reducer(undefined, {type: ActionTypes.INIT})\n\n  //如果初始state是undefined，则抛出错误\n  if (typeof initialState === 'undefined') {\n    throw new Error(\n      `Reducer \"${key}\" returned undefined during initialization. ` +\n      `If the state passed to the reducer is undefined, you must ` +\n      `explicitly return the initial state. The initial state may ` +\n      `not be undefined. If you don't want to set a value for this reducer, ` +\n      `you can use null instead of undefined.`\n    )\n  }\n  \n  //如果reducer是undefined，抛出错误\n  if (\n    typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined'\n  ) {\n      throw new Error(\n        `Reducer \"${key}\" returned undefined when probed with a random type. ` +\n        `Don't try to handle ${\n          ActionTypes.INIT\n        } or other actions in \"redux/*\" ` +\n        `namespace. They are considered private. Instead, you must return the ` +\n        `current state for any unknown actions, unless it is undefined, ` +\n        `in which case you must return the initial state, regardless of the ` +\n        `action type. The initial state may not be undefined, but can be null.`\n      )\n    }\n  })\n}\n```\n## 返回值\ncombineReducers函数返回一个combination函数，combination是一个标准的reducer函数，有初始化的state参数，和一个携带了actionType和数据的action对象。\n```javascript\nreturn function combination(state = {}, action) {\n  //如果有非法的reducer，就直接报错\n  if (shapeAssertionError) {\n    throw shapeAssertionError\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const warningMessage = getUnexpectedStateShapeWarningMessage(\n      state,\n      finalReducers,\n      action,\n      unexpectedKeyCache\n    )\n    if (warningMessage) {\n      warning(warningMessage)\n    }\n  }\n\n  let hasChanged = false\n  //定义新的nextState\n  const nextState = {}\n  // 1，遍历reducers对象中的有效key，\n  // 2，执行该key对应的value函数，即子reducer函数，并得到对应的state对象，即子state\n  // 3，将新的子state挂到新的nextState对象上，key不变\n  for (let i = 0; i < finalReducerKeys.length; i++) {\n    const key = finalReducerKeys[i]\n    const reducer = finalReducers[key]\n    const previousStateForKey = state[key]\n    const nextStateForKey = reducer(previousStateForKey, action)\n    if (typeof nextStateForKey === 'undefined') {\n      const errorMessage = getUndefinedStateErrorMessage(key, action)\n      throw new Error(errorMessage)\n    }\n    nextState[key] = nextStateForKey\n    //如果hasChanged为true，那就是true了   后面的判断是，只要有一次nextStateForKey!== previousStateForKey不同，就说明整个state不同\n    hasChanged = hasChanged || nextStateForKey !== previousStateForKey\n  }\n  //如果state发生变化了，直接返回新的nextState，否则，还是返回旧的state\n  return hasChanged ? nextState : state\n}\n```\n\n<h1>总结</h1>\n\n* combineReducers 辅助函数的作用是，把一个由多个不同 reducer 函数作为 value 的 object，合并成一个最终的 reducer 函数，然后就可以对这个 reducer 调用 createStore。\n\n* 合并后的 reducer 可以调用各个子 reducer，并把它们的结果合并成一个 state 对象。state 对象的结构由传入的多个 reducer 的 key 决定。\n\n* 每个传入 combineReducers 的 reducer 都需满足以下规则：\n\n  所有未匹配到的 action，必须把它接收到的第一个参数也就是那个 state 原封不动返回。\n\n  永远不能返回 undefined。当过早 return 时非常容易犯这个错误，为了避免错误扩散，遇到这种情况时 combineReducers 会抛异常。\n\n  如果传入的 state 就是 undefined，一定要返回对应 reducer 的初始 state。根据上一条规则，初始 state 禁止使用 undefined。使用 ES6 的默认参数值语法来设置初始 state 很容易，但你也可以手动检查第一个参数是否为 undefined。\n","slug":"redux源码学习—combineReducers","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg0003gd6spf3zrdcka","content":"<h1>combineReducers 理解</h1>\n\n<p>combineReducers.js文件对外暴露了一个函数combineReducers，combineReducer函数是redux的一个辅助性的函数，用于拆分createStore里面的第一个参数：reducer函数。combineReducer函数的返回值是一个函数，该函数是组合之后的一个标准的reducer函数。<br>combineReducers将多个值不同的reducer对象转换为单个reducer。它将调用每个子reducer，并将它们的结果收集到单个状态对象中，该对象的键对应于传递的reducer函数的键。</p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p><code>{reducers}</code>：一个对象，它的值对应于需要被组合成一个的不同的reducer函数。获得它的一种简便方法是使用ES6<code>import * as reducers</code>语法。对于任何的actions，reducer可能永远不会返回undefined。相反，如果传递给它们的state是undefined，则返回初始state，以及任何未识别action的当前state。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> reducers = &#123;</span><br><span class=\"line\">    usersId: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUsersIdReducer</span>(<span class=\"params\"></span>)</span>&#123;&#125;, </span><br><span class=\"line\">    userName: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserNameReducer</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"参数处理\"><a href=\"#参数处理\" class=\"headerlink\" title=\"参数处理\"></a>参数处理</h2><ul>\n<li>从传入的参数里面提取出合法的reducers（reducers的每一个key对应的value值是函数，才是合法的子reducer），赋值给新的局部变量：finalReducers</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"><span class=\"comment\">//定义一个局部变量 finalReducers</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> finalReducers = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> key = reducerKeys[i]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">      warning(<span class=\"string\">`No reducer provided for key \"<span class=\"subst\">$&#123;key&#125;</span>\"`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//过滤出reducers对应的value值是function的key，将其放入finalReducers对象</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    finalReducers[key] = reducers[key]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>校验finalReducers, 判断其每一个子reducer是否能返回正常的子state</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//取出过滤出来的有效的keys列表</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> unexpectedKeyCache</span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  unexpectedKeyCache = &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> shapeAssertionError</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  assertReducerShape(finalReducers)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  shapeAssertionError = e</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>调用assertReducerShape函数：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//确认reducer是否是合法的reducer，即返回的state是不是undefined，如果是undefined，则是非法reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">assertReducerShape</span>(<span class=\"params\">reducers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.keys(reducers).forEach(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> reducer = reducers[key]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> initialState = reducer(<span class=\"literal\">undefined</span>, &#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//如果初始state是undefined，则抛出错误</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> initialState === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">`Reducer \"<span class=\"subst\">$&#123;key&#125;</span>\" returned undefined during initialization. `</span> +</span><br><span class=\"line\">      <span class=\"string\">`If the state passed to the reducer is undefined, you must `</span> +</span><br><span class=\"line\">      <span class=\"string\">`explicitly return the initial state. The initial state may `</span> +</span><br><span class=\"line\">      <span class=\"string\">`not be undefined. If you don't want to set a value for this reducer, `</span> +</span><br><span class=\"line\">      <span class=\"string\">`you can use null instead of undefined.`</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//如果reducer是undefined，抛出错误</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (</span><br><span class=\"line\">    <span class=\"keyword\">typeof</span> reducer(<span class=\"literal\">undefined</span>, &#123;</span><br><span class=\"line\">      type: ActionTypes.PROBE_UNKNOWN_ACTION()</span><br><span class=\"line\">    &#125;) === <span class=\"string\">'undefined'</span></span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Reducer \"<span class=\"subst\">$&#123;key&#125;</span>\" returned undefined when probed with a random type. `</span> +</span><br><span class=\"line\">        <span class=\"string\">`Don't try to handle <span class=\"subst\">$&#123;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">          ActionTypes.INIT</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">        &#125;</span> or other actions in \"redux/*\" `</span> +</span><br><span class=\"line\">        <span class=\"string\">`namespace. They are considered private. Instead, you must return the `</span> +</span><br><span class=\"line\">        <span class=\"string\">`current state for any unknown actions, unless it is undefined, `</span> +</span><br><span class=\"line\">        <span class=\"string\">`in which case you must return the initial state, regardless of the `</span> +</span><br><span class=\"line\">        <span class=\"string\">`action type. The initial state may not be undefined, but can be null.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>combineReducers函数返回一个combination函数，combination是一个标准的reducer函数，有初始化的state参数，和一个携带了actionType和数据的action对象。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果有非法的reducer，就直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (shapeAssertionError) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> shapeAssertionError</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> warningMessage = getUnexpectedStateShapeWarningMessage(</span><br><span class=\"line\">      state,</span><br><span class=\"line\">      finalReducers,</span><br><span class=\"line\">      action,</span><br><span class=\"line\">      unexpectedKeyCache</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (warningMessage) &#123;</span><br><span class=\"line\">      warning(warningMessage)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"comment\">//定义新的nextState</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> nextState = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">// 1，遍历reducers对象中的有效key，</span></span><br><span class=\"line\">  <span class=\"comment\">// 2，执行该key对应的value函数，即子reducer函数，并得到对应的state对象，即子state</span></span><br><span class=\"line\">  <span class=\"comment\">// 3，将新的子state挂到新的nextState对象上，key不变</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = finalReducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> reducer = finalReducers[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> previousStateForKey = state[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(errorMessage)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    nextState[key] = nextStateForKey</span><br><span class=\"line\">    <span class=\"comment\">//如果hasChanged为true，那就是true了   后面的判断是，只要有一次nextStateForKey!== previousStateForKey不同，就说明整个state不同</span></span><br><span class=\"line\">    hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果state发生变化了，直接返回新的nextState，否则，还是返回旧的state</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> hasChanged ? nextState : state</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1>总结</h1>\n\n<ul>\n<li><p>combineReducers 辅助函数的作用是，把一个由多个不同 reducer 函数作为 value 的 object，合并成一个最终的 reducer 函数，然后就可以对这个 reducer 调用 createStore。</p>\n</li>\n<li><p>合并后的 reducer 可以调用各个子 reducer，并把它们的结果合并成一个 state 对象。state 对象的结构由传入的多个 reducer 的 key 决定。</p>\n</li>\n<li><p>每个传入 combineReducers 的 reducer 都需满足以下规则：</p>\n<p>所有未匹配到的 action，必须把它接收到的第一个参数也就是那个 state 原封不动返回。</p>\n<p>永远不能返回 undefined。当过早 return 时非常容易犯这个错误，为了避免错误扩散，遇到这种情况时 combineReducers 会抛异常。</p>\n<p>如果传入的 state 就是 undefined，一定要返回对应 reducer 的初始 state。根据上一条规则，初始 state 禁止使用 undefined。使用 ES6 的默认参数值语法来设置初始 state 很容易，但你也可以手动检查第一个参数是否为 undefined。</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1>combineReducers 理解</h1>\n\n<p>combineReducers.js文件对外暴露了一个函数combineReducers，combineReducer函数是redux的一个辅助性的函数，用于拆分createStore里面的第一个参数：reducer函数。combineReducer函数的返回值是一个函数，该函数是组合之后的一个标准的reducer函数。<br>combineReducers将多个值不同的reducer对象转换为单个reducer。它将调用每个子reducer，并将它们的结果收集到单个状态对象中，该对象的键对应于传递的reducer函数的键。</p>\n<h2 id=\"参数理解\"><a href=\"#参数理解\" class=\"headerlink\" title=\"参数理解\"></a>参数理解</h2><p><code>{reducers}</code>：一个对象，它的值对应于需要被组合成一个的不同的reducer函数。获得它的一种简便方法是使用ES6<code>import * as reducers</code>语法。对于任何的actions，reducer可能永远不会返回undefined。相反，如果传递给它们的state是undefined，则返回初始state，以及任何未识别action的当前state。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> reducers = &#123;</span><br><span class=\"line\">    usersId: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUsersIdReducer</span>(<span class=\"params\"></span>)</span>&#123;&#125;, </span><br><span class=\"line\">    userName: <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserNameReducer</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"参数处理\"><a href=\"#参数处理\" class=\"headerlink\" title=\"参数处理\"></a>参数处理</h2><ul>\n<li>从传入的参数里面提取出合法的reducers（reducers的每一个key对应的value值是函数，才是合法的子reducer），赋值给新的局部变量：finalReducers</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reducerKeys = <span class=\"built_in\">Object</span>.keys(reducers)</span><br><span class=\"line\"><span class=\"comment\">//定义一个局部变量 finalReducers</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> finalReducers = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; reducerKeys.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> key = reducerKeys[i]</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">      warning(<span class=\"string\">`No reducer provided for key \"<span class=\"subst\">$&#123;key&#125;</span>\"`</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//过滤出reducers对应的value值是function的key，将其放入finalReducers对象</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> reducers[key] === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">    finalReducers[key] = reducers[key]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>校验finalReducers, 判断其每一个子reducer是否能返回正常的子state</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//取出过滤出来的有效的keys列表</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> finalReducerKeys = <span class=\"built_in\">Object</span>.keys(finalReducers)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> unexpectedKeyCache</span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  unexpectedKeyCache = &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> shapeAssertionError</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  assertReducerShape(finalReducers)</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  shapeAssertionError = e</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>调用assertReducerShape函数：</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//确认reducer是否是合法的reducer，即返回的state是不是undefined，如果是undefined，则是非法reducer</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">assertReducerShape</span>(<span class=\"params\">reducers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.keys(reducers).forEach(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> reducer = reducers[key]</span><br><span class=\"line\">  <span class=\"keyword\">const</span> initialState = reducer(<span class=\"literal\">undefined</span>, &#123;<span class=\"attr\">type</span>: ActionTypes.INIT&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//如果初始state是undefined，则抛出错误</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> initialState === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">      <span class=\"string\">`Reducer \"<span class=\"subst\">$&#123;key&#125;</span>\" returned undefined during initialization. `</span> +</span><br><span class=\"line\">      <span class=\"string\">`If the state passed to the reducer is undefined, you must `</span> +</span><br><span class=\"line\">      <span class=\"string\">`explicitly return the initial state. The initial state may `</span> +</span><br><span class=\"line\">      <span class=\"string\">`not be undefined. If you don't want to set a value for this reducer, `</span> +</span><br><span class=\"line\">      <span class=\"string\">`you can use null instead of undefined.`</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//如果reducer是undefined，抛出错误</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (</span><br><span class=\"line\">    <span class=\"keyword\">typeof</span> reducer(<span class=\"literal\">undefined</span>, &#123;</span><br><span class=\"line\">      type: ActionTypes.PROBE_UNKNOWN_ACTION()</span><br><span class=\"line\">    &#125;) === <span class=\"string\">'undefined'</span></span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(</span><br><span class=\"line\">        <span class=\"string\">`Reducer \"<span class=\"subst\">$&#123;key&#125;</span>\" returned undefined when probed with a random type. `</span> +</span><br><span class=\"line\">        <span class=\"string\">`Don't try to handle <span class=\"subst\">$&#123;</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">          ActionTypes.INIT</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">        &#125;</span> or other actions in \"redux/*\" `</span> +</span><br><span class=\"line\">        <span class=\"string\">`namespace. They are considered private. Instead, you must return the `</span> +</span><br><span class=\"line\">        <span class=\"string\">`current state for any unknown actions, unless it is undefined, `</span> +</span><br><span class=\"line\">        <span class=\"string\">`in which case you must return the initial state, regardless of the `</span> +</span><br><span class=\"line\">        <span class=\"string\">`action type. The initial state may not be undefined, but can be null.`</span></span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h2><p>combineReducers函数返回一个combination函数，combination是一个标准的reducer函数，有初始化的state参数，和一个携带了actionType和数据的action对象。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">combination</span>(<span class=\"params\">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//如果有非法的reducer，就直接报错</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (shapeAssertionError) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> shapeAssertionError</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV !== <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> warningMessage = getUnexpectedStateShapeWarningMessage(</span><br><span class=\"line\">      state,</span><br><span class=\"line\">      finalReducers,</span><br><span class=\"line\">      action,</span><br><span class=\"line\">      unexpectedKeyCache</span><br><span class=\"line\">    )</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (warningMessage) &#123;</span><br><span class=\"line\">      warning(warningMessage)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> hasChanged = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"comment\">//定义新的nextState</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> nextState = &#123;&#125;</span><br><span class=\"line\">  <span class=\"comment\">// 1，遍历reducers对象中的有效key，</span></span><br><span class=\"line\">  <span class=\"comment\">// 2，执行该key对应的value函数，即子reducer函数，并得到对应的state对象，即子state</span></span><br><span class=\"line\">  <span class=\"comment\">// 3，将新的子state挂到新的nextState对象上，key不变</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = finalReducerKeys[i]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> reducer = finalReducers[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> previousStateForKey = state[key]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> nextStateForKey === <span class=\"string\">'undefined'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(errorMessage)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    nextState[key] = nextStateForKey</span><br><span class=\"line\">    <span class=\"comment\">//如果hasChanged为true，那就是true了   后面的判断是，只要有一次nextStateForKey!== previousStateForKey不同，就说明整个state不同</span></span><br><span class=\"line\">    hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果state发生变化了，直接返回新的nextState，否则，还是返回旧的state</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> hasChanged ? nextState : state</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1>总结</h1>\n\n<ul>\n<li><p>combineReducers 辅助函数的作用是，把一个由多个不同 reducer 函数作为 value 的 object，合并成一个最终的 reducer 函数，然后就可以对这个 reducer 调用 createStore。</p>\n</li>\n<li><p>合并后的 reducer 可以调用各个子 reducer，并把它们的结果合并成一个 state 对象。state 对象的结构由传入的多个 reducer 的 key 决定。</p>\n</li>\n<li><p>每个传入 combineReducers 的 reducer 都需满足以下规则：</p>\n<p>所有未匹配到的 action，必须把它接收到的第一个参数也就是那个 state 原封不动返回。</p>\n<p>永远不能返回 undefined。当过早 return 时非常容易犯这个错误，为了避免错误扩散，遇到这种情况时 combineReducers 会抛异常。</p>\n<p>如果传入的 state 就是 undefined，一定要返回对应 reducer 的初始 state。根据上一条规则，初始 state 禁止使用 undefined。使用 ES6 的默认参数值语法来设置初始 state 很容易，但你也可以手动检查第一个参数是否为 undefined。</p>\n</li>\n</ul>\n"},{"title":"webpack 配置理解","date":"2018-05-15T05:48:01.000Z","_content":"webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。\n\nwebpack 4 虽然已经不需要引入一个配置文件。但是，webpack在实际的应用中还是会配置很多东西。\n下面就是对webpack的配置分析：\n从webpack文档中找出路配置，进行了分析\n\n```javascript\nconst path = require('path');\n\nmodule.exports = {\n  mode: \"production\", // \"production\" | \"development\" | \"none\"\n  // webpack有三种模式：生产模式，开发模式，none；选择模式告诉webpack相应地使用其内置优化。\n\n  entry: \"./app/entry\", // string | object | array\n  // webpack的入口文件，这里应用程序开始执行\n  // webpack 开始打包\n\n  output: {\n    // webpack 如何输出结果的相关选项\n\n    path: path.resolve(__dirname, \"dist\"), // string\n    // 所有输出文件的目标路径\n    // 必须是绝对路径（使用 Node.js 的 path 模块）\n\n    filename: \"bundle.js\", // string\n    // 「入口分块(entry chunk)」的文件名模板（出口分块？）\n\n    publicPath: \"/assets/\", // string\n    // 输出解析文件的目录，url 相对于 HTML 页面\n\n    library: \"MyLibrary\", // string,\n    // 导出库(exported library)的名称\n\n    libraryTarget: \"umd\", // 通用模块定义\n    // 导出库(exported library)的类型\n\n    /* 高级输出配置 */\n\n    pathinfo: true, // boolean\n    // 在生成代码时，引入相关的模块、导出、请求等有帮助的路径信息。\n\n    chunkFilename: \"[id].js\",\n    chunkFilename: \"[chunkhash].js\", // 长效缓存(/guides/caching)\n    // 「附加分块(additional chunk)」的文件名模板\n\n    jsonpFunction: \"myWebpackJsonp\", // string\n    // 用于加载分块的 JSONP 函数名\n\n    sourceMapFilename: \"[file].map\", // string\n    sourceMapFilename: \"sourcemaps/[file].map\", // string\n    // 「source map 位置」的文件名模板\n\n    devtoolModuleFilenameTemplate: \"webpack:///[resource-path]\", // string\n    // 「devtool 中模块」的文件名模板\n\n    devtoolFallbackModuleFilenameTemplate: \"webpack:///[resource-path]?[hash]\", // string\n    // 「devtool 中模块」的文件名模板（用于冲突）\n\n    umdNamedDefine: true, // boolean\n    // 在 UMD 库中使用命名的 AMD 模块\n\n    crossOriginLoading: \"use-credentials\", // 枚举\n    crossOriginLoading: \"anonymous\",\n    crossOriginLoading: false,\n    // 指定运行时如何发出跨域请求问题\n\n    /* 专家级输出配置（自行承担风险） */\n\n    devtoolLineToLine: {\n      test: /\\.jsx$/\n    },\n    // 为这些模块使用 1:1 映射 SourceMaps（快速）\n\n    hotUpdateMainFilename: \"[hash].hot-update.json\", // string\n    // 「HMR 清单」的文件名模板\n\n    hotUpdateChunkFilename: \"[id].[hash].hot-update.js\", // string\n    // 「HMR 分块」的文件名模板\n\n    sourcePrefix: \"\\t\", // string\n    // 包内前置式模块资源具有更好可读性\n  },\n\n  module: {\n    // 关于模块配置\n\n    rules: [\n      // 模块规则（配置 loader、解析器等选项）\n\n      {\n        test: /\\.jsx?$/,\n        include: [\n          path.resolve(__dirname, \"app\")\n        ],\n        exclude: [\n          path.resolve(__dirname, \"app/demo-files\")\n        ],\n        // 这里是匹配条件，每个选项都接收一个正则表达式或字符串\n        // test 和 include 具有相同的作用，都是必须匹配选项\n        // exclude 是必不匹配选项（优先于 test 和 include）\n        // 最佳实践：\n        // - 只在 test 和 文件名匹配 中使用正则表达式\n        // - 在 include 和 exclude 中使用绝对路径数组\n        // - 尽量避免 exclude，更倾向于使用 include\n\n        issuer: { test, include, exclude },\n        // issuer 条件（导入源）\n\n        enforce: \"pre\",\n        enforce: \"post\",\n        // 标识应用这些规则，即使规则覆盖（高级选项）\n\n        loader: \"babel-loader\",\n        // 应该应用的 loader，它相对上下文解析\n        // 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的\n        // 查看 webpack 1 升级指南。\n\n        options: {\n          presets: [\"es2015\"]\n        },\n        // loader 的可选项\n      },\n\n      {\n        test: /\\.html$/,\n        test: \"\\.html$\"\n\n        use: [\n          // 应用多个 loader 和选项\n          \"htmllint-loader\",\n          {\n            loader: \"html-loader\",\n            options: {\n              /* ... */\n            }\n          }\n        ]\n      },\n\n      { oneOf: [ /* rules */ ] },\n      // 只使用这些嵌套规则之一\n\n      { rules: [ /* rules */ ] },\n      // 使用所有这些嵌套规则（合并可用条件）\n\n      { resource: { and: [ /* 条件 */ ] } },\n      // 仅当所有条件都匹配时才匹配\n\n      { resource: { or: [ /* 条件 */ ] } },\n      { resource: [ /* 条件 */ ] },\n      // 任意条件匹配时匹配（默认为数组）\n\n      { resource: { not: /* 条件 */ } }\n      // 条件不匹配时匹配\n    ],\n\n    /* 高级模块配置（点击展示） */\n\n     noParse: [\n      /special-library\\.js$/\n    ],\n    // 不解析这里的模块\n\n    unknownContextRequest: \".\",\n    unknownContextRecursive: true,\n    unknownContextRegExp: /^\\.\\/.*$/,\n    unknownContextCritical: true,\n    exprContextRequest: \".\",\n    exprContextRegExp: /^\\.\\/.*$/,\n    exprContextRecursive: true,\n    exprContextCritical: true,\n    wrappedContextRegExp: /.*/,\n    wrappedContextRecursive: true,\n    wrappedContextCritical: false,\n    // 指定动态请求的默认行为\n  },\n\n  resolve: {\n    // 解析模块请求的选项\n    // （不适用于对 loader 解析）\n\n    modules: [\n      \"node_modules\",\n      path.resolve(__dirname, \"app\")\n    ],\n    // 用于查找模块的目录\n\n    extensions: [\".js\", \".json\", \".jsx\", \".css\"],\n    // 使用的扩展名\n\n    alias: {\n      // 模块别名列表\n\n      \"module\": \"new-module\",\n      // 起别名：\"module\" -> \"new-module\" 和 \"module/path/file\" -> \"new-module/path/file\"\n\n      \"only-module$\": \"new-module\",\n      // 起别名 \"only-module\" -> \"new-module\"，但不匹配 \"only-module/path/file\" -> \"new-module/path/file\"\n\n      \"module\": path.resolve(__dirname, \"app/third/module.js\"),\n      // 起别名 \"module\" -> \"./app/third/module.js\" 和 \"module/file\" 会导致错误\n      // 模块别名相对于当前上下文导入\n    },\n    /* 可供选择的别名语法（点击展示） */\n  alias: [\n      {\n        name: \"module\",\n        // 旧的请求\n\n        alias: \"new-module\",\n        // 新的请求\n\n        onlyModule: true\n        // 如果为 true，只有 \"module\" 是别名\n        // 如果为 false，\"module/inner/path\" 也是别名\n      }\n    ],\n\n    /* 高级解析选项（点击展示） */\n\n    symlinks: true,\n    // 遵循符号链接(symlinks)到新位置\n\n    descriptionFiles: [\"package.json\"],\n    // 从 package 描述中读取的文件\n\n    mainFields: [\"main\"],\n    // 从描述文件中读取的属性\n    // 当请求文件夹时\n\n    aliasFields: [\"browser\"],\n    // 从描述文件中读取的属性\n    // 以对此 package 的请求起别名\n\n    enforceExtension: false,\n    // 如果为 true，请求必不包括扩展名\n    // 如果为 false，请求可以包括扩展名\n\n    moduleExtensions: [\"-module\"],\n    enforceModuleExtension: false,\n    // 类似 extensions/enforceExtension，但是用模块名替换文件\n\n    unsafeCache: true,\n    unsafeCache: {},\n    // 为解析的请求启用缓存\n    // 这是不安全，因为文件夹结构可能会改动\n    // 但是性能改善是很大的\n\n    cachePredicate: (path, request) => true,\n    // 用于选择缓存请求的谓词函数\n\n    plugins: [\n      // ...\n    ]\n    // 应用于解析器的附加插件\n  },\n\n  performance: {\n    hints: \"warning\", //  or \"error\" or false\n    maxAssetSize: 200000, // 整数类型（以字节为单位）\n    maxEntrypointSize: 400000, // 整数类型（以字节为单位）\n    assetFilter: function(assetFilename) {\n      // 提供资源文件名的断言函数\n      return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');\n    }\n  },\n\n   devtool: \"source-map\", // \n  // devtool: \"inline-source-map\", // 嵌入到源文件中\n  // devtool: \"eval-source-map\", // 将 SourceMap 嵌入到每个模块中\n  // devtool: \"hidden-source-map\", // SourceMap 不在源文件中引用\n  // devtool: \"cheap-source-map\", // 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)\n  // devtool: \"cheap-module-source-map\", // 有模块映射(module mappings)的 SourceMap 低级变体\n  // devtool: \"eval\", // 没有模块映射，而是命名模块。以牺牲细节达到最快。\n  // 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试\n  // 牺牲了构建速度的 `source-map' 是最详细的。\n\n  context: __dirname, // string（绝对路径！）\n  // webpack 的主目录\n  // entry 和 module.rules.loader 选项\n  // 相对于此目录解析\n\n  target: \"web\", // 默认\n  // 包(bundle)应该运行的环境\n  // 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)\n\n  externals: [\"react\", /^@angular\\//],\n  // 不要遵循/打包这些模块，而是在运行时从环境中请求他们\n\n  stats: \"errors-only\",\n  // 精确控制要显示的 bundle 信息\n\n  devServer: {\n    proxy: { // 代理URL到后端开发服务器\n      '/api': 'http://localhost:3000'\n      auth: false //授权\n      changeOrigin: true //跨域\n    },\n    contentBase: path.join(__dirname, 'public'), // boolean | string | array, 静态文件位置\n    compress: true, // 启用gzip压缩\n    historyApiFallback: true, // 提供重定向响应 404 -- 如果使用 \n    hot: true, // 热加载\n    https: false, // 是否是https\n    noInfo: true, // 只有错误并警告热重新加载\n    // ...\n  },\n\n  plugins: [\n    // ...\n  ],\n  // 附加插件列表\n\n\n  /* 高级配置（点击展示） */\n\n  resolveLoader: { /* 等同于 resolve */ }\n  // 独立解析选项的 loader\n\n  parallelism: 1, // number\n  // 限制并行处理模块的数量\n\n  profile: true, // boolean\n  // 捕获时机信息\n\n  bail: true, //boolean\n  // 在第一个错误出错时抛出，而不是无视错误。\n\n  cache: false, // boolean\n  // 禁用/启用缓存\n\n  watch: true, // boolean\n  // 启用观察\n\n  watchOptions: {\n    aggregateTimeout: 1000, // in ms\n    // 将多个更改聚合到单个重构建(rebuild)\n\n    poll: true,\n    poll: 500, // 间隔单位 ms\n    // 启用轮询观察模式\n    // 必须用在不通知更改的文件系统中\n    // 即 nfs shares（译者注：Network FileSystem，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）\n  },\n\n  node: {\n    // 在非node环境下填充或模拟运行node环境\n\n    console: false, // boolean | \"mock\"\n    global: true, // boolean | \"mock\"\n    process: true, // boolean\n    __filename: \"mock\", // boolean | \"mock\"\n    __dirname: \"mock\", // boolean | \"mock\"\n    Buffer: true, // boolean | \"mock\"\n    setImmediate: true // boolean | \"mock\" | \"empty\"\n  },\n\n  recordsPath: path.resolve(__dirname, \"build/records.json\"),\n  recordsInputPath: path.resolve(__dirname, \"build/records.json\"),\n  recordsOutputPath: path.resolve(__dirname, \"build/records.json\"),\n  // TODO\n\n}\n```\n\nWebpack 的工作流\n从 context 文件夹开始（框架内没有配置，那就默认为 ''）\n查找 entry 对应的文件\n(找到文件之后) 读取文件内容. 每当遇到 import (ES6) 或者 require() (Node) 依赖项时, 它会解析这些代码, 并且打包到最终构建里. 接着它会不断递归搜索实际需要的依赖项, 直到它到达了“树”的底部\n递归完所有依赖之后, Webpack 会将所有东西打包到 output.path 对应的目录, 并将 output.filename 的值作为最终的资源名 ([name] 表示使用 entry 项的 key)\n","source":"_posts/webpack-配置理解.md","raw":"---\ntitle: webpack 配置理解\ndate: 2018-05-15 13:48:01\ntags: webpack\ncategories: 学习笔记\n---\nwebpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。\n\nwebpack 4 虽然已经不需要引入一个配置文件。但是，webpack在实际的应用中还是会配置很多东西。\n下面就是对webpack的配置分析：\n从webpack文档中找出路配置，进行了分析\n\n```javascript\nconst path = require('path');\n\nmodule.exports = {\n  mode: \"production\", // \"production\" | \"development\" | \"none\"\n  // webpack有三种模式：生产模式，开发模式，none；选择模式告诉webpack相应地使用其内置优化。\n\n  entry: \"./app/entry\", // string | object | array\n  // webpack的入口文件，这里应用程序开始执行\n  // webpack 开始打包\n\n  output: {\n    // webpack 如何输出结果的相关选项\n\n    path: path.resolve(__dirname, \"dist\"), // string\n    // 所有输出文件的目标路径\n    // 必须是绝对路径（使用 Node.js 的 path 模块）\n\n    filename: \"bundle.js\", // string\n    // 「入口分块(entry chunk)」的文件名模板（出口分块？）\n\n    publicPath: \"/assets/\", // string\n    // 输出解析文件的目录，url 相对于 HTML 页面\n\n    library: \"MyLibrary\", // string,\n    // 导出库(exported library)的名称\n\n    libraryTarget: \"umd\", // 通用模块定义\n    // 导出库(exported library)的类型\n\n    /* 高级输出配置 */\n\n    pathinfo: true, // boolean\n    // 在生成代码时，引入相关的模块、导出、请求等有帮助的路径信息。\n\n    chunkFilename: \"[id].js\",\n    chunkFilename: \"[chunkhash].js\", // 长效缓存(/guides/caching)\n    // 「附加分块(additional chunk)」的文件名模板\n\n    jsonpFunction: \"myWebpackJsonp\", // string\n    // 用于加载分块的 JSONP 函数名\n\n    sourceMapFilename: \"[file].map\", // string\n    sourceMapFilename: \"sourcemaps/[file].map\", // string\n    // 「source map 位置」的文件名模板\n\n    devtoolModuleFilenameTemplate: \"webpack:///[resource-path]\", // string\n    // 「devtool 中模块」的文件名模板\n\n    devtoolFallbackModuleFilenameTemplate: \"webpack:///[resource-path]?[hash]\", // string\n    // 「devtool 中模块」的文件名模板（用于冲突）\n\n    umdNamedDefine: true, // boolean\n    // 在 UMD 库中使用命名的 AMD 模块\n\n    crossOriginLoading: \"use-credentials\", // 枚举\n    crossOriginLoading: \"anonymous\",\n    crossOriginLoading: false,\n    // 指定运行时如何发出跨域请求问题\n\n    /* 专家级输出配置（自行承担风险） */\n\n    devtoolLineToLine: {\n      test: /\\.jsx$/\n    },\n    // 为这些模块使用 1:1 映射 SourceMaps（快速）\n\n    hotUpdateMainFilename: \"[hash].hot-update.json\", // string\n    // 「HMR 清单」的文件名模板\n\n    hotUpdateChunkFilename: \"[id].[hash].hot-update.js\", // string\n    // 「HMR 分块」的文件名模板\n\n    sourcePrefix: \"\\t\", // string\n    // 包内前置式模块资源具有更好可读性\n  },\n\n  module: {\n    // 关于模块配置\n\n    rules: [\n      // 模块规则（配置 loader、解析器等选项）\n\n      {\n        test: /\\.jsx?$/,\n        include: [\n          path.resolve(__dirname, \"app\")\n        ],\n        exclude: [\n          path.resolve(__dirname, \"app/demo-files\")\n        ],\n        // 这里是匹配条件，每个选项都接收一个正则表达式或字符串\n        // test 和 include 具有相同的作用，都是必须匹配选项\n        // exclude 是必不匹配选项（优先于 test 和 include）\n        // 最佳实践：\n        // - 只在 test 和 文件名匹配 中使用正则表达式\n        // - 在 include 和 exclude 中使用绝对路径数组\n        // - 尽量避免 exclude，更倾向于使用 include\n\n        issuer: { test, include, exclude },\n        // issuer 条件（导入源）\n\n        enforce: \"pre\",\n        enforce: \"post\",\n        // 标识应用这些规则，即使规则覆盖（高级选项）\n\n        loader: \"babel-loader\",\n        // 应该应用的 loader，它相对上下文解析\n        // 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的\n        // 查看 webpack 1 升级指南。\n\n        options: {\n          presets: [\"es2015\"]\n        },\n        // loader 的可选项\n      },\n\n      {\n        test: /\\.html$/,\n        test: \"\\.html$\"\n\n        use: [\n          // 应用多个 loader 和选项\n          \"htmllint-loader\",\n          {\n            loader: \"html-loader\",\n            options: {\n              /* ... */\n            }\n          }\n        ]\n      },\n\n      { oneOf: [ /* rules */ ] },\n      // 只使用这些嵌套规则之一\n\n      { rules: [ /* rules */ ] },\n      // 使用所有这些嵌套规则（合并可用条件）\n\n      { resource: { and: [ /* 条件 */ ] } },\n      // 仅当所有条件都匹配时才匹配\n\n      { resource: { or: [ /* 条件 */ ] } },\n      { resource: [ /* 条件 */ ] },\n      // 任意条件匹配时匹配（默认为数组）\n\n      { resource: { not: /* 条件 */ } }\n      // 条件不匹配时匹配\n    ],\n\n    /* 高级模块配置（点击展示） */\n\n     noParse: [\n      /special-library\\.js$/\n    ],\n    // 不解析这里的模块\n\n    unknownContextRequest: \".\",\n    unknownContextRecursive: true,\n    unknownContextRegExp: /^\\.\\/.*$/,\n    unknownContextCritical: true,\n    exprContextRequest: \".\",\n    exprContextRegExp: /^\\.\\/.*$/,\n    exprContextRecursive: true,\n    exprContextCritical: true,\n    wrappedContextRegExp: /.*/,\n    wrappedContextRecursive: true,\n    wrappedContextCritical: false,\n    // 指定动态请求的默认行为\n  },\n\n  resolve: {\n    // 解析模块请求的选项\n    // （不适用于对 loader 解析）\n\n    modules: [\n      \"node_modules\",\n      path.resolve(__dirname, \"app\")\n    ],\n    // 用于查找模块的目录\n\n    extensions: [\".js\", \".json\", \".jsx\", \".css\"],\n    // 使用的扩展名\n\n    alias: {\n      // 模块别名列表\n\n      \"module\": \"new-module\",\n      // 起别名：\"module\" -> \"new-module\" 和 \"module/path/file\" -> \"new-module/path/file\"\n\n      \"only-module$\": \"new-module\",\n      // 起别名 \"only-module\" -> \"new-module\"，但不匹配 \"only-module/path/file\" -> \"new-module/path/file\"\n\n      \"module\": path.resolve(__dirname, \"app/third/module.js\"),\n      // 起别名 \"module\" -> \"./app/third/module.js\" 和 \"module/file\" 会导致错误\n      // 模块别名相对于当前上下文导入\n    },\n    /* 可供选择的别名语法（点击展示） */\n  alias: [\n      {\n        name: \"module\",\n        // 旧的请求\n\n        alias: \"new-module\",\n        // 新的请求\n\n        onlyModule: true\n        // 如果为 true，只有 \"module\" 是别名\n        // 如果为 false，\"module/inner/path\" 也是别名\n      }\n    ],\n\n    /* 高级解析选项（点击展示） */\n\n    symlinks: true,\n    // 遵循符号链接(symlinks)到新位置\n\n    descriptionFiles: [\"package.json\"],\n    // 从 package 描述中读取的文件\n\n    mainFields: [\"main\"],\n    // 从描述文件中读取的属性\n    // 当请求文件夹时\n\n    aliasFields: [\"browser\"],\n    // 从描述文件中读取的属性\n    // 以对此 package 的请求起别名\n\n    enforceExtension: false,\n    // 如果为 true，请求必不包括扩展名\n    // 如果为 false，请求可以包括扩展名\n\n    moduleExtensions: [\"-module\"],\n    enforceModuleExtension: false,\n    // 类似 extensions/enforceExtension，但是用模块名替换文件\n\n    unsafeCache: true,\n    unsafeCache: {},\n    // 为解析的请求启用缓存\n    // 这是不安全，因为文件夹结构可能会改动\n    // 但是性能改善是很大的\n\n    cachePredicate: (path, request) => true,\n    // 用于选择缓存请求的谓词函数\n\n    plugins: [\n      // ...\n    ]\n    // 应用于解析器的附加插件\n  },\n\n  performance: {\n    hints: \"warning\", //  or \"error\" or false\n    maxAssetSize: 200000, // 整数类型（以字节为单位）\n    maxEntrypointSize: 400000, // 整数类型（以字节为单位）\n    assetFilter: function(assetFilename) {\n      // 提供资源文件名的断言函数\n      return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');\n    }\n  },\n\n   devtool: \"source-map\", // \n  // devtool: \"inline-source-map\", // 嵌入到源文件中\n  // devtool: \"eval-source-map\", // 将 SourceMap 嵌入到每个模块中\n  // devtool: \"hidden-source-map\", // SourceMap 不在源文件中引用\n  // devtool: \"cheap-source-map\", // 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)\n  // devtool: \"cheap-module-source-map\", // 有模块映射(module mappings)的 SourceMap 低级变体\n  // devtool: \"eval\", // 没有模块映射，而是命名模块。以牺牲细节达到最快。\n  // 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试\n  // 牺牲了构建速度的 `source-map' 是最详细的。\n\n  context: __dirname, // string（绝对路径！）\n  // webpack 的主目录\n  // entry 和 module.rules.loader 选项\n  // 相对于此目录解析\n\n  target: \"web\", // 默认\n  // 包(bundle)应该运行的环境\n  // 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)\n\n  externals: [\"react\", /^@angular\\//],\n  // 不要遵循/打包这些模块，而是在运行时从环境中请求他们\n\n  stats: \"errors-only\",\n  // 精确控制要显示的 bundle 信息\n\n  devServer: {\n    proxy: { // 代理URL到后端开发服务器\n      '/api': 'http://localhost:3000'\n      auth: false //授权\n      changeOrigin: true //跨域\n    },\n    contentBase: path.join(__dirname, 'public'), // boolean | string | array, 静态文件位置\n    compress: true, // 启用gzip压缩\n    historyApiFallback: true, // 提供重定向响应 404 -- 如果使用 \n    hot: true, // 热加载\n    https: false, // 是否是https\n    noInfo: true, // 只有错误并警告热重新加载\n    // ...\n  },\n\n  plugins: [\n    // ...\n  ],\n  // 附加插件列表\n\n\n  /* 高级配置（点击展示） */\n\n  resolveLoader: { /* 等同于 resolve */ }\n  // 独立解析选项的 loader\n\n  parallelism: 1, // number\n  // 限制并行处理模块的数量\n\n  profile: true, // boolean\n  // 捕获时机信息\n\n  bail: true, //boolean\n  // 在第一个错误出错时抛出，而不是无视错误。\n\n  cache: false, // boolean\n  // 禁用/启用缓存\n\n  watch: true, // boolean\n  // 启用观察\n\n  watchOptions: {\n    aggregateTimeout: 1000, // in ms\n    // 将多个更改聚合到单个重构建(rebuild)\n\n    poll: true,\n    poll: 500, // 间隔单位 ms\n    // 启用轮询观察模式\n    // 必须用在不通知更改的文件系统中\n    // 即 nfs shares（译者注：Network FileSystem，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）\n  },\n\n  node: {\n    // 在非node环境下填充或模拟运行node环境\n\n    console: false, // boolean | \"mock\"\n    global: true, // boolean | \"mock\"\n    process: true, // boolean\n    __filename: \"mock\", // boolean | \"mock\"\n    __dirname: \"mock\", // boolean | \"mock\"\n    Buffer: true, // boolean | \"mock\"\n    setImmediate: true // boolean | \"mock\" | \"empty\"\n  },\n\n  recordsPath: path.resolve(__dirname, \"build/records.json\"),\n  recordsInputPath: path.resolve(__dirname, \"build/records.json\"),\n  recordsOutputPath: path.resolve(__dirname, \"build/records.json\"),\n  // TODO\n\n}\n```\n\nWebpack 的工作流\n从 context 文件夹开始（框架内没有配置，那就默认为 ''）\n查找 entry 对应的文件\n(找到文件之后) 读取文件内容. 每当遇到 import (ES6) 或者 require() (Node) 依赖项时, 它会解析这些代码, 并且打包到最终构建里. 接着它会不断递归搜索实际需要的依赖项, 直到它到达了“树”的底部\n递归完所有依赖之后, Webpack 会将所有东西打包到 output.path 对应的目录, 并将 output.filename 的值作为最终的资源名 ([name] 表示使用 entry 项的 key)\n","slug":"webpack-配置理解","published":1,"updated":"2018-05-15T06:14:09.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg3003jd6sp1ysrh9sg","content":"<p>webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>\n<p>webpack 4 虽然已经不需要引入一个配置文件。但是，webpack在实际的应用中还是会配置很多东西。<br>下面就是对webpack的配置分析：<br>从webpack文档中找出路配置，进行了分析</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  mode: <span class=\"string\">\"production\"</span>, <span class=\"comment\">// \"production\" | \"development\" | \"none\"</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack有三种模式：生产模式，开发模式，none；选择模式告诉webpack相应地使用其内置优化。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  entry: <span class=\"string\">\"./app/entry\"</span>, <span class=\"comment\">// string | object | array</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack的入口文件，这里应用程序开始执行</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack 开始打包</span></span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// webpack 如何输出结果的相关选项</span></span><br><span class=\"line\"></span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">\"dist\"</span>), <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 所有输出文件的目标路径</span></span><br><span class=\"line\">    <span class=\"comment\">// 必须是绝对路径（使用 Node.js 的 path 模块）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    filename: <span class=\"string\">\"bundle.js\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「入口分块(entry chunk)」的文件名模板（出口分块？）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    publicPath: <span class=\"string\">\"/assets/\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 输出解析文件的目录，url 相对于 HTML 页面</span></span><br><span class=\"line\"></span><br><span class=\"line\">    library: <span class=\"string\">\"MyLibrary\"</span>, <span class=\"comment\">// string,</span></span><br><span class=\"line\">    <span class=\"comment\">// 导出库(exported library)的名称</span></span><br><span class=\"line\"></span><br><span class=\"line\">    libraryTarget: <span class=\"string\">\"umd\"</span>, <span class=\"comment\">// 通用模块定义</span></span><br><span class=\"line\">    <span class=\"comment\">// 导出库(exported library)的类型</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级输出配置 */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    pathinfo: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// 在生成代码时，引入相关的模块、导出、请求等有帮助的路径信息。</span></span><br><span class=\"line\"></span><br><span class=\"line\">    chunkFilename: <span class=\"string\">\"[id].js\"</span>,</span><br><span class=\"line\">    chunkFilename: <span class=\"string\">\"[chunkhash].js\"</span>, <span class=\"comment\">// 长效缓存(/guides/caching)</span></span><br><span class=\"line\">    <span class=\"comment\">// 「附加分块(additional chunk)」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    jsonpFunction: <span class=\"string\">\"myWebpackJsonp\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 用于加载分块的 JSONP 函数名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    sourceMapFilename: <span class=\"string\">\"[file].map\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    sourceMapFilename: <span class=\"string\">\"sourcemaps/[file].map\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「source map 位置」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolModuleFilenameTemplate: <span class=\"string\">\"webpack:///[resource-path]\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「devtool 中模块」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolFallbackModuleFilenameTemplate: <span class=\"string\">\"webpack:///[resource-path]?[hash]\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「devtool 中模块」的文件名模板（用于冲突）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    umdNamedDefine: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// 在 UMD 库中使用命名的 AMD 模块</span></span><br><span class=\"line\"></span><br><span class=\"line\">    crossOriginLoading: <span class=\"string\">\"use-credentials\"</span>, <span class=\"comment\">// 枚举</span></span><br><span class=\"line\">    crossOriginLoading: <span class=\"string\">\"anonymous\"</span>,</span><br><span class=\"line\">    crossOriginLoading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 指定运行时如何发出跨域请求问题</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 专家级输出配置（自行承担风险） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolLineToLine: &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.jsx$/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 为这些模块使用 1:1 映射 SourceMaps（快速）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    hotUpdateMainFilename: <span class=\"string\">\"[hash].hot-update.json\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「HMR 清单」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    hotUpdateChunkFilename: <span class=\"string\">\"[id].[hash].hot-update.js\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「HMR 分块」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    sourcePrefix: <span class=\"string\">\"\\t\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 包内前置式模块资源具有更好可读性</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 关于模块配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 模块规则（配置 loader、解析器等选项）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        include: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">\"app\"</span>)</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        exclude: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">\"app/demo-files\"</span>)</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"comment\">// 这里是匹配条件，每个选项都接收一个正则表达式或字符串</span></span><br><span class=\"line\">        <span class=\"comment\">// test 和 include 具有相同的作用，都是必须匹配选项</span></span><br><span class=\"line\">        <span class=\"comment\">// exclude 是必不匹配选项（优先于 test 和 include）</span></span><br><span class=\"line\">        <span class=\"comment\">// 最佳实践：</span></span><br><span class=\"line\">        <span class=\"comment\">// - 只在 test 和 文件名匹配 中使用正则表达式</span></span><br><span class=\"line\">        <span class=\"comment\">// - 在 include 和 exclude 中使用绝对路径数组</span></span><br><span class=\"line\">        <span class=\"comment\">// - 尽量避免 exclude，更倾向于使用 include</span></span><br><span class=\"line\"></span><br><span class=\"line\">        issuer: &#123; test, include, exclude &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// issuer 条件（导入源）</span></span><br><span class=\"line\"></span><br><span class=\"line\">        enforce: <span class=\"string\">\"pre\"</span>,</span><br><span class=\"line\">        enforce: <span class=\"string\">\"post\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 标识应用这些规则，即使规则覆盖（高级选项）</span></span><br><span class=\"line\"></span><br><span class=\"line\">        loader: <span class=\"string\">\"babel-loader\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 应该应用的 loader，它相对上下文解析</span></span><br><span class=\"line\">        <span class=\"comment\">// 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的</span></span><br><span class=\"line\">        <span class=\"comment\">// 查看 webpack 1 升级指南。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          presets: [<span class=\"string\">\"es2015\"</span>]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// loader 的可选项</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        test: <span class=\"string\">\"\\.html$\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// 应用多个 loader 和选项</span></span><br><span class=\"line\">          <span class=\"string\">\"htmllint-loader\"</span>,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">\"html-loader\"</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">oneOf</span>: [ <span class=\"comment\">/* rules */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 只使用这些嵌套规则之一</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">rules</span>: [ <span class=\"comment\">/* rules */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 使用所有这些嵌套规则（合并可用条件）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">and</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125; &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 仅当所有条件都匹配时才匹配</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">or</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125; &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 任意条件匹配时匹配（默认为数组）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">not</span>: <span class=\"comment\">/* 条件 */</span> &#125; &#125;</span><br><span class=\"line\">      <span class=\"comment\">// 条件不匹配时匹配</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级模块配置（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">     noParse: [</span><br><span class=\"line\">      /special-library\\.js$/</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// 不解析这里的模块</span></span><br><span class=\"line\"></span><br><span class=\"line\">    unknownContextRequest: <span class=\"string\">\".\"</span>,</span><br><span class=\"line\">    unknownContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    unknownContextRegExp: <span class=\"regexp\">/^\\.\\/.*$/</span>,</span><br><span class=\"line\">    unknownContextCritical: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    exprContextRequest: <span class=\"string\">\".\"</span>,</span><br><span class=\"line\">    exprContextRegExp: <span class=\"regexp\">/^\\.\\/.*$/</span>,</span><br><span class=\"line\">    exprContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    exprContextCritical: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    wrappedContextRegExp: <span class=\"regexp\">/.*/</span>,</span><br><span class=\"line\">    wrappedContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    wrappedContextCritical: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 指定动态请求的默认行为</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 解析模块请求的选项</span></span><br><span class=\"line\">    <span class=\"comment\">// （不适用于对 loader 解析）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    modules: [</span><br><span class=\"line\">      <span class=\"string\">\"node_modules\"</span>,</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">\"app\"</span>)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// 用于查找模块的目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">\".js\"</span>, <span class=\"string\">\".json\"</span>, <span class=\"string\">\".jsx\"</span>, <span class=\"string\">\".css\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 使用的扩展名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 模块别名列表</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"module\"</span>: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 起别名：\"module\" -&gt; \"new-module\" 和 \"module/path/file\" -&gt; \"new-module/path/file\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"only-module$\"</span>: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 起别名 \"only-module\" -&gt; \"new-module\"，但不匹配 \"only-module/path/file\" -&gt; \"new-module/path/file\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"module\"</span>: path.resolve(__dirname, <span class=\"string\">\"app/third/module.js\"</span>),</span><br><span class=\"line\">      <span class=\"comment\">// 起别名 \"module\" -&gt; \"./app/third/module.js\" 和 \"module/file\" 会导致错误</span></span><br><span class=\"line\">      <span class=\"comment\">// 模块别名相对于当前上下文导入</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/* 可供选择的别名语法（点击展示） */</span></span><br><span class=\"line\">  alias: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">\"module\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 旧的请求</span></span><br><span class=\"line\"></span><br><span class=\"line\">        alias: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 新的请求</span></span><br><span class=\"line\"></span><br><span class=\"line\">        onlyModule: <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"comment\">// 如果为 true，只有 \"module\" 是别名</span></span><br><span class=\"line\">        <span class=\"comment\">// 如果为 false，\"module/inner/path\" 也是别名</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级解析选项（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    symlinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 遵循符号链接(symlinks)到新位置</span></span><br><span class=\"line\"></span><br><span class=\"line\">    descriptionFiles: [<span class=\"string\">\"package.json\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从 package 描述中读取的文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    mainFields: [<span class=\"string\">\"main\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从描述文件中读取的属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 当请求文件夹时</span></span><br><span class=\"line\"></span><br><span class=\"line\">    aliasFields: [<span class=\"string\">\"browser\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从描述文件中读取的属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 以对此 package 的请求起别名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    enforceExtension: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 如果为 true，请求必不包括扩展名</span></span><br><span class=\"line\">    <span class=\"comment\">// 如果为 false，请求可以包括扩展名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    moduleExtensions: [<span class=\"string\">\"-module\"</span>],</span><br><span class=\"line\">    enforceModuleExtension: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 类似 extensions/enforceExtension，但是用模块名替换文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    unsafeCache: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    unsafeCache: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 为解析的请求启用缓存</span></span><br><span class=\"line\">    <span class=\"comment\">// 这是不安全，因为文件夹结构可能会改动</span></span><br><span class=\"line\">    <span class=\"comment\">// 但是性能改善是很大的</span></span><br><span class=\"line\"></span><br><span class=\"line\">    cachePredicate: <span class=\"function\">(<span class=\"params\">path, request</span>) =&gt;</span> <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 用于选择缓存请求的谓词函数</span></span><br><span class=\"line\"></span><br><span class=\"line\">    plugins: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">    <span class=\"comment\">// 应用于解析器的附加插件</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  performance: &#123;</span><br><span class=\"line\">    hints: <span class=\"string\">\"warning\"</span>, <span class=\"comment\">//  or \"error\" or false</span></span><br><span class=\"line\">    maxAssetSize: <span class=\"number\">200000</span>, <span class=\"comment\">// 整数类型（以字节为单位）</span></span><br><span class=\"line\">    maxEntrypointSize: <span class=\"number\">400000</span>, <span class=\"comment\">// 整数类型（以字节为单位）</span></span><br><span class=\"line\">    assetFilter: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">assetFilename</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 提供资源文件名的断言函数</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> assetFilename.endsWith(<span class=\"string\">'.css'</span>) || assetFilename.endsWith(<span class=\"string\">'.js'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">   devtool: <span class=\"string\">\"source-map\"</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"inline-source-map\", // 嵌入到源文件中</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"eval-source-map\", // 将 SourceMap 嵌入到每个模块中</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"hidden-source-map\", // SourceMap 不在源文件中引用</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"cheap-source-map\", // 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"cheap-module-source-map\", // 有模块映射(module mappings)的 SourceMap 低级变体</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"eval\", // 没有模块映射，而是命名模块。以牺牲细节达到最快。</span></span><br><span class=\"line\">  <span class=\"comment\">// 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试</span></span><br><span class=\"line\">  <span class=\"comment\">// 牺牲了构建速度的 `source-map' 是最详细的。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  context: __dirname, <span class=\"comment\">// string（绝对路径！）</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack 的主目录</span></span><br><span class=\"line\">  <span class=\"comment\">// entry 和 module.rules.loader 选项</span></span><br><span class=\"line\">  <span class=\"comment\">// 相对于此目录解析</span></span><br><span class=\"line\"></span><br><span class=\"line\">  target: <span class=\"string\">\"web\"</span>, <span class=\"comment\">// 默认</span></span><br><span class=\"line\">  <span class=\"comment\">// 包(bundle)应该运行的环境</span></span><br><span class=\"line\">  <span class=\"comment\">// 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  externals: [<span class=\"string\">\"react\"</span>, /^@angular\\<span class=\"comment\">//],</span></span><br><span class=\"line\">  <span class=\"comment\">// 不要遵循/打包这些模块，而是在运行时从环境中请求他们</span></span><br><span class=\"line\"></span><br><span class=\"line\">  stats: <span class=\"string\">\"errors-only\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 精确控制要显示的 bundle 信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    proxy: &#123; <span class=\"comment\">// 代理URL到后端开发服务器</span></span><br><span class=\"line\">      <span class=\"string\">'/api'</span>: <span class=\"string\">'http://localhost:3000'</span></span><br><span class=\"line\">      auth: <span class=\"literal\">false</span> <span class=\"comment\">//授权</span></span><br><span class=\"line\">      changeOrigin: <span class=\"literal\">true</span> <span class=\"comment\">//跨域</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    contentBase: path.join(__dirname, <span class=\"string\">'public'</span>), <span class=\"comment\">// boolean | string | array, 静态文件位置</span></span><br><span class=\"line\">    compress: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用gzip压缩</span></span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>, <span class=\"comment\">// 提供重定向响应 404 -- 如果使用 </span></span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>, <span class=\"comment\">// 热加载</span></span><br><span class=\"line\">    https: <span class=\"literal\">false</span>, <span class=\"comment\">// 是否是https</span></span><br><span class=\"line\">    noInfo: <span class=\"literal\">true</span>, <span class=\"comment\">// 只有错误并警告热重新加载</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// 附加插件列表</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* 高级配置（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  resolveLoader: &#123; <span class=\"comment\">/* 等同于 resolve */</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 独立解析选项的 loader</span></span><br><span class=\"line\"></span><br><span class=\"line\">  parallelism: <span class=\"number\">1</span>, <span class=\"comment\">// number</span></span><br><span class=\"line\">  <span class=\"comment\">// 限制并行处理模块的数量</span></span><br><span class=\"line\"></span><br><span class=\"line\">  profile: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 捕获时机信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">  bail: <span class=\"literal\">true</span>, <span class=\"comment\">//boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 在第一个错误出错时抛出，而不是无视错误。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  cache: <span class=\"literal\">false</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 禁用/启用缓存</span></span><br><span class=\"line\"></span><br><span class=\"line\">  watch: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 启用观察</span></span><br><span class=\"line\"></span><br><span class=\"line\">  watchOptions: &#123;</span><br><span class=\"line\">    aggregateTimeout: <span class=\"number\">1000</span>, <span class=\"comment\">// in ms</span></span><br><span class=\"line\">    <span class=\"comment\">// 将多个更改聚合到单个重构建(rebuild)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    poll: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    poll: <span class=\"number\">500</span>, <span class=\"comment\">// 间隔单位 ms</span></span><br><span class=\"line\">    <span class=\"comment\">// 启用轮询观察模式</span></span><br><span class=\"line\">    <span class=\"comment\">// 必须用在不通知更改的文件系统中</span></span><br><span class=\"line\">    <span class=\"comment\">// 即 nfs shares（译者注：Network FileSystem，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  node: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 在非node环境下填充或模拟运行node环境</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    global: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    process: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    __filename: <span class=\"string\">\"mock\"</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    __dirname: <span class=\"string\">\"mock\"</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    Buffer: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    setImmediate: <span class=\"literal\">true</span> <span class=\"comment\">// boolean | \"mock\" | \"empty\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  recordsPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  recordsInputPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  recordsOutputPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  <span class=\"comment\">// TODO</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Webpack 的工作流<br>从 context 文件夹开始（框架内没有配置，那就默认为 ‘’）<br>查找 entry 对应的文件<br>(找到文件之后) 读取文件内容. 每当遇到 import (ES6) 或者 require() (Node) 依赖项时, 它会解析这些代码, 并且打包到最终构建里. 接着它会不断递归搜索实际需要的依赖项, 直到它到达了“树”的底部<br>递归完所有依赖之后, Webpack 会将所有东西打包到 output.path 对应的目录, 并将 output.filename 的值作为最终的资源名 ([name] 表示使用 entry 项的 key)</p>\n","site":{"data":{}},"excerpt":"","more":"<p>webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>\n<p>webpack 4 虽然已经不需要引入一个配置文件。但是，webpack在实际的应用中还是会配置很多东西。<br>下面就是对webpack的配置分析：<br>从webpack文档中找出路配置，进行了分析</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  mode: <span class=\"string\">\"production\"</span>, <span class=\"comment\">// \"production\" | \"development\" | \"none\"</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack有三种模式：生产模式，开发模式，none；选择模式告诉webpack相应地使用其内置优化。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  entry: <span class=\"string\">\"./app/entry\"</span>, <span class=\"comment\">// string | object | array</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack的入口文件，这里应用程序开始执行</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack 开始打包</span></span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// webpack 如何输出结果的相关选项</span></span><br><span class=\"line\"></span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">\"dist\"</span>), <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 所有输出文件的目标路径</span></span><br><span class=\"line\">    <span class=\"comment\">// 必须是绝对路径（使用 Node.js 的 path 模块）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    filename: <span class=\"string\">\"bundle.js\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「入口分块(entry chunk)」的文件名模板（出口分块？）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    publicPath: <span class=\"string\">\"/assets/\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 输出解析文件的目录，url 相对于 HTML 页面</span></span><br><span class=\"line\"></span><br><span class=\"line\">    library: <span class=\"string\">\"MyLibrary\"</span>, <span class=\"comment\">// string,</span></span><br><span class=\"line\">    <span class=\"comment\">// 导出库(exported library)的名称</span></span><br><span class=\"line\"></span><br><span class=\"line\">    libraryTarget: <span class=\"string\">\"umd\"</span>, <span class=\"comment\">// 通用模块定义</span></span><br><span class=\"line\">    <span class=\"comment\">// 导出库(exported library)的类型</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级输出配置 */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    pathinfo: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// 在生成代码时，引入相关的模块、导出、请求等有帮助的路径信息。</span></span><br><span class=\"line\"></span><br><span class=\"line\">    chunkFilename: <span class=\"string\">\"[id].js\"</span>,</span><br><span class=\"line\">    chunkFilename: <span class=\"string\">\"[chunkhash].js\"</span>, <span class=\"comment\">// 长效缓存(/guides/caching)</span></span><br><span class=\"line\">    <span class=\"comment\">// 「附加分块(additional chunk)」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    jsonpFunction: <span class=\"string\">\"myWebpackJsonp\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 用于加载分块的 JSONP 函数名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    sourceMapFilename: <span class=\"string\">\"[file].map\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    sourceMapFilename: <span class=\"string\">\"sourcemaps/[file].map\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「source map 位置」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolModuleFilenameTemplate: <span class=\"string\">\"webpack:///[resource-path]\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「devtool 中模块」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolFallbackModuleFilenameTemplate: <span class=\"string\">\"webpack:///[resource-path]?[hash]\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「devtool 中模块」的文件名模板（用于冲突）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    umdNamedDefine: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// 在 UMD 库中使用命名的 AMD 模块</span></span><br><span class=\"line\"></span><br><span class=\"line\">    crossOriginLoading: <span class=\"string\">\"use-credentials\"</span>, <span class=\"comment\">// 枚举</span></span><br><span class=\"line\">    crossOriginLoading: <span class=\"string\">\"anonymous\"</span>,</span><br><span class=\"line\">    crossOriginLoading: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 指定运行时如何发出跨域请求问题</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 专家级输出配置（自行承担风险） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    devtoolLineToLine: &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.jsx$/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 为这些模块使用 1:1 映射 SourceMaps（快速）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    hotUpdateMainFilename: <span class=\"string\">\"[hash].hot-update.json\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「HMR 清单」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    hotUpdateChunkFilename: <span class=\"string\">\"[id].[hash].hot-update.js\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 「HMR 分块」的文件名模板</span></span><br><span class=\"line\"></span><br><span class=\"line\">    sourcePrefix: <span class=\"string\">\"\\t\"</span>, <span class=\"comment\">// string</span></span><br><span class=\"line\">    <span class=\"comment\">// 包内前置式模块资源具有更好可读性</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 关于模块配置</span></span><br><span class=\"line\"></span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// 模块规则（配置 loader、解析器等选项）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        include: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">\"app\"</span>)</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        exclude: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">\"app/demo-files\"</span>)</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"comment\">// 这里是匹配条件，每个选项都接收一个正则表达式或字符串</span></span><br><span class=\"line\">        <span class=\"comment\">// test 和 include 具有相同的作用，都是必须匹配选项</span></span><br><span class=\"line\">        <span class=\"comment\">// exclude 是必不匹配选项（优先于 test 和 include）</span></span><br><span class=\"line\">        <span class=\"comment\">// 最佳实践：</span></span><br><span class=\"line\">        <span class=\"comment\">// - 只在 test 和 文件名匹配 中使用正则表达式</span></span><br><span class=\"line\">        <span class=\"comment\">// - 在 include 和 exclude 中使用绝对路径数组</span></span><br><span class=\"line\">        <span class=\"comment\">// - 尽量避免 exclude，更倾向于使用 include</span></span><br><span class=\"line\"></span><br><span class=\"line\">        issuer: &#123; test, include, exclude &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// issuer 条件（导入源）</span></span><br><span class=\"line\"></span><br><span class=\"line\">        enforce: <span class=\"string\">\"pre\"</span>,</span><br><span class=\"line\">        enforce: <span class=\"string\">\"post\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 标识应用这些规则，即使规则覆盖（高级选项）</span></span><br><span class=\"line\"></span><br><span class=\"line\">        loader: <span class=\"string\">\"babel-loader\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 应该应用的 loader，它相对上下文解析</span></span><br><span class=\"line\">        <span class=\"comment\">// 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的</span></span><br><span class=\"line\">        <span class=\"comment\">// 查看 webpack 1 升级指南。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          presets: [<span class=\"string\">\"es2015\"</span>]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// loader 的可选项</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        test: <span class=\"string\">\"\\.html$\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// 应用多个 loader 和选项</span></span><br><span class=\"line\">          <span class=\"string\">\"htmllint-loader\"</span>,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">\"html-loader\"</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">oneOf</span>: [ <span class=\"comment\">/* rules */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 只使用这些嵌套规则之一</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">rules</span>: [ <span class=\"comment\">/* rules */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 使用所有这些嵌套规则（合并可用条件）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">and</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125; &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 仅当所有条件都匹配时才匹配</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">or</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125; &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: [ <span class=\"comment\">/* 条件 */</span> ] &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// 任意条件匹配时匹配（默认为数组）</span></span><br><span class=\"line\"></span><br><span class=\"line\">      &#123; <span class=\"attr\">resource</span>: &#123; <span class=\"attr\">not</span>: <span class=\"comment\">/* 条件 */</span> &#125; &#125;</span><br><span class=\"line\">      <span class=\"comment\">// 条件不匹配时匹配</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级模块配置（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">     noParse: [</span><br><span class=\"line\">      /special-library\\.js$/</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// 不解析这里的模块</span></span><br><span class=\"line\"></span><br><span class=\"line\">    unknownContextRequest: <span class=\"string\">\".\"</span>,</span><br><span class=\"line\">    unknownContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    unknownContextRegExp: <span class=\"regexp\">/^\\.\\/.*$/</span>,</span><br><span class=\"line\">    unknownContextCritical: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    exprContextRequest: <span class=\"string\">\".\"</span>,</span><br><span class=\"line\">    exprContextRegExp: <span class=\"regexp\">/^\\.\\/.*$/</span>,</span><br><span class=\"line\">    exprContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    exprContextCritical: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    wrappedContextRegExp: <span class=\"regexp\">/.*/</span>,</span><br><span class=\"line\">    wrappedContextRecursive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    wrappedContextCritical: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 指定动态请求的默认行为</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 解析模块请求的选项</span></span><br><span class=\"line\">    <span class=\"comment\">// （不适用于对 loader 解析）</span></span><br><span class=\"line\"></span><br><span class=\"line\">    modules: [</span><br><span class=\"line\">      <span class=\"string\">\"node_modules\"</span>,</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">\"app\"</span>)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// 用于查找模块的目录</span></span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">\".js\"</span>, <span class=\"string\">\".json\"</span>, <span class=\"string\">\".jsx\"</span>, <span class=\"string\">\".css\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 使用的扩展名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 模块别名列表</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"module\"</span>: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 起别名：\"module\" -&gt; \"new-module\" 和 \"module/path/file\" -&gt; \"new-module/path/file\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"only-module$\"</span>: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 起别名 \"only-module\" -&gt; \"new-module\"，但不匹配 \"only-module/path/file\" -&gt; \"new-module/path/file\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"string\">\"module\"</span>: path.resolve(__dirname, <span class=\"string\">\"app/third/module.js\"</span>),</span><br><span class=\"line\">      <span class=\"comment\">// 起别名 \"module\" -&gt; \"./app/third/module.js\" 和 \"module/file\" 会导致错误</span></span><br><span class=\"line\">      <span class=\"comment\">// 模块别名相对于当前上下文导入</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">/* 可供选择的别名语法（点击展示） */</span></span><br><span class=\"line\">  alias: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        name: <span class=\"string\">\"module\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 旧的请求</span></span><br><span class=\"line\"></span><br><span class=\"line\">        alias: <span class=\"string\">\"new-module\"</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 新的请求</span></span><br><span class=\"line\"></span><br><span class=\"line\">        onlyModule: <span class=\"literal\">true</span></span><br><span class=\"line\">        <span class=\"comment\">// 如果为 true，只有 \"module\" 是别名</span></span><br><span class=\"line\">        <span class=\"comment\">// 如果为 false，\"module/inner/path\" 也是别名</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 高级解析选项（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    symlinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 遵循符号链接(symlinks)到新位置</span></span><br><span class=\"line\"></span><br><span class=\"line\">    descriptionFiles: [<span class=\"string\">\"package.json\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从 package 描述中读取的文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    mainFields: [<span class=\"string\">\"main\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从描述文件中读取的属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 当请求文件夹时</span></span><br><span class=\"line\"></span><br><span class=\"line\">    aliasFields: [<span class=\"string\">\"browser\"</span>],</span><br><span class=\"line\">    <span class=\"comment\">// 从描述文件中读取的属性</span></span><br><span class=\"line\">    <span class=\"comment\">// 以对此 package 的请求起别名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    enforceExtension: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 如果为 true，请求必不包括扩展名</span></span><br><span class=\"line\">    <span class=\"comment\">// 如果为 false，请求可以包括扩展名</span></span><br><span class=\"line\"></span><br><span class=\"line\">    moduleExtensions: [<span class=\"string\">\"-module\"</span>],</span><br><span class=\"line\">    enforceModuleExtension: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 类似 extensions/enforceExtension，但是用模块名替换文件</span></span><br><span class=\"line\"></span><br><span class=\"line\">    unsafeCache: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    unsafeCache: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 为解析的请求启用缓存</span></span><br><span class=\"line\">    <span class=\"comment\">// 这是不安全，因为文件夹结构可能会改动</span></span><br><span class=\"line\">    <span class=\"comment\">// 但是性能改善是很大的</span></span><br><span class=\"line\"></span><br><span class=\"line\">    cachePredicate: <span class=\"function\">(<span class=\"params\">path, request</span>) =&gt;</span> <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 用于选择缓存请求的谓词函数</span></span><br><span class=\"line\"></span><br><span class=\"line\">    plugins: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">    <span class=\"comment\">// 应用于解析器的附加插件</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  performance: &#123;</span><br><span class=\"line\">    hints: <span class=\"string\">\"warning\"</span>, <span class=\"comment\">//  or \"error\" or false</span></span><br><span class=\"line\">    maxAssetSize: <span class=\"number\">200000</span>, <span class=\"comment\">// 整数类型（以字节为单位）</span></span><br><span class=\"line\">    maxEntrypointSize: <span class=\"number\">400000</span>, <span class=\"comment\">// 整数类型（以字节为单位）</span></span><br><span class=\"line\">    assetFilter: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">assetFilename</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 提供资源文件名的断言函数</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> assetFilename.endsWith(<span class=\"string\">'.css'</span>) || assetFilename.endsWith(<span class=\"string\">'.js'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">   devtool: <span class=\"string\">\"source-map\"</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"inline-source-map\", // 嵌入到源文件中</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"eval-source-map\", // 将 SourceMap 嵌入到每个模块中</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"hidden-source-map\", // SourceMap 不在源文件中引用</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"cheap-source-map\", // 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"cheap-module-source-map\", // 有模块映射(module mappings)的 SourceMap 低级变体</span></span><br><span class=\"line\">  <span class=\"comment\">// devtool: \"eval\", // 没有模块映射，而是命名模块。以牺牲细节达到最快。</span></span><br><span class=\"line\">  <span class=\"comment\">// 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试</span></span><br><span class=\"line\">  <span class=\"comment\">// 牺牲了构建速度的 `source-map' 是最详细的。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  context: __dirname, <span class=\"comment\">// string（绝对路径！）</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack 的主目录</span></span><br><span class=\"line\">  <span class=\"comment\">// entry 和 module.rules.loader 选项</span></span><br><span class=\"line\">  <span class=\"comment\">// 相对于此目录解析</span></span><br><span class=\"line\"></span><br><span class=\"line\">  target: <span class=\"string\">\"web\"</span>, <span class=\"comment\">// 默认</span></span><br><span class=\"line\">  <span class=\"comment\">// 包(bundle)应该运行的环境</span></span><br><span class=\"line\">  <span class=\"comment\">// 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)</span></span><br><span class=\"line\"></span><br><span class=\"line\">  externals: [<span class=\"string\">\"react\"</span>, /^@angular\\<span class=\"comment\">//],</span></span><br><span class=\"line\">  <span class=\"comment\">// 不要遵循/打包这些模块，而是在运行时从环境中请求他们</span></span><br><span class=\"line\"></span><br><span class=\"line\">  stats: <span class=\"string\">\"errors-only\"</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 精确控制要显示的 bundle 信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    proxy: &#123; <span class=\"comment\">// 代理URL到后端开发服务器</span></span><br><span class=\"line\">      <span class=\"string\">'/api'</span>: <span class=\"string\">'http://localhost:3000'</span></span><br><span class=\"line\">      auth: <span class=\"literal\">false</span> <span class=\"comment\">//授权</span></span><br><span class=\"line\">      changeOrigin: <span class=\"literal\">true</span> <span class=\"comment\">//跨域</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    contentBase: path.join(__dirname, <span class=\"string\">'public'</span>), <span class=\"comment\">// boolean | string | array, 静态文件位置</span></span><br><span class=\"line\">    compress: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用gzip压缩</span></span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>, <span class=\"comment\">// 提供重定向响应 404 -- 如果使用 </span></span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>, <span class=\"comment\">// 热加载</span></span><br><span class=\"line\">    https: <span class=\"literal\">false</span>, <span class=\"comment\">// 是否是https</span></span><br><span class=\"line\">    noInfo: <span class=\"literal\">true</span>, <span class=\"comment\">// 只有错误并警告热重新加载</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// 附加插件列表</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* 高级配置（点击展示） */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  resolveLoader: &#123; <span class=\"comment\">/* 等同于 resolve */</span> &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 独立解析选项的 loader</span></span><br><span class=\"line\"></span><br><span class=\"line\">  parallelism: <span class=\"number\">1</span>, <span class=\"comment\">// number</span></span><br><span class=\"line\">  <span class=\"comment\">// 限制并行处理模块的数量</span></span><br><span class=\"line\"></span><br><span class=\"line\">  profile: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 捕获时机信息</span></span><br><span class=\"line\"></span><br><span class=\"line\">  bail: <span class=\"literal\">true</span>, <span class=\"comment\">//boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 在第一个错误出错时抛出，而不是无视错误。</span></span><br><span class=\"line\"></span><br><span class=\"line\">  cache: <span class=\"literal\">false</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 禁用/启用缓存</span></span><br><span class=\"line\"></span><br><span class=\"line\">  watch: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">  <span class=\"comment\">// 启用观察</span></span><br><span class=\"line\"></span><br><span class=\"line\">  watchOptions: &#123;</span><br><span class=\"line\">    aggregateTimeout: <span class=\"number\">1000</span>, <span class=\"comment\">// in ms</span></span><br><span class=\"line\">    <span class=\"comment\">// 将多个更改聚合到单个重构建(rebuild)</span></span><br><span class=\"line\"></span><br><span class=\"line\">    poll: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    poll: <span class=\"number\">500</span>, <span class=\"comment\">// 间隔单位 ms</span></span><br><span class=\"line\">    <span class=\"comment\">// 启用轮询观察模式</span></span><br><span class=\"line\">    <span class=\"comment\">// 必须用在不通知更改的文件系统中</span></span><br><span class=\"line\">    <span class=\"comment\">// 即 nfs shares（译者注：Network FileSystem，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  node: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 在非node环境下填充或模拟运行node环境</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">console</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    global: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    process: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean</span></span><br><span class=\"line\">    __filename: <span class=\"string\">\"mock\"</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    __dirname: <span class=\"string\">\"mock\"</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    Buffer: <span class=\"literal\">true</span>, <span class=\"comment\">// boolean | \"mock\"</span></span><br><span class=\"line\">    setImmediate: <span class=\"literal\">true</span> <span class=\"comment\">// boolean | \"mock\" | \"empty\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  recordsPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  recordsInputPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  recordsOutputPath: path.resolve(__dirname, <span class=\"string\">\"build/records.json\"</span>),</span><br><span class=\"line\">  <span class=\"comment\">// TODO</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Webpack 的工作流<br>从 context 文件夹开始（框架内没有配置，那就默认为 ‘’）<br>查找 entry 对应的文件<br>(找到文件之后) 读取文件内容. 每当遇到 import (ES6) 或者 require() (Node) 依赖项时, 它会解析这些代码, 并且打包到最终构建里. 接着它会不断递归搜索实际需要的依赖项, 直到它到达了“树”的底部<br>递归完所有依赖之后, Webpack 会将所有东西打包到 output.path 对应的目录, 并将 output.filename 的值作为最终的资源名 ([name] 表示使用 entry 项的 key)</p>\n"},{"title":"冒泡排序","date":"2018-05-19T05:35:51.000Z","_content":"冒泡排序（Bubble Sort），是一种计算机科学领域的较简单的排序算法。\n它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。\n\n冒泡排序算法的运作如下：（从后往前）\n比较相邻的元素。如果第一个比第二个大，就交换他们两个。\n对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。\n针对所有的元素重复以上的步骤，除了最后一个。\n持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。 \n\n时间复杂度：\n冒泡排序最好的时间复杂度为O(n)。\n冒泡排序的最坏时间复杂度为O(n^2)。\n冒泡排序总的平均时间复杂度为O(n^2)。\n\n```javascript\nconst bubbleSort = (arr) => {\n  let len = arr.length;\n  for (let i = 0; i < len - 1; i++) {\n    for (let j = 0; j < len - 1 - j; j++) {\n      if (arr[j] > arr[j+1]) {\n        let temp = arr[j+1];\n        arr[j+1] = arr[j];\n        arr[j] = temp;\n      }\n    }\n  }\n  return arr;\n}\n```","source":"_posts/冒泡排序.md","raw":"---\ntitle: 冒泡排序\ndate: 2018-05-19 13:35:51\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n冒泡排序（Bubble Sort），是一种计算机科学领域的较简单的排序算法。\n它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。\n\n冒泡排序算法的运作如下：（从后往前）\n比较相邻的元素。如果第一个比第二个大，就交换他们两个。\n对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。\n针对所有的元素重复以上的步骤，除了最后一个。\n持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。 \n\n时间复杂度：\n冒泡排序最好的时间复杂度为O(n)。\n冒泡排序的最坏时间复杂度为O(n^2)。\n冒泡排序总的平均时间复杂度为O(n^2)。\n\n```javascript\nconst bubbleSort = (arr) => {\n  let len = arr.length;\n  for (let i = 0; i < len - 1; i++) {\n    for (let j = 0; j < len - 1 - j; j++) {\n      if (arr[j] > arr[j+1]) {\n        let temp = arr[j+1];\n        arr[j+1] = arr[j];\n        arr[j] = temp;\n      }\n    }\n  }\n  return arr;\n}\n```","slug":"冒泡排序","published":1,"updated":"2018-05-19T05:43:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg5003md6sps66uktne","content":"<p>冒泡排序（Bubble Sort），是一种计算机科学领域的较简单的排序算法。<br>它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。</p>\n<p>冒泡排序算法的运作如下：（从后往前）<br>比较相邻的元素。如果第一个比第二个大，就交换他们两个。<br>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。<br>针对所有的元素重复以上的步骤，除了最后一个。<br>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。 </p>\n<p>时间复杂度：<br>冒泡排序最好的时间复杂度为O(n)。<br>冒泡排序的最坏时间复杂度为O(n^2)。<br>冒泡排序总的平均时间复杂度为O(n^2)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> bubbleSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; len - <span class=\"number\">1</span> - j; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (arr[j] &gt; arr[j+<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> temp = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">        arr[j+<span class=\"number\">1</span>] = arr[j];</span><br><span class=\"line\">        arr[j] = temp;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>冒泡排序（Bubble Sort），是一种计算机科学领域的较简单的排序算法。<br>它重复地走访过要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。走访数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。</p>\n<p>冒泡排序算法的运作如下：（从后往前）<br>比较相邻的元素。如果第一个比第二个大，就交换他们两个。<br>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。<br>针对所有的元素重复以上的步骤，除了最后一个。<br>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。 </p>\n<p>时间复杂度：<br>冒泡排序最好的时间复杂度为O(n)。<br>冒泡排序的最坏时间复杂度为O(n^2)。<br>冒泡排序总的平均时间复杂度为O(n^2)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> bubbleSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; len - <span class=\"number\">1</span> - j; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (arr[j] &gt; arr[j+<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> temp = arr[j+<span class=\"number\">1</span>];</span><br><span class=\"line\">        arr[j+<span class=\"number\">1</span>] = arr[j];</span><br><span class=\"line\">        arr[j] = temp;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"在页面中获取图片的尺寸","date":"2018-05-14T10:13:46.000Z","_content":"在js中写了获取图片的高度，却发现高度都是0.\n这是因为js运行的时候，图片还没有加载好\n所以在获取图片高度的时候，要用window.onload\n在图片都加载好了之后获取就可以了。\n\n```javascript\nwindow.onload = function () {\n  var imgHeight = $(\".bgImg\").height()\n  console.log(imgHeight);\n}\n```","source":"_posts/在页面中获取图片的尺寸.md","raw":"---\ntitle: 在页面中获取图片的尺寸\ndate: 2018-05-14 18:13:46\ntags: Javascript\ncategories: bug汇总\n---\n在js中写了获取图片的高度，却发现高度都是0.\n这是因为js运行的时候，图片还没有加载好\n所以在获取图片高度的时候，要用window.onload\n在图片都加载好了之后获取就可以了。\n\n```javascript\nwindow.onload = function () {\n  var imgHeight = $(\".bgImg\").height()\n  console.log(imgHeight);\n}\n```","slug":"在页面中获取图片的尺寸","published":1,"updated":"2018-05-14T10:16:35.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg6003qd6spxxzcuwds","content":"<p>在js中写了获取图片的高度，却发现高度都是0.<br>这是因为js运行的时候，图片还没有加载好<br>所以在获取图片高度的时候，要用window.onload<br>在图片都加载好了之后获取就可以了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> imgHeight = $(<span class=\"string\">\".bgImg\"</span>).height()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(imgHeight);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>在js中写了获取图片的高度，却发现高度都是0.<br>这是因为js运行的时候，图片还没有加载好<br>所以在获取图片高度的时候，要用window.onload<br>在图片都加载好了之后获取就可以了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> imgHeight = $(<span class=\"string\">\".bgImg\"</span>).height()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(imgHeight);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"变量的作用域和变量提升","date":"2018-05-14T06:52:10.000Z","_content":"某家面试的时候面试题，面试官小姐姐给出了一道题：\n```javascript\nvar a = 100;\nfunction test(){\n\tconsole.log(a);\n\ta = 10;\n\tconsole.log(a);\n\tconsole.log(this.a);\n\tvar a;\n}\ntest();\n```\n问我这三个会打印出来的值是什么？\n\n\n研究一下这个变量的作用域和变量提升：\n\n**一、作用域：**\n\n一个变量的作用域（scope）是程序源代码中定义这个变量的区域。 \n全局变量拥有全局作用域，在javaScript代码中任何地方都有定义的。 \n然而在函数内声明的变量只是在函数内部有定义，他们是局部变量，作用域也只是在局部。\n\n**在函数体内，局部变量的优先级要高于全局变量。如果在函数体内重新声明一个与局部变量重名的变量，局部变量就会覆盖全局变量的值。**\n来看个例子：\n\n```javascript\nvar num=\"100\";\nfunction scope(){\n\tvar num=\"10\";\n    function innerScope(){\n        var num = \"1\";\n        console.log(scope);//输出：1\n    }\n    innerScope();\n    console.log(num);//输出：10\n}\nscope();\nconsole.log(num);//输出：100\n```\n这个例子会打印三个数，分别是1，10，100；\n**局部变量的作用域仅仅在函数内部，出了函数体之后，局部变量就会被销毁。**\n在innerScope()函数中，虽然又声明了一个num，但是innerScope()中的num是局部变量，只是与全局变量的名字相同，并不是全局变量，所以，虽然在该函数中把num赋值为1，但这仅仅是一个与全局变量名称相同的一个变量而已，并没有改变全局变量的值。\n\n再来看一个例子:\n\n```javascript\nvar num=\"100\";\nfunction scope(){\n\tvar num=\"10\";\n    function innerScope(){\n        num = \"1\";\n        console.log(scope);//输出：1\n    }\n    innerScope();\n    console.log(num);//输出：1\n}\nscope();\nconsole.log(num);//输出：100\n```\n上面这部分代码中，在innerScope()函数中，我们并没有用var来声明num，所以，在这里的num的作用域就被提升了，即我们将scope中的num的值重置了，所以在输出的时候输出的结果为嵌套作用域内的局部变量。\n\n**二、变量提升**\n\n**在Javascript中，函数及变量的声明都将被提升到函数的最顶部。**\n在js中，变量的声明会被解析器悄悄的提升到方法体的最顶部，但是需要注意的是，提升的仅仅是变量的声明，变量的赋值并不会被提升，我们需要注意的是，函数的声明与变量的声明是不一样的。函数的函数体也会被一起提升。\n**函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。**\n\n所以上面那个题就很好理解了。\n我们再来看一下这个题：\n```javascript\nvar a = 100;\nfunction test(){\n\tconsole.log(a);\n\ta = 10;\n\tconsole.log(a);\n\tconsole.log(this.a);\n\tvar a;\n}\ntest();\n```\n 1. 因为变量提升，a提升到最前面，声明未赋值，所以第一个就会打印undefined；\n 2. 第二个在a声明之后，而且a赋值为10，所以第二个打印出来10；\n 3. 第三个，因为test()是在window下调用的；this指的是test()调用的作用域，所以第三个打印100；\n\n看一个函数提升的例子：\n\n```javascript\n<script language=\"javascript\" type=\"text/javascript\">    \n    //在全局对象中声明两个全局函数,反模式  \n    function foo()  \n    {  \n        alert(\"global foo\");  \n    }  \n\n    function bar()  \n    {  \n        alert(\"global bar\");  \n    }  \n\n    //定义全局变量  \n    var v = \"global var\";  \n\n    function hoistMe()  \n    {  \n        alert(typeof foo); //function  \n        alert(typeof bar); //undefined  \n        alert(v); //undefined  \n\n        //为什么bar函数和变量v是未定义而不是全局变量中定义的相应的函数变量呢？  \n         //因为函数里面定义了同名的函数和变量，无论在函数的任何位置定义这些函数和  \n         //和变量，它们都将被提升到函数的最顶部。  \n\n        foo(); //local foo  \n        bar(); //报错，TypeError \"bar is not a function\"\n\n        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部  \n        function foo()  \n        {  \n            alert(\"local foo\");  \n        }  \n\n        //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升  \n        var bar = function()  \n        {  \n            alert(\"local bar\");  \n        };  \n\n\n        //定义局部变量  \n         var v = \"local\";  \n    }  \n\n    (function()  \n    {  \n        hoistMe();  \n\n    })();  \n\n   //函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。  \n    /**由于函数提升的效果，hoistMe方法相当于 \n    function hoistMe() \n    { \n        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部 \n        function foo() \n        { \n            alert(\"local foo\"); \n        } \n\n         //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升(同变量提升) \n        var bar = undefined; \n\n        //变量声明被提升 \n         var v = undefined; \n\n        alert(typeof foo); //function \n        alert(typeof bar); //undefined \n\t\talert(v); //undefined \n\t\t\n        foo(); //local foo \n        bar(); //报错，缺少对象 \n\n        bar = function() \n        { \n            alert(\"local bar\"); \n        }; \n\n       v = \"local\"; \n\n    } \n    */  \n</script>  \n```\n","source":"_posts/变量的作用域和变量提升.md","raw":"---\ntitle: 变量的作用域和变量提升\ndate: 2018-05-14 14:52:10\ntags: Javascript\ncategories: 学习笔记\n---\n某家面试的时候面试题，面试官小姐姐给出了一道题：\n```javascript\nvar a = 100;\nfunction test(){\n\tconsole.log(a);\n\ta = 10;\n\tconsole.log(a);\n\tconsole.log(this.a);\n\tvar a;\n}\ntest();\n```\n问我这三个会打印出来的值是什么？\n\n\n研究一下这个变量的作用域和变量提升：\n\n**一、作用域：**\n\n一个变量的作用域（scope）是程序源代码中定义这个变量的区域。 \n全局变量拥有全局作用域，在javaScript代码中任何地方都有定义的。 \n然而在函数内声明的变量只是在函数内部有定义，他们是局部变量，作用域也只是在局部。\n\n**在函数体内，局部变量的优先级要高于全局变量。如果在函数体内重新声明一个与局部变量重名的变量，局部变量就会覆盖全局变量的值。**\n来看个例子：\n\n```javascript\nvar num=\"100\";\nfunction scope(){\n\tvar num=\"10\";\n    function innerScope(){\n        var num = \"1\";\n        console.log(scope);//输出：1\n    }\n    innerScope();\n    console.log(num);//输出：10\n}\nscope();\nconsole.log(num);//输出：100\n```\n这个例子会打印三个数，分别是1，10，100；\n**局部变量的作用域仅仅在函数内部，出了函数体之后，局部变量就会被销毁。**\n在innerScope()函数中，虽然又声明了一个num，但是innerScope()中的num是局部变量，只是与全局变量的名字相同，并不是全局变量，所以，虽然在该函数中把num赋值为1，但这仅仅是一个与全局变量名称相同的一个变量而已，并没有改变全局变量的值。\n\n再来看一个例子:\n\n```javascript\nvar num=\"100\";\nfunction scope(){\n\tvar num=\"10\";\n    function innerScope(){\n        num = \"1\";\n        console.log(scope);//输出：1\n    }\n    innerScope();\n    console.log(num);//输出：1\n}\nscope();\nconsole.log(num);//输出：100\n```\n上面这部分代码中，在innerScope()函数中，我们并没有用var来声明num，所以，在这里的num的作用域就被提升了，即我们将scope中的num的值重置了，所以在输出的时候输出的结果为嵌套作用域内的局部变量。\n\n**二、变量提升**\n\n**在Javascript中，函数及变量的声明都将被提升到函数的最顶部。**\n在js中，变量的声明会被解析器悄悄的提升到方法体的最顶部，但是需要注意的是，提升的仅仅是变量的声明，变量的赋值并不会被提升，我们需要注意的是，函数的声明与变量的声明是不一样的。函数的函数体也会被一起提升。\n**函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。**\n\n所以上面那个题就很好理解了。\n我们再来看一下这个题：\n```javascript\nvar a = 100;\nfunction test(){\n\tconsole.log(a);\n\ta = 10;\n\tconsole.log(a);\n\tconsole.log(this.a);\n\tvar a;\n}\ntest();\n```\n 1. 因为变量提升，a提升到最前面，声明未赋值，所以第一个就会打印undefined；\n 2. 第二个在a声明之后，而且a赋值为10，所以第二个打印出来10；\n 3. 第三个，因为test()是在window下调用的；this指的是test()调用的作用域，所以第三个打印100；\n\n看一个函数提升的例子：\n\n```javascript\n<script language=\"javascript\" type=\"text/javascript\">    \n    //在全局对象中声明两个全局函数,反模式  \n    function foo()  \n    {  \n        alert(\"global foo\");  \n    }  \n\n    function bar()  \n    {  \n        alert(\"global bar\");  \n    }  \n\n    //定义全局变量  \n    var v = \"global var\";  \n\n    function hoistMe()  \n    {  \n        alert(typeof foo); //function  \n        alert(typeof bar); //undefined  \n        alert(v); //undefined  \n\n        //为什么bar函数和变量v是未定义而不是全局变量中定义的相应的函数变量呢？  \n         //因为函数里面定义了同名的函数和变量，无论在函数的任何位置定义这些函数和  \n         //和变量，它们都将被提升到函数的最顶部。  \n\n        foo(); //local foo  \n        bar(); //报错，TypeError \"bar is not a function\"\n\n        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部  \n        function foo()  \n        {  \n            alert(\"local foo\");  \n        }  \n\n        //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升  \n        var bar = function()  \n        {  \n            alert(\"local bar\");  \n        };  \n\n\n        //定义局部变量  \n         var v = \"local\";  \n    }  \n\n    (function()  \n    {  \n        hoistMe();  \n\n    })();  \n\n   //函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。  \n    /**由于函数提升的效果，hoistMe方法相当于 \n    function hoistMe() \n    { \n        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部 \n        function foo() \n        { \n            alert(\"local foo\"); \n        } \n\n         //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升(同变量提升) \n        var bar = undefined; \n\n        //变量声明被提升 \n         var v = undefined; \n\n        alert(typeof foo); //function \n        alert(typeof bar); //undefined \n\t\talert(v); //undefined \n\t\t\n        foo(); //local foo \n        bar(); //报错，缺少对象 \n\n        bar = function() \n        { \n            alert(\"local bar\"); \n        }; \n\n       v = \"local\"; \n\n    } \n    */  \n</script>  \n```\n","slug":"变量的作用域和变量提升","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg8003ud6sp24yr61ps","content":"<p>某家面试的时候面试题，面试官小姐姐给出了一道题：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\ta = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n<p>问我这三个会打印出来的值是什么？</p>\n<p>研究一下这个变量的作用域和变量提升：</p>\n<p><strong>一、作用域：</strong></p>\n<p>一个变量的作用域（scope）是程序源代码中定义这个变量的区域。<br>全局变量拥有全局作用域，在javaScript代码中任何地方都有定义的。<br>然而在函数内声明的变量只是在函数内部有定义，他们是局部变量，作用域也只是在局部。</p>\n<p><strong>在函数体内，局部变量的优先级要高于全局变量。如果在函数体内重新声明一个与局部变量重名的变量，局部变量就会覆盖全局变量的值。</strong><br>来看个例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num=<span class=\"string\">\"100\"</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">scope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> num=<span class=\"string\">\"10\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerScope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> num = <span class=\"string\">\"1\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(scope);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    innerScope();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：10</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">scope();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：100</span></span><br></pre></td></tr></table></figure>\n<p>这个例子会打印三个数，分别是1，10，100；<br><strong>局部变量的作用域仅仅在函数内部，出了函数体之后，局部变量就会被销毁。</strong><br>在innerScope()函数中，虽然又声明了一个num，但是innerScope()中的num是局部变量，只是与全局变量的名字相同，并不是全局变量，所以，虽然在该函数中把num赋值为1，但这仅仅是一个与全局变量名称相同的一个变量而已，并没有改变全局变量的值。</p>\n<p>再来看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num=<span class=\"string\">\"100\"</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">scope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> num=<span class=\"string\">\"10\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerScope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        num = <span class=\"string\">\"1\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(scope);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    innerScope();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">scope();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：100</span></span><br></pre></td></tr></table></figure>\n<p>上面这部分代码中，在innerScope()函数中，我们并没有用var来声明num，所以，在这里的num的作用域就被提升了，即我们将scope中的num的值重置了，所以在输出的时候输出的结果为嵌套作用域内的局部变量。</p>\n<p><strong>二、变量提升</strong></p>\n<p><strong>在Javascript中，函数及变量的声明都将被提升到函数的最顶部。</strong><br>在js中，变量的声明会被解析器悄悄的提升到方法体的最顶部，但是需要注意的是，提升的仅仅是变量的声明，变量的赋值并不会被提升，我们需要注意的是，函数的声明与变量的声明是不一样的。函数的函数体也会被一起提升。<br><strong>函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。</strong></p>\n<p>所以上面那个题就很好理解了。<br>我们再来看一下这个题：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\ta = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>因为变量提升，a提升到最前面，声明未赋值，所以第一个就会打印undefined；</li>\n<li>第二个在a声明之后，而且a赋值为10，所以第二个打印出来10；</li>\n<li>第三个，因为test()是在window下调用的；this指的是test()调用的作用域，所以第三个打印100；</li>\n</ol>\n<p>看一个函数提升的例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script language=<span class=\"string\">\"javascript\"</span> type=<span class=\"string\">\"text/javascript\"</span>&gt;    </span><br><span class=\"line\">    <span class=\"comment\">//在全局对象中声明两个全局函数,反模式  </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"string\">\"global foo\"</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"string\">\"global bar\"</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定义全局变量  </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> v = <span class=\"string\">\"global var\"</span>;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hoistMe</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"keyword\">typeof</span> foo); <span class=\"comment\">//function  </span></span><br><span class=\"line\">        alert(<span class=\"keyword\">typeof</span> bar); <span class=\"comment\">//undefined  </span></span><br><span class=\"line\">        alert(v); <span class=\"comment\">//undefined  </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//为什么bar函数和变量v是未定义而不是全局变量中定义的相应的函数变量呢？  </span></span><br><span class=\"line\">         <span class=\"comment\">//因为函数里面定义了同名的函数和变量，无论在函数的任何位置定义这些函数和  </span></span><br><span class=\"line\">         <span class=\"comment\">//和变量，它们都将被提升到函数的最顶部。  </span></span><br><span class=\"line\"></span><br><span class=\"line\">        foo(); <span class=\"comment\">//local foo  </span></span><br><span class=\"line\">        bar(); <span class=\"comment\">//报错，TypeError \"bar is not a function\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//函数声明，变量foo以及其实现被提升到hoistMe函数顶部  </span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;  </span><br><span class=\"line\">            alert(<span class=\"string\">\"local foo\"</span>);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//函数表达式,仅变量bar被提升到函数顶部，实现没有被提升  </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> bar = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;  </span><br><span class=\"line\">            alert(<span class=\"string\">\"local bar\"</span>);  </span><br><span class=\"line\">        &#125;;  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//定义局部变量  </span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> v = <span class=\"string\">\"local\"</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        hoistMe();  </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)();  </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。  </span></span><br><span class=\"line\">    <span class=\"comment\">/**由于函数提升的效果，hoistMe方法相当于 </span></span><br><span class=\"line\"><span class=\"comment\">    function hoistMe() </span></span><br><span class=\"line\"><span class=\"comment\">    &#123; </span></span><br><span class=\"line\"><span class=\"comment\">        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部 </span></span><br><span class=\"line\"><span class=\"comment\">        function foo() </span></span><br><span class=\"line\"><span class=\"comment\">        &#123; </span></span><br><span class=\"line\"><span class=\"comment\">            alert(\"local foo\"); </span></span><br><span class=\"line\"><span class=\"comment\">        &#125; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">         //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升(同变量提升) </span></span><br><span class=\"line\"><span class=\"comment\">        var bar = undefined; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        //变量声明被提升 </span></span><br><span class=\"line\"><span class=\"comment\">         var v = undefined; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        alert(typeof foo); //function </span></span><br><span class=\"line\"><span class=\"comment\">        alert(typeof bar); //undefined </span></span><br><span class=\"line\"><span class=\"comment\">\t\talert(v); //undefined </span></span><br><span class=\"line\"><span class=\"comment\">\t\t</span></span><br><span class=\"line\"><span class=\"comment\">        foo(); //local foo </span></span><br><span class=\"line\"><span class=\"comment\">        bar(); //报错，缺少对象 </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        bar = function() </span></span><br><span class=\"line\"><span class=\"comment\">        &#123; </span></span><br><span class=\"line\"><span class=\"comment\">            alert(\"local bar\"); </span></span><br><span class=\"line\"><span class=\"comment\">        &#125;; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">       v = \"local\"; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    &#125; </span></span><br><span class=\"line\"><span class=\"comment\">    */</span>  </span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>某家面试的时候面试题，面试官小姐姐给出了一道题：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\ta = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n<p>问我这三个会打印出来的值是什么？</p>\n<p>研究一下这个变量的作用域和变量提升：</p>\n<p><strong>一、作用域：</strong></p>\n<p>一个变量的作用域（scope）是程序源代码中定义这个变量的区域。<br>全局变量拥有全局作用域，在javaScript代码中任何地方都有定义的。<br>然而在函数内声明的变量只是在函数内部有定义，他们是局部变量，作用域也只是在局部。</p>\n<p><strong>在函数体内，局部变量的优先级要高于全局变量。如果在函数体内重新声明一个与局部变量重名的变量，局部变量就会覆盖全局变量的值。</strong><br>来看个例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num=<span class=\"string\">\"100\"</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">scope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> num=<span class=\"string\">\"10\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerScope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> num = <span class=\"string\">\"1\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(scope);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    innerScope();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：10</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">scope();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：100</span></span><br></pre></td></tr></table></figure>\n<p>这个例子会打印三个数，分别是1，10，100；<br><strong>局部变量的作用域仅仅在函数内部，出了函数体之后，局部变量就会被销毁。</strong><br>在innerScope()函数中，虽然又声明了一个num，但是innerScope()中的num是局部变量，只是与全局变量的名字相同，并不是全局变量，所以，虽然在该函数中把num赋值为1，但这仅仅是一个与全局变量名称相同的一个变量而已，并没有改变全局变量的值。</p>\n<p>再来看一个例子:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num=<span class=\"string\">\"100\"</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">scope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> num=<span class=\"string\">\"10\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerScope</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        num = <span class=\"string\">\"1\"</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(scope);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    innerScope();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">scope();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num);<span class=\"comment\">//输出：100</span></span><br></pre></td></tr></table></figure>\n<p>上面这部分代码中，在innerScope()函数中，我们并没有用var来声明num，所以，在这里的num的作用域就被提升了，即我们将scope中的num的值重置了，所以在输出的时候输出的结果为嵌套作用域内的局部变量。</p>\n<p><strong>二、变量提升</strong></p>\n<p><strong>在Javascript中，函数及变量的声明都将被提升到函数的最顶部。</strong><br>在js中，变量的声明会被解析器悄悄的提升到方法体的最顶部，但是需要注意的是，提升的仅仅是变量的声明，变量的赋值并不会被提升，我们需要注意的是，函数的声明与变量的声明是不一样的。函数的函数体也会被一起提升。<br><strong>函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。</strong></p>\n<p>所以上面那个题就很好理解了。<br>我们再来看一下这个题：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\ta = <span class=\"number\">10</span>;</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.a);</span><br><span class=\"line\">\t<span class=\"keyword\">var</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">test();</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>因为变量提升，a提升到最前面，声明未赋值，所以第一个就会打印undefined；</li>\n<li>第二个在a声明之后，而且a赋值为10，所以第二个打印出来10；</li>\n<li>第三个，因为test()是在window下调用的；this指的是test()调用的作用域，所以第三个打印100；</li>\n</ol>\n<p>看一个函数提升的例子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script language=<span class=\"string\">\"javascript\"</span> type=<span class=\"string\">\"text/javascript\"</span>&gt;    </span><br><span class=\"line\">    <span class=\"comment\">//在全局对象中声明两个全局函数,反模式  </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"string\">\"global foo\"</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"string\">\"global bar\"</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定义全局变量  </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> v = <span class=\"string\">\"global var\"</span>;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hoistMe</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        alert(<span class=\"keyword\">typeof</span> foo); <span class=\"comment\">//function  </span></span><br><span class=\"line\">        alert(<span class=\"keyword\">typeof</span> bar); <span class=\"comment\">//undefined  </span></span><br><span class=\"line\">        alert(v); <span class=\"comment\">//undefined  </span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//为什么bar函数和变量v是未定义而不是全局变量中定义的相应的函数变量呢？  </span></span><br><span class=\"line\">         <span class=\"comment\">//因为函数里面定义了同名的函数和变量，无论在函数的任何位置定义这些函数和  </span></span><br><span class=\"line\">         <span class=\"comment\">//和变量，它们都将被提升到函数的最顶部。  </span></span><br><span class=\"line\"></span><br><span class=\"line\">        foo(); <span class=\"comment\">//local foo  </span></span><br><span class=\"line\">        bar(); <span class=\"comment\">//报错，TypeError \"bar is not a function\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//函数声明，变量foo以及其实现被提升到hoistMe函数顶部  </span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;  </span><br><span class=\"line\">            alert(<span class=\"string\">\"local foo\"</span>);  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//函数表达式,仅变量bar被提升到函数顶部，实现没有被提升  </span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> bar = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;  </span><br><span class=\"line\">            alert(<span class=\"string\">\"local bar\"</span>);  </span><br><span class=\"line\">        &#125;;  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//定义局部变量  </span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> v = <span class=\"string\">\"local\"</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)  </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;  </span><br><span class=\"line\">        hoistMe();  </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;)();  </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//函数表达式和变量表达式只是其声明被提升，函数声明是函数的声明和实现都被提升。  </span></span><br><span class=\"line\">    <span class=\"comment\">/**由于函数提升的效果，hoistMe方法相当于 </span></span><br><span class=\"line\"><span class=\"comment\">    function hoistMe() </span></span><br><span class=\"line\"><span class=\"comment\">    &#123; </span></span><br><span class=\"line\"><span class=\"comment\">        //函数声明，变量foo以及其实现被提升到hoistMe函数顶部 </span></span><br><span class=\"line\"><span class=\"comment\">        function foo() </span></span><br><span class=\"line\"><span class=\"comment\">        &#123; </span></span><br><span class=\"line\"><span class=\"comment\">            alert(\"local foo\"); </span></span><br><span class=\"line\"><span class=\"comment\">        &#125; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">         //函数表达式,仅变量bar被提升到函数顶部，实现没有被提升(同变量提升) </span></span><br><span class=\"line\"><span class=\"comment\">        var bar = undefined; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        //变量声明被提升 </span></span><br><span class=\"line\"><span class=\"comment\">         var v = undefined; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        alert(typeof foo); //function </span></span><br><span class=\"line\"><span class=\"comment\">        alert(typeof bar); //undefined </span></span><br><span class=\"line\"><span class=\"comment\">\t\talert(v); //undefined </span></span><br><span class=\"line\"><span class=\"comment\">\t\t</span></span><br><span class=\"line\"><span class=\"comment\">        foo(); //local foo </span></span><br><span class=\"line\"><span class=\"comment\">        bar(); //报错，缺少对象 </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">        bar = function() </span></span><br><span class=\"line\"><span class=\"comment\">        &#123; </span></span><br><span class=\"line\"><span class=\"comment\">            alert(\"local bar\"); </span></span><br><span class=\"line\"><span class=\"comment\">        &#125;; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">       v = \"local\"; </span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    &#125; </span></span><br><span class=\"line\"><span class=\"comment\">    */</span>  </span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"在HTML中使用JS","date":"2018-06-10T14:20:34.000Z","_content":"这是js高程的第二章，主要讲的内容就是怎样在HTML中使用javascript。\n这章的内容包含四个部分：\n* &lt;script&gt; 标签\n* 嵌入脚本和外部脚本\n* 文档模式的影响\n* 禁用javascript的场景\n\n## &lt;script&gt; 标签\n向HTML页面中插入JavaScript的主要方法，就是使用&lt;script&gt;元素。\nhtml 4.01给script标签定义了以下属性\n  * async 异步标签，表示应该立即下载脚本，但不应妨碍页面中的其他操作。该属性只对外部脚本文件有效。但是，标记为async的脚本并不保证按照script排列的先后顺序执行。异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。\n  * charset:表示通过 src 属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。\n  * defer:表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。脚本会被延迟到整个页面都解析完毕后再运行。HTML5规范要求脚本按照它们出现的先后顺序执行，因此第一个延迟脚本会先于第二个延迟脚本执行，而这两个脚本会先于DOMContentLoaded事件执行。但是在现实当中，延迟脚本并不一定会按照顺序执行，也不一定会在 DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。\n  ```javascript\n  <script defer=\"defer\">\n  ```\n  * src:表示包含要执行代码的外部文件。如果要通过&lt;script&gt;元素来包含外部JavaScript文件，那么src 属性就是必需的。这个属性的值是一个指向外部JavaScript文件的链接。\n  需要注意的是，带有src属性的&lt;script&gt;元素不应该在其&lt;script&gt;和&lt;script&gt;标签之间再 包含额外的JavaScript代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。\n  通过&lt;script&gt;元素的 src 属性还可以包含来自外部域的 JavaScript 文件。\n  ```javascript\n  <script src=\"example.js\"></script>\n  ```\n  * type:type 属性规定脚本的MIME类型。type属性标示 &lt;script&gt;与&lt;/script&gt;标签之间的内容。MIME类型包括两部分：media type 和 subtype。对于JavaScript，MIME 类型是 \"text/javascript\"。在 HTML5中，type属性不再是必需的。默认值是\"text/javascript\"。\n\n## 嵌入脚本和外部脚本\n\n使用&lt;script&gt;元素的方式有两种:直接在页面中嵌入JavaScript代码和包含外部 JavaScript文件。无论如何包含代码，只要不存在defer和async属性，浏览器都会按照&lt;script&gt;元素在页面中 出现的先后顺序对它们依次进行解析。\n\n外部脚本的优势：\n 可维护性\n 可缓存: 浏览器能够根据具体的设置缓存链接的所有外部 JavaScript 文件\n 适应未来\n\n## 文档模式的影响\n\n最初的两种文档模式是:混杂模式(quirks mode)和标准模式(standards mode)。\n```html\n<!-- HTML 4.01 严格型 -->\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<!-- HTML 5 -->\n<!DOCTYPE html>\n```\n## 禁用javascript的场景\n\n关于禁用javascript的场景，主要是&lt;noscript&gt;\n这个元素可以包含能够出现在文档&lt;body&gt;中的任何 HTML 元素——&lt;script&gt;元素除外。包含 在&lt;noscript&gt;元素中的内容只有在下列情况下才会显示出来:\n 浏览器不支持脚本;\n 浏览器支持脚本，但脚本被禁用。\n```html\n<html>\n  <head>\n    <title>Example HTML Page</title>\n  </head>\n  <body>\n    <noscript> \n      <p>本页面需要浏览器支持(启用)JavaScript。\n    </noscript> \n    <script type=\"text/javascript\" defer=\"defer\" src=\"example1.js\"></script> \n    <script type=\"text/javascript\" defer=\"defer\" src=\"example2.js\"></script>\n  </body>\n</html>\n```\n\n## 总结\n\n把 JavaScript 插入到 HTML 页面中要使用&lt;script&gt;元素。使用这个元素可以把 JavaScript 嵌入到 HTML 页面中，让脚本与标记混合在一起;也可以包含外部的 JavaScript 文件。而我们需要注意的地方有:\n 在包含外部 JavaScript 文件时，必须将 src 属性设置为指向相应文件的 URL。而这个文件既可 以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。\n 所有&lt;script&gt;元素都会按照它们在页面中出现的先后顺序依次被解析。在不使用 defer 和 async 属性的情况下，只有在解析完前面&lt;script&gt;元素中的代码之后，才会开始解析后面 &lt;script&gt;元素中的代码。\n 由于浏览器会先解析完不使用 defer 属性的&lt;script&gt;元素中的代码，然后再解析后面的内容， 所以一般应该把&lt;script&gt;元素放在页面最后，即主要内容后面，&lt;／body&gt;标签前面。\n 使用 defer 属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。\n 使用 async 属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚\n本按照它们在页面中出现的顺序执行。 另外，使用&lt;noscript&gt;元素可以指定在不支持脚本的浏览器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示&lt;noscript&gt;元素中的任何内容。\n\n","source":"_posts/在HTML中使用JS.md","raw":"---\ntitle: 在HTML中使用JS\ndate: 2018-06-10 22:20:34\ntags: Javascript\ncategories: JS高程填坑笔记\n---\n这是js高程的第二章，主要讲的内容就是怎样在HTML中使用javascript。\n这章的内容包含四个部分：\n* &lt;script&gt; 标签\n* 嵌入脚本和外部脚本\n* 文档模式的影响\n* 禁用javascript的场景\n\n## &lt;script&gt; 标签\n向HTML页面中插入JavaScript的主要方法，就是使用&lt;script&gt;元素。\nhtml 4.01给script标签定义了以下属性\n  * async 异步标签，表示应该立即下载脚本，但不应妨碍页面中的其他操作。该属性只对外部脚本文件有效。但是，标记为async的脚本并不保证按照script排列的先后顺序执行。异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。\n  * charset:表示通过 src 属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。\n  * defer:表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。脚本会被延迟到整个页面都解析完毕后再运行。HTML5规范要求脚本按照它们出现的先后顺序执行，因此第一个延迟脚本会先于第二个延迟脚本执行，而这两个脚本会先于DOMContentLoaded事件执行。但是在现实当中，延迟脚本并不一定会按照顺序执行，也不一定会在 DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。\n  ```javascript\n  <script defer=\"defer\">\n  ```\n  * src:表示包含要执行代码的外部文件。如果要通过&lt;script&gt;元素来包含外部JavaScript文件，那么src 属性就是必需的。这个属性的值是一个指向外部JavaScript文件的链接。\n  需要注意的是，带有src属性的&lt;script&gt;元素不应该在其&lt;script&gt;和&lt;script&gt;标签之间再 包含额外的JavaScript代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。\n  通过&lt;script&gt;元素的 src 属性还可以包含来自外部域的 JavaScript 文件。\n  ```javascript\n  <script src=\"example.js\"></script>\n  ```\n  * type:type 属性规定脚本的MIME类型。type属性标示 &lt;script&gt;与&lt;/script&gt;标签之间的内容。MIME类型包括两部分：media type 和 subtype。对于JavaScript，MIME 类型是 \"text/javascript\"。在 HTML5中，type属性不再是必需的。默认值是\"text/javascript\"。\n\n## 嵌入脚本和外部脚本\n\n使用&lt;script&gt;元素的方式有两种:直接在页面中嵌入JavaScript代码和包含外部 JavaScript文件。无论如何包含代码，只要不存在defer和async属性，浏览器都会按照&lt;script&gt;元素在页面中 出现的先后顺序对它们依次进行解析。\n\n外部脚本的优势：\n 可维护性\n 可缓存: 浏览器能够根据具体的设置缓存链接的所有外部 JavaScript 文件\n 适应未来\n\n## 文档模式的影响\n\n最初的两种文档模式是:混杂模式(quirks mode)和标准模式(standards mode)。\n```html\n<!-- HTML 4.01 严格型 -->\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<!-- HTML 5 -->\n<!DOCTYPE html>\n```\n## 禁用javascript的场景\n\n关于禁用javascript的场景，主要是&lt;noscript&gt;\n这个元素可以包含能够出现在文档&lt;body&gt;中的任何 HTML 元素——&lt;script&gt;元素除外。包含 在&lt;noscript&gt;元素中的内容只有在下列情况下才会显示出来:\n 浏览器不支持脚本;\n 浏览器支持脚本，但脚本被禁用。\n```html\n<html>\n  <head>\n    <title>Example HTML Page</title>\n  </head>\n  <body>\n    <noscript> \n      <p>本页面需要浏览器支持(启用)JavaScript。\n    </noscript> \n    <script type=\"text/javascript\" defer=\"defer\" src=\"example1.js\"></script> \n    <script type=\"text/javascript\" defer=\"defer\" src=\"example2.js\"></script>\n  </body>\n</html>\n```\n\n## 总结\n\n把 JavaScript 插入到 HTML 页面中要使用&lt;script&gt;元素。使用这个元素可以把 JavaScript 嵌入到 HTML 页面中，让脚本与标记混合在一起;也可以包含外部的 JavaScript 文件。而我们需要注意的地方有:\n 在包含外部 JavaScript 文件时，必须将 src 属性设置为指向相应文件的 URL。而这个文件既可 以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。\n 所有&lt;script&gt;元素都会按照它们在页面中出现的先后顺序依次被解析。在不使用 defer 和 async 属性的情况下，只有在解析完前面&lt;script&gt;元素中的代码之后，才会开始解析后面 &lt;script&gt;元素中的代码。\n 由于浏览器会先解析完不使用 defer 属性的&lt;script&gt;元素中的代码，然后再解析后面的内容， 所以一般应该把&lt;script&gt;元素放在页面最后，即主要内容后面，&lt;／body&gt;标签前面。\n 使用 defer 属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。\n 使用 async 属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚\n本按照它们在页面中出现的顺序执行。 另外，使用&lt;noscript&gt;元素可以指定在不支持脚本的浏览器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示&lt;noscript&gt;元素中的任何内容。\n\n","slug":"在HTML中使用JS","published":1,"updated":"2018-06-10T15:06:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46yg9003xd6spi2dljrnx","content":"<p>这是js高程的第二章，主要讲的内容就是怎样在HTML中使用javascript。<br>这章的内容包含四个部分：</p>\n<ul>\n<li>&lt;script&gt; 标签</li>\n<li>嵌入脚本和外部脚本</li>\n<li>文档模式的影响</li>\n<li>禁用javascript的场景</li>\n</ul>\n<h2 id=\"lt-script-gt-标签\"><a href=\"#lt-script-gt-标签\" class=\"headerlink\" title=\"&lt;script&gt; 标签\"></a>&lt;script&gt; 标签</h2><p>向HTML页面中插入JavaScript的主要方法，就是使用&lt;script&gt;元素。<br>html 4.01给script标签定义了以下属性</p>\n<ul>\n<li>async 异步标签，表示应该立即下载脚本，但不应妨碍页面中的其他操作。该属性只对外部脚本文件有效。但是，标记为async的脚本并不保证按照script排列的先后顺序执行。异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。</li>\n<li>charset:表示通过 src 属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。</li>\n<li><p>defer:表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。脚本会被延迟到整个页面都解析完毕后再运行。HTML5规范要求脚本按照它们出现的先后顺序执行，因此第一个延迟脚本会先于第二个延迟脚本执行，而这两个脚本会先于DOMContentLoaded事件执行。但是在现实当中，延迟脚本并不一定会按照顺序执行，也不一定会在 DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script defer=<span class=\"string\">\"defer\"</span>&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>src:表示包含要执行代码的外部文件。如果要通过&lt;script&gt;元素来包含外部JavaScript文件，那么src 属性就是必需的。这个属性的值是一个指向外部JavaScript文件的链接。<br>需要注意的是，带有src属性的&lt;script&gt;元素不应该在其&lt;script&gt;和&lt;script&gt;标签之间再 包含额外的JavaScript代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。<br>通过&lt;script&gt;元素的 src 属性还可以包含来自外部域的 JavaScript 文件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"example.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>type:type 属性规定脚本的MIME类型。type属性标示 &lt;script&gt;与&lt;/script&gt;标签之间的内容。MIME类型包括两部分：media type 和 subtype。对于JavaScript，MIME 类型是 “text/javascript”。在 HTML5中，type属性不再是必需的。默认值是”text/javascript”。</p>\n</li>\n</ul>\n<h2 id=\"嵌入脚本和外部脚本\"><a href=\"#嵌入脚本和外部脚本\" class=\"headerlink\" title=\"嵌入脚本和外部脚本\"></a>嵌入脚本和外部脚本</h2><p>使用&lt;script&gt;元素的方式有两种:直接在页面中嵌入JavaScript代码和包含外部 JavaScript文件。无论如何包含代码，只要不存在defer和async属性，浏览器都会按照&lt;script&gt;元素在页面中 出现的先后顺序对它们依次进行解析。</p>\n<p>外部脚本的优势：<br> 可维护性<br> 可缓存: 浏览器能够根据具体的设置缓存链接的所有外部 JavaScript 文件<br> 适应未来</p>\n<h2 id=\"文档模式的影响\"><a href=\"#文档模式的影响\" class=\"headerlink\" title=\"文档模式的影响\"></a>文档模式的影响</h2><p>最初的两种文档模式是:混杂模式(quirks mode)和标准模式(standards mode)。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- HTML 4.01 严格型 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- HTML 5 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"禁用javascript的场景\"><a href=\"#禁用javascript的场景\" class=\"headerlink\" title=\"禁用javascript的场景\"></a>禁用javascript的场景</h2><p>关于禁用javascript的场景，主要是&lt;noscript&gt;<br>这个元素可以包含能够出现在文档&lt;body&gt;中的任何 HTML 元素——&lt;script&gt;元素除外。包含 在&lt;noscript&gt;元素中的内容只有在下列情况下才会显示出来:<br> 浏览器不支持脚本;<br> 浏览器支持脚本，但脚本被禁用。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Example HTML Page<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>本页面需要浏览器支持(启用)JavaScript。</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">defer</span>=<span class=\"string\">\"defer\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"example1.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">defer</span>=<span class=\"string\">\"defer\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"example2.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>把 JavaScript 插入到 HTML 页面中要使用&lt;script&gt;元素。使用这个元素可以把 JavaScript 嵌入到 HTML 页面中，让脚本与标记混合在一起;也可以包含外部的 JavaScript 文件。而我们需要注意的地方有:<br> 在包含外部 JavaScript 文件时，必须将 src 属性设置为指向相应文件的 URL。而这个文件既可 以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。<br> 所有&lt;script&gt;元素都会按照它们在页面中出现的先后顺序依次被解析。在不使用 defer 和 async 属性的情况下，只有在解析完前面&lt;script&gt;元素中的代码之后，才会开始解析后面 &lt;script&gt;元素中的代码。<br> 由于浏览器会先解析完不使用 defer 属性的&lt;script&gt;元素中的代码，然后再解析后面的内容， 所以一般应该把&lt;script&gt;元素放在页面最后，即主要内容后面，&lt;／body&gt;标签前面。<br> 使用 defer 属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。<br> 使用 async 属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚<br>本按照它们在页面中出现的顺序执行。 另外，使用&lt;noscript&gt;元素可以指定在不支持脚本的浏览器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示&lt;noscript&gt;元素中的任何内容。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>这是js高程的第二章，主要讲的内容就是怎样在HTML中使用javascript。<br>这章的内容包含四个部分：</p>\n<ul>\n<li>&lt;script&gt; 标签</li>\n<li>嵌入脚本和外部脚本</li>\n<li>文档模式的影响</li>\n<li>禁用javascript的场景</li>\n</ul>\n<h2 id=\"lt-script-gt-标签\"><a href=\"#lt-script-gt-标签\" class=\"headerlink\" title=\"&lt;script&gt; 标签\"></a>&lt;script&gt; 标签</h2><p>向HTML页面中插入JavaScript的主要方法，就是使用&lt;script&gt;元素。<br>html 4.01给script标签定义了以下属性</p>\n<ul>\n<li>async 异步标签，表示应该立即下载脚本，但不应妨碍页面中的其他操作。该属性只对外部脚本文件有效。但是，标记为async的脚本并不保证按照script排列的先后顺序执行。异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。</li>\n<li>charset:表示通过 src 属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。</li>\n<li><p>defer:表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。脚本会被延迟到整个页面都解析完毕后再运行。HTML5规范要求脚本按照它们出现的先后顺序执行，因此第一个延迟脚本会先于第二个延迟脚本执行，而这两个脚本会先于DOMContentLoaded事件执行。但是在现实当中，延迟脚本并不一定会按照顺序执行，也不一定会在 DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script defer=<span class=\"string\">\"defer\"</span>&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>src:表示包含要执行代码的外部文件。如果要通过&lt;script&gt;元素来包含外部JavaScript文件，那么src 属性就是必需的。这个属性的值是一个指向外部JavaScript文件的链接。<br>需要注意的是，带有src属性的&lt;script&gt;元素不应该在其&lt;script&gt;和&lt;script&gt;标签之间再 包含额外的JavaScript代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。<br>通过&lt;script&gt;元素的 src 属性还可以包含来自外部域的 JavaScript 文件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=<span class=\"string\">\"example.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>type:type 属性规定脚本的MIME类型。type属性标示 &lt;script&gt;与&lt;/script&gt;标签之间的内容。MIME类型包括两部分：media type 和 subtype。对于JavaScript，MIME 类型是 “text/javascript”。在 HTML5中，type属性不再是必需的。默认值是”text/javascript”。</p>\n</li>\n</ul>\n<h2 id=\"嵌入脚本和外部脚本\"><a href=\"#嵌入脚本和外部脚本\" class=\"headerlink\" title=\"嵌入脚本和外部脚本\"></a>嵌入脚本和外部脚本</h2><p>使用&lt;script&gt;元素的方式有两种:直接在页面中嵌入JavaScript代码和包含外部 JavaScript文件。无论如何包含代码，只要不存在defer和async属性，浏览器都会按照&lt;script&gt;元素在页面中 出现的先后顺序对它们依次进行解析。</p>\n<p>外部脚本的优势：<br> 可维护性<br> 可缓存: 浏览器能够根据具体的设置缓存链接的所有外部 JavaScript 文件<br> 适应未来</p>\n<h2 id=\"文档模式的影响\"><a href=\"#文档模式的影响\" class=\"headerlink\" title=\"文档模式的影响\"></a>文档模式的影响</h2><p>最初的两种文档模式是:混杂模式(quirks mode)和标准模式(standards mode)。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- HTML 4.01 严格型 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- HTML 5 --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"禁用javascript的场景\"><a href=\"#禁用javascript的场景\" class=\"headerlink\" title=\"禁用javascript的场景\"></a>禁用javascript的场景</h2><p>关于禁用javascript的场景，主要是&lt;noscript&gt;<br>这个元素可以包含能够出现在文档&lt;body&gt;中的任何 HTML 元素——&lt;script&gt;元素除外。包含 在&lt;noscript&gt;元素中的内容只有在下列情况下才会显示出来:<br> 浏览器不支持脚本;<br> 浏览器支持脚本，但脚本被禁用。<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Example HTML Page<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">noscript</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>本页面需要浏览器支持(启用)JavaScript。</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">noscript</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">defer</span>=<span class=\"string\">\"defer\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"example1.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">defer</span>=<span class=\"string\">\"defer\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"example2.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>把 JavaScript 插入到 HTML 页面中要使用&lt;script&gt;元素。使用这个元素可以把 JavaScript 嵌入到 HTML 页面中，让脚本与标记混合在一起;也可以包含外部的 JavaScript 文件。而我们需要注意的地方有:<br> 在包含外部 JavaScript 文件时，必须将 src 属性设置为指向相应文件的 URL。而这个文件既可 以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。<br> 所有&lt;script&gt;元素都会按照它们在页面中出现的先后顺序依次被解析。在不使用 defer 和 async 属性的情况下，只有在解析完前面&lt;script&gt;元素中的代码之后，才会开始解析后面 &lt;script&gt;元素中的代码。<br> 由于浏览器会先解析完不使用 defer 属性的&lt;script&gt;元素中的代码，然后再解析后面的内容， 所以一般应该把&lt;script&gt;元素放在页面最后，即主要内容后面，&lt;／body&gt;标签前面。<br> 使用 defer 属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。<br> 使用 async 属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚<br>本按照它们在页面中出现的顺序执行。 另外，使用&lt;noscript&gt;元素可以指定在不支持脚本的浏览器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示&lt;noscript&gt;元素中的任何内容。</p>\n"},{"title":"堆排序","date":"2018-05-21T07:05:00.000Z","_content":"堆排序(Heapsort)是指利用堆积树（堆）这种数据结构所设计的一种排序算法，它是选择排序的一种。可以利用数组的特点快速定位指定索引的元素。堆分为大根堆和小根堆，是完全二叉树。大根堆的要求是每个节点的值都不大于其父节点的值，即A[PARENT[i]] >= A[i]。在数组的非降序排序中，需要使用的就是大根堆，因为根据大根堆的要求可知，最大的值一定在堆顶。\n\n具体算法描述如下：\n\n1、将初始待排序关键字序列(R1,R2….Rn)构建成大顶堆，此堆为初始的无序区；\n2、将堆顶元素R[1]与最后一个元素R[n]交换，此时得到新的无序区(R1,R2,……Rn-1)和新的有序区(Rn),\n  且满足R[1,2…n-1]<=R[n]；\n3、由于交换后新的堆顶R[1]可能违反堆的性质，因此需要对当前无序区(R1,R2,……Rn-1)调整为新堆，然后再次将R[1]与无序区最后一个元素交换，得到新的无序区(R1,R2….Rn-2)和新的有序区(Rn-1,Rn)。不断重复此过程直到有序区的元素个数为n-1，则整个排序过程完成。\n\n时间复杂度：\n最好：O(nlog2n)，\n最坏：O(nlog2n)，\n平均：O(nlog2n)。\n\n\n\n```javascript\n/*方法说明：堆排序\n@param  array 待排序数组*/            \nconst heapSort = (arr) => {\n  if (Object.prototype.toString.call(array).slice(8, -1) === 'Array') {\n    //建堆\n    let heapSize = array.length, temp;\n    for (let i = Math.floor(heapSize / 2); i >= 0; i--) {\n        heapify(array, i, heapSize);\n    }\n\n    //堆排序\n    for (let j = heapSize - 1; j >= 1; j--) {\n        temp = array[0];\n        array[0] = array[j];\n        array[j] = temp;\n        heapify(array, 0, --heapSize);\n    }\n  } else {\n    return 'array is not an Array!';\n  }\n}\n/*方法说明：维护堆的性质\n@param  arr 数组\n@param  x   数组下标\n@param  len 堆大小*/\nconst heapify = (arr, x, len) => {\n  if (Object.prototype.toString.call(arr).slice(8, -1) === 'Array' && typeof x === 'number'){\n    let l = 2 * x, r = 2 * x + 1, largest = x, temp;\n    if (l < len && arr[l] > arr[largest]) {\n        largest = l;\n    }\n    if (r < len && arr[r] > arr[largest]) {\n        largest = r;\n    }\n    if (largest != x) {\n        temp = arr[x];\n        arr[x] = arr[largest];\n        arr[largest] = temp;\n        heapify(arr, largest, len);\n    }\n  } else {\n    return 'arr is not an Array or x is not a number!';\n  }\n}\n```","source":"_posts/堆排序.md","raw":"---\ntitle: 堆排序\ndate: 2018-05-21 15:05:00\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n堆排序(Heapsort)是指利用堆积树（堆）这种数据结构所设计的一种排序算法，它是选择排序的一种。可以利用数组的特点快速定位指定索引的元素。堆分为大根堆和小根堆，是完全二叉树。大根堆的要求是每个节点的值都不大于其父节点的值，即A[PARENT[i]] >= A[i]。在数组的非降序排序中，需要使用的就是大根堆，因为根据大根堆的要求可知，最大的值一定在堆顶。\n\n具体算法描述如下：\n\n1、将初始待排序关键字序列(R1,R2….Rn)构建成大顶堆，此堆为初始的无序区；\n2、将堆顶元素R[1]与最后一个元素R[n]交换，此时得到新的无序区(R1,R2,……Rn-1)和新的有序区(Rn),\n  且满足R[1,2…n-1]<=R[n]；\n3、由于交换后新的堆顶R[1]可能违反堆的性质，因此需要对当前无序区(R1,R2,……Rn-1)调整为新堆，然后再次将R[1]与无序区最后一个元素交换，得到新的无序区(R1,R2….Rn-2)和新的有序区(Rn-1,Rn)。不断重复此过程直到有序区的元素个数为n-1，则整个排序过程完成。\n\n时间复杂度：\n最好：O(nlog2n)，\n最坏：O(nlog2n)，\n平均：O(nlog2n)。\n\n\n\n```javascript\n/*方法说明：堆排序\n@param  array 待排序数组*/            \nconst heapSort = (arr) => {\n  if (Object.prototype.toString.call(array).slice(8, -1) === 'Array') {\n    //建堆\n    let heapSize = array.length, temp;\n    for (let i = Math.floor(heapSize / 2); i >= 0; i--) {\n        heapify(array, i, heapSize);\n    }\n\n    //堆排序\n    for (let j = heapSize - 1; j >= 1; j--) {\n        temp = array[0];\n        array[0] = array[j];\n        array[j] = temp;\n        heapify(array, 0, --heapSize);\n    }\n  } else {\n    return 'array is not an Array!';\n  }\n}\n/*方法说明：维护堆的性质\n@param  arr 数组\n@param  x   数组下标\n@param  len 堆大小*/\nconst heapify = (arr, x, len) => {\n  if (Object.prototype.toString.call(arr).slice(8, -1) === 'Array' && typeof x === 'number'){\n    let l = 2 * x, r = 2 * x + 1, largest = x, temp;\n    if (l < len && arr[l] > arr[largest]) {\n        largest = l;\n    }\n    if (r < len && arr[r] > arr[largest]) {\n        largest = r;\n    }\n    if (largest != x) {\n        temp = arr[x];\n        arr[x] = arr[largest];\n        arr[largest] = temp;\n        heapify(arr, largest, len);\n    }\n  } else {\n    return 'arr is not an Array or x is not a number!';\n  }\n}\n```","slug":"堆排序","published":1,"updated":"2018-05-21T09:51:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygb0040d6spt05kch5q","content":"<p>堆排序(Heapsort)是指利用堆积树（堆）这种数据结构所设计的一种排序算法，它是选择排序的一种。可以利用数组的特点快速定位指定索引的元素。堆分为大根堆和小根堆，是完全二叉树。大根堆的要求是每个节点的值都不大于其父节点的值，即A[PARENT[i]] &gt;= A[i]。在数组的非降序排序中，需要使用的就是大根堆，因为根据大根堆的要求可知，最大的值一定在堆顶。</p>\n<p>具体算法描述如下：</p>\n<p>1、将初始待排序关键字序列(R1,R2….Rn)构建成大顶堆，此堆为初始的无序区；<br>2、将堆顶元素R[1]与最后一个元素R[n]交换，此时得到新的无序区(R1,R2,……Rn-1)和新的有序区(Rn),<br>  且满足R[1,2…n-1]&lt;=R[n]；<br>3、由于交换后新的堆顶R[1]可能违反堆的性质，因此需要对当前无序区(R1,R2,……Rn-1)调整为新堆，然后再次将R[1]与无序区最后一个元素交换，得到新的无序区(R1,R2….Rn-2)和新的有序区(Rn-1,Rn)。不断重复此过程直到有序区的元素个数为n-1，则整个排序过程完成。</p>\n<p>时间复杂度：<br>最好：O(nlog2n)，<br>最坏：O(nlog2n)，<br>平均：O(nlog2n)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*方法说明：堆排序</span></span><br><span class=\"line\"><span class=\"comment\">@param  array 待排序数组*/</span>            </span><br><span class=\"line\"><span class=\"keyword\">const</span> heapSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.toString.call(array).slice(<span class=\"number\">8</span>, <span class=\"number\">-1</span>) === <span class=\"string\">'Array'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//建堆</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> heapSize = array.length, temp;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"built_in\">Math</span>.floor(heapSize / <span class=\"number\">2</span>); i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">        heapify(array, i, heapSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//堆排序</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = heapSize - <span class=\"number\">1</span>; j &gt;= <span class=\"number\">1</span>; j--) &#123;</span><br><span class=\"line\">        temp = array[<span class=\"number\">0</span>];</span><br><span class=\"line\">        array[<span class=\"number\">0</span>] = array[j];</span><br><span class=\"line\">        array[j] = temp;</span><br><span class=\"line\">        heapify(array, <span class=\"number\">0</span>, --heapSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'array is not an Array!'</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*方法说明：维护堆的性质</span></span><br><span class=\"line\"><span class=\"comment\">@param  arr 数组</span></span><br><span class=\"line\"><span class=\"comment\">@param  x   数组下标</span></span><br><span class=\"line\"><span class=\"comment\">@param  len 堆大小*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> heapify = <span class=\"function\">(<span class=\"params\">arr, x, len</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.toString.call(arr).slice(<span class=\"number\">8</span>, <span class=\"number\">-1</span>) === <span class=\"string\">'Array'</span> &amp;&amp; <span class=\"keyword\">typeof</span> x === <span class=\"string\">'number'</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> l = <span class=\"number\">2</span> * x, r = <span class=\"number\">2</span> * x + <span class=\"number\">1</span>, largest = x, temp;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &lt; len &amp;&amp; arr[l] &gt; arr[largest]) &#123;</span><br><span class=\"line\">        largest = l;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r &lt; len &amp;&amp; arr[r] &gt; arr[largest]) &#123;</span><br><span class=\"line\">        largest = r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (largest != x) &#123;</span><br><span class=\"line\">        temp = arr[x];</span><br><span class=\"line\">        arr[x] = arr[largest];</span><br><span class=\"line\">        arr[largest] = temp;</span><br><span class=\"line\">        heapify(arr, largest, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'arr is not an Array or x is not a number!'</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>堆排序(Heapsort)是指利用堆积树（堆）这种数据结构所设计的一种排序算法，它是选择排序的一种。可以利用数组的特点快速定位指定索引的元素。堆分为大根堆和小根堆，是完全二叉树。大根堆的要求是每个节点的值都不大于其父节点的值，即A[PARENT[i]] &gt;= A[i]。在数组的非降序排序中，需要使用的就是大根堆，因为根据大根堆的要求可知，最大的值一定在堆顶。</p>\n<p>具体算法描述如下：</p>\n<p>1、将初始待排序关键字序列(R1,R2….Rn)构建成大顶堆，此堆为初始的无序区；<br>2、将堆顶元素R[1]与最后一个元素R[n]交换，此时得到新的无序区(R1,R2,……Rn-1)和新的有序区(Rn),<br>  且满足R[1,2…n-1]&lt;=R[n]；<br>3、由于交换后新的堆顶R[1]可能违反堆的性质，因此需要对当前无序区(R1,R2,……Rn-1)调整为新堆，然后再次将R[1]与无序区最后一个元素交换，得到新的无序区(R1,R2….Rn-2)和新的有序区(Rn-1,Rn)。不断重复此过程直到有序区的元素个数为n-1，则整个排序过程完成。</p>\n<p>时间复杂度：<br>最好：O(nlog2n)，<br>最坏：O(nlog2n)，<br>平均：O(nlog2n)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*方法说明：堆排序</span></span><br><span class=\"line\"><span class=\"comment\">@param  array 待排序数组*/</span>            </span><br><span class=\"line\"><span class=\"keyword\">const</span> heapSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.toString.call(array).slice(<span class=\"number\">8</span>, <span class=\"number\">-1</span>) === <span class=\"string\">'Array'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//建堆</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> heapSize = array.length, temp;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"built_in\">Math</span>.floor(heapSize / <span class=\"number\">2</span>); i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">        heapify(array, i, heapSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//堆排序</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = heapSize - <span class=\"number\">1</span>; j &gt;= <span class=\"number\">1</span>; j--) &#123;</span><br><span class=\"line\">        temp = array[<span class=\"number\">0</span>];</span><br><span class=\"line\">        array[<span class=\"number\">0</span>] = array[j];</span><br><span class=\"line\">        array[j] = temp;</span><br><span class=\"line\">        heapify(array, <span class=\"number\">0</span>, --heapSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'array is not an Array!'</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*方法说明：维护堆的性质</span></span><br><span class=\"line\"><span class=\"comment\">@param  arr 数组</span></span><br><span class=\"line\"><span class=\"comment\">@param  x   数组下标</span></span><br><span class=\"line\"><span class=\"comment\">@param  len 堆大小*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> heapify = <span class=\"function\">(<span class=\"params\">arr, x, len</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.toString.call(arr).slice(<span class=\"number\">8</span>, <span class=\"number\">-1</span>) === <span class=\"string\">'Array'</span> &amp;&amp; <span class=\"keyword\">typeof</span> x === <span class=\"string\">'number'</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> l = <span class=\"number\">2</span> * x, r = <span class=\"number\">2</span> * x + <span class=\"number\">1</span>, largest = x, temp;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &lt; len &amp;&amp; arr[l] &gt; arr[largest]) &#123;</span><br><span class=\"line\">        largest = l;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r &lt; len &amp;&amp; arr[r] &gt; arr[largest]) &#123;</span><br><span class=\"line\">        largest = r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (largest != x) &#123;</span><br><span class=\"line\">        temp = arr[x];</span><br><span class=\"line\">        arr[x] = arr[largest];</span><br><span class=\"line\">        arr[largest] = temp;</span><br><span class=\"line\">        heapify(arr, largest, len);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'arr is not an Array or x is not a number!'</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"快速排序","date":"2018-05-19T06:01:19.000Z","_content":"快速排序（Quicksort）是对冒泡排序的一种改进。\n快速排序的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。\n\n一趟快速排序的算法是：\n（1）在数据集之中，选择一个元素作为\"基准\"（pivot）。\n（2）所有小于\"基准\"的元素，都移到\"基准\"的左边；所有大于\"基准\"的元素，都移到\"基准\"的右边。\n（3）对\"基准\"左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。\n\n最佳情况：T(n) = O(nlogn)\n最差情况：T(n) = O(n2)\n平均情况：T(n) = O(nlogn)\n\n```javascript\nconst quickSort = (arr) => {\n  if (arr.length <= 1) { return arr; }\n  let pivotIndex = arr.length >> 1;\n  console.log(pivotIndex);\n  let pivot = arr.splice(pivotIndex, 1)[0];\n  let left = [];\n  let right = [];\n  for (let i = 0; i < arr.length; i++){\n    if (arr[i] < pivot) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return quickSort(left).concat([pivot], quickSort(right));\n}\n```","source":"_posts/快速排序.md","raw":"---\ntitle: 快速排序\ndate: 2018-05-19 14:01:19\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n快速排序（Quicksort）是对冒泡排序的一种改进。\n快速排序的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。\n\n一趟快速排序的算法是：\n（1）在数据集之中，选择一个元素作为\"基准\"（pivot）。\n（2）所有小于\"基准\"的元素，都移到\"基准\"的左边；所有大于\"基准\"的元素，都移到\"基准\"的右边。\n（3）对\"基准\"左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。\n\n最佳情况：T(n) = O(nlogn)\n最差情况：T(n) = O(n2)\n平均情况：T(n) = O(nlogn)\n\n```javascript\nconst quickSort = (arr) => {\n  if (arr.length <= 1) { return arr; }\n  let pivotIndex = arr.length >> 1;\n  console.log(pivotIndex);\n  let pivot = arr.splice(pivotIndex, 1)[0];\n  let left = [];\n  let right = [];\n  for (let i = 0; i < arr.length; i++){\n    if (arr[i] < pivot) {\n      left.push(arr[i]);\n    } else {\n      right.push(arr[i]);\n    }\n  }\n  return quickSort(left).concat([pivot], quickSort(right));\n}\n```","slug":"快速排序","published":1,"updated":"2018-05-21T08:11:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygc0043d6spl9uiicei","content":"<p>快速排序（Quicksort）是对冒泡排序的一种改进。<br>快速排序的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p>\n<p>一趟快速排序的算法是：<br>（1）在数据集之中，选择一个元素作为”基准”（pivot）。<br>（2）所有小于”基准”的元素，都移到”基准”的左边；所有大于”基准”的元素，都移到”基准”的右边。<br>（3）对”基准”左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。</p>\n<p>最佳情况：T(n) = O(nlogn)<br>最差情况：T(n) = O(n2)<br>平均情况：T(n) = O(nlogn)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> quickSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.length &lt;= <span class=\"number\">1</span>) &#123; <span class=\"keyword\">return</span> arr; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> pivotIndex = arr.length &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pivotIndex);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> pivot = arr.splice(pivotIndex, <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> left = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> right = [];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class=\"line\">      left.push(arr[i]);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      right.push(arr[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> quickSort(left).concat([pivot], quickSort(right));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>快速排序（Quicksort）是对冒泡排序的一种改进。<br>快速排序的基本思想是：通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p>\n<p>一趟快速排序的算法是：<br>（1）在数据集之中，选择一个元素作为”基准”（pivot）。<br>（2）所有小于”基准”的元素，都移到”基准”的左边；所有大于”基准”的元素，都移到”基准”的右边。<br>（3）对”基准”左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。</p>\n<p>最佳情况：T(n) = O(nlogn)<br>最差情况：T(n) = O(n2)<br>平均情况：T(n) = O(nlogn)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> quickSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (arr.length &lt;= <span class=\"number\">1</span>) &#123; <span class=\"keyword\">return</span> arr; &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> pivotIndex = arr.length &gt;&gt; <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pivotIndex);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> pivot = arr.splice(pivotIndex, <span class=\"number\">1</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> left = [];</span><br><span class=\"line\">  <span class=\"keyword\">let</span> right = [];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class=\"line\">      left.push(arr[i]);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      right.push(arr[i]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> quickSort(left).concat([pivot], quickSort(right));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"归并排序","date":"2018-05-19T06:45:11.000Z","_content":"归并排序（MERGE-SORT）是建立在归并操作上的一种有效的排序算法,该算法是采用分治法（Divide and Conquer）的一个非常典型的应用。将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。\n\n把长度为n的输入序列分成两个长度为n/2的子序列；\n对这两个子序列分别采用归并排序；\n将两个排序好的子序列合并成一个最终的排序序列。\n\n\n归并操作的工作原理如下：\n第一步：申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列\n第二步：设定两个指针，最初位置分别为两个已经排序序列的起始位置\n第三步：比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置\n重复步骤3直到某一指针超出序列尾\n将另一序列剩下的所有元素直接复制到合并序列尾\n\n最佳情况：T(n) = O(n)\n最差情况：T(n) = O(nlogn)\n平均情况：T(n) = O(nlogn)\n\n```javascript\nconst mergeSort = (arr) => {\n  let len = arr.lenght;\n  if (len < 2) {\n    return arr;\n  }\n  let m = (len >> 1), //通过位运算符，将len取为一半。\n    left = array.slice(0, m),\n    right = array.slice(m); //拆分为两个子数组\n  return merge(mergeSort(left), mergeSort(right));//子数组继续递归拆分,然后再合并\n}\nconst merge = (left, right) => { //合并两个子数组\n  let res = [];\n  while (left.length && right.length) {\n    let item = left[0] <= right[0] ? left.shift() : right.shift();//注意:判断的条件是小于或等于,如果只是小于,那么排序将不稳定.\n    result.push(item);\n  }\n  return result.concat(left.length ? left : right);\n}\n```","source":"_posts/归并排序.md","raw":"---\ntitle: 归并排序\ndate: 2018-05-19 14:45:11\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n归并排序（MERGE-SORT）是建立在归并操作上的一种有效的排序算法,该算法是采用分治法（Divide and Conquer）的一个非常典型的应用。将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。\n\n把长度为n的输入序列分成两个长度为n/2的子序列；\n对这两个子序列分别采用归并排序；\n将两个排序好的子序列合并成一个最终的排序序列。\n\n\n归并操作的工作原理如下：\n第一步：申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列\n第二步：设定两个指针，最初位置分别为两个已经排序序列的起始位置\n第三步：比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置\n重复步骤3直到某一指针超出序列尾\n将另一序列剩下的所有元素直接复制到合并序列尾\n\n最佳情况：T(n) = O(n)\n最差情况：T(n) = O(nlogn)\n平均情况：T(n) = O(nlogn)\n\n```javascript\nconst mergeSort = (arr) => {\n  let len = arr.lenght;\n  if (len < 2) {\n    return arr;\n  }\n  let m = (len >> 1), //通过位运算符，将len取为一半。\n    left = array.slice(0, m),\n    right = array.slice(m); //拆分为两个子数组\n  return merge(mergeSort(left), mergeSort(right));//子数组继续递归拆分,然后再合并\n}\nconst merge = (left, right) => { //合并两个子数组\n  let res = [];\n  while (left.length && right.length) {\n    let item = left[0] <= right[0] ? left.shift() : right.shift();//注意:判断的条件是小于或等于,如果只是小于,那么排序将不稳定.\n    result.push(item);\n  }\n  return result.concat(left.length ? left : right);\n}\n```","slug":"归并排序","published":1,"updated":"2018-05-21T07:03:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygd0046d6sp7qa07c64","content":"<p>归并排序（MERGE-SORT）是建立在归并操作上的一种有效的排序算法,该算法是采用分治法（Divide and Conquer）的一个非常典型的应用。将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。</p>\n<p>把长度为n的输入序列分成两个长度为n/2的子序列；<br>对这两个子序列分别采用归并排序；<br>将两个排序好的子序列合并成一个最终的排序序列。</p>\n<p>归并操作的工作原理如下：<br>第一步：申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列<br>第二步：设定两个指针，最初位置分别为两个已经排序序列的起始位置<br>第三步：比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置<br>重复步骤3直到某一指针超出序列尾<br>将另一序列剩下的所有元素直接复制到合并序列尾</p>\n<p>最佳情况：T(n) = O(n)<br>最差情况：T(n) = O(nlogn)<br>平均情况：T(n) = O(nlogn)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> mergeSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.lenght;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (len &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> m = (len &gt;&gt; <span class=\"number\">1</span>), <span class=\"comment\">//通过位运算符，将len取为一半。</span></span><br><span class=\"line\">    left = array.slice(<span class=\"number\">0</span>, m),</span><br><span class=\"line\">    right = array.slice(m); <span class=\"comment\">//拆分为两个子数组</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> merge(mergeSort(left), mergeSort(right));<span class=\"comment\">//子数组继续递归拆分,然后再合并</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"function\">(<span class=\"params\">left, right</span>) =&gt;</span> &#123; <span class=\"comment\">//合并两个子数组</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (left.length &amp;&amp; right.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> item = left[<span class=\"number\">0</span>] &lt;= right[<span class=\"number\">0</span>] ? left.shift() : right.shift();<span class=\"comment\">//注意:判断的条件是小于或等于,如果只是小于,那么排序将不稳定.</span></span><br><span class=\"line\">    result.push(item);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result.concat(left.length ? left : right);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>归并排序（MERGE-SORT）是建立在归并操作上的一种有效的排序算法,该算法是采用分治法（Divide and Conquer）的一个非常典型的应用。将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并。</p>\n<p>把长度为n的输入序列分成两个长度为n/2的子序列；<br>对这两个子序列分别采用归并排序；<br>将两个排序好的子序列合并成一个最终的排序序列。</p>\n<p>归并操作的工作原理如下：<br>第一步：申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列<br>第二步：设定两个指针，最初位置分别为两个已经排序序列的起始位置<br>第三步：比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置<br>重复步骤3直到某一指针超出序列尾<br>将另一序列剩下的所有元素直接复制到合并序列尾</p>\n<p>最佳情况：T(n) = O(n)<br>最差情况：T(n) = O(nlogn)<br>平均情况：T(n) = O(nlogn)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> mergeSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.lenght;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (len &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> m = (len &gt;&gt; <span class=\"number\">1</span>), <span class=\"comment\">//通过位运算符，将len取为一半。</span></span><br><span class=\"line\">    left = array.slice(<span class=\"number\">0</span>, m),</span><br><span class=\"line\">    right = array.slice(m); <span class=\"comment\">//拆分为两个子数组</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> merge(mergeSort(left), mergeSort(right));<span class=\"comment\">//子数组继续递归拆分,然后再合并</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"function\">(<span class=\"params\">left, right</span>) =&gt;</span> &#123; <span class=\"comment\">//合并两个子数组</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> res = [];</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (left.length &amp;&amp; right.length) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> item = left[<span class=\"number\">0</span>] &lt;= right[<span class=\"number\">0</span>] ? left.shift() : right.shift();<span class=\"comment\">//注意:判断的条件是小于或等于,如果只是小于,那么排序将不稳定.</span></span><br><span class=\"line\">    result.push(item);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result.concat(left.length ? left : right);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"如何去掉两个span间的间距","date":"2018-05-14T07:13:21.000Z","_content":"```html\n<!-- html -->\n<div>\n    <span></span>\n    <span><span>\n</div>\n```\n```CSS\n/* CSS */\ndiv{\n    font-size：10px；\n}\nspan{\n    display:inline-block;\n}\n```\n设置成块级元素的span，会因为父元素设置字体的大小，导致两个span外的空格会占有空隙。 \n所以将父元素的font-size：0； \n然后再单独设置span的字体大小就可以解决这个问题。\n\n","source":"_posts/如何去掉两个span间的间距.md","raw":"---\ntitle: 如何去掉两个span间的间距\ndate: 2018-05-14 15:13:21\ntags: [html, CSS]\ncategories: bug汇总\n---\n```html\n<!-- html -->\n<div>\n    <span></span>\n    <span><span>\n</div>\n```\n```CSS\n/* CSS */\ndiv{\n    font-size：10px；\n}\nspan{\n    display:inline-block;\n}\n```\n设置成块级元素的span，会因为父元素设置字体的大小，导致两个span外的空格会占有空隙。 \n所以将父元素的font-size：0； \n然后再单独设置span的字体大小就可以解决这个问题。\n\n","slug":"如何去掉两个span间的间距","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygf0049d6sp5wzidwta","content":"<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* CSS */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">    font-size：10px；</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">span</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:inline-block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>设置成块级元素的span，会因为父元素设置字体的大小，导致两个span外的空格会占有空隙。<br>所以将父元素的font-size：0；<br>然后再单独设置span的字体大小就可以解决这个问题。</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* CSS */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">    font-size：10px；</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">span</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>:inline-block;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>设置成块级元素的span，会因为父元素设置字体的大小，导致两个span外的空格会占有空隙。<br>所以将父元素的font-size：0；<br>然后再单独设置span的字体大小就可以解决这个问题。</p>\n"},{"title":"插入排序","date":"2018-05-25T08:07:55.000Z","_content":"插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，时间复杂度为O(n^2)。是稳定的排序方法。插入算法把要排序的数组分成两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。\n插入排序的基本思想是：每步将一个待排序的记录，按其关键码值的大小插入前面已经排序的文件中适当位置上，直到全部插入完为止。\n\n直接插入排序的算法思路：\n（1） 设置监视哨r[0]，将待插入记录的值赋值给r[0]；\n（2） 设置开始查找的位置j；\n（3） 在数组中进行搜索，搜索中将第j个记录后移，直至r[0].key≥r[j].key为止；\n（4） 将r[0]插入r[j+1]的位置上。\n\n```javascript\nconst insertionSort = (arr) => {\n  let len = arr.length;\n  for(let i=1; i<len; i++) {\n    let j = i;\n    let tmp = arr[i];\n    while(j > 0 && arr[j-1] > tmp) {\n        arr[j] = arr[j-1];\n        j--;\n    }\n    arr[j] = tmp;\n  }\n\n  return arr;\n}\n```","source":"_posts/插入排序.md","raw":"---\ntitle: 插入排序\ndate: 2018-05-25 16:07:55\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，时间复杂度为O(n^2)。是稳定的排序方法。插入算法把要排序的数组分成两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。\n插入排序的基本思想是：每步将一个待排序的记录，按其关键码值的大小插入前面已经排序的文件中适当位置上，直到全部插入完为止。\n\n直接插入排序的算法思路：\n（1） 设置监视哨r[0]，将待插入记录的值赋值给r[0]；\n（2） 设置开始查找的位置j；\n（3） 在数组中进行搜索，搜索中将第j个记录后移，直至r[0].key≥r[j].key为止；\n（4） 将r[0]插入r[j+1]的位置上。\n\n```javascript\nconst insertionSort = (arr) => {\n  let len = arr.length;\n  for(let i=1; i<len; i++) {\n    let j = i;\n    let tmp = arr[i];\n    while(j > 0 && arr[j-1] > tmp) {\n        arr[j] = arr[j-1];\n        j--;\n    }\n    arr[j] = tmp;\n  }\n\n  return arr;\n}\n```","slug":"插入排序","published":1,"updated":"2018-05-25T08:12:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygg004cd6spa2n69yxj","content":"<p>插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，时间复杂度为O(n^2)。是稳定的排序方法。插入算法把要排序的数组分成两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。<br>插入排序的基本思想是：每步将一个待排序的记录，按其关键码值的大小插入前面已经排序的文件中适当位置上，直到全部插入完为止。</p>\n<p>直接插入排序的算法思路：<br>（1） 设置监视哨r[0]，将待插入记录的值赋值给r[0]；<br>（2） 设置开始查找的位置j；<br>（3） 在数组中进行搜索，搜索中将第j个记录后移，直至r[0].key≥r[j].key为止；<br>（4） 将r[0]插入r[j+1]的位置上。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> insertionSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">1</span>; i&lt;len; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> j = i;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tmp = arr[i];</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j &gt; <span class=\"number\">0</span> &amp;&amp; arr[j<span class=\"number\">-1</span>] &gt; tmp) &#123;</span><br><span class=\"line\">        arr[j] = arr[j<span class=\"number\">-1</span>];</span><br><span class=\"line\">        j--;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    arr[j] = tmp;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>插入排序的基本操作就是将一个数据插入到已经排好序的有序数据中，从而得到一个新的、个数加一的有序数据，算法适用于少量数据的排序，时间复杂度为O(n^2)。是稳定的排序方法。插入算法把要排序的数组分成两部分：第一部分包含了这个数组的所有元素，但将最后一个元素除外（让数组多一个空间才有插入的位置），而第二部分就只包含这一个元素（即待插入元素）。在第一部分排序完成后，再将这个最后元素插入到已排好序的第一部分中。<br>插入排序的基本思想是：每步将一个待排序的记录，按其关键码值的大小插入前面已经排序的文件中适当位置上，直到全部插入完为止。</p>\n<p>直接插入排序的算法思路：<br>（1） 设置监视哨r[0]，将待插入记录的值赋值给r[0]；<br>（2） 设置开始查找的位置j；<br>（3） 在数组中进行搜索，搜索中将第j个记录后移，直至r[0].key≥r[j].key为止；<br>（4） 将r[0]插入r[j+1]的位置上。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> insertionSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">1</span>; i&lt;len; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> j = i;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tmp = arr[i];</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(j &gt; <span class=\"number\">0</span> &amp;&amp; arr[j<span class=\"number\">-1</span>] &gt; tmp) &#123;</span><br><span class=\"line\">        arr[j] = arr[j<span class=\"number\">-1</span>];</span><br><span class=\"line\">        j--;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    arr[j] = tmp;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"放飞的thinking～","date":"2018-05-24T08:53:09.000Z","_content":"<h1>百度前端技术学院学习笔记（一）</h1>\n\n## 目标简介\n\n* Date: 2018.05.24 Thr\n* Flag: 真男人就坚持66天。\n* Target: 了解前端。\n* Time: 1h\n\n## 课程内容\n\n1、什么是前端？\n  前端这个概念，我觉得应该这么来理解，<b>前</b>：表示与用户直接有关的部分，比如页面的展示，与用户的交互等，<b>端</b>：是终端的部分，包括pc，移动端以及其他的一些可以与用于交互的终端。\n  从百度百科上看到了前端的解释：\n  <blockquote>前端即网站前台部分，运行在PC端，移动端等浏览器上展现给用户浏览的网页。随着互联网技术的发展，HTML5，CSS3，前端框架的应用，跨平台响应式网页设计能够适应各种屏幕分辨率，完美的动效设计，给用户带来极高的用户体验。</blockquote>\n  感觉差不多吧…\n\n2、什么是html？\n  <blockquote>html：超文本标记语言，标准通用标记语言下的一个应用。</blockquote>\n  我理解的是，用来构建页面的骨架的语言。\n  html提供了语义化的标签，以及相关的属性，根据标签和属性以及内容构建页面的骨架。\n\n3、什么是CSS？\n  <blockquote>CSS：层叠样式表(英文全称：Cascading Style Sheets)是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。</blockquote>\n  CSS，可以理解成骨架的衣服，好的页面有了骨架还不行，还得需要漂亮的衣服。html写好了骨架，通过写CSS来写样式，让页面变得更好看。\n\n4、什么是Javascript？\n  <blockquote>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</blockquote>\n  js是一种脚本语言，可以给页面添加交互，以及相关的逻辑，还有和后台通过接口交互数据等。\n\n## 课程疑问\n\n1、现在背景下的大前端该如何发展？\n2、框架的不断推出，框架的学习和个人技能的发展的均衡？\n3、因为node的存在，前端工程师往全栈工程师的发展是否成为必要？\n\n<h1>总结</h1>\n学习前端有一年的时间了，半路出家，从机械转到了前端。从开始写外包，囫囵吞枣，会用就行，到工作之后，发现自己欠缺的东西还有好多好多。开始逐渐的弥补自己的知识。\n虽然起步比较晚，但是还是很喜欢js这个不断进步的语言～\n希望能够通过自己的努力，成为一个真正的FE developer！","source":"_posts/放飞的thinking～.md","raw":"---\ntitle: 放飞的thinking～\ndate: 2018-05-24 16:53:09\ntags: [html, CSS, Javascript]\ncategories: Glory Road\n---\n<h1>百度前端技术学院学习笔记（一）</h1>\n\n## 目标简介\n\n* Date: 2018.05.24 Thr\n* Flag: 真男人就坚持66天。\n* Target: 了解前端。\n* Time: 1h\n\n## 课程内容\n\n1、什么是前端？\n  前端这个概念，我觉得应该这么来理解，<b>前</b>：表示与用户直接有关的部分，比如页面的展示，与用户的交互等，<b>端</b>：是终端的部分，包括pc，移动端以及其他的一些可以与用于交互的终端。\n  从百度百科上看到了前端的解释：\n  <blockquote>前端即网站前台部分，运行在PC端，移动端等浏览器上展现给用户浏览的网页。随着互联网技术的发展，HTML5，CSS3，前端框架的应用，跨平台响应式网页设计能够适应各种屏幕分辨率，完美的动效设计，给用户带来极高的用户体验。</blockquote>\n  感觉差不多吧…\n\n2、什么是html？\n  <blockquote>html：超文本标记语言，标准通用标记语言下的一个应用。</blockquote>\n  我理解的是，用来构建页面的骨架的语言。\n  html提供了语义化的标签，以及相关的属性，根据标签和属性以及内容构建页面的骨架。\n\n3、什么是CSS？\n  <blockquote>CSS：层叠样式表(英文全称：Cascading Style Sheets)是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。</blockquote>\n  CSS，可以理解成骨架的衣服，好的页面有了骨架还不行，还得需要漂亮的衣服。html写好了骨架，通过写CSS来写样式，让页面变得更好看。\n\n4、什么是Javascript？\n  <blockquote>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</blockquote>\n  js是一种脚本语言，可以给页面添加交互，以及相关的逻辑，还有和后台通过接口交互数据等。\n\n## 课程疑问\n\n1、现在背景下的大前端该如何发展？\n2、框架的不断推出，框架的学习和个人技能的发展的均衡？\n3、因为node的存在，前端工程师往全栈工程师的发展是否成为必要？\n\n<h1>总结</h1>\n学习前端有一年的时间了，半路出家，从机械转到了前端。从开始写外包，囫囵吞枣，会用就行，到工作之后，发现自己欠缺的东西还有好多好多。开始逐渐的弥补自己的知识。\n虽然起步比较晚，但是还是很喜欢js这个不断进步的语言～\n希望能够通过自己的努力，成为一个真正的FE developer！","slug":"放飞的thinking～","published":1,"updated":"2018-05-28T02:55:59.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygh004fd6spgpfgwwd1","content":"<h1>百度前端技术学院学习笔记（一）</h1>\n\n<h2 id=\"目标简介\"><a href=\"#目标简介\" class=\"headerlink\" title=\"目标简介\"></a>目标简介</h2><ul>\n<li>Date: 2018.05.24 Thr</li>\n<li>Flag: 真男人就坚持66天。</li>\n<li>Target: 了解前端。</li>\n<li>Time: 1h</li>\n</ul>\n<h2 id=\"课程内容\"><a href=\"#课程内容\" class=\"headerlink\" title=\"课程内容\"></a>课程内容</h2><p>1、什么是前端？<br>  前端这个概念，我觉得应该这么来理解，<b>前</b>：表示与用户直接有关的部分，比如页面的展示，与用户的交互等，<b>端</b>：是终端的部分，包括pc，移动端以及其他的一些可以与用于交互的终端。<br>  从百度百科上看到了前端的解释：<br>  <blockquote>前端即网站前台部分，运行在PC端，移动端等浏览器上展现给用户浏览的网页。随着互联网技术的发展，HTML5，CSS3，前端框架的应用，跨平台响应式网页设计能够适应各种屏幕分辨率，完美的动效设计，给用户带来极高的用户体验。</blockquote><br>  感觉差不多吧…</p>\n<p>2、什么是html？<br>  <blockquote>html：超文本标记语言，标准通用标记语言下的一个应用。</blockquote><br>  我理解的是，用来构建页面的骨架的语言。<br>  html提供了语义化的标签，以及相关的属性，根据标签和属性以及内容构建页面的骨架。</p>\n<p>3、什么是CSS？<br>  <blockquote>CSS：层叠样式表(英文全称：Cascading Style Sheets)是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。</blockquote><br>  CSS，可以理解成骨架的衣服，好的页面有了骨架还不行，还得需要漂亮的衣服。html写好了骨架，通过写CSS来写样式，让页面变得更好看。</p>\n<p>4、什么是Javascript？<br>  <blockquote>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</blockquote><br>  js是一种脚本语言，可以给页面添加交互，以及相关的逻辑，还有和后台通过接口交互数据等。</p>\n<h2 id=\"课程疑问\"><a href=\"#课程疑问\" class=\"headerlink\" title=\"课程疑问\"></a>课程疑问</h2><p>1、现在背景下的大前端该如何发展？<br>2、框架的不断推出，框架的学习和个人技能的发展的均衡？<br>3、因为node的存在，前端工程师往全栈工程师的发展是否成为必要？</p>\n<p></p><h1>总结</h1><br>学习前端有一年的时间了，半路出家，从机械转到了前端。从开始写外包，囫囵吞枣，会用就行，到工作之后，发现自己欠缺的东西还有好多好多。开始逐渐的弥补自己的知识。<br>虽然起步比较晚，但是还是很喜欢js这个不断进步的语言～<br>希望能够通过自己的努力，成为一个真正的FE developer！<p></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>百度前端技术学院学习笔记（一）</h1>\n\n<h2 id=\"目标简介\"><a href=\"#目标简介\" class=\"headerlink\" title=\"目标简介\"></a>目标简介</h2><ul>\n<li>Date: 2018.05.24 Thr</li>\n<li>Flag: 真男人就坚持66天。</li>\n<li>Target: 了解前端。</li>\n<li>Time: 1h</li>\n</ul>\n<h2 id=\"课程内容\"><a href=\"#课程内容\" class=\"headerlink\" title=\"课程内容\"></a>课程内容</h2><p>1、什么是前端？<br>  前端这个概念，我觉得应该这么来理解，<b>前</b>：表示与用户直接有关的部分，比如页面的展示，与用户的交互等，<b>端</b>：是终端的部分，包括pc，移动端以及其他的一些可以与用于交互的终端。<br>  从百度百科上看到了前端的解释：<br>  <blockquote>前端即网站前台部分，运行在PC端，移动端等浏览器上展现给用户浏览的网页。随着互联网技术的发展，HTML5，CSS3，前端框架的应用，跨平台响应式网页设计能够适应各种屏幕分辨率，完美的动效设计，给用户带来极高的用户体验。</blockquote><br>  感觉差不多吧…</p>\n<p>2、什么是html？<br>  <blockquote>html：超文本标记语言，标准通用标记语言下的一个应用。</blockquote><br>  我理解的是，用来构建页面的骨架的语言。<br>  html提供了语义化的标签，以及相关的属性，根据标签和属性以及内容构建页面的骨架。</p>\n<p>3、什么是CSS？<br>  <blockquote>CSS：层叠样式表(英文全称：Cascading Style Sheets)是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。</blockquote><br>  CSS，可以理解成骨架的衣服，好的页面有了骨架还不行，还得需要漂亮的衣服。html写好了骨架，通过写CSS来写样式，让页面变得更好看。</p>\n<p>4、什么是Javascript？<br>  <blockquote>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</blockquote><br>  js是一种脚本语言，可以给页面添加交互，以及相关的逻辑，还有和后台通过接口交互数据等。</p>\n<h2 id=\"课程疑问\"><a href=\"#课程疑问\" class=\"headerlink\" title=\"课程疑问\"></a>课程疑问</h2><p>1、现在背景下的大前端该如何发展？<br>2、框架的不断推出，框架的学习和个人技能的发展的均衡？<br>3、因为node的存在，前端工程师往全栈工程师的发展是否成为必要？</p>\n<p></p><h1>总结</h1><br>学习前端有一年的时间了，半路出家，从机械转到了前端。从开始写外包，囫囵吞枣，会用就行，到工作之后，发现自己欠缺的东西还有好多好多。开始逐渐的弥补自己的知识。<br>虽然起步比较晚，但是还是很喜欢js这个不断进步的语言～<br>希望能够通过自己的努力，成为一个真正的FE developer！<p></p>\n"},{"title":"正则填坑","date":"2018-05-25T05:58:47.000Z","_content":"<h1>正则表达式</h1>\n\n## 简介\n\n正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为\"元字符\"）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。\n\n## 应用\n\n通过使用正则表达式，可以：\n1、测试字符串内的模式。\n例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。\n替换文本。\n2、可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。\n基于模式匹配从字符串中提取子字符串。\n3、可以查找文档内或输入域内特定的文本。\n\n## 语法\n\n正则表达式包含好多种字符，普通字符，非打印字符，特殊字符，限定符，定位符\n\n元字符\n\n| 字符 | 描述 | \n| ---- |:-----------:|\n| \\\t | 将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。例如，'n' 匹配字符 \"n\"。'\\n' 匹配一个换行符。序列 '\\\\' 匹配 \"\\\" 而 \"\\(\" 则匹配 \"(\"。 | \n|^\t|匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\\n' 或 '\\r' 之后的位置。|\n|$\t|匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\\n' 或 '\\r' 之前的位置。|\n|*\t|匹配前面的子表达式零次或多次。例如，zo* 能匹配 \"z\" 以及 \"zoo\"。* 等价于{0,}。|\n|+\t|匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 \"zo\" 以及 \"zoo\"，但不能匹配 \"z\"。+ 等价于 {1,}。|\n|?\t|匹配前面的子表达式零次或一次。例如，\"do(es)?\" 可以匹配 \"do\" 或 \"does\" 。? 等价于 {0,1}。|\n|{n}\t|n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 \"Bob\" 中的 'o'，但是能匹配 \"food\" 中的两个 o。|\n|{n,}\t|n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 \"Bob\" 中的 'o'，但能匹配 \"foooood\" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。|\n|{n,m}\t|m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，\"o{1,3}\" 将匹配 \"fooooood\" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。|\n|?\t|当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 \"oooo\"，'o+?' 将匹配单个 \"o\"，而 'o+' 将匹配所有 'o'。|\n|.\t|匹配除换行符（\\n、\\r）之外的任何单个字符。要匹配包括 '\\n' 在内的任何字符，请使用像\"(.\\n)\"的模式。|\n|[xyz]\t|字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 \"plain\" 中的 'a'。|\n|[^xyz]\t|负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 \"plain\" 中的'p'、'l'、'i'、'n'。|\n|[a-z]\t|字符范围。匹配指定范围内的任意字符。例如，'[a-z]' 可以匹配 'a' 到 'z' 范围内的任意小写字母字符。|\n|[^a-z]\t|负值字符范围。匹配任何不在指定范围内的任意字符。例如，'[^a-z]' 可以匹配任何不在 'a' 到 'z' 范围内的任意字符。|\n|\\b\t|匹配一个单词边界，也就是指单词和空格间的位置。例如， 'er\\b' 可以匹配\"never\" 中的 'er'，但不能匹配 \"verb\" 中的 'er'。|\n|\\B\t|匹配非单词边界。'er\\B' 能匹配 \"verb\" 中的 'er'，但不能匹配 \"never\" 中的 'er'。|\n|\\cx |匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。|\n|\\d\t|匹配一个数字字符。等价于 [0-9]。|\n|\\D\t|匹配一个非数字字符。等价于 [^0-9]。|\n|\\f\t|匹配一个换页符。等价于 \\x0c 和 \\cL。|\n|\\n\t|匹配一个换行符。等价于 \\x0a 和 \\cJ。|\n|\\r\t|匹配一个回车符。等价于 \\x0d 和 \\cM。|\n|\\s\t|匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。|\n|\\S\t|匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。|\n|\\t\t|匹配一个制表符。等价于 \\x09 和 \\cI。|\n|\\v\t|匹配一个垂直制表符。等价于 \\x0b 和 \\cK。|\n|\\w\t|匹配字母、数字、下划线。等价于'[A-Za-z0-9_]'。|\n|\\W\t|匹配非字母、数字、下划线。等价于 '[^A-Za-z0-9_]'。|\n|\\xn\t|匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\\x41' 匹配 \"A\"。'\\x041' 则等价于 '\\x04' & \"1\"。正则表达式中可以使用 ASCII 编码。|\n|\\num\t|匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，'(.)\\1' 匹配两个连续的相同字符。|\n|\\n\t|标识一个八进制转义值或一个向后引用。如果 \\n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。|\n|\\nm\t|标识一个八进制转义值或一个向后引用。如果 \\nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \\nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \\nm 将匹配八进制转义值 nm。|\n|\\nml\t|如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。|\n|\\un\t|匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \\u00A9 匹配版权符号 (?)。|\n\n![其他](https://github.com/kaisa911/studyNotes/blob/master/public/image/reg.png?raw=true)","source":"_posts/正则填坑.md","raw":"---\ntitle: 正则填坑\ndate: 2018-05-25 13:58:47\ntags: Javascript\ncategories: 学习笔记\n---\n<h1>正则表达式</h1>\n\n## 简介\n\n正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为\"元字符\"）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。\n\n## 应用\n\n通过使用正则表达式，可以：\n1、测试字符串内的模式。\n例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。\n替换文本。\n2、可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。\n基于模式匹配从字符串中提取子字符串。\n3、可以查找文档内或输入域内特定的文本。\n\n## 语法\n\n正则表达式包含好多种字符，普通字符，非打印字符，特殊字符，限定符，定位符\n\n元字符\n\n| 字符 | 描述 | \n| ---- |:-----------:|\n| \\\t | 将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。例如，'n' 匹配字符 \"n\"。'\\n' 匹配一个换行符。序列 '\\\\' 匹配 \"\\\" 而 \"\\(\" 则匹配 \"(\"。 | \n|^\t|匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\\n' 或 '\\r' 之后的位置。|\n|$\t|匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\\n' 或 '\\r' 之前的位置。|\n|*\t|匹配前面的子表达式零次或多次。例如，zo* 能匹配 \"z\" 以及 \"zoo\"。* 等价于{0,}。|\n|+\t|匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 \"zo\" 以及 \"zoo\"，但不能匹配 \"z\"。+ 等价于 {1,}。|\n|?\t|匹配前面的子表达式零次或一次。例如，\"do(es)?\" 可以匹配 \"do\" 或 \"does\" 。? 等价于 {0,1}。|\n|{n}\t|n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 \"Bob\" 中的 'o'，但是能匹配 \"food\" 中的两个 o。|\n|{n,}\t|n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 \"Bob\" 中的 'o'，但能匹配 \"foooood\" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。|\n|{n,m}\t|m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，\"o{1,3}\" 将匹配 \"fooooood\" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。|\n|?\t|当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 \"oooo\"，'o+?' 将匹配单个 \"o\"，而 'o+' 将匹配所有 'o'。|\n|.\t|匹配除换行符（\\n、\\r）之外的任何单个字符。要匹配包括 '\\n' 在内的任何字符，请使用像\"(.\\n)\"的模式。|\n|[xyz]\t|字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 \"plain\" 中的 'a'。|\n|[^xyz]\t|负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 \"plain\" 中的'p'、'l'、'i'、'n'。|\n|[a-z]\t|字符范围。匹配指定范围内的任意字符。例如，'[a-z]' 可以匹配 'a' 到 'z' 范围内的任意小写字母字符。|\n|[^a-z]\t|负值字符范围。匹配任何不在指定范围内的任意字符。例如，'[^a-z]' 可以匹配任何不在 'a' 到 'z' 范围内的任意字符。|\n|\\b\t|匹配一个单词边界，也就是指单词和空格间的位置。例如， 'er\\b' 可以匹配\"never\" 中的 'er'，但不能匹配 \"verb\" 中的 'er'。|\n|\\B\t|匹配非单词边界。'er\\B' 能匹配 \"verb\" 中的 'er'，但不能匹配 \"never\" 中的 'er'。|\n|\\cx |匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。|\n|\\d\t|匹配一个数字字符。等价于 [0-9]。|\n|\\D\t|匹配一个非数字字符。等价于 [^0-9]。|\n|\\f\t|匹配一个换页符。等价于 \\x0c 和 \\cL。|\n|\\n\t|匹配一个换行符。等价于 \\x0a 和 \\cJ。|\n|\\r\t|匹配一个回车符。等价于 \\x0d 和 \\cM。|\n|\\s\t|匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。|\n|\\S\t|匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。|\n|\\t\t|匹配一个制表符。等价于 \\x09 和 \\cI。|\n|\\v\t|匹配一个垂直制表符。等价于 \\x0b 和 \\cK。|\n|\\w\t|匹配字母、数字、下划线。等价于'[A-Za-z0-9_]'。|\n|\\W\t|匹配非字母、数字、下划线。等价于 '[^A-Za-z0-9_]'。|\n|\\xn\t|匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\\x41' 匹配 \"A\"。'\\x041' 则等价于 '\\x04' & \"1\"。正则表达式中可以使用 ASCII 编码。|\n|\\num\t|匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，'(.)\\1' 匹配两个连续的相同字符。|\n|\\n\t|标识一个八进制转义值或一个向后引用。如果 \\n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。|\n|\\nm\t|标识一个八进制转义值或一个向后引用。如果 \\nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \\nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \\nm 将匹配八进制转义值 nm。|\n|\\nml\t|如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。|\n|\\un\t|匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \\u00A9 匹配版权符号 (?)。|\n\n![其他](https://github.com/kaisa911/studyNotes/blob/master/public/image/reg.png?raw=true)","slug":"正则填坑","published":1,"updated":"2018-05-25T07:07:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygi004id6sp012g1tm7","content":"<h1>正则表达式</h1>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为”元字符”）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。</p>\n<h2 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h2><p>通过使用正则表达式，可以：<br>1、测试字符串内的模式。<br>例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。<br>替换文本。<br>2、可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。<br>基于模式匹配从字符串中提取子字符串。<br>3、可以查找文档内或输入域内特定的文本。</p>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>正则表达式包含好多种字符，普通字符，非打印字符，特殊字符，限定符，定位符</p>\n<p>元字符</p>\n<table>\n<thead>\n<tr>\n<th>字符</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\\</td>\n<td style=\"text-align:center\">将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。例如，’n’ 匹配字符 “n”。’\\n’ 匹配一个换行符。序列 ‘\\‘ 匹配 “\\” 而 “(“ 则匹配 “(“。</td>\n</tr>\n<tr>\n<td>^</td>\n<td style=\"text-align:center\">匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\\n’ 或 ‘\\r’ 之后的位置。</td>\n</tr>\n<tr>\n<td>$</td>\n<td style=\"text-align:center\">匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\\n’ 或 ‘\\r’ 之前的位置。</td>\n</tr>\n<tr>\n<td>*</td>\n<td style=\"text-align:center\">匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。</td>\n</tr>\n<tr>\n<td>+</td>\n<td style=\"text-align:center\">匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>\n</tr>\n<tr>\n<td>?</td>\n<td style=\"text-align:center\">匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 或 “does” 。? 等价于 {0,1}。</td>\n</tr>\n<tr>\n<td>{n}</td>\n<td style=\"text-align:center\">n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>\n</tr>\n<tr>\n<td>{n,}</td>\n<td style=\"text-align:center\">n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td>\n</tr>\n<tr>\n<td>{n,m}</td>\n<td style=\"text-align:center\">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>\n</tr>\n<tr>\n<td>?</td>\n<td style=\"text-align:center\">当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 “oooo”，’o+?’ 将匹配单个 “o”，而 ‘o+’ 将匹配所有 ‘o’。</td>\n</tr>\n<tr>\n<td>.</td>\n<td style=\"text-align:center\">匹配除换行符（\\n、\\r）之外的任何单个字符。要匹配包括 ‘\\n’ 在内的任何字符，请使用像”(.\\n)”的模式。</td>\n</tr>\n<tr>\n<td>[xyz]</td>\n<td style=\"text-align:center\">字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。</td>\n</tr>\n<tr>\n<td>[^xyz]</td>\n<td style=\"text-align:center\">负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’、’l’、’i’、’n’。</td>\n</tr>\n<tr>\n<td>[a-z]</td>\n<td style=\"text-align:center\">字符范围。匹配指定范围内的任意字符。例如，’[a-z]’ 可以匹配 ‘a’ 到 ‘z’ 范围内的任意小写字母字符。</td>\n</tr>\n<tr>\n<td>[^a-z]</td>\n<td style=\"text-align:center\">负值字符范围。匹配任何不在指定范围内的任意字符。例如，’[^a-z]’ 可以匹配任何不在 ‘a’ 到 ‘z’ 范围内的任意字符。</td>\n</tr>\n<tr>\n<td>\\b</td>\n<td style=\"text-align:center\">匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’。</td>\n</tr>\n<tr>\n<td>\\B</td>\n<td style=\"text-align:center\">匹配非单词边界。’er\\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’。</td>\n</tr>\n<tr>\n<td>\\cx</td>\n<td style=\"text-align:center\">匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td>\n</tr>\n<tr>\n<td>\\d</td>\n<td style=\"text-align:center\">匹配一个数字字符。等价于 [0-9]。</td>\n</tr>\n<tr>\n<td>\\D</td>\n<td style=\"text-align:center\">匹配一个非数字字符。等价于 [^0-9]。</td>\n</tr>\n<tr>\n<td>\\f</td>\n<td style=\"text-align:center\">匹配一个换页符。等价于 \\x0c 和 \\cL。</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td style=\"text-align:center\">匹配一个换行符。等价于 \\x0a 和 \\cJ。</td>\n</tr>\n<tr>\n<td>\\r</td>\n<td style=\"text-align:center\">匹配一个回车符。等价于 \\x0d 和 \\cM。</td>\n</tr>\n<tr>\n<td>\\s</td>\n<td style=\"text-align:center\">匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。</td>\n</tr>\n<tr>\n<td>\\S</td>\n<td style=\"text-align:center\">匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。</td>\n</tr>\n<tr>\n<td>\\t</td>\n<td style=\"text-align:center\">匹配一个制表符。等价于 \\x09 和 \\cI。</td>\n</tr>\n<tr>\n<td>\\v</td>\n<td style=\"text-align:center\">匹配一个垂直制表符。等价于 \\x0b 和 \\cK。</td>\n</tr>\n<tr>\n<td>\\w</td>\n<td style=\"text-align:center\">匹配字母、数字、下划线。等价于’[A-Za-z0-9_]’。</td>\n</tr>\n<tr>\n<td>\\W</td>\n<td style=\"text-align:center\">匹配非字母、数字、下划线。等价于 ‘[^A-Za-z0-9_]’。</td>\n</tr>\n<tr>\n<td>\\xn</td>\n<td style=\"text-align:center\">匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，’\\x41’ 匹配 “A”。’\\x041’ 则等价于 ‘\\x04’ &amp; “1”。正则表达式中可以使用 ASCII 编码。</td>\n</tr>\n<tr>\n<td>\\num</td>\n<td style=\"text-align:center\">匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，’(.)\\1’ 匹配两个连续的相同字符。</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td style=\"text-align:center\">标识一个八进制转义值或一个向后引用。如果 \\n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。</td>\n</tr>\n<tr>\n<td>\\nm</td>\n<td style=\"text-align:center\">标识一个八进制转义值或一个向后引用。如果 \\nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \\nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \\nm 将匹配八进制转义值 nm。</td>\n</tr>\n<tr>\n<td>\\nml</td>\n<td style=\"text-align:center\">如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。</td>\n</tr>\n<tr>\n<td>\\un</td>\n<td style=\"text-align:center\">匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \\u00A9 匹配版权符号 (?)。</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/reg.png?raw=true\" alt=\"其他\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1>正则表达式</h1>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为”元字符”）。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。</p>\n<h2 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h2><p>通过使用正则表达式，可以：<br>1、测试字符串内的模式。<br>例如，可以测试输入字符串，以查看字符串内是否出现电话号码模式或信用卡号码模式。这称为数据验证。<br>替换文本。<br>2、可以使用正则表达式来识别文档中的特定文本，完全删除该文本或者用其他文本替换它。<br>基于模式匹配从字符串中提取子字符串。<br>3、可以查找文档内或输入域内特定的文本。</p>\n<h2 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h2><p>正则表达式包含好多种字符，普通字符，非打印字符，特殊字符，限定符，定位符</p>\n<p>元字符</p>\n<table>\n<thead>\n<tr>\n<th>字符</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\\</td>\n<td style=\"text-align:center\">将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。例如，’n’ 匹配字符 “n”。’\\n’ 匹配一个换行符。序列 ‘\\‘ 匹配 “\\” 而 “(“ 则匹配 “(“。</td>\n</tr>\n<tr>\n<td>^</td>\n<td style=\"text-align:center\">匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\\n’ 或 ‘\\r’ 之后的位置。</td>\n</tr>\n<tr>\n<td>$</td>\n<td style=\"text-align:center\">匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\\n’ 或 ‘\\r’ 之前的位置。</td>\n</tr>\n<tr>\n<td>*</td>\n<td style=\"text-align:center\">匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。</td>\n</tr>\n<tr>\n<td>+</td>\n<td style=\"text-align:center\">匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>\n</tr>\n<tr>\n<td>?</td>\n<td style=\"text-align:center\">匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 或 “does” 。? 等价于 {0,1}。</td>\n</tr>\n<tr>\n<td>{n}</td>\n<td style=\"text-align:center\">n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>\n</tr>\n<tr>\n<td>{n,}</td>\n<td style=\"text-align:center\">n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td>\n</tr>\n<tr>\n<td>{n,m}</td>\n<td style=\"text-align:center\">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>\n</tr>\n<tr>\n<td>?</td>\n<td style=\"text-align:center\">当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 “oooo”，’o+?’ 将匹配单个 “o”，而 ‘o+’ 将匹配所有 ‘o’。</td>\n</tr>\n<tr>\n<td>.</td>\n<td style=\"text-align:center\">匹配除换行符（\\n、\\r）之外的任何单个字符。要匹配包括 ‘\\n’ 在内的任何字符，请使用像”(.\\n)”的模式。</td>\n</tr>\n<tr>\n<td>[xyz]</td>\n<td style=\"text-align:center\">字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。</td>\n</tr>\n<tr>\n<td>[^xyz]</td>\n<td style=\"text-align:center\">负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’、’l’、’i’、’n’。</td>\n</tr>\n<tr>\n<td>[a-z]</td>\n<td style=\"text-align:center\">字符范围。匹配指定范围内的任意字符。例如，’[a-z]’ 可以匹配 ‘a’ 到 ‘z’ 范围内的任意小写字母字符。</td>\n</tr>\n<tr>\n<td>[^a-z]</td>\n<td style=\"text-align:center\">负值字符范围。匹配任何不在指定范围内的任意字符。例如，’[^a-z]’ 可以匹配任何不在 ‘a’ 到 ‘z’ 范围内的任意字符。</td>\n</tr>\n<tr>\n<td>\\b</td>\n<td style=\"text-align:center\">匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’。</td>\n</tr>\n<tr>\n<td>\\B</td>\n<td style=\"text-align:center\">匹配非单词边界。’er\\B’ 能匹配 “verb” 中的 ‘er’，但不能匹配 “never” 中的 ‘er’。</td>\n</tr>\n<tr>\n<td>\\cx</td>\n<td style=\"text-align:center\">匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td>\n</tr>\n<tr>\n<td>\\d</td>\n<td style=\"text-align:center\">匹配一个数字字符。等价于 [0-9]。</td>\n</tr>\n<tr>\n<td>\\D</td>\n<td style=\"text-align:center\">匹配一个非数字字符。等价于 [^0-9]。</td>\n</tr>\n<tr>\n<td>\\f</td>\n<td style=\"text-align:center\">匹配一个换页符。等价于 \\x0c 和 \\cL。</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td style=\"text-align:center\">匹配一个换行符。等价于 \\x0a 和 \\cJ。</td>\n</tr>\n<tr>\n<td>\\r</td>\n<td style=\"text-align:center\">匹配一个回车符。等价于 \\x0d 和 \\cM。</td>\n</tr>\n<tr>\n<td>\\s</td>\n<td style=\"text-align:center\">匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。</td>\n</tr>\n<tr>\n<td>\\S</td>\n<td style=\"text-align:center\">匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。</td>\n</tr>\n<tr>\n<td>\\t</td>\n<td style=\"text-align:center\">匹配一个制表符。等价于 \\x09 和 \\cI。</td>\n</tr>\n<tr>\n<td>\\v</td>\n<td style=\"text-align:center\">匹配一个垂直制表符。等价于 \\x0b 和 \\cK。</td>\n</tr>\n<tr>\n<td>\\w</td>\n<td style=\"text-align:center\">匹配字母、数字、下划线。等价于’[A-Za-z0-9_]’。</td>\n</tr>\n<tr>\n<td>\\W</td>\n<td style=\"text-align:center\">匹配非字母、数字、下划线。等价于 ‘[^A-Za-z0-9_]’。</td>\n</tr>\n<tr>\n<td>\\xn</td>\n<td style=\"text-align:center\">匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，’\\x41’ 匹配 “A”。’\\x041’ 则等价于 ‘\\x04’ &amp; “1”。正则表达式中可以使用 ASCII 编码。</td>\n</tr>\n<tr>\n<td>\\num</td>\n<td style=\"text-align:center\">匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，’(.)\\1’ 匹配两个连续的相同字符。</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td style=\"text-align:center\">标识一个八进制转义值或一个向后引用。如果 \\n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。</td>\n</tr>\n<tr>\n<td>\\nm</td>\n<td style=\"text-align:center\">标识一个八进制转义值或一个向后引用。如果 \\nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \\nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \\nm 将匹配八进制转义值 nm。</td>\n</tr>\n<tr>\n<td>\\nml</td>\n<td style=\"text-align:center\">如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。</td>\n</tr>\n<tr>\n<td>\\un</td>\n<td style=\"text-align:center\">匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \\u00A9 匹配版权符号 (?)。</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"https://github.com/kaisa911/studyNotes/blob/master/public/image/reg.png?raw=true\" alt=\"其他\"></p>\n"},{"title":"设置overflow：hidden导致相邻行内元素向下偏移的问题","date":"2018-05-14T07:18:34.000Z","_content":"```html\n<!-- html -->\n<div>\n  <span></span>\n  <span></span>\n  <span></span>\n</div>\n```\n```CSS\n/* CSS */\ndiv span{\n  display:inline-block;\n}\ndiv span:nth(0){\n  overflow:hidden;\n}\n```\n这样设置之后，后面的两个span会向下偏移一定距离 \n实际上就是inline-block元素的默认baseline和其下外边沿的距离。 \n常用的解决方法是为上述inline-block元素添加vertical-align: bottom。","source":"_posts/设置overflow：hidden导致相邻行内元素向下偏移的问题.md","raw":"---\ntitle: 设置overflow：hidden导致相邻行内元素向下偏移的问题\ndate: 2018-05-14 15:18:34\ntags: [html, CSS]\ncategories: bug汇总\n---\n```html\n<!-- html -->\n<div>\n  <span></span>\n  <span></span>\n  <span></span>\n</div>\n```\n```CSS\n/* CSS */\ndiv span{\n  display:inline-block;\n}\ndiv span:nth(0){\n  overflow:hidden;\n}\n```\n这样设置之后，后面的两个span会向下偏移一定距离 \n实际上就是inline-block元素的默认baseline和其下外边沿的距离。 \n常用的解决方法是为上述inline-block元素添加vertical-align: bottom。","slug":"设置overflow：hidden导致相邻行内元素向下偏移的问题","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygk004ld6spfxbvv3wg","content":"<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* CSS */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>:inline-block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth(0)</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>:hidden;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样设置之后，后面的两个span会向下偏移一定距离<br>实际上就是inline-block元素的默认baseline和其下外边沿的距离。<br>常用的解决方法是为上述inline-block元素添加vertical-align: bottom。</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- html --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* CSS */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>:inline-block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> <span class=\"selector-tag\">span</span><span class=\"selector-pseudo\">:nth(0)</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>:hidden;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样设置之后，后面的两个span会向下偏移一定距离<br>实际上就是inline-block元素的默认baseline和其下外边沿的距离。<br>常用的解决方法是为上述inline-block元素添加vertical-align: bottom。</p>\n"},{"title":"瀑布流布局","date":"2018-05-09T09:17:52.000Z","_content":"瀑布流布局\n\n在知乎看到大佬说，学习前端的第一阶段要会一些js基本的特效，学习一下，做几个Demo来看看\n\n好像有那么两种方法：\n1、通过css来搞定瀑布流\n2、通过js来控制\n\n## CSS方法解决瀑布流\n因为css3有了一个新的属性:column\n我们在图片或者需要瀑布流的模块的父元素设置column属性就可以达到这种瀑布流的效果。\n```CSS\n#main{\n    /*定位*/\n    /*position: relative;*/\n    /*多栏布局 设置栏宽度*/\n    -webkit-column-width:202px;\n    -moz-column-width:202px;\n    column-width:202px;\n}\n```\n\n## JS方法来解决瀑布流布局\n首先先把html写出来：\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>瀑布流布局</title>\n</head>\n<body>\n  <div id=\"main\">\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img4.imgtn.bdimg.com/it/u=3673652172,785167112&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img1.imgtn.bdimg.com/it/u=2752884811,3342547378&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img5.imgtn.bdimg.com/it/u=2573504723,2456120500&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img0.imgtn.bdimg.com/it/u=3214770734,3861052448&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img4.imgtn.bdimg.com/it/u=3407532446,2830180038&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img0.imgtn.bdimg.com/it/u=30302420,912099376&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img5.imgtn.bdimg.com/it/u=2347360460,2805552283&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n```\n在html里写了很多的图片（这里没有写出来，也可以从后台拉取数据）\n然后对图片做一些样式的调整：\n```CSS\n<style>\n    * {\n      padding: 0px;\n      margin: 0px;\n    }\n    #main {\n      position: relative;\n    }\n    .wrap {\n      padding: 15px 0px 0px 15px;\n      float: left;\n    }\n    .img {\n      padding: 10px;\n      border-radius: 5px;\n      border: 1px solid #ccc;\n      box-shadow: 0 0 5px #ccc;\n    }\n    .img img {\n      width: 240px;\n      height: auto;\n    }\n  </style>\n```\n对图片做一些操作，宽度确定，高度auto;\n然后开始用js对这些图片做一些处理\n```javascript\n<script>\n    window.onload = function () {\n      waterFull('main', 'wrap');\n    }\n\n    function waterFull(parent, children) {\n      var oParent = document.getElementById(parent);\n      var oWraps = getByClass(oParent, children);\n      //计算整个页面显示的列数\n      var oWrapWeight = oWraps[0].offsetWidth;\n      var cols = Math.floor(document.documentElement.clientWidth / oWrapWeight);\n      //设置main的宽度，并且居中\n      oParent.style.cssText = 'width:' + oWrapWeight * cols + 'px; margin: 0 auto';\n      //找出高度最小的图片，将下一个图片放在下面\n      //定义一个数组，存放每一列的高度，初始化存的是第一行的所有列的高度\n      var arrHeight = [];\n      for (var i = 0; i < oWraps.length; i++) {\n        if (i < cols) {\n          arrHeight.push(oWraps[i].offsetHeight);\n        }else {\n          var minHeight = Math.min.apply(null, arrHeight);\n          var minIndex = getMinhIndex(arrHeight, minHeight);\n          oWraps[i].style.position = 'absolute';\n          oWraps[i].style.top = minHeight + 'px';\n          oWraps[i].style.left = minIndex * oWrapWeight + 'px';\n          arrHeight[minIndex] += oWraps[i].offsetHeight;\n        }\n      }\n    }\n    function getByClass(parent, className) {\n      var boxArr = new Array();//用来获取所有class为box的元素\n      oElement = parent.getElementsByTagName('*');\n      for (var i = 0; i < oElement.length; i++) {\n        if (oElement[i].className == className) {\n          boxArr.push(oElement[i]);\n        }\n      };\n      return boxArr;\n    }\n    //获取当前最小值得下标\n    function getMinhIndex(array, min) {\n      for (var i in array) {\n        if (array[i] == min)\n          return i;\n      }\n    }\n  </script>\n```\n搞定～\n\n","source":"_posts/瀑布流布局.md","raw":"---\ntitle: 瀑布流布局\ndate: 2018-05-09 17:17:52\ntags: [html, CSS, Javascript]\ncategories: Demo练习\n---\n瀑布流布局\n\n在知乎看到大佬说，学习前端的第一阶段要会一些js基本的特效，学习一下，做几个Demo来看看\n\n好像有那么两种方法：\n1、通过css来搞定瀑布流\n2、通过js来控制\n\n## CSS方法解决瀑布流\n因为css3有了一个新的属性:column\n我们在图片或者需要瀑布流的模块的父元素设置column属性就可以达到这种瀑布流的效果。\n```CSS\n#main{\n    /*定位*/\n    /*position: relative;*/\n    /*多栏布局 设置栏宽度*/\n    -webkit-column-width:202px;\n    -moz-column-width:202px;\n    column-width:202px;\n}\n```\n\n## JS方法来解决瀑布流布局\n首先先把html写出来：\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>瀑布流布局</title>\n</head>\n<body>\n  <div id=\"main\">\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img4.imgtn.bdimg.com/it/u=3673652172,785167112&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img1.imgtn.bdimg.com/it/u=2752884811,3342547378&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img5.imgtn.bdimg.com/it/u=2573504723,2456120500&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img0.imgtn.bdimg.com/it/u=3214770734,3861052448&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img4.imgtn.bdimg.com/it/u=3407532446,2830180038&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img0.imgtn.bdimg.com/it/u=30302420,912099376&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n    <div class=\"wrap\">\n      <div class=\"img\">\n        <img src=\"http://img5.imgtn.bdimg.com/it/u=2347360460,2805552283&fm=27&gp=0.jpg\">\n      </div>\n    </div>\n  </div>\n</body>\n</html>\n```\n在html里写了很多的图片（这里没有写出来，也可以从后台拉取数据）\n然后对图片做一些样式的调整：\n```CSS\n<style>\n    * {\n      padding: 0px;\n      margin: 0px;\n    }\n    #main {\n      position: relative;\n    }\n    .wrap {\n      padding: 15px 0px 0px 15px;\n      float: left;\n    }\n    .img {\n      padding: 10px;\n      border-radius: 5px;\n      border: 1px solid #ccc;\n      box-shadow: 0 0 5px #ccc;\n    }\n    .img img {\n      width: 240px;\n      height: auto;\n    }\n  </style>\n```\n对图片做一些操作，宽度确定，高度auto;\n然后开始用js对这些图片做一些处理\n```javascript\n<script>\n    window.onload = function () {\n      waterFull('main', 'wrap');\n    }\n\n    function waterFull(parent, children) {\n      var oParent = document.getElementById(parent);\n      var oWraps = getByClass(oParent, children);\n      //计算整个页面显示的列数\n      var oWrapWeight = oWraps[0].offsetWidth;\n      var cols = Math.floor(document.documentElement.clientWidth / oWrapWeight);\n      //设置main的宽度，并且居中\n      oParent.style.cssText = 'width:' + oWrapWeight * cols + 'px; margin: 0 auto';\n      //找出高度最小的图片，将下一个图片放在下面\n      //定义一个数组，存放每一列的高度，初始化存的是第一行的所有列的高度\n      var arrHeight = [];\n      for (var i = 0; i < oWraps.length; i++) {\n        if (i < cols) {\n          arrHeight.push(oWraps[i].offsetHeight);\n        }else {\n          var minHeight = Math.min.apply(null, arrHeight);\n          var minIndex = getMinhIndex(arrHeight, minHeight);\n          oWraps[i].style.position = 'absolute';\n          oWraps[i].style.top = minHeight + 'px';\n          oWraps[i].style.left = minIndex * oWrapWeight + 'px';\n          arrHeight[minIndex] += oWraps[i].offsetHeight;\n        }\n      }\n    }\n    function getByClass(parent, className) {\n      var boxArr = new Array();//用来获取所有class为box的元素\n      oElement = parent.getElementsByTagName('*');\n      for (var i = 0; i < oElement.length; i++) {\n        if (oElement[i].className == className) {\n          boxArr.push(oElement[i]);\n        }\n      };\n      return boxArr;\n    }\n    //获取当前最小值得下标\n    function getMinhIndex(array, min) {\n      for (var i in array) {\n        if (array[i] == min)\n          return i;\n      }\n    }\n  </script>\n```\n搞定～\n\n","slug":"瀑布流布局","published":1,"updated":"2018-05-14T09:59:24.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygl004od6spwbd8sezu","content":"<p>瀑布流布局</p>\n<p>在知乎看到大佬说，学习前端的第一阶段要会一些js基本的特效，学习一下，做几个Demo来看看</p>\n<p>好像有那么两种方法：<br>1、通过css来搞定瀑布流<br>2、通过js来控制</p>\n<h2 id=\"CSS方法解决瀑布流\"><a href=\"#CSS方法解决瀑布流\" class=\"headerlink\" title=\"CSS方法解决瀑布流\"></a>CSS方法解决瀑布流</h2><p>因为css3有了一个新的属性:column<br>我们在图片或者需要瀑布流的模块的父元素设置column属性就可以达到这种瀑布流的效果。<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#main</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*定位*/</span></span><br><span class=\"line\">    <span class=\"comment\">/*position: relative;*/</span></span><br><span class=\"line\">    <span class=\"comment\">/*多栏布局 设置栏宽度*/</span></span><br><span class=\"line\">    <span class=\"attribute\">-webkit-column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">-moz-column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"JS方法来解决瀑布流布局\"><a href=\"#JS方法来解决瀑布流布局\" class=\"headerlink\" title=\"JS方法来解决瀑布流布局\"></a>JS方法来解决瀑布流布局</h2><p>首先先把html写出来：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>瀑布流布局<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img4.imgtn.bdimg.com/it/u=3673652172,785167112&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img1.imgtn.bdimg.com/it/u=2752884811,3342547378&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img5.imgtn.bdimg.com/it/u=2573504723,2456120500&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img0.imgtn.bdimg.com/it/u=3214770734,3861052448&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img4.imgtn.bdimg.com/it/u=3407532446,2830180038&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img0.imgtn.bdimg.com/it/u=30302420,912099376&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img5.imgtn.bdimg.com/it/u=2347360460,2805552283&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>在html里写了很多的图片（这里没有写出来，也可以从后台拉取数据）<br>然后对图片做一些样式的调整：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"selector-tag\">style</span>&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-id\">#main</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">15px</span> <span class=\"number\">0px</span> <span class=\"number\">0px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.img</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</span><br><span class=\"line\">      <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"number\">#ccc</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.img</span> <span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">width</span>: <span class=\"number\">240px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">height</span>: auto;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<p>对图片做一些操作，宽度确定，高度auto;<br>然后开始用js对这些图片做一些处理<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      waterFull(<span class=\"string\">'main'</span>, <span class=\"string\">'wrap'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">waterFull</span>(<span class=\"params\">parent, children</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> oParent = <span class=\"built_in\">document</span>.getElementById(parent);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> oWraps = getByClass(oParent, children);</span><br><span class=\"line\">      <span class=\"comment\">//计算整个页面显示的列数</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> oWrapWeight = oWraps[<span class=\"number\">0</span>].offsetWidth;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> cols = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">document</span>.documentElement.clientWidth / oWrapWeight);</span><br><span class=\"line\">      <span class=\"comment\">//设置main的宽度，并且居中</span></span><br><span class=\"line\">      oParent.style.cssText = <span class=\"string\">'width:'</span> + oWrapWeight * cols + <span class=\"string\">'px; margin: 0 auto'</span>;</span><br><span class=\"line\">      <span class=\"comment\">//找出高度最小的图片，将下一个图片放在下面</span></span><br><span class=\"line\">      <span class=\"comment\">//定义一个数组，存放每一列的高度，初始化存的是第一行的所有列的高度</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> arrHeight = [];</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oWraps.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; cols) &#123;</span><br><span class=\"line\">          arrHeight.push(oWraps[i].offsetHeight);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> minHeight = <span class=\"built_in\">Math</span>.min.apply(<span class=\"literal\">null</span>, arrHeight);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> minIndex = getMinhIndex(arrHeight, minHeight);</span><br><span class=\"line\">          oWraps[i].style.position = <span class=\"string\">'absolute'</span>;</span><br><span class=\"line\">          oWraps[i].style.top = minHeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">          oWraps[i].style.left = minIndex * oWrapWeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">          arrHeight[minIndex] += oWraps[i].offsetHeight;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getByClass</span>(<span class=\"params\">parent, className</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> boxArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();<span class=\"comment\">//用来获取所有class为box的元素</span></span><br><span class=\"line\">      oElement = parent.getElementsByTagName(<span class=\"string\">'*'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oElement.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oElement[i].className == className) &#123;</span><br><span class=\"line\">          boxArr.push(oElement[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> boxArr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//获取当前最小值得下标</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMinhIndex</span>(<span class=\"params\">array, min</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> array) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (array[i] == min)</span><br><span class=\"line\">          <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>搞定～</p>\n","site":{"data":{}},"excerpt":"","more":"<p>瀑布流布局</p>\n<p>在知乎看到大佬说，学习前端的第一阶段要会一些js基本的特效，学习一下，做几个Demo来看看</p>\n<p>好像有那么两种方法：<br>1、通过css来搞定瀑布流<br>2、通过js来控制</p>\n<h2 id=\"CSS方法解决瀑布流\"><a href=\"#CSS方法解决瀑布流\" class=\"headerlink\" title=\"CSS方法解决瀑布流\"></a>CSS方法解决瀑布流</h2><p>因为css3有了一个新的属性:column<br>我们在图片或者需要瀑布流的模块的父元素设置column属性就可以达到这种瀑布流的效果。<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#main</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*定位*/</span></span><br><span class=\"line\">    <span class=\"comment\">/*position: relative;*/</span></span><br><span class=\"line\">    <span class=\"comment\">/*多栏布局 设置栏宽度*/</span></span><br><span class=\"line\">    <span class=\"attribute\">-webkit-column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">-moz-column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">column-width</span>:<span class=\"number\">202px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"JS方法来解决瀑布流布局\"><a href=\"#JS方法来解决瀑布流布局\" class=\"headerlink\" title=\"JS方法来解决瀑布流布局\"></a>JS方法来解决瀑布流布局</h2><p>首先先把html写出来：<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>瀑布流布局<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img4.imgtn.bdimg.com/it/u=3673652172,785167112&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img1.imgtn.bdimg.com/it/u=2752884811,3342547378&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img5.imgtn.bdimg.com/it/u=2573504723,2456120500&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img0.imgtn.bdimg.com/it/u=3214770734,3861052448&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img4.imgtn.bdimg.com/it/u=3407532446,2830180038&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img0.imgtn.bdimg.com/it/u=30302420,912099376&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"wrap\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"img\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://img5.imgtn.bdimg.com/it/u=2347360460,2805552283&amp;fm=27&amp;gp=0.jpg\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>在html里写了很多的图片（这里没有写出来，也可以从后台拉取数据）<br>然后对图片做一些样式的调整：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"selector-tag\">style</span>&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-id\">#main</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.wrap</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">15px</span> <span class=\"number\">0px</span> <span class=\"number\">0px</span> <span class=\"number\">15px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.img</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</span><br><span class=\"line\">      <span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"number\">#ccc</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-class\">.img</span> <span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">width</span>: <span class=\"number\">240px</span>;</span><br><span class=\"line\">      <span class=\"attribute\">height</span>: auto;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<p>对图片做一些操作，宽度确定，高度auto;<br>然后开始用js对这些图片做一些处理<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      waterFull(<span class=\"string\">'main'</span>, <span class=\"string\">'wrap'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">waterFull</span>(<span class=\"params\">parent, children</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> oParent = <span class=\"built_in\">document</span>.getElementById(parent);</span><br><span class=\"line\">      <span class=\"keyword\">var</span> oWraps = getByClass(oParent, children);</span><br><span class=\"line\">      <span class=\"comment\">//计算整个页面显示的列数</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> oWrapWeight = oWraps[<span class=\"number\">0</span>].offsetWidth;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> cols = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">document</span>.documentElement.clientWidth / oWrapWeight);</span><br><span class=\"line\">      <span class=\"comment\">//设置main的宽度，并且居中</span></span><br><span class=\"line\">      oParent.style.cssText = <span class=\"string\">'width:'</span> + oWrapWeight * cols + <span class=\"string\">'px; margin: 0 auto'</span>;</span><br><span class=\"line\">      <span class=\"comment\">//找出高度最小的图片，将下一个图片放在下面</span></span><br><span class=\"line\">      <span class=\"comment\">//定义一个数组，存放每一列的高度，初始化存的是第一行的所有列的高度</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> arrHeight = [];</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oWraps.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; cols) &#123;</span><br><span class=\"line\">          arrHeight.push(oWraps[i].offsetHeight);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> minHeight = <span class=\"built_in\">Math</span>.min.apply(<span class=\"literal\">null</span>, arrHeight);</span><br><span class=\"line\">          <span class=\"keyword\">var</span> minIndex = getMinhIndex(arrHeight, minHeight);</span><br><span class=\"line\">          oWraps[i].style.position = <span class=\"string\">'absolute'</span>;</span><br><span class=\"line\">          oWraps[i].style.top = minHeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">          oWraps[i].style.left = minIndex * oWrapWeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">          arrHeight[minIndex] += oWraps[i].offsetHeight;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getByClass</span>(<span class=\"params\">parent, className</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> boxArr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();<span class=\"comment\">//用来获取所有class为box的元素</span></span><br><span class=\"line\">      oElement = parent.getElementsByTagName(<span class=\"string\">'*'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oElement.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (oElement[i].className == className) &#123;</span><br><span class=\"line\">          boxArr.push(oElement[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> boxArr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//获取当前最小值得下标</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMinhIndex</span>(<span class=\"params\">array, min</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> array) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (array[i] == min)</span><br><span class=\"line\">          <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p>搞定～</p>\n"},{"title":"选择排序","date":"2018-05-19T06:27:21.000Z","_content":"选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理是每一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，直到全部待排序的数据元素排完。 选择排序是不稳定的排序方法。\n\n简单选择排序的基本思想：\n第1趟，在待排序记录r[1]~r[n]中选出最小的记录，将它与r[1]交换；\n第2趟，在待排序记录r[2]~r[n]中选出最小的记录，将它与r[2]交换；\n以此类推，\n第i趟在待排序记录r[i]~r[n]中选出最小的记录，将它与r[i]交换，使有序序列不断增长直到全部排序完毕。\n\n最佳情况：T(n) = O(n^2)\n最差情况：T(n) = O(n^2)\n平均情况：T(n) = O(n^2)\n\n```javascript\nconst selectSort = (arr) => {\n  let len = arr.length, min;\n  for (let i = 0; i < len - 1; i++) {\n    min = i;\n    for (let j = i + 1; j < len; j++){\n      arr[j] < arr[min] && (min = j);\n    }\n    min != i && swap(i,min,arr);\n  }\n  return arr\n}\n```","source":"_posts/选择排序.md","raw":"---\ntitle: 选择排序\ndate: 2018-05-19 14:27:21\ntags: [Javascript, 算法]\ncategories: 算法学习\n---\n选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理是每一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，直到全部待排序的数据元素排完。 选择排序是不稳定的排序方法。\n\n简单选择排序的基本思想：\n第1趟，在待排序记录r[1]~r[n]中选出最小的记录，将它与r[1]交换；\n第2趟，在待排序记录r[2]~r[n]中选出最小的记录，将它与r[2]交换；\n以此类推，\n第i趟在待排序记录r[i]~r[n]中选出最小的记录，将它与r[i]交换，使有序序列不断增长直到全部排序完毕。\n\n最佳情况：T(n) = O(n^2)\n最差情况：T(n) = O(n^2)\n平均情况：T(n) = O(n^2)\n\n```javascript\nconst selectSort = (arr) => {\n  let len = arr.length, min;\n  for (let i = 0; i < len - 1; i++) {\n    min = i;\n    for (let j = i + 1; j < len; j++){\n      arr[j] < arr[min] && (min = j);\n    }\n    min != i && swap(i,min,arr);\n  }\n  return arr\n}\n```","slug":"选择排序","published":1,"updated":"2018-05-19T06:39:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygm004rd6spw21sidyx","content":"<p>选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理是每一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，直到全部待排序的数据元素排完。 选择排序是不稳定的排序方法。</p>\n<p>简单选择排序的基本思想：<br>第1趟，在待排序记录r[1]~r[n]中选出最小的记录，将它与r[1]交换；<br>第2趟，在待排序记录r[2]~r[n]中选出最小的记录，将它与r[2]交换；<br>以此类推，<br>第i趟在待排序记录r[i]~r[n]中选出最小的记录，将它与r[i]交换，使有序序列不断增长直到全部排序完毕。</p>\n<p>最佳情况：T(n) = O(n^2)<br>最差情况：T(n) = O(n^2)<br>平均情况：T(n) = O(n^2)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> selectSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length, min;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">    min = i;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i + <span class=\"number\">1</span>; j &lt; len; j++)&#123;</span><br><span class=\"line\">      arr[j] &lt; arr[min] &amp;&amp; (min = j);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    min != i &amp;&amp; swap(i,min,arr);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>选择排序（Selection sort）是一种简单直观的排序算法。它的工作原理是每一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，直到全部待排序的数据元素排完。 选择排序是不稳定的排序方法。</p>\n<p>简单选择排序的基本思想：<br>第1趟，在待排序记录r[1]~r[n]中选出最小的记录，将它与r[1]交换；<br>第2趟，在待排序记录r[2]~r[n]中选出最小的记录，将它与r[2]交换；<br>以此类推，<br>第i趟在待排序记录r[i]~r[n]中选出最小的记录，将它与r[i]交换，使有序序列不断增长直到全部排序完毕。</p>\n<p>最佳情况：T(n) = O(n^2)<br>最差情况：T(n) = O(n^2)<br>平均情况：T(n) = O(n^2)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> selectSort = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> len = arr.length, min;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">    min = i;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = i + <span class=\"number\">1</span>; j &lt; len; j++)&#123;</span><br><span class=\"line\">      arr[j] &lt; arr[min] &amp;&amp; (min = j);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    min != i &amp;&amp; swap(i,min,arr);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arr</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"跨域问题探究","date":"2018-05-15T06:34:50.000Z","_content":"Q1: 什么是跨域？\nA1: 一个域上加载的脚本获取或操作另一个域上的文档属性，是指a页面想获取b页面资源，如果a、b页面的协议、域名、端口、子域名不同，或是a页面为ip地址，b页面为域名地址，所进行的访问行动都是跨域的。而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。\n\nQ2: 怎么算跨域？\nA2: \n\n\n| Uri | 说明 | 是否跨域 \n| ----------- |:-----------:| :--:\n| http://www.cnblogs.com/a.js <br>http://www.a.com/b.js |\t不同域名 |\t是\n| http://www.a.com/lab/a.js <br>http://www.a.com/script/b.js | 同域名下不同文件 |\t否\n| http://www.a.com:8000/a.js  <br>http://www.a.com/b.js |\t同域名下不同端口 |\t是\n| http://www.a.com/a.js s <br>https://www.a.com/b.js | 同域名 不同协议 |\t是\n| http://www.a.com/a.js  <br>http://70.32.92.74/b.jss |\t域名和域名对应ip|\t是\n| http://www.a.com/a.js  <br>http://script.a.com/b.js| 主域名相同 子域名不同|\t是（cookie不可访问）\n| http://www.a.com/a.js <br>http://a.com/b.js | 同一域名，不同二级域名（同上）|\t是\n\nQ3: 什么是浏览器的同源策略？\nA3: 计算机的本地与Web是不同的层面，Web世界（通常称为Internet域）运行在浏览器上，而被限制了直接进行本地数据（通常称为本地域）的读写。同源策略是众多安全策略的一个，是Web层面上的策略，同源策略规定：不同域的客户端脚本在没明确授权的情况下，不能读写对方的资源。\n\nQ4: 怎么解决跨域？\nA4: 有那么几种方法可以来解决跨域：\n1、Jsonp 需要目标服务器配合一个callback函数，但是注意JSONP只支持GET请求，不支持POST请求。\n\n```html\n<script type=\"text/javascript\" src=\"jquery.js\"></script>  \n<script type=\"text/javascript\">  \n  $.ajax({  \n    url: api.testURI,  \n    dataType:'jsonp',  \n    data:'',  \n    jsonp:'callback',  \n    success:function(result) {  \n      for(var i in result) {  \n        alert(i+\":\"+result[i]);//循环输出a:1,b:2,etc.  \n      }  \n    },  \n    timeout:3000  \n  });  \n</script>\n\n```\n2、通过修改document.domain来跨子域\n将子域和主域的document.domain设为同一个主域.前提条件：这两个域名必须属于同一个基础域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。主域相同的使用document.domain\n\n3、使用window.name来进行跨域\n\n```javascript\nwindow.name = data; \n//接着，子窗口跳回一个与主窗口同域的网址。 \nlocation = 'http://parent.url.com/xxx.html'; \n//然后，主窗口就可以读取子窗口的window.name了 \nvar data = document.getElementById('iframe').contentWindow.name; \n```\n\n4、通过CORS解决AJAX跨域\n\n```javascript\nfunction test() {\n  $.ajax({\n    url: api.testURI,\n    type: \"get\",\n    async: false,\n    data:{\n      \"id\":1 \n    },\n    dataType:\"json\",\n    withCredentials:true,\n    success: function(data){\n      alert(data);\n      alert(data.code);\n    },\n    error: function(){\n      alert('fail');\n    }\n  })\n}\n```\n\n5.服务器设置Access-Control-Allow-Origin实现跨域\n\n```javascript\napp.all(\"*\", function(req, res, next) {\n  const host = req.headers.origin;\n  res.header('Access-Control-Allow-Origin', host)\n  //res.header('Access-Control-Allow-Origin', *)\n  next();\n});\n```","source":"_posts/跨域问题探究.md","raw":"---\ntitle: 跨域问题探究\ndate: 2018-05-15 14:34:50\ntags: \ncategories: 学习笔记\n---\nQ1: 什么是跨域？\nA1: 一个域上加载的脚本获取或操作另一个域上的文档属性，是指a页面想获取b页面资源，如果a、b页面的协议、域名、端口、子域名不同，或是a页面为ip地址，b页面为域名地址，所进行的访问行动都是跨域的。而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。\n\nQ2: 怎么算跨域？\nA2: \n\n\n| Uri | 说明 | 是否跨域 \n| ----------- |:-----------:| :--:\n| http://www.cnblogs.com/a.js <br>http://www.a.com/b.js |\t不同域名 |\t是\n| http://www.a.com/lab/a.js <br>http://www.a.com/script/b.js | 同域名下不同文件 |\t否\n| http://www.a.com:8000/a.js  <br>http://www.a.com/b.js |\t同域名下不同端口 |\t是\n| http://www.a.com/a.js s <br>https://www.a.com/b.js | 同域名 不同协议 |\t是\n| http://www.a.com/a.js  <br>http://70.32.92.74/b.jss |\t域名和域名对应ip|\t是\n| http://www.a.com/a.js  <br>http://script.a.com/b.js| 主域名相同 子域名不同|\t是（cookie不可访问）\n| http://www.a.com/a.js <br>http://a.com/b.js | 同一域名，不同二级域名（同上）|\t是\n\nQ3: 什么是浏览器的同源策略？\nA3: 计算机的本地与Web是不同的层面，Web世界（通常称为Internet域）运行在浏览器上，而被限制了直接进行本地数据（通常称为本地域）的读写。同源策略是众多安全策略的一个，是Web层面上的策略，同源策略规定：不同域的客户端脚本在没明确授权的情况下，不能读写对方的资源。\n\nQ4: 怎么解决跨域？\nA4: 有那么几种方法可以来解决跨域：\n1、Jsonp 需要目标服务器配合一个callback函数，但是注意JSONP只支持GET请求，不支持POST请求。\n\n```html\n<script type=\"text/javascript\" src=\"jquery.js\"></script>  \n<script type=\"text/javascript\">  \n  $.ajax({  \n    url: api.testURI,  \n    dataType:'jsonp',  \n    data:'',  \n    jsonp:'callback',  \n    success:function(result) {  \n      for(var i in result) {  \n        alert(i+\":\"+result[i]);//循环输出a:1,b:2,etc.  \n      }  \n    },  \n    timeout:3000  \n  });  \n</script>\n\n```\n2、通过修改document.domain来跨子域\n将子域和主域的document.domain设为同一个主域.前提条件：这两个域名必须属于同一个基础域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。主域相同的使用document.domain\n\n3、使用window.name来进行跨域\n\n```javascript\nwindow.name = data; \n//接着，子窗口跳回一个与主窗口同域的网址。 \nlocation = 'http://parent.url.com/xxx.html'; \n//然后，主窗口就可以读取子窗口的window.name了 \nvar data = document.getElementById('iframe').contentWindow.name; \n```\n\n4、通过CORS解决AJAX跨域\n\n```javascript\nfunction test() {\n  $.ajax({\n    url: api.testURI,\n    type: \"get\",\n    async: false,\n    data:{\n      \"id\":1 \n    },\n    dataType:\"json\",\n    withCredentials:true,\n    success: function(data){\n      alert(data);\n      alert(data.code);\n    },\n    error: function(){\n      alert('fail');\n    }\n  })\n}\n```\n\n5.服务器设置Access-Control-Allow-Origin实现跨域\n\n```javascript\napp.all(\"*\", function(req, res, next) {\n  const host = req.headers.origin;\n  res.header('Access-Control-Allow-Origin', host)\n  //res.header('Access-Control-Allow-Origin', *)\n  next();\n});\n```","slug":"跨域问题探究","published":1,"updated":"2018-05-15T07:10:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygo004ud6sphflnelov","content":"<p>Q1: 什么是跨域？<br>A1: 一个域上加载的脚本获取或操作另一个域上的文档属性，是指a页面想获取b页面资源，如果a、b页面的协议、域名、端口、子域名不同，或是a页面为ip地址，b页面为域名地址，所进行的访问行动都是跨域的。而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。</p>\n<p>Q2: 怎么算跨域？<br>A2: </p>\n<table>\n<thead>\n<tr>\n<th>Uri</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">是否跨域 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"http://www.cnblogs.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/a.js</a> <br><a href=\"http://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">不同域名</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/lab/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/lab/a.js</a> <br><a href=\"http://www.a.com/script/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/script/b.js</a></td>\n<td style=\"text-align:center\">同域名下不同文件</td>\n<td style=\"text-align:center\">否</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com:8000/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com:8000/a.js</a>  <br><a href=\"http://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">同域名下不同端口</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a> s <br><a href=\"https://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">https://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">同域名 不同协议</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a>  <br><a href=\"http://70.32.92.74/b.jss\" target=\"_blank\" rel=\"noopener\">http://70.32.92.74/b.jss</a></td>\n<td style=\"text-align:center\">域名和域名对应ip</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a>  <br><a href=\"http://script.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://script.a.com/b.js</a></td>\n<td style=\"text-align:center\">主域名相同 子域名不同</td>\n<td style=\"text-align:center\">是（cookie不可访问）</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a> <br><a href=\"http://a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://a.com/b.js</a></td>\n<td style=\"text-align:center\">同一域名，不同二级域名（同上）</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n</tbody>\n</table>\n<p>Q3: 什么是浏览器的同源策略？<br>A3: 计算机的本地与Web是不同的层面，Web世界（通常称为Internet域）运行在浏览器上，而被限制了直接进行本地数据（通常称为本地域）的读写。同源策略是众多安全策略的一个，是Web层面上的策略，同源策略规定：不同域的客户端脚本在没明确授权的情况下，不能读写对方的资源。</p>\n<p>Q4: 怎么解决跨域？<br>A4: 有那么几种方法可以来解决跨域：<br>1、Jsonp 需要目标服务器配合一个callback函数，但是注意JSONP只支持GET请求，不支持POST请求。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jquery.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\">  </span></span><br><span class=\"line\"><span class=\"javascript\">  $.ajax(&#123;  </span></span><br><span class=\"line\"><span class=\"undefined\">    url: api.testURI,  </span></span><br><span class=\"line\"><span class=\"javascript\">    dataType:<span class=\"string\">'jsonp'</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    data:<span class=\"string\">''</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    jsonp:<span class=\"string\">'callback'</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    success:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result</span>) </span>&#123;  </span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> result) &#123;  </span></span><br><span class=\"line\"><span class=\"javascript\">        alert(i+<span class=\"string\">\":\"</span>+result[i]);<span class=\"comment\">//循环输出a:1,b:2,etc.  </span></span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;  </span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;,  </span></span><br><span class=\"line\"><span class=\"undefined\">    timeout:3000  </span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;);  </span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2、通过修改document.domain来跨子域<br>将子域和主域的document.domain设为同一个主域.前提条件：这两个域名必须属于同一个基础域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。主域相同的使用document.domain</p>\n<p>3、使用window.name来进行跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.name = data; </span><br><span class=\"line\"><span class=\"comment\">//接着，子窗口跳回一个与主窗口同域的网址。 </span></span><br><span class=\"line\">location = <span class=\"string\">'http://parent.url.com/xxx.html'</span>; </span><br><span class=\"line\"><span class=\"comment\">//然后，主窗口就可以读取子窗口的window.name了 </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'iframe'</span>).contentWindow.name;</span><br></pre></td></tr></table></figure>\n<p>4、通过CORS解决AJAX跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $.ajax(&#123;</span><br><span class=\"line\">    url: api.testURI,</span><br><span class=\"line\">    type: <span class=\"string\">\"get\"</span>,</span><br><span class=\"line\">    <span class=\"keyword\">async</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    data:&#123;</span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>:<span class=\"number\">1</span> </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dataType:<span class=\"string\">\"json\"</span>,</span><br><span class=\"line\">    withCredentials:<span class=\"literal\">true</span>,</span><br><span class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">      alert(data);</span><br><span class=\"line\">      alert(data.code);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    error: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      alert(<span class=\"string\">'fail'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>5.服务器设置Access-Control-Allow-Origin实现跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.all(<span class=\"string\">\"*\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> host = req.headers.origin;</span><br><span class=\"line\">  res.header(<span class=\"string\">'Access-Control-Allow-Origin'</span>, host)</span><br><span class=\"line\">  <span class=\"comment\">//res.header('Access-Control-Allow-Origin', *)</span></span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>Q1: 什么是跨域？<br>A1: 一个域上加载的脚本获取或操作另一个域上的文档属性，是指a页面想获取b页面资源，如果a、b页面的协议、域名、端口、子域名不同，或是a页面为ip地址，b页面为域名地址，所进行的访问行动都是跨域的。而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。</p>\n<p>Q2: 怎么算跨域？<br>A2: </p>\n<table>\n<thead>\n<tr>\n<th>Uri</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">是否跨域 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"http://www.cnblogs.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/a.js</a> <br><a href=\"http://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">不同域名</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/lab/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/lab/a.js</a> <br><a href=\"http://www.a.com/script/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/script/b.js</a></td>\n<td style=\"text-align:center\">同域名下不同文件</td>\n<td style=\"text-align:center\">否</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com:8000/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com:8000/a.js</a>  <br><a href=\"http://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">同域名下不同端口</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a> s <br><a href=\"https://www.a.com/b.js\" target=\"_blank\" rel=\"noopener\">https://www.a.com/b.js</a></td>\n<td style=\"text-align:center\">同域名 不同协议</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a>  <br><a href=\"http://70.32.92.74/b.jss\" target=\"_blank\" rel=\"noopener\">http://70.32.92.74/b.jss</a></td>\n<td style=\"text-align:center\">域名和域名对应ip</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a>  <br><a href=\"http://script.a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://script.a.com/b.js</a></td>\n<td style=\"text-align:center\">主域名相同 子域名不同</td>\n<td style=\"text-align:center\">是（cookie不可访问）</td>\n</tr>\n<tr>\n<td><a href=\"http://www.a.com/a.js\" target=\"_blank\" rel=\"noopener\">http://www.a.com/a.js</a> <br><a href=\"http://a.com/b.js\" target=\"_blank\" rel=\"noopener\">http://a.com/b.js</a></td>\n<td style=\"text-align:center\">同一域名，不同二级域名（同上）</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n</tbody>\n</table>\n<p>Q3: 什么是浏览器的同源策略？<br>A3: 计算机的本地与Web是不同的层面，Web世界（通常称为Internet域）运行在浏览器上，而被限制了直接进行本地数据（通常称为本地域）的读写。同源策略是众多安全策略的一个，是Web层面上的策略，同源策略规定：不同域的客户端脚本在没明确授权的情况下，不能读写对方的资源。</p>\n<p>Q4: 怎么解决跨域？<br>A4: 有那么几种方法可以来解决跨域：<br>1、Jsonp 需要目标服务器配合一个callback函数，但是注意JSONP只支持GET请求，不支持POST请求。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jquery.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\">  </span></span><br><span class=\"line\"><span class=\"javascript\">  $.ajax(&#123;  </span></span><br><span class=\"line\"><span class=\"undefined\">    url: api.testURI,  </span></span><br><span class=\"line\"><span class=\"javascript\">    dataType:<span class=\"string\">'jsonp'</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    data:<span class=\"string\">''</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    jsonp:<span class=\"string\">'callback'</span>,  </span></span><br><span class=\"line\"><span class=\"javascript\">    success:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result</span>) </span>&#123;  </span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> result) &#123;  </span></span><br><span class=\"line\"><span class=\"javascript\">        alert(i+<span class=\"string\">\":\"</span>+result[i]);<span class=\"comment\">//循环输出a:1,b:2,etc.  </span></span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;  </span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;,  </span></span><br><span class=\"line\"><span class=\"undefined\">    timeout:3000  </span></span><br><span class=\"line\"><span class=\"undefined\">  &#125;);  </span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2、通过修改document.domain来跨子域<br>将子域和主域的document.domain设为同一个主域.前提条件：这两个域名必须属于同一个基础域名!而且所用的协议，端口都要一致，否则无法利用document.domain进行跨域。主域相同的使用document.domain</p>\n<p>3、使用window.name来进行跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.name = data; </span><br><span class=\"line\"><span class=\"comment\">//接着，子窗口跳回一个与主窗口同域的网址。 </span></span><br><span class=\"line\">location = <span class=\"string\">'http://parent.url.com/xxx.html'</span>; </span><br><span class=\"line\"><span class=\"comment\">//然后，主窗口就可以读取子窗口的window.name了 </span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'iframe'</span>).contentWindow.name;</span><br></pre></td></tr></table></figure>\n<p>4、通过CORS解决AJAX跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  $.ajax(&#123;</span><br><span class=\"line\">    url: api.testURI,</span><br><span class=\"line\">    type: <span class=\"string\">\"get\"</span>,</span><br><span class=\"line\">    <span class=\"keyword\">async</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    data:&#123;</span><br><span class=\"line\">      <span class=\"string\">\"id\"</span>:<span class=\"number\">1</span> </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dataType:<span class=\"string\">\"json\"</span>,</span><br><span class=\"line\">    withCredentials:<span class=\"literal\">true</span>,</span><br><span class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">      alert(data);</span><br><span class=\"line\">      alert(data.code);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    error: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      alert(<span class=\"string\">'fail'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>5.服务器设置Access-Control-Allow-Origin实现跨域</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.all(<span class=\"string\">\"*\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> host = req.headers.origin;</span><br><span class=\"line\">  res.header(<span class=\"string\">'Access-Control-Allow-Origin'</span>, host)</span><br><span class=\"line\">  <span class=\"comment\">//res.header('Access-Control-Allow-Origin', *)</span></span><br><span class=\"line\">  next();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>"},{"title":"链表","date":"2018-05-28T08:20:40.000Z","_content":"## 定义\n\n链表是由一组节点组成的集合。每一个节点都使用一个对象的引用指向它的后续借点。指向另外一个节点的引用叫做链。\n链表元素则是靠相互之间的关系进行引用。在链表中就说这个元素是某个元素的后面一个元素。遍历链表就是跟着链表从链表的头元素（head）一直走到尾元素（但是不包含链表的头节点，头通常用来作为链表的接入点）。链表的尾元素指向一个null节点。\n![链表的结构](https://images2015.cnblogs.com/blog/72678/201609/72678-20160917225805820-1415213828.png)\n\n## 分类\n单链表\n（见定义）\n\n循环链表\n循环链表的运算与单链表的运算基本一致。所不同的有以下几点：\n1、在建立一个循环链表时，必须使其最后一个结点的指针指向表头结点，而不是象单链表那样置为NULL。此种情况还使用于在最后一个结点后插入一个新的结点。\n2、在判断是否到表尾时，是判断该结点链域的值是否是表头结点，当链域值等于表头指针时，说明已到表尾。而非象单链表那样判断链域值是否为NULL。\n\n双向链表\n双向链表其实是单链表的改进。\n当我们对单链表进行操作时，有时你要对某个结点的直接前驱进行操作时，又必须从表头开始查找。这是由单链表结点的结构所限制的。因为单链表每个结点只有一个存储直接后继结点地址的链域，那么能不能定义一个既有存储直接后继结点地址的链域，又有存储直接前驱结点地址的链域的这样一个双链域结点结构呢？这就是双向链表。\n在双向链表中，结点除含有数据域外，还有两个链域，一个存储直接后继结点地址，一般称之为右链域；一个存储直接前驱结点地址，一般称之为左链域。\n\n\n## 链表的操作\n\n链表的操作通常需要操作两个节点，例如，向链表中插入一个节点，需要修改它前面的节点，使其指向新加入的节点，而新加入的节点则指向前面指向的节点\n从链表中删除一个节点也很简单，将待删除的元素的前驱节点指向待删除的后续节点，同时将待删除元素指向null来释放。\n\n## 代码实现\n\n```javascript\n//Definition for singly-linked list.\nfunction ListNode(val) {\n  this.val = val;\n  this.next = null;\n}\n```\n查找：\n```javascript\nconst findListNode = (listNode, target) => {\n  while(listNode) {\n    if (listNode.val === target) {\n      return true;\n    };\n    listNode = listNode.next ? listNode.next : null\n  }\n  \n  return \"not hava this target\";\n}\n```\n插入\n```javascript\n//在第target个元素后添加一个节点\nconst insertListNode = (listNode1, node, target) => {\n  const count = 0\n  while(listNode) {\n    if (count === target) {\n      node.next = listNode.next;\n      listNode.next = node\n      return 0;\n    };\n    listNode = listNode.next ? listNode.next : null\n    count++;\n  }\n}\n```\n","source":"_posts/链表.md","raw":"---\ntitle: 链表\ndate: 2018-05-28 16:20:40\ntags: [数据结构, 算法]\ncategories: 算法学习\n---\n## 定义\n\n链表是由一组节点组成的集合。每一个节点都使用一个对象的引用指向它的后续借点。指向另外一个节点的引用叫做链。\n链表元素则是靠相互之间的关系进行引用。在链表中就说这个元素是某个元素的后面一个元素。遍历链表就是跟着链表从链表的头元素（head）一直走到尾元素（但是不包含链表的头节点，头通常用来作为链表的接入点）。链表的尾元素指向一个null节点。\n![链表的结构](https://images2015.cnblogs.com/blog/72678/201609/72678-20160917225805820-1415213828.png)\n\n## 分类\n单链表\n（见定义）\n\n循环链表\n循环链表的运算与单链表的运算基本一致。所不同的有以下几点：\n1、在建立一个循环链表时，必须使其最后一个结点的指针指向表头结点，而不是象单链表那样置为NULL。此种情况还使用于在最后一个结点后插入一个新的结点。\n2、在判断是否到表尾时，是判断该结点链域的值是否是表头结点，当链域值等于表头指针时，说明已到表尾。而非象单链表那样判断链域值是否为NULL。\n\n双向链表\n双向链表其实是单链表的改进。\n当我们对单链表进行操作时，有时你要对某个结点的直接前驱进行操作时，又必须从表头开始查找。这是由单链表结点的结构所限制的。因为单链表每个结点只有一个存储直接后继结点地址的链域，那么能不能定义一个既有存储直接后继结点地址的链域，又有存储直接前驱结点地址的链域的这样一个双链域结点结构呢？这就是双向链表。\n在双向链表中，结点除含有数据域外，还有两个链域，一个存储直接后继结点地址，一般称之为右链域；一个存储直接前驱结点地址，一般称之为左链域。\n\n\n## 链表的操作\n\n链表的操作通常需要操作两个节点，例如，向链表中插入一个节点，需要修改它前面的节点，使其指向新加入的节点，而新加入的节点则指向前面指向的节点\n从链表中删除一个节点也很简单，将待删除的元素的前驱节点指向待删除的后续节点，同时将待删除元素指向null来释放。\n\n## 代码实现\n\n```javascript\n//Definition for singly-linked list.\nfunction ListNode(val) {\n  this.val = val;\n  this.next = null;\n}\n```\n查找：\n```javascript\nconst findListNode = (listNode, target) => {\n  while(listNode) {\n    if (listNode.val === target) {\n      return true;\n    };\n    listNode = listNode.next ? listNode.next : null\n  }\n  \n  return \"not hava this target\";\n}\n```\n插入\n```javascript\n//在第target个元素后添加一个节点\nconst insertListNode = (listNode1, node, target) => {\n  const count = 0\n  while(listNode) {\n    if (count === target) {\n      node.next = listNode.next;\n      listNode.next = node\n      return 0;\n    };\n    listNode = listNode.next ? listNode.next : null\n    count++;\n  }\n}\n```\n","slug":"链表","published":1,"updated":"2018-05-28T08:43:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjil46ygq004xd6sp2s415cwz","content":"<h2 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h2><p>链表是由一组节点组成的集合。每一个节点都使用一个对象的引用指向它的后续借点。指向另外一个节点的引用叫做链。<br>链表元素则是靠相互之间的关系进行引用。在链表中就说这个元素是某个元素的后面一个元素。遍历链表就是跟着链表从链表的头元素（head）一直走到尾元素（但是不包含链表的头节点，头通常用来作为链表的接入点）。链表的尾元素指向一个null节点。<br><img src=\"https://images2015.cnblogs.com/blog/72678/201609/72678-20160917225805820-1415213828.png\" alt=\"链表的结构\"></p>\n<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>单链表<br>（见定义）</p>\n<p>循环链表<br>循环链表的运算与单链表的运算基本一致。所不同的有以下几点：<br>1、在建立一个循环链表时，必须使其最后一个结点的指针指向表头结点，而不是象单链表那样置为NULL。此种情况还使用于在最后一个结点后插入一个新的结点。<br>2、在判断是否到表尾时，是判断该结点链域的值是否是表头结点，当链域值等于表头指针时，说明已到表尾。而非象单链表那样判断链域值是否为NULL。</p>\n<p>双向链表<br>双向链表其实是单链表的改进。<br>当我们对单链表进行操作时，有时你要对某个结点的直接前驱进行操作时，又必须从表头开始查找。这是由单链表结点的结构所限制的。因为单链表每个结点只有一个存储直接后继结点地址的链域，那么能不能定义一个既有存储直接后继结点地址的链域，又有存储直接前驱结点地址的链域的这样一个双链域结点结构呢？这就是双向链表。<br>在双向链表中，结点除含有数据域外，还有两个链域，一个存储直接后继结点地址，一般称之为右链域；一个存储直接前驱结点地址，一般称之为左链域。</p>\n<h2 id=\"链表的操作\"><a href=\"#链表的操作\" class=\"headerlink\" title=\"链表的操作\"></a>链表的操作</h2><p>链表的操作通常需要操作两个节点，例如，向链表中插入一个节点，需要修改它前面的节点，使其指向新加入的节点，而新加入的节点则指向前面指向的节点<br>从链表中删除一个节点也很简单，将待删除的元素的前驱节点指向待删除的后续节点，同时将待删除元素指向null来释放。</p>\n<h2 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ListNode</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.val = val;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>查找：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> findListNode = <span class=\"function\">(<span class=\"params\">listNode, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(listNode) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (listNode.val === target) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    listNode = listNode.next ? listNode.next : <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"not hava this target\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>插入<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在第target个元素后添加一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> insertListNode = <span class=\"function\">(<span class=\"params\">listNode1, node, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(listNode) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (count === target) &#123;</span><br><span class=\"line\">      node.next = listNode.next;</span><br><span class=\"line\">      listNode.next = node</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    listNode = listNode.next ? listNode.next : <span class=\"literal\">null</span></span><br><span class=\"line\">    count++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h2><p>链表是由一组节点组成的集合。每一个节点都使用一个对象的引用指向它的后续借点。指向另外一个节点的引用叫做链。<br>链表元素则是靠相互之间的关系进行引用。在链表中就说这个元素是某个元素的后面一个元素。遍历链表就是跟着链表从链表的头元素（head）一直走到尾元素（但是不包含链表的头节点，头通常用来作为链表的接入点）。链表的尾元素指向一个null节点。<br><img src=\"https://images2015.cnblogs.com/blog/72678/201609/72678-20160917225805820-1415213828.png\" alt=\"链表的结构\"></p>\n<h2 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h2><p>单链表<br>（见定义）</p>\n<p>循环链表<br>循环链表的运算与单链表的运算基本一致。所不同的有以下几点：<br>1、在建立一个循环链表时，必须使其最后一个结点的指针指向表头结点，而不是象单链表那样置为NULL。此种情况还使用于在最后一个结点后插入一个新的结点。<br>2、在判断是否到表尾时，是判断该结点链域的值是否是表头结点，当链域值等于表头指针时，说明已到表尾。而非象单链表那样判断链域值是否为NULL。</p>\n<p>双向链表<br>双向链表其实是单链表的改进。<br>当我们对单链表进行操作时，有时你要对某个结点的直接前驱进行操作时，又必须从表头开始查找。这是由单链表结点的结构所限制的。因为单链表每个结点只有一个存储直接后继结点地址的链域，那么能不能定义一个既有存储直接后继结点地址的链域，又有存储直接前驱结点地址的链域的这样一个双链域结点结构呢？这就是双向链表。<br>在双向链表中，结点除含有数据域外，还有两个链域，一个存储直接后继结点地址，一般称之为右链域；一个存储直接前驱结点地址，一般称之为左链域。</p>\n<h2 id=\"链表的操作\"><a href=\"#链表的操作\" class=\"headerlink\" title=\"链表的操作\"></a>链表的操作</h2><p>链表的操作通常需要操作两个节点，例如，向链表中插入一个节点，需要修改它前面的节点，使其指向新加入的节点，而新加入的节点则指向前面指向的节点<br>从链表中删除一个节点也很简单，将待删除的元素的前驱节点指向待删除的后续节点，同时将待删除元素指向null来释放。</p>\n<h2 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Definition for singly-linked list.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ListNode</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.val = val;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>查找：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> findListNode = <span class=\"function\">(<span class=\"params\">listNode, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>(listNode) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (listNode.val === target) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    listNode = listNode.next ? listNode.next : <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"not hava this target\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>插入<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在第target个元素后添加一个节点</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> insertListNode = <span class=\"function\">(<span class=\"params\">listNode1, node, target</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(listNode) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (count === target) &#123;</span><br><span class=\"line\">      node.next = listNode.next;</span><br><span class=\"line\">      listNode.next = node</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    listNode = listNode.next ? listNode.next : <span class=\"literal\">null</span></span><br><span class=\"line\">    count++;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjil46y9g0000d6sp40u2qd3a","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46y9w000cd6spca0i7ajj"},{"post_id":"cjil46y9r0006d6sp2z4s7kru","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46y9y000hd6spzc4hms1h"},{"post_id":"cjil46y9u000ad6sp13lee1es","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46ya0000jd6spqcninnmg"},{"post_id":"cjil46y9k0001d6sp6fudzbeh","category_id":"cjil46y9s0007d6spups8ywzg","_id":"cjil46ya2000od6spw0x3kgbx"},{"post_id":"cjil46y9x000gd6sp84ubzc44","category_id":"cjil46y9x000ed6spom3qpapo","_id":"cjil46ya3000rd6spcdfndrzc"},{"post_id":"cjil46y9o0004d6spvlwqyfwn","category_id":"cjil46y9x000ed6spom3qpapo","_id":"cjil46ya5000wd6sp46ms0c1c"},{"post_id":"cjil46ya1000nd6spgnqk3me6","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46ya6000zd6spb09pn423"},{"post_id":"cjil46y9p0005d6spbotvc2hf","category_id":"cjil46ya0000ld6spo0bk78j4","_id":"cjil46ya70014d6spbf3nnmhn"},{"post_id":"cjil46ya4000vd6spwqeump3r","category_id":"cjil46y9s0007d6spups8ywzg","_id":"cjil46ya80017d6sp9jh6n06i"},{"post_id":"cjil46y9w000bd6sp0x1axmj8","category_id":"cjil46y9x000ed6spom3qpapo","_id":"cjil46yaa001bd6spd4lpjfc1"},{"post_id":"cjil46ya80016d6sp4w2o8cnt","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46yac001gd6spse9ehawr"},{"post_id":"cjil46y9y000id6spx5bonmee","category_id":"cjil46ya60012d6sp1okts3el","_id":"cjil46yad001kd6spd76twf1v"},{"post_id":"cjil46yaa001dd6spm74fwluo","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46yaf001od6spq3d1reoo"},{"post_id":"cjil46ya2000qd6spznkq6ht3","category_id":"cjil46yaa001ad6spr62tcyca","_id":"cjil46yah001sd6spjejyjvth"},{"post_id":"cjil46yab001fd6spii82g1zq","category_id":"cjil46yaa001ad6spr62tcyca","_id":"cjil46yai001wd6spebfa7w1m"},{"post_id":"cjil46yad001jd6spimxmzu7h","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46yak0020d6spcfobnbma"},{"post_id":"cjil46ya5000yd6spg9tb0k5x","category_id":"cjil46yac001hd6spdjq36v78","_id":"cjil46yal0022d6spgr957g6y"},{"post_id":"cjil46yae001nd6spe1wb05cr","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46yam0025d6sp2s5kzkz3"},{"post_id":"cjil46ya70013d6sp8ch91hff","category_id":"cjil46ya60012d6sp1okts3el","_id":"cjil46yam0026d6sp6651tkxl"},{"post_id":"cjil46ya90019d6spjgbpx2wb","category_id":"cjil46yaj001xd6spbf1shaj3","_id":"cjil46yam0028d6spkz8y9ous"},{"post_id":"cjil46yag001rd6sp3odnlpe9","category_id":"cjil46yam0024d6sp32kt6ibg","_id":"cjil46yan002ed6spj3jwzwbe"},{"post_id":"cjil46yah001vd6sphtppe7tl","category_id":"cjil46yam0024d6sp32kt6ibg","_id":"cjil46yao002id6sp2fswfpqv"},{"post_id":"cjil46yaj001zd6spy185sbev","category_id":"cjil46yam0024d6sp32kt6ibg","_id":"cjil46yap002md6spv7q2rer0"},{"post_id":"cjil46yak0021d6spn8lqeogm","category_id":"cjil46yam0024d6sp32kt6ibg","_id":"cjil46yaq002pd6spkxdbj3rq"},{"post_id":"cjil46yfy003ed6spq1pogjg0","category_id":"cjil46yac001hd6spdjq36v78","_id":"cjil46yg6003nd6sp63mj2cka"},{"post_id":"cjil46yg0003gd6spf3zrdcka","category_id":"cjil46yam0024d6sp32kt6ibg","_id":"cjil46yg7003rd6sp2z0iads5"},{"post_id":"cjil46yg3003jd6sp1ysrh9sg","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46yg9003vd6spx9a6jkka"},{"post_id":"cjil46yg6003qd6spxxzcuwds","category_id":"cjil46yac001hd6spdjq36v78","_id":"cjil46ygb0041d6sph5z79dsg"},{"post_id":"cjil46yg8003ud6sp24yr61ps","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46ygc0044d6spvk4erx84"},{"post_id":"cjil46yg9003xd6spi2dljrnx","category_id":"cjil46y9x000ed6spom3qpapo","_id":"cjil46yge0047d6spu8exor79"},{"post_id":"cjil46yg5003md6sps66uktne","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygf004ad6sps2dsqkfl"},{"post_id":"cjil46ygb0040d6spt05kch5q","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygh004dd6sph4ns2pqa"},{"post_id":"cjil46ygc0043d6spl9uiicei","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygi004gd6sp5qhzx5we"},{"post_id":"cjil46ygd0046d6sp7qa07c64","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygj004jd6spkuf6flg4"},{"post_id":"cjil46ygf0049d6sp5wzidwta","category_id":"cjil46yac001hd6spdjq36v78","_id":"cjil46ygk004md6spy01f3uha"},{"post_id":"cjil46ygg004cd6spa2n69yxj","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygl004pd6spnu93rx62"},{"post_id":"cjil46ygh004fd6spgpfgwwd1","category_id":"cjil46y9s0007d6spups8ywzg","_id":"cjil46ygn004sd6spden292y9"},{"post_id":"cjil46ygi004id6sp012g1tm7","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46ygo004vd6spfp7rulp2"},{"post_id":"cjil46ygk004ld6spfxbvv3wg","category_id":"cjil46yac001hd6spdjq36v78","_id":"cjil46ygq004yd6sp51cai7pn"},{"post_id":"cjil46ygl004od6spwbd8sezu","category_id":"cjil46ya60012d6sp1okts3el","_id":"cjil46ygr0050d6spbxfyowt2"},{"post_id":"cjil46ygm004rd6spw21sidyx","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygt0053d6spdikf40le"},{"post_id":"cjil46ygo004ud6sphflnelov","category_id":"cjil46y9m0002d6spybzcvlbq","_id":"cjil46ygt0055d6spnpq8apx6"},{"post_id":"cjil46ygq004xd6sp2s415cwz","category_id":"cjil46yg8003sd6spf52qwq1s","_id":"cjil46ygt0057d6sp7xe0741k"}],"PostTag":[{"post_id":"cjil46y9g0000d6sp40u2qd3a","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46y9u0009d6spcji1uxr4"},{"post_id":"cjil46y9k0001d6sp6fudzbeh","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46y9x000fd6sps6pttje4"},{"post_id":"cjil46y9x000gd6sp84ubzc44","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ya1000md6spvl1eu351"},{"post_id":"cjil46y9o0004d6spvlwqyfwn","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ya2000pd6sp4695thi2"},{"post_id":"cjil46y9y000id6spx5bonmee","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ya4000td6spm978keaq"},{"post_id":"cjil46y9r0006d6sp2z4s7kru","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ya5000xd6spxetbrd0e"},{"post_id":"cjil46ya2000qd6spznkq6ht3","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46ya60011d6sptmu3fl67"},{"post_id":"cjil46y9u000ad6sp13lee1es","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ya80015d6spiptm2j4q"},{"post_id":"cjil46y9w000bd6sp0x1axmj8","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yaa001cd6spx1gxj4y3"},{"post_id":"cjil46ya4000vd6spwqeump3r","tag_id":"cjil46ya90018d6sp64et287x","_id":"cjil46yac001id6spdk92t47f"},{"post_id":"cjil46yab001fd6spii82g1zq","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46yae001ld6spdgg5p9sq"},{"post_id":"cjil46ya5000yd6spg9tb0k5x","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yag001qd6spzjf7v5x1"},{"post_id":"cjil46ya5000yd6spg9tb0k5x","tag_id":"cjil46yab001ed6spbv5vkclq","_id":"cjil46yah001td6spywzjehwj"},{"post_id":"cjil46ya70013d6sp8ch91hff","tag_id":"cjil46yab001ed6spbv5vkclq","_id":"cjil46yaj001yd6sp70qh39l6"},{"post_id":"cjil46ya80016d6sp4w2o8cnt","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yan002ad6spije4im0l"},{"post_id":"cjil46ya80016d6sp4w2o8cnt","tag_id":"cjil46yah001ud6sp13o5fig9","_id":"cjil46yan002bd6sp1k1jbssb"},{"post_id":"cjil46ya80016d6sp4w2o8cnt","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yao002fd6spirntrkcq"},{"post_id":"cjil46ya90019d6spjgbpx2wb","tag_id":"cjil46yam0027d6spr32c5d3c","_id":"cjil46yap002jd6sp71wh4e2i"},{"post_id":"cjil46ya90019d6spjgbpx2wb","tag_id":"cjil46yan002cd6sptuvi51rl","_id":"cjil46yap002kd6spiw2vp79g"},{"post_id":"cjil46yaa001dd6spm74fwluo","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yap002nd6sp6nmaxzgq"},{"post_id":"cjil46yaa001dd6spm74fwluo","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yap002od6sp7da5op5q"},{"post_id":"cjil46yad001jd6spimxmzu7h","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yaq002rd6spomqt3ybo"},{"post_id":"cjil46yae001nd6spe1wb05cr","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yar002td6spruvjar26"},{"post_id":"cjil46yae001nd6spe1wb05cr","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yar002ud6sp2l3rk49x"},{"post_id":"cjil46yag001rd6sp3odnlpe9","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yas002xd6spf2tzx8s7"},{"post_id":"cjil46yag001rd6sp3odnlpe9","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yas002yd6spqdnjxlsj"},{"post_id":"cjil46yag001rd6sp3odnlpe9","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yas0030d6spgox267rz"},{"post_id":"cjil46yah001vd6sphtppe7tl","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yat0032d6sphj00751n"},{"post_id":"cjil46yah001vd6sphtppe7tl","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yat0033d6spmyz4zw44"},{"post_id":"cjil46yah001vd6sphtppe7tl","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yau0035d6spoqwyfv2g"},{"post_id":"cjil46yaj001zd6spy185sbev","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yau0037d6spfm1xilli"},{"post_id":"cjil46yaj001zd6spy185sbev","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yau0038d6sphbm9gkcp"},{"post_id":"cjil46yaj001zd6spy185sbev","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yav003ad6spob28dkgh"},{"post_id":"cjil46yak0021d6spn8lqeogm","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yav003bd6sp38dckik3"},{"post_id":"cjil46yak0021d6spn8lqeogm","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yav003cd6spmw1eg398"},{"post_id":"cjil46yak0021d6spn8lqeogm","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yav003dd6sp9tuxorja"},{"post_id":"cjil46yfy003ed6spq1pogjg0","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yg3003id6spm53183yz"},{"post_id":"cjil46yg0003gd6spf3zrdcka","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yg5003ld6sp7fxxlg69"},{"post_id":"cjil46yg0003gd6spf3zrdcka","tag_id":"cjil46yal0023d6spkhp9nkpx","_id":"cjil46yg6003pd6spjvs63hnz"},{"post_id":"cjil46yg0003gd6spf3zrdcka","tag_id":"cjil46yap002ld6spt2pvhu0p","_id":"cjil46yg8003td6spctymwf2x"},{"post_id":"cjil46yg6003qd6spxxzcuwds","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yg9003wd6spnsdterpr"},{"post_id":"cjil46yg8003ud6sp24yr61ps","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46yga003zd6sp4ik1oqp7"},{"post_id":"cjil46yg3003jd6sp1ysrh9sg","tag_id":"cjil46yg6003od6sptf59uhxc","_id":"cjil46ygc0042d6sp3rfb7bse"},{"post_id":"cjil46yg9003xd6spi2dljrnx","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygd0045d6spql36mmp9"},{"post_id":"cjil46ygb0040d6spt05kch5q","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygf0048d6spfwweiz7w"},{"post_id":"cjil46ygb0040d6spt05kch5q","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygg004bd6spz4kkbv1j"},{"post_id":"cjil46yg5003md6sps66uktne","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygh004ed6sp72ht1g5a"},{"post_id":"cjil46yg5003md6sps66uktne","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygi004hd6spudfmuoim"},{"post_id":"cjil46ygc0043d6spl9uiicei","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygk004kd6sph8i0drdv"},{"post_id":"cjil46ygc0043d6spl9uiicei","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygl004nd6sp7xb3ajez"},{"post_id":"cjil46ygd0046d6sp7qa07c64","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygm004qd6spkabsuvas"},{"post_id":"cjil46ygd0046d6sp7qa07c64","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygn004td6spkuhrjdpq"},{"post_id":"cjil46ygf0049d6sp5wzidwta","tag_id":"cjil46ya90018d6sp64et287x","_id":"cjil46ygq004wd6spsf6gkej2"},{"post_id":"cjil46ygf0049d6sp5wzidwta","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46ygr004zd6spcmz7jxz4"},{"post_id":"cjil46ygg004cd6spa2n69yxj","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygt0052d6sp4bmn2ut9"},{"post_id":"cjil46ygg004cd6spa2n69yxj","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygt0054d6sp0b1gi7nq"},{"post_id":"cjil46ygh004fd6spgpfgwwd1","tag_id":"cjil46ya90018d6sp64et287x","_id":"cjil46ygt0056d6spat1pafmr"},{"post_id":"cjil46ygh004fd6spgpfgwwd1","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46ygu0058d6spuayifcmv"},{"post_id":"cjil46ygh004fd6spgpfgwwd1","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygu0059d6sp554yao7y"},{"post_id":"cjil46ygi004id6sp012g1tm7","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygu005ad6sp4i1hql6w"},{"post_id":"cjil46ygk004ld6spfxbvv3wg","tag_id":"cjil46ya90018d6sp64et287x","_id":"cjil46ygu005bd6spwu2sge8a"},{"post_id":"cjil46ygk004ld6spfxbvv3wg","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46ygv005cd6sprqgfdn3x"},{"post_id":"cjil46ygl004od6spwbd8sezu","tag_id":"cjil46ya90018d6sp64et287x","_id":"cjil46ygv005dd6spujnjnm9w"},{"post_id":"cjil46ygl004od6spwbd8sezu","tag_id":"cjil46y9n0003d6sp4xzvhe6s","_id":"cjil46ygv005ed6spdmwdt7l3"},{"post_id":"cjil46ygl004od6spwbd8sezu","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygv005fd6spiekjc451"},{"post_id":"cjil46ygm004rd6spw21sidyx","tag_id":"cjil46y9w000dd6sp6xs5uoj5","_id":"cjil46ygv005gd6sps2efbes5"},{"post_id":"cjil46ygm004rd6spw21sidyx","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygw005hd6spxuccf6xu"},{"post_id":"cjil46ygq004xd6sp2s415cwz","tag_id":"cjil46ygt0051d6spw242efyu","_id":"cjil46ygw005id6spsuzru1of"},{"post_id":"cjil46ygq004xd6sp2s415cwz","tag_id":"cjil46yga003yd6spw5z9u29f","_id":"cjil46ygw005jd6spe9kmetqg"}],"Tag":[{"name":"CSS","_id":"cjil46y9n0003d6sp4xzvhe6s"},{"name":"Javascript","_id":"cjil46y9w000dd6sp6xs5uoj5"},{"name":"html","_id":"cjil46ya90018d6sp64et287x"},{"name":"Jquery","_id":"cjil46yab001ed6spbv5vkclq"},{"name":"immutable","_id":"cjil46yah001ud6sp13o5fig9"},{"name":"react","_id":"cjil46yal0023d6spkhp9nkpx"},{"name":"Koa","_id":"cjil46yam0027d6spr32c5d3c"},{"name":"Node","_id":"cjil46yan002cd6sptuvi51rl"},{"name":"redux","_id":"cjil46yap002ld6spt2pvhu0p"},{"name":"webpack","_id":"cjil46yg6003od6sptf59uhxc"},{"name":"算法","_id":"cjil46yga003yd6spw5z9u29f"},{"name":"数据结构","_id":"cjil46ygt0051d6spw242efyu"}]}}